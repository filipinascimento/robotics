{"version":3,"file":"main-DKQSczCy.js","sources":["../../node_modules/d3-ease/src/linear.js","../../node_modules/d3-ease/src/cubic.js","../../node_modules/d3-selection/src/namespaces.js","../../node_modules/d3-selection/src/namespace.js","../../node_modules/d3-selection/src/creator.js","../../node_modules/d3-selection/src/selector.js","../../node_modules/d3-selection/src/selection/select.js","../../node_modules/d3-selection/src/array.js","../../node_modules/d3-selection/src/selectorAll.js","../../node_modules/d3-selection/src/selection/selectAll.js","../../node_modules/d3-selection/src/matcher.js","../../node_modules/d3-selection/src/selection/selectChild.js","../../node_modules/d3-selection/src/selection/selectChildren.js","../../node_modules/d3-selection/src/selection/filter.js","../../node_modules/d3-selection/src/selection/sparse.js","../../node_modules/d3-selection/src/selection/enter.js","../../node_modules/d3-selection/src/constant.js","../../node_modules/d3-selection/src/selection/data.js","../../node_modules/d3-selection/src/selection/exit.js","../../node_modules/d3-selection/src/selection/join.js","../../node_modules/d3-selection/src/selection/merge.js","../../node_modules/d3-selection/src/selection/order.js","../../node_modules/d3-selection/src/selection/sort.js","../../node_modules/d3-selection/src/selection/call.js","../../node_modules/d3-selection/src/selection/nodes.js","../../node_modules/d3-selection/src/selection/node.js","../../node_modules/d3-selection/src/selection/size.js","../../node_modules/d3-selection/src/selection/empty.js","../../node_modules/d3-selection/src/selection/each.js","../../node_modules/d3-selection/src/selection/attr.js","../../node_modules/d3-selection/src/window.js","../../node_modules/d3-selection/src/selection/style.js","../../node_modules/d3-selection/src/selection/property.js","../../node_modules/d3-selection/src/selection/classed.js","../../node_modules/d3-selection/src/selection/text.js","../../node_modules/d3-selection/src/selection/html.js","../../node_modules/d3-selection/src/selection/raise.js","../../node_modules/d3-selection/src/selection/lower.js","../../node_modules/d3-selection/src/selection/append.js","../../node_modules/d3-selection/src/selection/insert.js","../../node_modules/d3-selection/src/selection/remove.js","../../node_modules/d3-selection/src/selection/clone.js","../../node_modules/d3-selection/src/selection/datum.js","../../node_modules/d3-selection/src/selection/on.js","../../node_modules/d3-selection/src/selection/dispatch.js","../../node_modules/d3-selection/src/selection/iterator.js","../../node_modules/d3-selection/src/selection/index.js","../../node_modules/d3-selection/src/select.js","../../node_modules/d3-selection/src/create.js","../../node_modules/d3-selection/src/sourceEvent.js","../../node_modules/d3-selection/src/pointer.js","../../node_modules/d3-dispatch/src/dispatch.js","../../node_modules/d3-drag/src/noevent.js","../../node_modules/d3-drag/src/nodrag.js","../../node_modules/d3-color/src/define.js","../../node_modules/d3-color/src/color.js","../../node_modules/d3-color/src/math.js","../../node_modules/d3-color/src/cubehelix.js","../../node_modules/d3-interpolate/src/basis.js","../../node_modules/d3-interpolate/src/constant.js","../../node_modules/d3-interpolate/src/color.js","../../node_modules/d3-interpolate/src/rgb.js","../../node_modules/d3-interpolate/src/numberArray.js","../../node_modules/d3-interpolate/src/array.js","../../node_modules/d3-interpolate/src/date.js","../../node_modules/d3-interpolate/src/number.js","../../node_modules/d3-interpolate/src/object.js","../../node_modules/d3-interpolate/src/string.js","../../node_modules/d3-interpolate/src/value.js","../../node_modules/d3-interpolate/src/round.js","../../node_modules/d3-interpolate/src/transform/decompose.js","../../node_modules/d3-interpolate/src/transform/parse.js","../../node_modules/d3-interpolate/src/transform/index.js","../../node_modules/d3-interpolate/src/zoom.js","../../node_modules/d3-interpolate/src/cubehelix.js","../../node_modules/d3-interpolate/src/piecewise.js","../../node_modules/d3-interpolate/src/quantize.js","../../node_modules/d3-timer/src/timer.js","../../node_modules/d3-timer/src/timeout.js","../../node_modules/d3-transition/src/transition/schedule.js","../../node_modules/d3-transition/src/interrupt.js","../../node_modules/d3-transition/src/selection/interrupt.js","../../node_modules/d3-transition/src/transition/tween.js","../../node_modules/d3-transition/src/transition/interpolate.js","../../node_modules/d3-transition/src/transition/attr.js","../../node_modules/d3-transition/src/transition/attrTween.js","../../node_modules/d3-transition/src/transition/delay.js","../../node_modules/d3-transition/src/transition/duration.js","../../node_modules/d3-transition/src/transition/ease.js","../../node_modules/d3-transition/src/transition/easeVarying.js","../../node_modules/d3-transition/src/transition/filter.js","../../node_modules/d3-transition/src/transition/merge.js","../../node_modules/d3-transition/src/transition/on.js","../../node_modules/d3-transition/src/transition/remove.js","../../node_modules/d3-transition/src/transition/select.js","../../node_modules/d3-transition/src/transition/selectAll.js","../../node_modules/d3-transition/src/transition/selection.js","../../node_modules/d3-transition/src/transition/style.js","../../node_modules/d3-transition/src/transition/styleTween.js","../../node_modules/d3-transition/src/transition/text.js","../../node_modules/d3-transition/src/transition/textTween.js","../../node_modules/d3-transition/src/transition/transition.js","../../node_modules/d3-transition/src/transition/end.js","../../node_modules/d3-transition/src/transition/index.js","../../node_modules/d3-transition/src/selection/transition.js","../../node_modules/d3-transition/src/selection/index.js","../../node_modules/d3-zoom/src/constant.js","../../node_modules/d3-zoom/src/event.js","../../node_modules/d3-zoom/src/transform.js","../../node_modules/d3-zoom/src/noevent.js","../../node_modules/d3-zoom/src/zoom.js","../../node_modules/gl-matrix/esm/common.js","../../node_modules/gl-matrix/esm/mat3.js","../../node_modules/gl-matrix/esm/mat4.js","../../node_modules/gl-matrix/esm/vec3.js","../../node_modules/gl-matrix/esm/vec4.js","../../src/utilities/webgl.js","../../node_modules/@colormap/core/dist/index.esm.js","../../node_modules/@colormap/presets/dist/index.esm.js","../../src/core/Network.js","../../src/core/Scheduler.js","../../node_modules/pica/dist/pica.js","../../node_modules/nanoevents/index.js","../../src/utilities/TrackedSettings.js","../../src/layouts/d3force3dLayoutWorker.js","../../src/shaders/edges.js","../../src/shaders/nodes.js","../../node_modules/sylvester-es6/target/LinkedList.js","../../node_modules/sylvester-es6/target/CircularLinkedList.js","../../node_modules/sylvester-es6/target/PRECISION.js","../../node_modules/sylvester-es6/target/Matrix.js","../../node_modules/sylvester-es6/target/Vector.js","../../node_modules/sylvester-es6/target/Plane.js","../../node_modules/sylvester-es6/target/Line.js","../../node_modules/sylvester-es6/target/LineSegment.js","../../node_modules/sylvester-es6/target/LinkedListNode.js","../../node_modules/sylvester-es6/target/Polygon.js","../../node_modules/sylvester-es6/target/Vertex.js","../../node_modules/sylvester-es6/target/Utils.js","../../node_modules/sylvester-es6/target/Sylvester.js","../../node_modules/d3-scale-chromatic/src/colors.js","../../node_modules/d3-scale-chromatic/src/categorical/category10.js","../../node_modules/d3-scale-chromatic/src/categorical/Accent.js","../../node_modules/d3-scale-chromatic/src/categorical/Dark2.js","../../node_modules/d3-scale-chromatic/src/categorical/observable10.js","../../node_modules/d3-scale-chromatic/src/categorical/Paired.js","../../node_modules/d3-scale-chromatic/src/categorical/Pastel1.js","../../node_modules/d3-scale-chromatic/src/categorical/Pastel2.js","../../node_modules/d3-scale-chromatic/src/categorical/Set1.js","../../node_modules/d3-scale-chromatic/src/categorical/Set2.js","../../node_modules/d3-scale-chromatic/src/categorical/Set3.js","../../node_modules/d3-scale-chromatic/src/categorical/Tableau10.js","../../node_modules/d3-scale-chromatic/src/ramp.js","../../node_modules/d3-scale-chromatic/src/diverging/BrBG.js","../../node_modules/d3-scale-chromatic/src/diverging/PRGn.js","../../node_modules/d3-scale-chromatic/src/diverging/PiYG.js","../../node_modules/d3-scale-chromatic/src/diverging/PuOr.js","../../node_modules/d3-scale-chromatic/src/diverging/RdBu.js","../../node_modules/d3-scale-chromatic/src/diverging/RdGy.js","../../node_modules/d3-scale-chromatic/src/diverging/RdYlBu.js","../../node_modules/d3-scale-chromatic/src/diverging/RdYlGn.js","../../node_modules/d3-scale-chromatic/src/diverging/Spectral.js","../../node_modules/d3-scale-chromatic/src/sequential-multi/BuGn.js","../../node_modules/d3-scale-chromatic/src/sequential-multi/BuPu.js","../../node_modules/d3-scale-chromatic/src/sequential-multi/GnBu.js","../../node_modules/d3-scale-chromatic/src/sequential-multi/OrRd.js","../../node_modules/d3-scale-chromatic/src/sequential-multi/PuBuGn.js","../../node_modules/d3-scale-chromatic/src/sequential-multi/PuBu.js","../../node_modules/d3-scale-chromatic/src/sequential-multi/PuRd.js","../../node_modules/d3-scale-chromatic/src/sequential-multi/RdPu.js","../../node_modules/d3-scale-chromatic/src/sequential-multi/YlGnBu.js","../../node_modules/d3-scale-chromatic/src/sequential-multi/YlGn.js","../../node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js","../../node_modules/d3-scale-chromatic/src/sequential-multi/YlOrRd.js","../../node_modules/d3-scale-chromatic/src/sequential-single/Blues.js","../../node_modules/d3-scale-chromatic/src/sequential-single/Greens.js","../../node_modules/d3-scale-chromatic/src/sequential-single/Greys.js","../../node_modules/d3-scale-chromatic/src/sequential-single/Purples.js","../../node_modules/d3-scale-chromatic/src/sequential-single/Reds.js","../../node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js","../../node_modules/d3-scale-chromatic/src/sequential-multi/cividis.js","../../node_modules/d3-scale-chromatic/src/sequential-multi/cubehelix.js","../../node_modules/d3-scale-chromatic/src/sequential-multi/rainbow.js","../../node_modules/d3-scale-chromatic/src/sequential-multi/sinebow.js","../../node_modules/d3-scale-chromatic/src/sequential-multi/turbo.js","../../node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js","../../node_modules/d3-array/src/ascending.js","../../node_modules/d3-array/src/descending.js","../../node_modules/d3-array/src/bisector.js","../../node_modules/d3-array/src/number.js","../../node_modules/d3-array/src/bisect.js","../../node_modules/d3-array/src/fsum.js","../../node_modules/internmap/src/index.js","../../node_modules/d3-array/src/sort.js","../../node_modules/d3-array/src/ticks.js","../../node_modules/d3-array/src/max.js","../../node_modules/d3-array/src/min.js","../../node_modules/d3-array/src/quickselect.js","../../node_modules/d3-array/src/quantile.js","../../node_modules/d3-array/src/merge.js","../../node_modules/d3-array/src/range.js","../../node_modules/d3-scale/src/init.js","../../node_modules/d3-scale/src/ordinal.js","../../node_modules/d3-scale/src/band.js","../../node_modules/d3-scale/src/constant.js","../../node_modules/d3-scale/src/number.js","../../node_modules/d3-scale/src/continuous.js","../../node_modules/d3-format/src/formatDecimal.js","../../node_modules/d3-format/src/exponent.js","../../node_modules/d3-format/src/formatGroup.js","../../node_modules/d3-format/src/formatNumerals.js","../../node_modules/d3-format/src/formatSpecifier.js","../../node_modules/d3-format/src/formatTrim.js","../../node_modules/d3-format/src/formatPrefixAuto.js","../../node_modules/d3-format/src/formatRounded.js","../../node_modules/d3-format/src/formatTypes.js","../../node_modules/d3-format/src/identity.js","../../node_modules/d3-format/src/locale.js","../../node_modules/d3-format/src/defaultLocale.js","../../node_modules/d3-format/src/precisionFixed.js","../../node_modules/d3-format/src/precisionPrefix.js","../../node_modules/d3-format/src/precisionRound.js","../../node_modules/d3-scale/src/tickFormat.js","../../node_modules/d3-scale/src/linear.js","../../node_modules/d3-scale/src/sequential.js","../../node_modules/d3-scale/src/diverging.js","../../src/shaders/density.js","../../src/utilities/DensityGL.js","../../node_modules/avl/src/utils.js","../../node_modules/avl/src/index.js","../../src/utilities/SortedMap.js","../../src/core/HeliosCore.js","../../src/utilities/parsers/xnet.js","../../src/utilities/parsers/gexf.js","../../src/utilities/parsers/gml.js","../../src/behaviors/BehaviorFilter.js","../../node_modules/detect-gpu/dist/detect-gpu.esm.js","../../node_modules/d3-geo/src/math.js","../../node_modules/d3-geo/src/noop.js","../../node_modules/d3-geo/src/stream.js","../../node_modules/d3-geo/src/cartesian.js","../../node_modules/d3-geo/src/compose.js","../../node_modules/d3-geo/src/rotation.js","../../node_modules/d3-geo/src/circle.js","../../node_modules/d3-geo/src/clip/buffer.js","../../node_modules/d3-geo/src/pointEqual.js","../../node_modules/d3-geo/src/clip/rejoin.js","../../node_modules/d3-geo/src/polygonContains.js","../../node_modules/d3-geo/src/clip/index.js","../../node_modules/d3-geo/src/clip/antimeridian.js","../../node_modules/d3-geo/src/clip/circle.js","../../node_modules/d3-geo/src/clip/line.js","../../node_modules/d3-geo/src/clip/rectangle.js","../../node_modules/d3-geo/src/identity.js","../../node_modules/d3-geo/src/path/area.js","../../node_modules/d3-geo/src/path/bounds.js","../../node_modules/d3-geo/src/path/centroid.js","../../node_modules/d3-geo/src/path/context.js","../../node_modules/d3-geo/src/path/measure.js","../../node_modules/d3-geo/src/path/string.js","../../node_modules/d3-geo/src/path/index.js","../../node_modules/d3-geo/src/transform.js","../../node_modules/d3-geo/src/projection/fit.js","../../node_modules/d3-geo/src/projection/resample.js","../../node_modules/d3-geo/src/projection/index.js","../../node_modules/d3-geo/src/projection/naturalEarth1.js","../../node_modules/d3-axis/src/identity.js","../../node_modules/d3-axis/src/axis.js","../../node_modules/d3-dsv/src/dsv.js","../../docs/example/library/extraColors.js","../../docs/example/library/auto-complete_cache-control.js","../../node_modules/json-query/lib/state.js","../../node_modules/json-query/lib/depth-split.js","../../node_modules/json-query/lib/tokenize.js","../../node_modules/json-query/index.js","../../docs/example/library/d3_legends.js","../../node_modules/tweakpane/dist/tweakpane.js","../../docs/example/library/HeliosUI.js","../../node_modules/pako/dist/pako.esm.mjs","../../node_modules/topojson-client/src/identity.js","../../node_modules/topojson-client/src/transform.js","../../node_modules/topojson-client/src/reverse.js","../../node_modules/topojson-client/src/feature.js","../../node_modules/nouislider/dist/nouislider.mjs","../../docs/example/maps_script.js"],"sourcesContent":["export const linear = t => +t;\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we don’t ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that don’t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isn’t worried about “live” collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// don’t; we’d rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import creator from \"./creator.js\";\nimport select from \"./select.js\";\n\nexport default function(name) {\n  return select(creator(name).call(document.documentElement));\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","// These are typically used in conjunction with noevent to ensure that we can\n// preventDefault on the event.\nexport const nonpassive = {passive: false};\nexport const nonpassivecapture = {capture: true, passive: false};\n\nexport function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {select} from \"d3-selection\";\nimport noevent, {nonpassivecapture} from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, nonpassivecapture);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, nonpassivecapture);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, nonpassivecapture);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export const radians = Math.PI / 180;\nexport const degrees = 180 / Math.PI;\n","import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color.js\";\nimport {degrees, radians} from \"./math.js\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * degrees - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * radians,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0 ≅ u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n","import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n","import {default as value} from \"./value.js\";\n\nexport default function piecewise(interpolate, values) {\n  if (values === undefined) values = interpolate, interpolate = value;\n  var i = 0, n = values.length - 1, v = values[0], I = new Array(n < 0 ? 0 : n);\n  while (i < n) I[i] = interpolate(v, v = values[++i]);\n  return function(t) {\n    var i = Math.max(0, Math.min(n - 1, Math.floor(t *= n)));\n    return I[i](t - i);\n  };\n}\n","export default function(interpolator, n) {\n  var samples = new Array(n);\n  for (var i = 0; i < n; ++i) samples[i] = interpolator(i / (n - 1));\n  return samples;\n}\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend we’ve set an alarm, if we haven’t already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and we’re done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","export default x => () => x;\n","export default function ZoomEvent(type, {\n  sourceEvent,\n  target,\n  transform,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    transform: {value: transform, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled, {passive: false})\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event won’t trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var currentTarget = event.currentTarget,\n        g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {ReadonlyMat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\n * Calculates the determinant of a mat3\n *\n * @param {ReadonlyMat3} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to translate\n * @param {ReadonlyVec2} v vector to translate by\n * @returns {mat3} out\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat3} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat3} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to copy\n * @returns {mat3} out\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat3\n *\n * @param {ReadonlyMat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","\n\n\n\n\n\nlet requestAnimationFrame = (function () {\n\treturn window.requestAnimationFrame ||\n\t\twindow.webkitRequestAnimationFrame ||\n\t\twindow.mozRequestAnimationFrame ||\n\t\twindow.oRequestAnimationFrame ||\n\t\twindow.msRequestAnimationFrame ||\n\t\tfunction ( /* function FrameRequestCallback */ callback, /* DOMElement Element */ element) {\n\t\t\treturn window.setTimeout(callback, 1000 / 60);\n\t\t};\n})();\n\nlet cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame;\n\n\nfunction createWebGLContext(canvas, opt_attribs) {\n\tlet names = [\"webgl\", \"experimental-webgl\", \"webkit-3d\", \"moz-webgl\"];\n\tlet context = null;\n\tfor (let ii = 0; ii < names.length; ++ii) {\n\t\ttry {\n\t\t\tcontext = canvas.getContext(names[ii], opt_attribs);\n\t\t} catch (e) { }\n\t\tif (context) {\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn context;\n}\n\n\n// GetShader function obtained from\n// https://developer.mozilla.org/en/WebGL/Adding_2D_content_to_a_WebGL_context\n// under public domain.\nasync function getShader(gl, ID) {\n\tlet shaderScript = document.getElementById(ID);\n\tif (!shaderScript) {\n\t\treturn null;\n\t}\n\n\tlet str = \"\";\n\tlet k = shaderScript.firstChild;\n\twhile (k) {\n\t\tif (k.nodeType == 3) {\n\t\t\tstr += k.textContent;\n\t\t}\n\t\tk = k.nextSibling;\n\t}\n\n\tif (shaderScript.src) {\n\t\tstr = await fetch(shaderScript.src).then(response => response.text());\n\t}\n\n\tlet shader;\n\tif (shaderScript.type == \"text/glsl-fragment\") {\n\t\tshader = gl.createShader(gl.FRAGMENT_SHADER);\n\t} else if (shaderScript.type == \"text/glsl-vertex\") {\n\t\tshader = gl.createShader(gl.VERTEX_SHADER);\n\t} else {\n\t\treturn null;\n\t}\n\t// console.log(str);\n\n\tgl.shaderSource(shader, str);\n\tgl.compileShader(shader);\n\n\tif (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n\t\tconsole.log(\"ERROR with script: \", ID);\n\t\tconsole.log(gl.getShaderInfoLog(shader));\n\t\treturn null;\n\t}\n\n\treturn shader;\n}\n\n//new URL('fancy-button.css', import.meta.url)\nasync function getShaderFromURL(gl, url, type) { //gl.FRAGMENT_SHADER or gl.VERTEX_SHADER\n\tlet str = await fetch(url).then(r => r.text());\n\n\tlet shader;\n\tshader = gl.createShader(type);\n\n\t// console.log(str);\n\n\tgl.shaderSource(shader, str);\n\tgl.compileShader(shader);\n\n\tif (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n\t\tconsole.log(\"ERROR with script: \", url);\n\t\tconsole.log(gl.getShaderInfoLog(shader));\n\t\treturn null;\n\t}\n\n\treturn shader;\n}\n\nfunction getShaderFromString(gl, str, type) { //gl.FRAGMENT_SHADER or gl.VERTEX_SHADER\n\tlet shader;\n\t// console.log(str);\n\tshader = gl.createShader(type);\n\n\t// console.log(str);\n\n\tgl.shaderSource(shader, str);\n\tgl.compileShader(shader);\n\n\tif (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n\t\tconsole.log(\"ERROR with script: \", str);\n\t\tconsole.log(gl.getShaderInfoLog(shader));\n\t\treturn null;\n\t}\n\n\treturn shader;\n}\n\n\nfunction ShaderProgram(vertexShader, fragmentShader, uniforms, attributes, glContext) {\n\tlet shaderProgram = glContext.createProgram();\n\tglContext.attachShader(shaderProgram, vertexShader);\n\tglContext.attachShader(shaderProgram, fragmentShader);\n\tglContext.linkProgram(shaderProgram);\n\n\n\tif (!glContext.getProgramParameter(shaderProgram, glContext.LINK_STATUS)) {\n\t\talert(\"Shader Compilation Error.\" + glContext.getProgramInfoLog(shaderProgram));\n\t\treturn;\n\t}\n\n\tthis.ID = shaderProgram;\n\n\tthis.uniforms = new Object();\n\tthis.attributes = new Object();\n\n\tif (uniforms) {\n\t\tfor (let i = 0; i < uniforms.length; i++) {\n\t\t\tthis.uniforms[uniforms[i]] = glContext.getUniformLocation(this.ID, uniforms[i]);\n\t\t}\n\t}\n\n\tthis.attributes.enable = function (attributeName) {\n\t\tglContext.enableVertexAttribArray(this[attributeName]);\n\t}\n\n\tthis.attributes.disable = function (attributeName) {\n\t\tglContext.disableVertexAttribArray(this[attributeName]);\n\t}\n\n\tif (attributes) {\n\t\tfor (let i = 0; i < attributes.length; i++) {\n\t\t\tthis.attributes[attributes[i]] = glContext.getAttribLocation(this.ID, attributes[i]);\n\t\t}\n\t}\n\n\tthis.use = function (glContext) {\n\t\tglContext.useProgram(this.ID);\n\t}\n}\n\n\n\n\n\n/*\n * Copyright (C) 2009 Apple Inc. All Rights Reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n/*\n\t taken from: https://cvs.khronos.org/svn/repos/registry/trunk/public/webgl/sdk/demos/webkit/resources/J3DI.js\n*/\n\n//\n// makeSphere\n//\n// Create a sphere with the passed number of latitude and longitude bands and the passed radius.\n// Sphere has vertices, normals and texCoords. Create VBOs for each as well as the index array.\n// Return an object with the following properties:\n//\n//  normalObject        WebGLBuffer object for normals\n//  texCoordObject      WebGLBuffer object for texCoords\n//  vertexObject        WebGLBuffer object for vertices\n//  indexObject         WebGLBuffer object for indices\n//  numIndices          The number of indices in the indexObject\n//\nfunction makeSphere(ctx, radius, lats, longs) {\n\tvar geometryData = [];\n\tvar normalData = [];\n\tvar texCoordData = [];\n\tvar indexData = [];\n\n\tfor (var latNumber = 0; latNumber <= lats; ++latNumber) {\n\t\tfor (var longNumber = 0; longNumber <= longs; ++longNumber) {\n\t\t\tvar theta = latNumber * Math.PI / lats;\n\t\t\tvar phi = longNumber * 2 * Math.PI / longs;\n\t\t\tvar sinTheta = Math.sin(theta);\n\t\t\tvar sinPhi = Math.sin(phi);\n\t\t\tvar cosTheta = Math.cos(theta);\n\t\t\tvar cosPhi = Math.cos(phi);\n\n\t\t\tvar x = cosPhi * sinTheta;\n\t\t\tvar y = cosTheta;\n\t\t\tvar z = sinPhi * sinTheta;\n\t\t\tvar u = 1 - (longNumber / longs);\n\t\t\tvar v = latNumber / lats;\n\n\t\t\tnormalData.push(x);\n\t\t\tnormalData.push(y);\n\t\t\tnormalData.push(z);\n\t\t\ttexCoordData.push(u);\n\t\t\ttexCoordData.push(v);\n\t\t\tgeometryData.push(radius * x);\n\t\t\tgeometryData.push(radius * y);\n\t\t\tgeometryData.push(radius * z);\n\t\t}\n\t}\n\n\tfor (var latNumber = 0; latNumber < lats; ++latNumber) {\n\t\tfor (var longNumber = 0; longNumber < longs; ++longNumber) {\n\t\t\tvar first = (latNumber * (longs + 1)) + longNumber;\n\t\t\tvar second = first + longs + 1;\n\t\t\tindexData.push(first);\n\t\t\tindexData.push(second);\n\t\t\tindexData.push(first + 1);\n\n\t\t\tindexData.push(second);\n\t\t\tindexData.push(second + 1);\n\t\t\tindexData.push(first + 1);\n\t\t}\n\t}\n\n\tvar retval = {};\n\n\tretval.normalObject = ctx.createBuffer();\n\tctx.bindBuffer(ctx.ARRAY_BUFFER, retval.normalObject);\n\tctx.bufferData(ctx.ARRAY_BUFFER, new Float32Array(normalData), ctx.STATIC_DRAW);\n\n\tretval.texCoordObject = ctx.createBuffer();\n\tctx.bindBuffer(ctx.ARRAY_BUFFER, retval.texCoordObject);\n\tctx.bufferData(ctx.ARRAY_BUFFER, new Float32Array(texCoordData), ctx.STATIC_DRAW);\n\n\tretval.vertexObject = ctx.createBuffer();\n\tctx.bindBuffer(ctx.ARRAY_BUFFER, retval.vertexObject);\n\tctx.bufferData(ctx.ARRAY_BUFFER, new Float32Array(geometryData), ctx.STATIC_DRAW);\n\n\tretval.numIndices = indexData.length;\n\tretval.indexObject = ctx.createBuffer();\n\tctx.bindBuffer(ctx.ELEMENT_ARRAY_BUFFER, retval.indexObject);\n\tctx.bufferData(ctx.ELEMENT_ARRAY_BUFFER, new Uint16Array(indexData), ctx.STREAM_DRAW);\n\tretval.indexType = ctx.UNSIGNED_SHORT;\n\n\treturn retval;\n}\n\n\n\n\n\nfunction makePlane(ctx, generateNormal = true, generateTexCoord = true) {\n\tlet geometryData = [\n\t\t-1.0, 1.0, 0.0,\n\t\t-1.0, -1.0, 0.0,\n\t\t1.0, 1.0, 0.0,\n\t\t1.0, -1.0, 0.0,\n\t];\n\tlet normalData = [\n\t\t0.0, 0.0, 1.0,\n\t\t0.0, 0.0, 1.0,\n\t\t0.0, 0.0, 1.0,\n\t\t0.0, 0.0, 1.0,\n\t];\n\tlet texCoordData = [\n\t\t0.0, 1.0, 0.0,\n\t\t1.0, 0.0, 0.0,\n\t\t1.0, 1.0, 0.0,\n\t\t0.0, 0.0, 0.0,\n\t];\n\n\tlet retval = {};\n\n\tif (generateTexCoord) {\n\t\tretval.texCoordObject = ctx.createBuffer();\n\t\tctx.bindBuffer(ctx.ARRAY_BUFFER, retval.texCoordObject);\n\t\tctx.bufferData(ctx.ARRAY_BUFFER, new Float32Array(texCoordData), ctx.STATIC_DRAW);\n\t}\n\n\tif (generateNormal) {\n\t\tretval.normalObject = ctx.createBuffer();\n\t\tctx.bindBuffer(ctx.ARRAY_BUFFER, retval.normalObject);\n\t\tctx.bufferData(ctx.ARRAY_BUFFER, new Float32Array(normalData), ctx.STATIC_DRAW);\n\t}\n\n\tretval.vertexObject = ctx.createBuffer();\n\tctx.bindBuffer(ctx.ARRAY_BUFFER, retval.vertexObject);\n\tctx.bufferData(ctx.ARRAY_BUFFER, new Float32Array(geometryData), ctx.STATIC_DRAW);\n\tretval.numIndices = 4;\n\n\t// retval.numIndices = indexData.length;\n\t// retval.indexObject = ctx.createBuffer();\n\t// ctx.bindBuffer(ctx.ELEMENT_ARRAY_BUFFER, retval.indexObject);\n\t// ctx.bufferData(ctx.ELEMENT_ARRAY_BUFFER, new Uint16Array(indexData), ctx.STREAM_DRAW);\n\t// retval.indexType = ctx.UNSIGNED_SHORT;\n\n\treturn retval;\n}\n\n// Degrees to Radians convert function\nfunction degToRad(degrees) {\n\treturn degrees * Math.PI / 180;\n}\n\nexport {\n\tmakeSphere,\n\tmakePlane,\n\tgetShader,\n\tgetShaderFromURL,\n\tgetShaderFromString,\n\tShaderProgram,\n\trequestAnimationFrame,\n\tcancelAnimationFrame,\n\tcreateWebGLContext,\n\tdegToRad\n};\n","function findIndex(nodes, value, start, stop) {\r\n    // Find the index in the color array for which\r\n    // nodes[index].value <= value < nodes[index + 1]\r\n    if (stop <= start) {\r\n        return start;\r\n    }\r\n    const index = Math.floor(start + (stop - start) / 2);\r\n    const delta = value - nodes[index].value;\r\n    const delta1 = value - nodes[index + 1].value;\r\n    if (delta < 0) {\r\n        return findIndex(nodes, value, start, index - 1);\r\n    }\r\n    else if (delta1 < 0) {\r\n        return index;\r\n    }\r\n    else {\r\n        return findIndex(nodes, value, index + 1, stop);\r\n    }\r\n}\r\nconst linearMixer = (value, lowerNodeValue, upperNodeValue) => {\r\n    const frac = (value - lowerNodeValue) / (upperNodeValue - lowerNodeValue);\r\n    return [1 - frac, frac];\r\n};\r\nconst floorMixer = (_value, _lowerNodeValue, _upperNodeValue) => {\r\n    return [1, 0];\r\n};\r\nconst ceilMixer = (_value, _lowerNodeValue, _upperNodeValue) => {\r\n    return [0, 1];\r\n};\r\nconst roundMixer = (value, lowerNodeValue, upperNodeValue) => {\r\n    if (value - lowerNodeValue < upperNodeValue - value) {\r\n        return [1, 0];\r\n    }\r\n    else {\r\n        return [0, 1];\r\n    }\r\n};\n\nfunction isNode(node) {\r\n    return node.value !== undefined && node.mapped !== undefined;\r\n}\r\nfunction isNodeArray(nodes) {\r\n    return nodes.length > 0 && isNode(nodes[0]);\r\n}\r\nfunction opacityCombination(a, X, b, Y) {\r\n    return a * X + b * Y;\r\n}\r\nfunction colorCombination(a, X, b, Y) {\r\n    return [\r\n        a * X[0] + b * Y[0],\r\n        a * X[1] + b * Y[1],\r\n        a * X[2] + b * Y[2]\r\n    ];\r\n}\r\nfunction ensureMixer(mixer) {\r\n    return mixer ? mixer : linearMixer;\r\n}\r\nfunction createColorMap(colors, scale, mixer) {\r\n    if (!Array.isArray(colors) || colors.length < 1) {\r\n        return noColorMap;\r\n    }\r\n    if (isNodeArray(colors)) {\r\n        return createMapFromNodes(colors, scale, ensureMixer(mixer), colorCombination);\r\n    }\r\n    else {\r\n        return createMapFromArray(colors, scale, ensureMixer(mixer), colorCombination);\r\n    }\r\n}\r\nfunction createOpacityMap(opacities, scale, mixer) {\r\n    if (!Array.isArray(opacities) || opacities.length < 1) {\r\n        return noOpacityMap;\r\n    }\r\n    if (isNodeArray(opacities)) {\r\n        return createMapFromNodes(opacities, scale, ensureMixer(mixer), opacityCombination);\r\n    }\r\n    else {\r\n        return createMapFromArray(opacities, scale, ensureMixer(mixer), opacityCombination);\r\n    }\r\n}\r\nfunction createColorOpacityMap(colorMap, opacityMap) {\r\n    return function (value) {\r\n        return colorMap(value).concat(opacityMap(value));\r\n    };\r\n}\r\nfunction createMapFromNodes(nodes, scale, mixer, linearCombination) {\r\n    const sortedNodes = nodes.sort((a, b) => a.value < b.value ? -1 : 1);\r\n    return function (value) {\r\n        const scaledValue = scale(value);\r\n        const index = findIndex(sortedNodes, scaledValue, 0, sortedNodes.length - 1);\r\n        if (index == 0 && scaledValue < sortedNodes[0].value) {\r\n            return sortedNodes[index].mapped;\r\n        }\r\n        else if (index == sortedNodes.length - 1) {\r\n            return sortedNodes[index].mapped;\r\n        }\r\n        const [coeff0, coeff1] = mixer(scaledValue, sortedNodes[index].value, sortedNodes[index + 1].value);\r\n        return linearCombination(coeff0, sortedNodes[index].mapped, coeff1, sortedNodes[index + 1].mapped);\r\n    };\r\n}\r\nfunction createMapFromArray(arr, scale, mixer, linearCombination) {\r\n    return function (value) {\r\n        const scaledValue = scale(value);\r\n        const indexFloat = (arr.length - 1) * scaledValue;\r\n        if (indexFloat <= 0) {\r\n            return arr[0];\r\n        }\r\n        else if (indexFloat >= arr.length - 1) {\r\n            return arr[arr.length - 1];\r\n        }\r\n        const index = Math.floor(indexFloat);\r\n        const [coeff0, coeff1] = mixer(indexFloat, index, index + 1);\r\n        return linearCombination(coeff0, arr[index], coeff1, arr[index + 1]);\r\n    };\r\n}\r\nfunction noColorMap(_value) {\r\n    return [0, 0, 0];\r\n}\r\nfunction noOpacityMap(_value) {\r\n    return 1;\r\n}\n\nfunction linearScale(domain, range) {\r\n    let [d0, d1] = domain;\r\n    const [r0, r1] = range;\r\n    if (Math.abs(d0 - d1) < Number.EPSILON) {\r\n        d1 = d0 + 1;\r\n    }\r\n    return function (value) {\r\n        return r0 + (r1 - r0) * ((value - d0) / (d1 - d0));\r\n    };\r\n}\n\nexport { ceilMixer, createColorMap, createColorOpacityMap, createOpacityMap, floorMixer, linearMixer, linearScale, roundMixer };\n","const colors = [\r\n    [0, 0, 0],\r\n    [1, 1, 1]\r\n];\n\nconst colors$1 = [\r\n    [0.0, 0.135112, 0.304751],\r\n    [0.0, 0.138068, 0.311105],\r\n    [0.0, 0.141013, 0.317579],\r\n    [0.0, 0.143951, 0.323982],\r\n    [0.0, 0.146877, 0.330479],\r\n    [0.0, 0.149791, 0.337065],\r\n    [0.0, 0.152673, 0.343704],\r\n    [0.0, 0.155377, 0.3505],\r\n    [0.0, 0.157932, 0.357521],\r\n    [0.0, 0.160495, 0.364534],\r\n    [0.0, 0.163058, 0.371608],\r\n    [0.0, 0.165621, 0.378769],\r\n    [0.0, 0.168204, 0.385902],\r\n    [0.0, 0.1708, 0.3931],\r\n    [0.0, 0.17342, 0.400353],\r\n    [0.0, 0.176082, 0.407577],\r\n    [0.0, 0.178802, 0.414764],\r\n    [0.0, 0.18161, 0.421859],\r\n    [0.0, 0.18455, 0.428802],\r\n    [0.0, 0.186915, 0.435532],\r\n    [0.0, 0.188769, 0.439563],\r\n    [0.0, 0.19095, 0.441085],\r\n    [0.0, 0.193366, 0.441561],\r\n    [0.003602, 0.195911, 0.441564],\r\n    [0.017852, 0.198528, 0.441248],\r\n    [0.03211, 0.201199, 0.440785],\r\n    [0.046205, 0.203903, 0.440196],\r\n    [0.058378, 0.206629, 0.439531],\r\n    [0.068968, 0.209372, 0.438863],\r\n    [0.078624, 0.212122, 0.438105],\r\n    [0.087465, 0.214879, 0.437342],\r\n    [0.095645, 0.217643, 0.436593],\r\n    [0.103401, 0.220406, 0.43579],\r\n    [0.110658, 0.22317, 0.435067],\r\n    [0.117612, 0.225935, 0.434308],\r\n    [0.124291, 0.228697, 0.433547],\r\n    [0.130669, 0.231458, 0.43284],\r\n    [0.13683, 0.234216, 0.432148],\r\n    [0.142852, 0.236972, 0.431404],\r\n    [0.148638, 0.239724, 0.430752],\r\n    [0.154261, 0.242475, 0.43012],\r\n    [0.159733, 0.245221, 0.429528],\r\n    [0.165113, 0.247965, 0.428908],\r\n    [0.170362, 0.250707, 0.428325],\r\n    [0.17549, 0.253444, 0.42779],\r\n    [0.180503, 0.25618, 0.427299],\r\n    [0.185453, 0.258914, 0.426788],\r\n    [0.190303, 0.261644, 0.426329],\r\n    [0.195057, 0.264372, 0.425924],\r\n    [0.199764, 0.267099, 0.425497],\r\n    [0.204385, 0.269823, 0.425126],\r\n    [0.208926, 0.272546, 0.424809],\r\n    [0.213431, 0.275266, 0.42448],\r\n    [0.217863, 0.277985, 0.424206],\r\n    [0.222264, 0.280702, 0.423914],\r\n    [0.226598, 0.283419, 0.423678],\r\n    [0.230871, 0.286134, 0.423498],\r\n    [0.23512, 0.288848, 0.423304],\r\n    [0.239312, 0.291562, 0.423167],\r\n    [0.243485, 0.294274, 0.423014],\r\n    [0.247605, 0.296986, 0.422917],\r\n    [0.251675, 0.299698, 0.422873],\r\n    [0.255731, 0.302409, 0.422814],\r\n    [0.25974, 0.30512, 0.42281],\r\n    [0.263738, 0.307831, 0.422789],\r\n    [0.267693, 0.310542, 0.422821],\r\n    [0.271639, 0.313253, 0.422837],\r\n    [0.275513, 0.315965, 0.422979],\r\n    [0.279411, 0.318677, 0.423031],\r\n    [0.28324, 0.32139, 0.423211],\r\n    [0.287065, 0.324103, 0.423373],\r\n    [0.290884, 0.326816, 0.423517],\r\n    [0.294669, 0.329531, 0.423716],\r\n    [0.298421, 0.332247, 0.423973],\r\n    [0.302169, 0.334963, 0.424213],\r\n    [0.305886, 0.337681, 0.424512],\r\n    [0.309601, 0.340399, 0.42479],\r\n    [0.313287, 0.34312, 0.42512],\r\n    [0.316941, 0.345842, 0.425512],\r\n    [0.320595, 0.348565, 0.425889],\r\n    [0.32425, 0.351289, 0.42625],\r\n    [0.327875, 0.354016, 0.42667],\r\n    [0.331474, 0.356744, 0.427144],\r\n    [0.335073, 0.359474, 0.427605],\r\n    [0.338673, 0.362206, 0.428053],\r\n    [0.342246, 0.364939, 0.428559],\r\n    [0.345793, 0.367676, 0.429127],\r\n    [0.349341, 0.370414, 0.429685],\r\n    [0.352892, 0.373153, 0.430226],\r\n    [0.356418, 0.375896, 0.430823],\r\n    [0.359916, 0.378641, 0.431501],\r\n    [0.363446, 0.381388, 0.432075],\r\n    [0.366923, 0.384139, 0.432796],\r\n    [0.37043, 0.38689, 0.433428],\r\n    [0.373884, 0.389646, 0.434209],\r\n    [0.377371, 0.392404, 0.43489],\r\n    [0.38083, 0.395164, 0.435653],\r\n    [0.384268, 0.397928, 0.436475],\r\n    [0.387705, 0.400694, 0.437305],\r\n    [0.391151, 0.403464, 0.438096],\r\n    [0.394568, 0.406236, 0.438986],\r\n    [0.397991, 0.409011, 0.439848],\r\n    [0.401418, 0.41179, 0.440708],\r\n    [0.40482, 0.414572, 0.441642],\r\n    [0.408226, 0.417357, 0.44257],\r\n    [0.411607, 0.420145, 0.443577],\r\n    [0.414992, 0.422937, 0.444578],\r\n    [0.418383, 0.425733, 0.44556],\r\n    [0.421748, 0.428531, 0.44664],\r\n    [0.42512, 0.431334, 0.447692],\r\n    [0.428462, 0.43414, 0.448864],\r\n    [0.431817, 0.43695, 0.449982],\r\n    [0.435168, 0.439763, 0.451134],\r\n    [0.438504, 0.44258, 0.452341],\r\n    [0.44181, 0.445402, 0.453659],\r\n    [0.445148, 0.448226, 0.454885],\r\n    [0.448447, 0.451053, 0.456264],\r\n    [0.451759, 0.453887, 0.457582],\r\n    [0.455072, 0.456718, 0.458976],\r\n    [0.458366, 0.459552, 0.460457],\r\n    [0.461616, 0.462405, 0.461969],\r\n    [0.464947, 0.465241, 0.463395],\r\n    [0.468254, 0.468083, 0.464908],\r\n    [0.471501, 0.47096, 0.466357],\r\n    [0.474812, 0.473832, 0.467681],\r\n    [0.478186, 0.476699, 0.468845],\r\n    [0.481622, 0.479573, 0.469767],\r\n    [0.485141, 0.482451, 0.470384],\r\n    [0.488697, 0.485318, 0.471008],\r\n    [0.492278, 0.488198, 0.471453],\r\n    [0.495913, 0.491076, 0.471751],\r\n    [0.499552, 0.49396, 0.472032],\r\n    [0.503185, 0.496851, 0.472305],\r\n    [0.506866, 0.499743, 0.472432],\r\n    [0.51054, 0.502643, 0.47255],\r\n    [0.514226, 0.505546, 0.47264],\r\n    [0.51792, 0.508454, 0.472707],\r\n    [0.521643, 0.511367, 0.472639],\r\n    [0.525348, 0.514285, 0.47266],\r\n    [0.529086, 0.517207, 0.472543],\r\n    [0.532829, 0.520135, 0.472401],\r\n    [0.536553, 0.523067, 0.472352],\r\n    [0.540307, 0.526005, 0.472163],\r\n    [0.544069, 0.528948, 0.471947],\r\n    [0.54784, 0.531895, 0.471704],\r\n    [0.551612, 0.534849, 0.471439],\r\n    [0.555393, 0.537807, 0.471147],\r\n    [0.559181, 0.540771, 0.470829],\r\n    [0.562972, 0.543741, 0.470488],\r\n    [0.566802, 0.546715, 0.469988],\r\n    [0.570607, 0.549695, 0.469593],\r\n    [0.574417, 0.552682, 0.469172],\r\n    [0.578236, 0.555673, 0.468724],\r\n    [0.582087, 0.55867, 0.468118],\r\n    [0.585916, 0.561674, 0.467618],\r\n    [0.589753, 0.564682, 0.46709],\r\n    [0.593622, 0.567697, 0.466401],\r\n    [0.597469, 0.570718, 0.465821],\r\n    [0.601354, 0.573743, 0.465074],\r\n    [0.605211, 0.576777, 0.464441],\r\n    [0.609105, 0.579816, 0.463638],\r\n    [0.612977, 0.582861, 0.46295],\r\n    [0.616852, 0.585913, 0.462237],\r\n    [0.620765, 0.58897, 0.461351],\r\n    [0.624654, 0.592034, 0.460583],\r\n    [0.628576, 0.595104, 0.459641],\r\n    [0.632506, 0.59818, 0.458668],\r\n    [0.636412, 0.601264, 0.457818],\r\n    [0.640352, 0.604354, 0.456791],\r\n    [0.64427, 0.60745, 0.455886],\r\n    [0.648222, 0.610553, 0.454801],\r\n    [0.652178, 0.613664, 0.453689],\r\n    [0.656114, 0.61678, 0.452702],\r\n    [0.660082, 0.619904, 0.451534],\r\n    [0.664055, 0.623034, 0.450338],\r\n    [0.668008, 0.626171, 0.44927],\r\n    [0.671991, 0.629316, 0.448018],\r\n    [0.675981, 0.632468, 0.446736],\r\n    [0.679979, 0.635626, 0.445424],\r\n    [0.68395, 0.638793, 0.444251],\r\n    [0.687957, 0.641966, 0.442886],\r\n    [0.691971, 0.645145, 0.441491],\r\n    [0.695985, 0.648334, 0.440072],\r\n    [0.700008, 0.651529, 0.438624],\r\n    [0.704037, 0.654731, 0.437147],\r\n    [0.708067, 0.657942, 0.435647],\r\n    [0.712105, 0.66116, 0.434117],\r\n    [0.716177, 0.664384, 0.432386],\r\n    [0.720222, 0.667618, 0.430805],\r\n    [0.724274, 0.670859, 0.429194],\r\n    [0.728334, 0.674107, 0.427554],\r\n    [0.732422, 0.677364, 0.425717],\r\n    [0.736488, 0.680629, 0.424028],\r\n    [0.740589, 0.6839, 0.422131],\r\n    [0.744664, 0.687181, 0.420393],\r\n    [0.748772, 0.69047, 0.418448],\r\n    [0.752886, 0.693766, 0.416472],\r\n    [0.756975, 0.697071, 0.414659],\r\n    [0.761096, 0.700384, 0.412638],\r\n    [0.765223, 0.703705, 0.410587],\r\n    [0.769353, 0.707035, 0.408516],\r\n    [0.773486, 0.710373, 0.406422],\r\n    [0.777651, 0.713719, 0.404112],\r\n    [0.781795, 0.717074, 0.401966],\r\n    [0.785965, 0.720438, 0.399613],\r\n    [0.790116, 0.72381, 0.397423],\r\n    [0.794298, 0.72719, 0.395016],\r\n    [0.79848, 0.73058, 0.392597],\r\n    [0.802667, 0.733978, 0.390153],\r\n    [0.806859, 0.737385, 0.387684],\r\n    [0.811054, 0.740801, 0.385198],\r\n    [0.815274, 0.744226, 0.382504],\r\n    [0.819499, 0.747659, 0.379785],\r\n    [0.823729, 0.751101, 0.377043],\r\n    [0.827959, 0.754553, 0.374292],\r\n    [0.832192, 0.758014, 0.371529],\r\n    [0.836429, 0.761483, 0.368747],\r\n    [0.840693, 0.764962, 0.365746],\r\n    [0.844957, 0.76845, 0.362741],\r\n    [0.849223, 0.771947, 0.359729],\r\n    [0.853515, 0.775454, 0.3565],\r\n    [0.857809, 0.778969, 0.353259],\r\n    [0.862105, 0.782494, 0.350011],\r\n    [0.866421, 0.786028, 0.346571],\r\n    [0.870717, 0.789572, 0.343333],\r\n    [0.875057, 0.793125, 0.339685],\r\n    [0.879378, 0.796687, 0.336241],\r\n    [0.88372, 0.800258, 0.332599],\r\n    [0.888081, 0.803839, 0.32877],\r\n    [0.89244, 0.80743, 0.324968],\r\n    [0.896818, 0.81103, 0.320982],\r\n    [0.901195, 0.814639, 0.317021],\r\n    [0.905589, 0.818257, 0.312889],\r\n    [0.91, 0.821885, 0.308594],\r\n    [0.914407, 0.825522, 0.304348],\r\n    [0.918828, 0.829168, 0.29996],\r\n    [0.923279, 0.832822, 0.295244],\r\n    [0.927724, 0.836486, 0.290611],\r\n    [0.93218, 0.840159, 0.28588],\r\n    [0.93666, 0.843841, 0.280876],\r\n    [0.941147, 0.84753, 0.275815],\r\n    [0.945654, 0.851228, 0.270532],\r\n    [0.950178, 0.854933, 0.265085],\r\n    [0.954725, 0.858646, 0.259365],\r\n    [0.959284, 0.862365, 0.253563],\r\n    [0.963872, 0.866089, 0.247445],\r\n    [0.968469, 0.869819, 0.24131],\r\n    [0.973114, 0.87355, 0.234677],\r\n    [0.97778, 0.877281, 0.227954],\r\n    [0.982497, 0.881008, 0.220878],\r\n    [0.987293, 0.884718, 0.213336],\r\n    [0.992218, 0.888385, 0.205468],\r\n    [0.994847, 0.892954, 0.203445],\r\n    [0.995249, 0.898384, 0.207561],\r\n    [0.995503, 0.903866, 0.21237],\r\n    [0.995737, 0.909344, 0.217772]\r\n];\n\nconst colors$2 = [\r\n    [0.001462, 0.000466, 0.013866],\r\n    [0.002267, 0.00127, 0.01857],\r\n    [0.003299, 0.002249, 0.024239],\r\n    [0.004547, 0.003392, 0.030909],\r\n    [0.006006, 0.004692, 0.038558],\r\n    [0.007676, 0.006136, 0.046836],\r\n    [0.009561, 0.007713, 0.055143],\r\n    [0.011663, 0.009417, 0.06346],\r\n    [0.013995, 0.011225, 0.071862],\r\n    [0.016561, 0.013136, 0.080282],\r\n    [0.019373, 0.015133, 0.088767],\r\n    [0.022447, 0.017199, 0.097327],\r\n    [0.025793, 0.019331, 0.10593],\r\n    [0.029432, 0.021503, 0.114621],\r\n    [0.033385, 0.023702, 0.123397],\r\n    [0.037668, 0.025921, 0.132232],\r\n    [0.042253, 0.028139, 0.141141],\r\n    [0.046915, 0.030324, 0.150164],\r\n    [0.051644, 0.032474, 0.159254],\r\n    [0.056449, 0.034569, 0.168414],\r\n    [0.06134, 0.03659, 0.177642],\r\n    [0.066331, 0.038504, 0.186962],\r\n    [0.071429, 0.040294, 0.196354],\r\n    [0.076637, 0.041905, 0.205799],\r\n    [0.081962, 0.043328, 0.215289],\r\n    [0.087411, 0.044556, 0.224813],\r\n    [0.09299, 0.045583, 0.234358],\r\n    [0.098702, 0.046402, 0.243904],\r\n    [0.104551, 0.047008, 0.25343],\r\n    [0.110536, 0.047399, 0.262912],\r\n    [0.116656, 0.047574, 0.272321],\r\n    [0.122908, 0.047536, 0.281624],\r\n    [0.129285, 0.047293, 0.290788],\r\n    [0.135778, 0.046856, 0.299776],\r\n    [0.142378, 0.046242, 0.308553],\r\n    [0.149073, 0.045468, 0.317085],\r\n    [0.15585, 0.044559, 0.325338],\r\n    [0.162689, 0.043554, 0.333277],\r\n    [0.169575, 0.042489, 0.340874],\r\n    [0.176493, 0.041402, 0.348111],\r\n    [0.183429, 0.040329, 0.354971],\r\n    [0.190367, 0.039309, 0.361447],\r\n    [0.197297, 0.0384, 0.367535],\r\n    [0.204209, 0.037632, 0.373238],\r\n    [0.211095, 0.03703, 0.378563],\r\n    [0.217949, 0.036615, 0.383522],\r\n    [0.224763, 0.036405, 0.388129],\r\n    [0.231538, 0.036405, 0.3924],\r\n    [0.238273, 0.036621, 0.396353],\r\n    [0.244967, 0.037055, 0.400007],\r\n    [0.25162, 0.037705, 0.403378],\r\n    [0.258234, 0.038571, 0.406485],\r\n    [0.26481, 0.039647, 0.409345],\r\n    [0.271347, 0.040922, 0.411976],\r\n    [0.27785, 0.042353, 0.414392],\r\n    [0.284321, 0.043933, 0.416608],\r\n    [0.290763, 0.045644, 0.418637],\r\n    [0.297178, 0.04747, 0.420491],\r\n    [0.303568, 0.049396, 0.422182],\r\n    [0.309935, 0.051407, 0.423721],\r\n    [0.316282, 0.05349, 0.425116],\r\n    [0.32261, 0.055634, 0.426377],\r\n    [0.328921, 0.057827, 0.427511],\r\n    [0.335217, 0.06006, 0.428524],\r\n    [0.3415, 0.062325, 0.429425],\r\n    [0.347771, 0.064616, 0.430217],\r\n    [0.354032, 0.066925, 0.430906],\r\n    [0.360284, 0.069247, 0.431497],\r\n    [0.366529, 0.071579, 0.431994],\r\n    [0.372768, 0.073915, 0.4324],\r\n    [0.379001, 0.076253, 0.432719],\r\n    [0.385228, 0.078591, 0.432955],\r\n    [0.391453, 0.080927, 0.433109],\r\n    [0.397674, 0.083257, 0.433183],\r\n    [0.403894, 0.08558, 0.433179],\r\n    [0.410113, 0.087896, 0.433098],\r\n    [0.416331, 0.090203, 0.432943],\r\n    [0.422549, 0.092501, 0.432714],\r\n    [0.428768, 0.09479, 0.432412],\r\n    [0.434987, 0.097069, 0.432039],\r\n    [0.441207, 0.099338, 0.431594],\r\n    [0.447428, 0.101597, 0.43108],\r\n    [0.453651, 0.103848, 0.430498],\r\n    [0.459875, 0.106089, 0.429846],\r\n    [0.4661, 0.108322, 0.429125],\r\n    [0.472328, 0.110547, 0.428334],\r\n    [0.478558, 0.112764, 0.427475],\r\n    [0.484789, 0.114974, 0.426548],\r\n    [0.491022, 0.117179, 0.425552],\r\n    [0.497257, 0.119379, 0.424488],\r\n    [0.503493, 0.121575, 0.423356],\r\n    [0.50973, 0.123769, 0.422156],\r\n    [0.515967, 0.12596, 0.420887],\r\n    [0.522206, 0.12815, 0.419549],\r\n    [0.528444, 0.130341, 0.418142],\r\n    [0.534683, 0.132534, 0.416667],\r\n    [0.54092, 0.134729, 0.415123],\r\n    [0.547157, 0.136929, 0.413511],\r\n    [0.553392, 0.139134, 0.411829],\r\n    [0.559624, 0.141346, 0.410078],\r\n    [0.565854, 0.143567, 0.408258],\r\n    [0.572081, 0.145797, 0.406369],\r\n    [0.578304, 0.148039, 0.404411],\r\n    [0.584521, 0.150294, 0.402385],\r\n    [0.590734, 0.152563, 0.40029],\r\n    [0.59694, 0.154848, 0.398125],\r\n    [0.603139, 0.157151, 0.395891],\r\n    [0.60933, 0.159474, 0.393589],\r\n    [0.615513, 0.161817, 0.391219],\r\n    [0.621685, 0.164184, 0.388781],\r\n    [0.627847, 0.166575, 0.386276],\r\n    [0.633998, 0.168992, 0.383704],\r\n    [0.640135, 0.171438, 0.381065],\r\n    [0.64626, 0.173914, 0.378359],\r\n    [0.652369, 0.176421, 0.375586],\r\n    [0.658463, 0.178962, 0.372748],\r\n    [0.66454, 0.181539, 0.369846],\r\n    [0.670599, 0.184153, 0.366879],\r\n    [0.676638, 0.186807, 0.363849],\r\n    [0.682656, 0.189501, 0.360757],\r\n    [0.688653, 0.192239, 0.357603],\r\n    [0.694627, 0.195021, 0.354388],\r\n    [0.700576, 0.197851, 0.351113],\r\n    [0.7065, 0.200728, 0.347777],\r\n    [0.712396, 0.203656, 0.344383],\r\n    [0.718264, 0.206636, 0.340931],\r\n    [0.724103, 0.20967, 0.337424],\r\n    [0.729909, 0.212759, 0.333861],\r\n    [0.735683, 0.215906, 0.330245],\r\n    [0.741423, 0.219112, 0.326576],\r\n    [0.747127, 0.222378, 0.322856],\r\n    [0.752794, 0.225706, 0.319085],\r\n    [0.758422, 0.229097, 0.315266],\r\n    [0.76401, 0.232554, 0.311399],\r\n    [0.769556, 0.236077, 0.307485],\r\n    [0.775059, 0.239667, 0.303526],\r\n    [0.780517, 0.243327, 0.299523],\r\n    [0.785929, 0.247056, 0.295477],\r\n    [0.791293, 0.250856, 0.29139],\r\n    [0.796607, 0.254728, 0.287264],\r\n    [0.801871, 0.258674, 0.283099],\r\n    [0.807082, 0.262692, 0.278898],\r\n    [0.812239, 0.266786, 0.274661],\r\n    [0.817341, 0.270954, 0.27039],\r\n    [0.822386, 0.275197, 0.266085],\r\n    [0.827372, 0.279517, 0.26175],\r\n    [0.832299, 0.283913, 0.257383],\r\n    [0.837165, 0.288385, 0.252988],\r\n    [0.841969, 0.292933, 0.248564],\r\n    [0.846709, 0.297559, 0.244113],\r\n    [0.851384, 0.30226, 0.239636],\r\n    [0.855992, 0.307038, 0.235133],\r\n    [0.860533, 0.311892, 0.230606],\r\n    [0.865006, 0.316822, 0.226055],\r\n    [0.869409, 0.321827, 0.221482],\r\n    [0.873741, 0.326906, 0.216886],\r\n    [0.878001, 0.33206, 0.212268],\r\n    [0.882188, 0.337287, 0.207628],\r\n    [0.886302, 0.342586, 0.202968],\r\n    [0.890341, 0.347957, 0.198286],\r\n    [0.894305, 0.353399, 0.193584],\r\n    [0.898192, 0.358911, 0.18886],\r\n    [0.902003, 0.364492, 0.184116],\r\n    [0.905735, 0.37014, 0.17935],\r\n    [0.90939, 0.375856, 0.174563],\r\n    [0.912966, 0.381636, 0.169755],\r\n    [0.916462, 0.387481, 0.164924],\r\n    [0.919879, 0.393389, 0.16007],\r\n    [0.923215, 0.399359, 0.155193],\r\n    [0.92647, 0.405389, 0.150292],\r\n    [0.929644, 0.411479, 0.145367],\r\n    [0.932737, 0.417627, 0.140417],\r\n    [0.935747, 0.423831, 0.13544],\r\n    [0.938675, 0.430091, 0.130438],\r\n    [0.941521, 0.436405, 0.125409],\r\n    [0.944285, 0.442772, 0.120354],\r\n    [0.946965, 0.449191, 0.115272],\r\n    [0.949562, 0.45566, 0.110164],\r\n    [0.952075, 0.462178, 0.105031],\r\n    [0.954506, 0.468744, 0.099874],\r\n    [0.956852, 0.475356, 0.094695],\r\n    [0.959114, 0.482014, 0.089499],\r\n    [0.961293, 0.488716, 0.084289],\r\n    [0.963387, 0.495462, 0.079073],\r\n    [0.965397, 0.502249, 0.073859],\r\n    [0.967322, 0.509078, 0.068659],\r\n    [0.969163, 0.515946, 0.063488],\r\n    [0.970919, 0.522853, 0.058367],\r\n    [0.97259, 0.529798, 0.053324],\r\n    [0.974176, 0.53678, 0.048392],\r\n    [0.975677, 0.543798, 0.043618],\r\n    [0.977092, 0.55085, 0.03905],\r\n    [0.978422, 0.557937, 0.034931],\r\n    [0.979666, 0.565057, 0.031409],\r\n    [0.980824, 0.572209, 0.028508],\r\n    [0.981895, 0.579392, 0.02625],\r\n    [0.982881, 0.586606, 0.024661],\r\n    [0.983779, 0.593849, 0.02377],\r\n    [0.984591, 0.601122, 0.023606],\r\n    [0.985315, 0.608422, 0.024202],\r\n    [0.985952, 0.61575, 0.025592],\r\n    [0.986502, 0.623105, 0.027814],\r\n    [0.986964, 0.630485, 0.030908],\r\n    [0.987337, 0.63789, 0.034916],\r\n    [0.987622, 0.64532, 0.039886],\r\n    [0.987819, 0.652773, 0.045581],\r\n    [0.987926, 0.66025, 0.05175],\r\n    [0.987945, 0.667748, 0.058329],\r\n    [0.987874, 0.675267, 0.065257],\r\n    [0.987714, 0.682807, 0.072489],\r\n    [0.987464, 0.690366, 0.07999],\r\n    [0.987124, 0.697944, 0.087731],\r\n    [0.986694, 0.70554, 0.095694],\r\n    [0.986175, 0.713153, 0.103863],\r\n    [0.985566, 0.720782, 0.112229],\r\n    [0.984865, 0.728427, 0.120785],\r\n    [0.984075, 0.736087, 0.129527],\r\n    [0.983196, 0.743758, 0.138453],\r\n    [0.982228, 0.751442, 0.147565],\r\n    [0.981173, 0.759135, 0.156863],\r\n    [0.980032, 0.766837, 0.166353],\r\n    [0.978806, 0.774545, 0.176037],\r\n    [0.977497, 0.782258, 0.185923],\r\n    [0.976108, 0.789974, 0.196018],\r\n    [0.974638, 0.797692, 0.206332],\r\n    [0.973088, 0.805409, 0.216877],\r\n    [0.971468, 0.813122, 0.227658],\r\n    [0.969783, 0.820825, 0.238686],\r\n    [0.968041, 0.828515, 0.249972],\r\n    [0.966243, 0.836191, 0.261534],\r\n    [0.964394, 0.843848, 0.273391],\r\n    [0.962517, 0.851476, 0.285546],\r\n    [0.960626, 0.859069, 0.29801],\r\n    [0.95872, 0.866624, 0.31082],\r\n    [0.956834, 0.874129, 0.323974],\r\n    [0.954997, 0.881569, 0.337475],\r\n    [0.953215, 0.888942, 0.351369],\r\n    [0.951546, 0.896226, 0.365627],\r\n    [0.950018, 0.903409, 0.380271],\r\n    [0.948683, 0.910473, 0.395289],\r\n    [0.947594, 0.917399, 0.410665],\r\n    [0.946809, 0.924168, 0.426373],\r\n    [0.946392, 0.930761, 0.442367],\r\n    [0.946403, 0.937159, 0.458592],\r\n    [0.946903, 0.943348, 0.47497],\r\n    [0.947937, 0.949318, 0.491426],\r\n    [0.949545, 0.955063, 0.50786],\r\n    [0.95174, 0.960587, 0.524203],\r\n    [0.954529, 0.965896, 0.540361],\r\n    [0.957896, 0.971003, 0.556275],\r\n    [0.961812, 0.975924, 0.571925],\r\n    [0.966249, 0.980678, 0.587206],\r\n    [0.971162, 0.985282, 0.602154],\r\n    [0.976511, 0.989753, 0.61676],\r\n    [0.982257, 0.994109, 0.631017],\r\n    [0.988362, 0.998364, 0.644924]\r\n];\n\nconst colors$3 = [\r\n    [0.001462, 0.000466, 0.013866],\r\n    [0.002258, 0.001295, 0.018331],\r\n    [0.003279, 0.002305, 0.023708],\r\n    [0.004512, 0.00349, 0.029965],\r\n    [0.00595, 0.004843, 0.03713],\r\n    [0.007588, 0.006356, 0.044973],\r\n    [0.009426, 0.008022, 0.052844],\r\n    [0.011465, 0.009828, 0.06075],\r\n    [0.013708, 0.011771, 0.068667],\r\n    [0.016156, 0.01384, 0.076603],\r\n    [0.018815, 0.016026, 0.084584],\r\n    [0.021692, 0.01832, 0.09261],\r\n    [0.024792, 0.020715, 0.100676],\r\n    [0.028123, 0.023201, 0.108787],\r\n    [0.031696, 0.025765, 0.116965],\r\n    [0.03552, 0.028397, 0.125209],\r\n    [0.039608, 0.03109, 0.133515],\r\n    [0.04383, 0.03383, 0.141886],\r\n    [0.048062, 0.036607, 0.150327],\r\n    [0.05232, 0.039407, 0.158841],\r\n    [0.056615, 0.04216, 0.167446],\r\n    [0.060949, 0.044794, 0.176129],\r\n    [0.06533, 0.047318, 0.184892],\r\n    [0.069764, 0.049726, 0.193735],\r\n    [0.074257, 0.052017, 0.20266],\r\n    [0.078815, 0.054184, 0.211667],\r\n    [0.083446, 0.056225, 0.220755],\r\n    [0.088155, 0.058133, 0.229922],\r\n    [0.092949, 0.059904, 0.239164],\r\n    [0.097833, 0.061531, 0.248477],\r\n    [0.102815, 0.06301, 0.257854],\r\n    [0.107899, 0.064335, 0.267289],\r\n    [0.113094, 0.065492, 0.276784],\r\n    [0.118405, 0.066479, 0.286321],\r\n    [0.123833, 0.067295, 0.295879],\r\n    [0.12938, 0.067935, 0.305443],\r\n    [0.135053, 0.068391, 0.315],\r\n    [0.140858, 0.068654, 0.324538],\r\n    [0.146785, 0.068738, 0.334011],\r\n    [0.152839, 0.068637, 0.343404],\r\n    [0.159018, 0.068354, 0.352688],\r\n    [0.165308, 0.067911, 0.361816],\r\n    [0.171713, 0.067305, 0.370771],\r\n    [0.178212, 0.066576, 0.379497],\r\n    [0.184801, 0.065732, 0.387973],\r\n    [0.19146, 0.064818, 0.396152],\r\n    [0.198177, 0.063862, 0.404009],\r\n    [0.204935, 0.062907, 0.411514],\r\n    [0.211718, 0.061992, 0.418647],\r\n    [0.218512, 0.061158, 0.425392],\r\n    [0.225302, 0.060445, 0.431742],\r\n    [0.232077, 0.059889, 0.437695],\r\n    [0.238826, 0.059517, 0.443256],\r\n    [0.245543, 0.059352, 0.448436],\r\n    [0.25222, 0.059415, 0.453248],\r\n    [0.258857, 0.059706, 0.45771],\r\n    [0.265447, 0.060237, 0.46184],\r\n    [0.271994, 0.060994, 0.46566],\r\n    [0.278493, 0.061978, 0.46919],\r\n    [0.284951, 0.063168, 0.472451],\r\n    [0.291366, 0.064553, 0.475462],\r\n    [0.29774, 0.066117, 0.478243],\r\n    [0.304081, 0.067835, 0.480812],\r\n    [0.310382, 0.069702, 0.483186],\r\n    [0.316654, 0.07169, 0.48538],\r\n    [0.322899, 0.073782, 0.487408],\r\n    [0.329114, 0.075972, 0.489287],\r\n    [0.335308, 0.078236, 0.491024],\r\n    [0.341482, 0.080564, 0.492631],\r\n    [0.347636, 0.082946, 0.494121],\r\n    [0.353773, 0.085373, 0.495501],\r\n    [0.359898, 0.087831, 0.496778],\r\n    [0.366012, 0.090314, 0.49796],\r\n    [0.372116, 0.092816, 0.499053],\r\n    [0.378211, 0.095332, 0.500067],\r\n    [0.384299, 0.097855, 0.501002],\r\n    [0.390384, 0.100379, 0.501864],\r\n    [0.396467, 0.102902, 0.502658],\r\n    [0.402548, 0.10542, 0.503386],\r\n    [0.408629, 0.10793, 0.504052],\r\n    [0.414709, 0.110431, 0.504662],\r\n    [0.420791, 0.11292, 0.505215],\r\n    [0.426877, 0.115395, 0.505714],\r\n    [0.432967, 0.117855, 0.50616],\r\n    [0.439062, 0.120298, 0.506555],\r\n    [0.445163, 0.122724, 0.506901],\r\n    [0.451271, 0.125132, 0.507198],\r\n    [0.457386, 0.127522, 0.507448],\r\n    [0.463508, 0.129893, 0.507652],\r\n    [0.46964, 0.132245, 0.507809],\r\n    [0.47578, 0.134577, 0.507921],\r\n    [0.481929, 0.136891, 0.507989],\r\n    [0.488088, 0.139186, 0.508011],\r\n    [0.494258, 0.141462, 0.507988],\r\n    [0.500438, 0.143719, 0.50792],\r\n    [0.506629, 0.145958, 0.507806],\r\n    [0.512831, 0.148179, 0.507648],\r\n    [0.519045, 0.150383, 0.507443],\r\n    [0.52527, 0.152569, 0.507192],\r\n    [0.531507, 0.154739, 0.506895],\r\n    [0.537755, 0.156894, 0.506551],\r\n    [0.544015, 0.159033, 0.506159],\r\n    [0.550287, 0.161158, 0.505719],\r\n    [0.556571, 0.163269, 0.50523],\r\n    [0.562866, 0.165368, 0.504692],\r\n    [0.569172, 0.167454, 0.504105],\r\n    [0.57549, 0.16953, 0.503466],\r\n    [0.581819, 0.171596, 0.502777],\r\n    [0.588158, 0.173652, 0.502035],\r\n    [0.594508, 0.175701, 0.501241],\r\n    [0.600868, 0.177743, 0.500394],\r\n    [0.607238, 0.179779, 0.499492],\r\n    [0.613617, 0.181811, 0.498536],\r\n    [0.620005, 0.18384, 0.497524],\r\n    [0.626401, 0.185867, 0.496456],\r\n    [0.632805, 0.187893, 0.495332],\r\n    [0.639216, 0.189921, 0.49415],\r\n    [0.645633, 0.191952, 0.49291],\r\n    [0.652056, 0.193986, 0.491611],\r\n    [0.658483, 0.196027, 0.490253],\r\n    [0.664915, 0.198075, 0.488836],\r\n    [0.671349, 0.200133, 0.487358],\r\n    [0.677786, 0.202203, 0.485819],\r\n    [0.684224, 0.204286, 0.484219],\r\n    [0.690661, 0.206384, 0.482558],\r\n    [0.697098, 0.208501, 0.480835],\r\n    [0.703532, 0.210638, 0.479049],\r\n    [0.709962, 0.212797, 0.477201],\r\n    [0.716387, 0.214982, 0.47529],\r\n    [0.722805, 0.217194, 0.473316],\r\n    [0.729216, 0.219437, 0.471279],\r\n    [0.735616, 0.221713, 0.46918],\r\n    [0.742004, 0.224025, 0.467018],\r\n    [0.748378, 0.226377, 0.464794],\r\n    [0.754737, 0.228772, 0.462509],\r\n    [0.761077, 0.231214, 0.460162],\r\n    [0.767398, 0.233705, 0.457755],\r\n    [0.773695, 0.236249, 0.455289],\r\n    [0.779968, 0.238851, 0.452765],\r\n    [0.786212, 0.241514, 0.450184],\r\n    [0.792427, 0.244242, 0.447543],\r\n    [0.798608, 0.24704, 0.444848],\r\n    [0.804752, 0.249911, 0.442102],\r\n    [0.810855, 0.252861, 0.439305],\r\n    [0.816914, 0.255895, 0.436461],\r\n    [0.822926, 0.259016, 0.433573],\r\n    [0.828886, 0.262229, 0.430644],\r\n    [0.834791, 0.26554, 0.427671],\r\n    [0.840636, 0.268953, 0.424666],\r\n    [0.846416, 0.272473, 0.421631],\r\n    [0.852126, 0.276106, 0.418573],\r\n    [0.857763, 0.279857, 0.415496],\r\n    [0.86332, 0.283729, 0.412403],\r\n    [0.868793, 0.287728, 0.409303],\r\n    [0.874176, 0.291859, 0.406205],\r\n    [0.879464, 0.296125, 0.403118],\r\n    [0.884651, 0.30053, 0.400047],\r\n    [0.889731, 0.305079, 0.397002],\r\n    [0.8947, 0.309773, 0.393995],\r\n    [0.899552, 0.314616, 0.391037],\r\n    [0.904281, 0.31961, 0.388137],\r\n    [0.908884, 0.324755, 0.385308],\r\n    [0.913354, 0.330052, 0.382563],\r\n    [0.917689, 0.3355, 0.379915],\r\n    [0.921884, 0.341098, 0.377376],\r\n    [0.925937, 0.346844, 0.374959],\r\n    [0.929845, 0.352734, 0.372677],\r\n    [0.933606, 0.358764, 0.370541],\r\n    [0.937221, 0.364929, 0.368567],\r\n    [0.940687, 0.371224, 0.366762],\r\n    [0.944006, 0.377643, 0.365136],\r\n    [0.94718, 0.384178, 0.363701],\r\n    [0.95021, 0.39082, 0.362468],\r\n    [0.953099, 0.397563, 0.361438],\r\n    [0.955849, 0.4044, 0.360619],\r\n    [0.958464, 0.411324, 0.360014],\r\n    [0.960949, 0.418323, 0.35963],\r\n    [0.96331, 0.42539, 0.359469],\r\n    [0.965549, 0.432519, 0.359529],\r\n    [0.967671, 0.439703, 0.35981],\r\n    [0.96968, 0.446936, 0.360311],\r\n    [0.971582, 0.45421, 0.36103],\r\n    [0.973381, 0.46152, 0.361965],\r\n    [0.975082, 0.468861, 0.363111],\r\n    [0.97669, 0.476226, 0.364466],\r\n    [0.97821, 0.483612, 0.366025],\r\n    [0.979645, 0.491014, 0.367783],\r\n    [0.981, 0.498428, 0.369734],\r\n    [0.982279, 0.505851, 0.371874],\r\n    [0.983485, 0.51328, 0.374198],\r\n    [0.984622, 0.520713, 0.376698],\r\n    [0.985693, 0.528148, 0.379371],\r\n    [0.9867, 0.535582, 0.38221],\r\n    [0.987646, 0.543015, 0.38521],\r\n    [0.988533, 0.550446, 0.388365],\r\n    [0.989363, 0.557873, 0.391671],\r\n    [0.990138, 0.565296, 0.395122],\r\n    [0.990871, 0.572706, 0.398714],\r\n    [0.991558, 0.580107, 0.402441],\r\n    [0.992196, 0.587502, 0.406299],\r\n    [0.992785, 0.594891, 0.410283],\r\n    [0.993326, 0.602275, 0.41439],\r\n    [0.993834, 0.609644, 0.418613],\r\n    [0.994309, 0.616999, 0.42295],\r\n    [0.994738, 0.62435, 0.427397],\r\n    [0.995122, 0.631696, 0.431951],\r\n    [0.99548, 0.639027, 0.436607],\r\n    [0.99581, 0.646344, 0.441361],\r\n    [0.996096, 0.653659, 0.446213],\r\n    [0.996341, 0.660969, 0.45116],\r\n    [0.99658, 0.668256, 0.456192],\r\n    [0.996775, 0.675541, 0.461314],\r\n    [0.996925, 0.682828, 0.466526],\r\n    [0.997077, 0.690088, 0.471811],\r\n    [0.997186, 0.697349, 0.477182],\r\n    [0.997254, 0.704611, 0.482635],\r\n    [0.997325, 0.711848, 0.488154],\r\n    [0.997351, 0.719089, 0.493755],\r\n    [0.997351, 0.726324, 0.499428],\r\n    [0.997341, 0.733545, 0.505167],\r\n    [0.997285, 0.740772, 0.510983],\r\n    [0.997228, 0.747981, 0.516859],\r\n    [0.997138, 0.75519, 0.522806],\r\n    [0.997019, 0.762398, 0.528821],\r\n    [0.996898, 0.769591, 0.534892],\r\n    [0.996727, 0.776795, 0.541039],\r\n    [0.996571, 0.783977, 0.547233],\r\n    [0.996369, 0.791167, 0.553499],\r\n    [0.996162, 0.798348, 0.55982],\r\n    [0.995932, 0.805527, 0.566202],\r\n    [0.99568, 0.812706, 0.572645],\r\n    [0.995424, 0.819875, 0.57914],\r\n    [0.995131, 0.827052, 0.585701],\r\n    [0.994851, 0.834213, 0.592307],\r\n    [0.994524, 0.841387, 0.598983],\r\n    [0.994222, 0.84854, 0.605696],\r\n    [0.993866, 0.855711, 0.612482],\r\n    [0.993545, 0.862859, 0.619299],\r\n    [0.99317, 0.870024, 0.626189],\r\n    [0.992831, 0.877168, 0.633109],\r\n    [0.99244, 0.88433, 0.640099],\r\n    [0.992089, 0.89147, 0.647116],\r\n    [0.991688, 0.898627, 0.654202],\r\n    [0.991332, 0.905763, 0.661309],\r\n    [0.99093, 0.912915, 0.668481],\r\n    [0.99057, 0.920049, 0.675675],\r\n    [0.990175, 0.927196, 0.682926],\r\n    [0.989815, 0.934329, 0.690198],\r\n    [0.989434, 0.94147, 0.697519],\r\n    [0.989077, 0.948604, 0.704863],\r\n    [0.988717, 0.955742, 0.712242],\r\n    [0.988367, 0.962878, 0.719649],\r\n    [0.988033, 0.970012, 0.727077],\r\n    [0.987691, 0.977154, 0.734536],\r\n    [0.987387, 0.984288, 0.742002],\r\n    [0.987053, 0.991438, 0.749504]\r\n];\n\nconst colors$4 = [\r\n    [0.050383, 0.029803, 0.527975],\r\n    [0.063536, 0.028426, 0.533124],\r\n    [0.075353, 0.027206, 0.538007],\r\n    [0.086222, 0.026125, 0.542658],\r\n    [0.096379, 0.025165, 0.547103],\r\n    [0.10598, 0.024309, 0.551368],\r\n    [0.115124, 0.023556, 0.555468],\r\n    [0.123903, 0.022878, 0.559423],\r\n    [0.132381, 0.022258, 0.56325],\r\n    [0.140603, 0.021687, 0.566959],\r\n    [0.148607, 0.021154, 0.570562],\r\n    [0.156421, 0.020651, 0.574065],\r\n    [0.16407, 0.020171, 0.577478],\r\n    [0.171574, 0.019706, 0.580806],\r\n    [0.17895, 0.019252, 0.584054],\r\n    [0.186213, 0.018803, 0.587228],\r\n    [0.193374, 0.018354, 0.59033],\r\n    [0.200445, 0.017902, 0.593364],\r\n    [0.207435, 0.017442, 0.596333],\r\n    [0.21435, 0.016973, 0.599239],\r\n    [0.221197, 0.016497, 0.602083],\r\n    [0.227983, 0.016007, 0.604867],\r\n    [0.234715, 0.015502, 0.607592],\r\n    [0.241396, 0.014979, 0.610259],\r\n    [0.248032, 0.014439, 0.612868],\r\n    [0.254627, 0.013882, 0.615419],\r\n    [0.261183, 0.013308, 0.617911],\r\n    [0.267703, 0.012716, 0.620346],\r\n    [0.274191, 0.012109, 0.622722],\r\n    [0.280648, 0.011488, 0.625038],\r\n    [0.287076, 0.010855, 0.627295],\r\n    [0.293478, 0.010213, 0.62949],\r\n    [0.299855, 0.009561, 0.631624],\r\n    [0.30621, 0.008902, 0.633694],\r\n    [0.312543, 0.008239, 0.6357],\r\n    [0.318856, 0.007576, 0.63764],\r\n    [0.32515, 0.006915, 0.639512],\r\n    [0.331426, 0.006261, 0.641316],\r\n    [0.337683, 0.005618, 0.643049],\r\n    [0.343925, 0.004991, 0.64471],\r\n    [0.35015, 0.004382, 0.646298],\r\n    [0.356359, 0.003798, 0.64781],\r\n    [0.362553, 0.003243, 0.649245],\r\n    [0.368733, 0.002724, 0.650601],\r\n    [0.374897, 0.002245, 0.651876],\r\n    [0.381047, 0.001814, 0.653068],\r\n    [0.387183, 0.001434, 0.654177],\r\n    [0.393304, 0.001114, 0.655199],\r\n    [0.399411, 0.000859, 0.656133],\r\n    [0.405503, 0.000678, 0.656977],\r\n    [0.41158, 0.000577, 0.65773],\r\n    [0.417642, 0.000564, 0.65839],\r\n    [0.423689, 0.000646, 0.658956],\r\n    [0.429719, 0.000831, 0.659425],\r\n    [0.435734, 0.001127, 0.659797],\r\n    [0.441732, 0.00154, 0.660069],\r\n    [0.447714, 0.00208, 0.66024],\r\n    [0.453677, 0.002755, 0.66031],\r\n    [0.459623, 0.003574, 0.660277],\r\n    [0.46555, 0.004545, 0.660139],\r\n    [0.471457, 0.005678, 0.659897],\r\n    [0.477344, 0.00698, 0.659549],\r\n    [0.48321, 0.00846, 0.659095],\r\n    [0.489055, 0.010127, 0.658534],\r\n    [0.494877, 0.01199, 0.657865],\r\n    [0.500678, 0.014055, 0.657088],\r\n    [0.506454, 0.016333, 0.656202],\r\n    [0.512206, 0.018833, 0.655209],\r\n    [0.517933, 0.021563, 0.654109],\r\n    [0.523633, 0.024532, 0.652901],\r\n    [0.529306, 0.027747, 0.651586],\r\n    [0.534952, 0.031217, 0.650165],\r\n    [0.54057, 0.03495, 0.64864],\r\n    [0.546157, 0.038954, 0.64701],\r\n    [0.551715, 0.043136, 0.645277],\r\n    [0.557243, 0.047331, 0.643443],\r\n    [0.562738, 0.051545, 0.641509],\r\n    [0.568201, 0.055778, 0.639477],\r\n    [0.573632, 0.060028, 0.637349],\r\n    [0.579029, 0.064296, 0.635126],\r\n    [0.584391, 0.068579, 0.632812],\r\n    [0.589719, 0.072878, 0.630408],\r\n    [0.595011, 0.07719, 0.627917],\r\n    [0.600266, 0.081516, 0.625342],\r\n    [0.605485, 0.085854, 0.622686],\r\n    [0.610667, 0.090204, 0.619951],\r\n    [0.615812, 0.094564, 0.61714],\r\n    [0.620919, 0.098934, 0.614257],\r\n    [0.625987, 0.103312, 0.611305],\r\n    [0.631017, 0.107699, 0.608287],\r\n    [0.636008, 0.112092, 0.605205],\r\n    [0.640959, 0.116492, 0.602065],\r\n    [0.645872, 0.120898, 0.598867],\r\n    [0.650746, 0.125309, 0.595617],\r\n    [0.65558, 0.129725, 0.592317],\r\n    [0.660374, 0.134144, 0.588971],\r\n    [0.665129, 0.138566, 0.585582],\r\n    [0.669845, 0.142992, 0.582154],\r\n    [0.674522, 0.147419, 0.578688],\r\n    [0.67916, 0.151848, 0.575189],\r\n    [0.683758, 0.156278, 0.57166],\r\n    [0.688318, 0.160709, 0.568103],\r\n    [0.69284, 0.165141, 0.564522],\r\n    [0.697324, 0.169573, 0.560919],\r\n    [0.701769, 0.174005, 0.557296],\r\n    [0.706178, 0.178437, 0.553657],\r\n    [0.710549, 0.182868, 0.550004],\r\n    [0.714883, 0.187299, 0.546338],\r\n    [0.719181, 0.191729, 0.542663],\r\n    [0.723444, 0.196158, 0.538981],\r\n    [0.72767, 0.200586, 0.535293],\r\n    [0.731862, 0.205013, 0.531601],\r\n    [0.736019, 0.209439, 0.527908],\r\n    [0.740143, 0.213864, 0.524216],\r\n    [0.744232, 0.218288, 0.520524],\r\n    [0.748289, 0.222711, 0.516834],\r\n    [0.752312, 0.227133, 0.513149],\r\n    [0.756304, 0.231555, 0.509468],\r\n    [0.760264, 0.235976, 0.505794],\r\n    [0.764193, 0.240396, 0.502126],\r\n    [0.76809, 0.244817, 0.498465],\r\n    [0.771958, 0.249237, 0.494813],\r\n    [0.775796, 0.253658, 0.491171],\r\n    [0.779604, 0.258078, 0.487539],\r\n    [0.783383, 0.2625, 0.483918],\r\n    [0.787133, 0.266922, 0.480307],\r\n    [0.790855, 0.271345, 0.476706],\r\n    [0.794549, 0.27577, 0.473117],\r\n    [0.798216, 0.280197, 0.469538],\r\n    [0.801855, 0.284626, 0.465971],\r\n    [0.805467, 0.289057, 0.462415],\r\n    [0.809052, 0.293491, 0.45887],\r\n    [0.812612, 0.297928, 0.455338],\r\n    [0.816144, 0.302368, 0.451816],\r\n    [0.819651, 0.306812, 0.448306],\r\n    [0.823132, 0.311261, 0.444806],\r\n    [0.826588, 0.315714, 0.441316],\r\n    [0.830018, 0.320172, 0.437836],\r\n    [0.833422, 0.324635, 0.434366],\r\n    [0.836801, 0.329105, 0.430905],\r\n    [0.840155, 0.33358, 0.427455],\r\n    [0.843484, 0.338062, 0.424013],\r\n    [0.846788, 0.342551, 0.420579],\r\n    [0.850066, 0.347048, 0.417153],\r\n    [0.853319, 0.351553, 0.413734],\r\n    [0.856547, 0.356066, 0.410322],\r\n    [0.85975, 0.360588, 0.406917],\r\n    [0.862927, 0.365119, 0.403519],\r\n    [0.866078, 0.36966, 0.400126],\r\n    [0.869203, 0.374212, 0.396738],\r\n    [0.872303, 0.378774, 0.393355],\r\n    [0.875376, 0.383347, 0.389976],\r\n    [0.878423, 0.387932, 0.3866],\r\n    [0.881443, 0.392529, 0.383229],\r\n    [0.884436, 0.397139, 0.37986],\r\n    [0.887402, 0.401762, 0.376494],\r\n    [0.89034, 0.406398, 0.37313],\r\n    [0.89325, 0.411048, 0.369768],\r\n    [0.896131, 0.415712, 0.366407],\r\n    [0.898984, 0.420392, 0.363047],\r\n    [0.901807, 0.425087, 0.359688],\r\n    [0.904601, 0.429797, 0.356329],\r\n    [0.907365, 0.434524, 0.35297],\r\n    [0.910098, 0.439268, 0.34961],\r\n    [0.9128, 0.444029, 0.346251],\r\n    [0.915471, 0.448807, 0.34289],\r\n    [0.918109, 0.453603, 0.339529],\r\n    [0.920714, 0.458417, 0.336166],\r\n    [0.923287, 0.463251, 0.332801],\r\n    [0.925825, 0.468103, 0.329435],\r\n    [0.928329, 0.472975, 0.326067],\r\n    [0.930798, 0.477867, 0.322697],\r\n    [0.933232, 0.48278, 0.319325],\r\n    [0.93563, 0.487712, 0.315952],\r\n    [0.93799, 0.492667, 0.312575],\r\n    [0.940313, 0.497642, 0.309197],\r\n    [0.942598, 0.502639, 0.305816],\r\n    [0.944844, 0.507658, 0.302433],\r\n    [0.947051, 0.512699, 0.299049],\r\n    [0.949217, 0.517763, 0.295662],\r\n    [0.951344, 0.52285, 0.292275],\r\n    [0.953428, 0.52796, 0.288883],\r\n    [0.95547, 0.533093, 0.28549],\r\n    [0.957469, 0.53825, 0.282096],\r\n    [0.959424, 0.543431, 0.278701],\r\n    [0.961336, 0.548636, 0.275305],\r\n    [0.963203, 0.553865, 0.271909],\r\n    [0.965024, 0.559118, 0.268513],\r\n    [0.966798, 0.564396, 0.265118],\r\n    [0.968526, 0.5697, 0.261721],\r\n    [0.970205, 0.575028, 0.258325],\r\n    [0.971835, 0.580382, 0.254931],\r\n    [0.973416, 0.585761, 0.25154],\r\n    [0.974947, 0.591165, 0.248151],\r\n    [0.976428, 0.596595, 0.244767],\r\n    [0.977856, 0.602051, 0.241387],\r\n    [0.979233, 0.607532, 0.238013],\r\n    [0.980556, 0.613039, 0.234646],\r\n    [0.981826, 0.618572, 0.231287],\r\n    [0.983041, 0.624131, 0.227937],\r\n    [0.984199, 0.629718, 0.224595],\r\n    [0.985301, 0.63533, 0.221265],\r\n    [0.986345, 0.640969, 0.217948],\r\n    [0.987332, 0.646633, 0.214648],\r\n    [0.98826, 0.652325, 0.211364],\r\n    [0.989128, 0.658043, 0.2081],\r\n    [0.989935, 0.663787, 0.204859],\r\n    [0.990681, 0.669558, 0.201642],\r\n    [0.991365, 0.675355, 0.198453],\r\n    [0.991985, 0.681179, 0.195295],\r\n    [0.992541, 0.68703, 0.19217],\r\n    [0.993032, 0.692907, 0.189084],\r\n    [0.993456, 0.69881, 0.186041],\r\n    [0.993814, 0.704741, 0.183043],\r\n    [0.994103, 0.710698, 0.180097],\r\n    [0.994324, 0.716681, 0.177208],\r\n    [0.994474, 0.722691, 0.174381],\r\n    [0.994553, 0.728728, 0.171622],\r\n    [0.994561, 0.734791, 0.168938],\r\n    [0.994495, 0.74088, 0.166335],\r\n    [0.994355, 0.746995, 0.163821],\r\n    [0.994141, 0.753137, 0.161404],\r\n    [0.993851, 0.759304, 0.159092],\r\n    [0.993482, 0.765499, 0.156891],\r\n    [0.993033, 0.77172, 0.154808],\r\n    [0.992505, 0.777967, 0.152855],\r\n    [0.991897, 0.784239, 0.151042],\r\n    [0.991209, 0.790537, 0.149377],\r\n    [0.990439, 0.796859, 0.14787],\r\n    [0.989587, 0.803205, 0.146529],\r\n    [0.988648, 0.809579, 0.145357],\r\n    [0.987621, 0.815978, 0.144363],\r\n    [0.986509, 0.822401, 0.143557],\r\n    [0.985314, 0.828846, 0.142945],\r\n    [0.984031, 0.835315, 0.142528],\r\n    [0.982653, 0.841812, 0.142303],\r\n    [0.98119, 0.848329, 0.142279],\r\n    [0.979644, 0.854866, 0.142453],\r\n    [0.977995, 0.861432, 0.142808],\r\n    [0.976265, 0.868016, 0.143351],\r\n    [0.974443, 0.874622, 0.144061],\r\n    [0.97253, 0.88125, 0.144923],\r\n    [0.970533, 0.887896, 0.145919],\r\n    [0.968443, 0.894564, 0.147014],\r\n    [0.966271, 0.901249, 0.14818],\r\n    [0.964021, 0.90795, 0.14937],\r\n    [0.961681, 0.914672, 0.15052],\r\n    [0.959276, 0.921407, 0.151566],\r\n    [0.956808, 0.928152, 0.152409],\r\n    [0.954287, 0.934908, 0.152921],\r\n    [0.951726, 0.941671, 0.152925],\r\n    [0.949151, 0.948435, 0.152178],\r\n    [0.946602, 0.95519, 0.150328],\r\n    [0.944152, 0.961916, 0.146861],\r\n    [0.941896, 0.96859, 0.140956],\r\n    [0.940015, 0.975158, 0.131326]\r\n];\n\nconst colors$5 = [\r\n    [0.267004, 0.004874, 0.329415],\r\n    [0.26851, 0.009605, 0.335427],\r\n    [0.269944, 0.014625, 0.341379],\r\n    [0.271305, 0.019942, 0.347269],\r\n    [0.272594, 0.025563, 0.353093],\r\n    [0.273809, 0.031497, 0.358853],\r\n    [0.274952, 0.037752, 0.364543],\r\n    [0.276022, 0.044167, 0.370164],\r\n    [0.277018, 0.050344, 0.375715],\r\n    [0.277941, 0.056324, 0.381191],\r\n    [0.278791, 0.062145, 0.386592],\r\n    [0.279566, 0.067836, 0.391917],\r\n    [0.280267, 0.073417, 0.397163],\r\n    [0.280894, 0.078907, 0.402329],\r\n    [0.281446, 0.08432, 0.407414],\r\n    [0.281924, 0.089666, 0.412415],\r\n    [0.282327, 0.094955, 0.417331],\r\n    [0.282656, 0.100196, 0.42216],\r\n    [0.28291, 0.105393, 0.426902],\r\n    [0.283091, 0.110553, 0.431554],\r\n    [0.283197, 0.11568, 0.436115],\r\n    [0.283229, 0.120777, 0.440584],\r\n    [0.283187, 0.125848, 0.44496],\r\n    [0.283072, 0.130895, 0.449241],\r\n    [0.282884, 0.13592, 0.453427],\r\n    [0.282623, 0.140926, 0.457517],\r\n    [0.28229, 0.145912, 0.46151],\r\n    [0.281887, 0.150881, 0.465405],\r\n    [0.281412, 0.155834, 0.469201],\r\n    [0.280868, 0.160771, 0.472899],\r\n    [0.280255, 0.165693, 0.476498],\r\n    [0.279574, 0.170599, 0.479997],\r\n    [0.278826, 0.17549, 0.483397],\r\n    [0.278012, 0.180367, 0.486697],\r\n    [0.277134, 0.185228, 0.489898],\r\n    [0.276194, 0.190074, 0.493001],\r\n    [0.275191, 0.194905, 0.496005],\r\n    [0.274128, 0.199721, 0.498911],\r\n    [0.273006, 0.20452, 0.501721],\r\n    [0.271828, 0.209303, 0.504434],\r\n    [0.270595, 0.214069, 0.507052],\r\n    [0.269308, 0.218818, 0.509577],\r\n    [0.267968, 0.223549, 0.512008],\r\n    [0.26658, 0.228262, 0.514349],\r\n    [0.265145, 0.232956, 0.516599],\r\n    [0.263663, 0.237631, 0.518762],\r\n    [0.262138, 0.242286, 0.520837],\r\n    [0.260571, 0.246922, 0.522828],\r\n    [0.258965, 0.251537, 0.524736],\r\n    [0.257322, 0.25613, 0.526563],\r\n    [0.255645, 0.260703, 0.528312],\r\n    [0.253935, 0.265254, 0.529983],\r\n    [0.252194, 0.269783, 0.531579],\r\n    [0.250425, 0.27429, 0.533103],\r\n    [0.248629, 0.278775, 0.534556],\r\n    [0.246811, 0.283237, 0.535941],\r\n    [0.244972, 0.287675, 0.53726],\r\n    [0.243113, 0.292092, 0.538516],\r\n    [0.241237, 0.296485, 0.539709],\r\n    [0.239346, 0.300855, 0.540844],\r\n    [0.237441, 0.305202, 0.541921],\r\n    [0.235526, 0.309527, 0.542944],\r\n    [0.233603, 0.313828, 0.543914],\r\n    [0.231674, 0.318106, 0.544834],\r\n    [0.229739, 0.322361, 0.545706],\r\n    [0.227802, 0.326594, 0.546532],\r\n    [0.225863, 0.330805, 0.547314],\r\n    [0.223925, 0.334994, 0.548053],\r\n    [0.221989, 0.339161, 0.548752],\r\n    [0.220057, 0.343307, 0.549413],\r\n    [0.21813, 0.347432, 0.550038],\r\n    [0.21621, 0.351535, 0.550627],\r\n    [0.214298, 0.355619, 0.551184],\r\n    [0.212395, 0.359683, 0.55171],\r\n    [0.210503, 0.363727, 0.552206],\r\n    [0.208623, 0.367752, 0.552675],\r\n    [0.206756, 0.371758, 0.553117],\r\n    [0.204903, 0.375746, 0.553533],\r\n    [0.203063, 0.379716, 0.553925],\r\n    [0.201239, 0.38367, 0.554294],\r\n    [0.19943, 0.387607, 0.554642],\r\n    [0.197636, 0.391528, 0.554969],\r\n    [0.19586, 0.395433, 0.555276],\r\n    [0.1941, 0.399323, 0.555565],\r\n    [0.192357, 0.403199, 0.555836],\r\n    [0.190631, 0.407061, 0.556089],\r\n    [0.188923, 0.41091, 0.556326],\r\n    [0.187231, 0.414746, 0.556547],\r\n    [0.185556, 0.41857, 0.556753],\r\n    [0.183898, 0.422383, 0.556944],\r\n    [0.182256, 0.426184, 0.55712],\r\n    [0.180629, 0.429975, 0.557282],\r\n    [0.179019, 0.433756, 0.55743],\r\n    [0.177423, 0.437527, 0.557565],\r\n    [0.175841, 0.44129, 0.557685],\r\n    [0.174274, 0.445044, 0.557792],\r\n    [0.172719, 0.448791, 0.557885],\r\n    [0.171176, 0.45253, 0.557965],\r\n    [0.169646, 0.456262, 0.55803],\r\n    [0.168126, 0.459988, 0.558082],\r\n    [0.166617, 0.463708, 0.558119],\r\n    [0.165117, 0.467423, 0.558141],\r\n    [0.163625, 0.471133, 0.558148],\r\n    [0.162142, 0.474838, 0.55814],\r\n    [0.160665, 0.47854, 0.558115],\r\n    [0.159194, 0.482237, 0.558073],\r\n    [0.157729, 0.485932, 0.558013],\r\n    [0.15627, 0.489624, 0.557936],\r\n    [0.154815, 0.493313, 0.55784],\r\n    [0.153364, 0.497, 0.557724],\r\n    [0.151918, 0.500685, 0.557587],\r\n    [0.150476, 0.504369, 0.55743],\r\n    [0.149039, 0.508051, 0.55725],\r\n    [0.147607, 0.511733, 0.557049],\r\n    [0.14618, 0.515413, 0.556823],\r\n    [0.144759, 0.519093, 0.556572],\r\n    [0.143343, 0.522773, 0.556295],\r\n    [0.141935, 0.526453, 0.555991],\r\n    [0.140536, 0.530132, 0.555659],\r\n    [0.139147, 0.533812, 0.555298],\r\n    [0.13777, 0.537492, 0.554906],\r\n    [0.136408, 0.541173, 0.554483],\r\n    [0.135066, 0.544853, 0.554029],\r\n    [0.133743, 0.548535, 0.553541],\r\n    [0.132444, 0.552216, 0.553018],\r\n    [0.131172, 0.555899, 0.552459],\r\n    [0.129933, 0.559582, 0.551864],\r\n    [0.128729, 0.563265, 0.551229],\r\n    [0.127568, 0.566949, 0.550556],\r\n    [0.126453, 0.570633, 0.549841],\r\n    [0.125394, 0.574318, 0.549086],\r\n    [0.124395, 0.578002, 0.548287],\r\n    [0.123463, 0.581687, 0.547445],\r\n    [0.122606, 0.585371, 0.546557],\r\n    [0.121831, 0.589055, 0.545623],\r\n    [0.121148, 0.592739, 0.544641],\r\n    [0.120565, 0.596422, 0.543611],\r\n    [0.120092, 0.600104, 0.54253],\r\n    [0.119738, 0.603785, 0.5414],\r\n    [0.119512, 0.607464, 0.540218],\r\n    [0.119423, 0.611141, 0.538982],\r\n    [0.119483, 0.614817, 0.537692],\r\n    [0.119699, 0.61849, 0.536347],\r\n    [0.120081, 0.622161, 0.534946],\r\n    [0.120638, 0.625828, 0.533488],\r\n    [0.12138, 0.629492, 0.531973],\r\n    [0.122312, 0.633153, 0.530398],\r\n    [0.123444, 0.636809, 0.528763],\r\n    [0.12478, 0.640461, 0.527068],\r\n    [0.126326, 0.644107, 0.525311],\r\n    [0.128087, 0.647749, 0.523491],\r\n    [0.130067, 0.651384, 0.521608],\r\n    [0.132268, 0.655014, 0.519661],\r\n    [0.134692, 0.658636, 0.517649],\r\n    [0.137339, 0.662252, 0.515571],\r\n    [0.14021, 0.665859, 0.513427],\r\n    [0.143303, 0.669459, 0.511215],\r\n    [0.146616, 0.67305, 0.508936],\r\n    [0.150148, 0.676631, 0.506589],\r\n    [0.153894, 0.680203, 0.504172],\r\n    [0.157851, 0.683765, 0.501686],\r\n    [0.162016, 0.687316, 0.499129],\r\n    [0.166383, 0.690856, 0.496502],\r\n    [0.170948, 0.694384, 0.493803],\r\n    [0.175707, 0.6979, 0.491033],\r\n    [0.180653, 0.701402, 0.488189],\r\n    [0.185783, 0.704891, 0.485273],\r\n    [0.19109, 0.708366, 0.482284],\r\n    [0.196571, 0.711827, 0.479221],\r\n    [0.202219, 0.715272, 0.476084],\r\n    [0.20803, 0.718701, 0.472873],\r\n    [0.214, 0.722114, 0.469588],\r\n    [0.220124, 0.725509, 0.466226],\r\n    [0.226397, 0.728888, 0.462789],\r\n    [0.232815, 0.732247, 0.459277],\r\n    [0.239374, 0.735588, 0.455688],\r\n    [0.24607, 0.73891, 0.452024],\r\n    [0.252899, 0.742211, 0.448284],\r\n    [0.259857, 0.745492, 0.444467],\r\n    [0.266941, 0.748751, 0.440573],\r\n    [0.274149, 0.751988, 0.436601],\r\n    [0.281477, 0.755203, 0.432552],\r\n    [0.288921, 0.758394, 0.428426],\r\n    [0.296479, 0.761561, 0.424223],\r\n    [0.304148, 0.764704, 0.419943],\r\n    [0.311925, 0.767822, 0.415586],\r\n    [0.319809, 0.770914, 0.411152],\r\n    [0.327796, 0.77398, 0.40664],\r\n    [0.335885, 0.777018, 0.402049],\r\n    [0.344074, 0.780029, 0.397381],\r\n    [0.35236, 0.783011, 0.392636],\r\n    [0.360741, 0.785964, 0.387814],\r\n    [0.369214, 0.788888, 0.382914],\r\n    [0.377779, 0.791781, 0.377939],\r\n    [0.386433, 0.794644, 0.372886],\r\n    [0.395174, 0.797475, 0.367757],\r\n    [0.404001, 0.800275, 0.362552],\r\n    [0.412913, 0.803041, 0.357269],\r\n    [0.421908, 0.805774, 0.35191],\r\n    [0.430983, 0.808473, 0.346476],\r\n    [0.440137, 0.811138, 0.340967],\r\n    [0.449368, 0.813768, 0.335384],\r\n    [0.458674, 0.816363, 0.329727],\r\n    [0.468053, 0.818921, 0.323998],\r\n    [0.477504, 0.821444, 0.318195],\r\n    [0.487026, 0.823929, 0.312321],\r\n    [0.496615, 0.826376, 0.306377],\r\n    [0.506271, 0.828786, 0.300362],\r\n    [0.515992, 0.831158, 0.294279],\r\n    [0.525776, 0.833491, 0.288127],\r\n    [0.535621, 0.835785, 0.281908],\r\n    [0.545524, 0.838039, 0.275626],\r\n    [0.555484, 0.840254, 0.269281],\r\n    [0.565498, 0.84243, 0.262877],\r\n    [0.575563, 0.844566, 0.256415],\r\n    [0.585678, 0.846661, 0.249897],\r\n    [0.595839, 0.848717, 0.243329],\r\n    [0.606045, 0.850733, 0.236712],\r\n    [0.616293, 0.852709, 0.230052],\r\n    [0.626579, 0.854645, 0.223353],\r\n    [0.636902, 0.856542, 0.21662],\r\n    [0.647257, 0.8584, 0.209861],\r\n    [0.657642, 0.860219, 0.203082],\r\n    [0.668054, 0.861999, 0.196293],\r\n    [0.678489, 0.863742, 0.189503],\r\n    [0.688944, 0.865448, 0.182725],\r\n    [0.699415, 0.867117, 0.175971],\r\n    [0.709898, 0.868751, 0.169257],\r\n    [0.720391, 0.87035, 0.162603],\r\n    [0.730889, 0.871916, 0.156029],\r\n    [0.741388, 0.873449, 0.149561],\r\n    [0.751884, 0.874951, 0.143228],\r\n    [0.762373, 0.876424, 0.137064],\r\n    [0.772852, 0.877868, 0.131109],\r\n    [0.783315, 0.879285, 0.125405],\r\n    [0.79376, 0.880678, 0.120005],\r\n    [0.804182, 0.882046, 0.114965],\r\n    [0.814576, 0.883393, 0.110347],\r\n    [0.82494, 0.88472, 0.106217],\r\n    [0.83527, 0.886029, 0.102646],\r\n    [0.845561, 0.887322, 0.099702],\r\n    [0.85581, 0.888601, 0.097452],\r\n    [0.866013, 0.889868, 0.095953],\r\n    [0.876168, 0.891125, 0.09525],\r\n    [0.886271, 0.892374, 0.095374],\r\n    [0.89632, 0.893616, 0.096335],\r\n    [0.906311, 0.894855, 0.098125],\r\n    [0.916242, 0.896091, 0.100717],\r\n    [0.926106, 0.89733, 0.104071],\r\n    [0.935904, 0.89857, 0.108131],\r\n    [0.945636, 0.899815, 0.112838],\r\n    [0.9553, 0.901065, 0.118128],\r\n    [0.964894, 0.902323, 0.123941],\r\n    [0.974417, 0.90359, 0.130215],\r\n    [0.983868, 0.904867, 0.136897],\r\n    [0.993248, 0.906157, 0.143936]\r\n];\n\nexport { colors as blackWhite, colors$1 as cividis, colors$2 as inferno, colors$3 as magma, colors$4 as plasma, colors$5 as viridis };\n","\nimport { createColorMap, linearScale } from \"@colormap/core\";\nimport {inferno} from \"@colormap/presets\";\n\n//Make a node from a generic object\nclass Node{\n\tconstructor(originalObject,ID,index,network){\n\t\tfor (const [nodeProperty, value] of Object.entries(originalObject)) {\n\t\t\tif(nodeProperty == \"Color\"\n\t\t\t||  nodeProperty == \"Size\"\n\t\t\t||  nodeProperty == \"Position\"\n\t\t\t||  nodeProperty == \"OutlineColor\"\n\t\t\t||  nodeProperty == \"OutlineWidth\"){\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthis[nodeProperty] = value;\n\t\t}\n\t\tthis._network = network;\n\t\tthis.ID = ID;\n\t\tthis.index = index;\n\t}\n\n\tset color(newColor){\n\t\tlet nodeIndex = this.index;\n\t\tthis._network.colors[nodeIndex*4+0] = newColor[0];\n\t\tthis._network.colors[nodeIndex*4+1] = newColor[1];\n\t\tthis._network.colors[nodeIndex*4+2] = newColor[2];\n\t\tif(newColor.length > 3){\n\t\t\tthis._network.colors[nodeIndex*4+3] = newColor[3];\n\t\t}\n\t}\n\n\tget color(){\n\t\tlet nodeIndex = this.index;\n\t\treturn [this._network.colors[nodeIndex*4+0],this._network.colors[nodeIndex*4+1],this._network.colors[nodeIndex*4+2],this._network.colors[nodeIndex*4+3]];\n\t}\n\n\n\tset opacity(newOpacity){\n\t\tlet nodeIndex = this.index;\n\t\tthis._network.colors[nodeIndex*4+3] = newOpacity;\n\t}\n\n\tget opacity(){\n\t\tlet nodeIndex = this.index;\n\t\treturn this._network.colors[nodeIndex*4+3];\n\t}\n\n\n\tset size(newSize){\n\t\tthis._network.sizes[this.index] = newSize;\n\t}\n\n\tget size(){\n\t\treturn this._network.sizes[this.index];\n\t}\n\n\tset outlineColor(newColor){\n\t\tlet nodeIndex = this.index;\n\t\tthis._network.outlineColors[nodeIndex*4+0] = newColor[0];\n\t\tthis._network.outlineColors[nodeIndex*4+1] = newColor[1];\n\t\tthis._network.outlineColors[nodeIndex*4+2] = newColor[2];\n\t\tif(newColor.length > 3){\n\t\t\tthis._network.outlineColors[nodeIndex*4+3] = newColor[3];\n\t\t}\n\t}\n\n\tget outlineColor(){\n\t\tlet nodeIndex = this.index;\n\t\treturn [this._network.outlineColors[nodeIndex*4+0],this._network.outlineColors[nodeIndex*4+1],this._network.outlineColors[nodeIndex*4+2],this._network.outlineColors[nodeIndex*4+3]];\n\t}\n\n\tset outlineWidth(newWidth){\n\t\tthis._network.outlineWidths[this.index] = newWidth;\n\t}\n\n\tget outlineWidth(){\n\t\treturn this._network.outlineWidths[this.index];\n\t}\n\n\tget network(){\n\t\treturn this._network;\n\t}\n\n\tset position(newPosition){\n\t\tlet nodeIndex = this.index;\n\t\tthis._network.positions[nodeIndex*3+0] = newPosition[0];\n\t\tthis._network.positions[nodeIndex*3+1] = newPosition[1];\n\t\tthis._network.positions[nodeIndex*3+2] = newPosition[2];\n\t}\n\tget position(){\n\t\tlet nodeIndex = this.index;\n\t\treturn [this._network.positions[nodeIndex*3+0],this._network.positions[nodeIndex*3+1],this._network.positions[nodeIndex*3+2]];\n\t}\n}\n\n\n\nexport class Network{\n\tconstructor(nodes, edges, directed = false, weighted = false){\n\t\tthis.ID2index = new Object();\n\t\tthis.indexedNodes = [];\n\t\t// DEPRECATED: Changed to index2Node kept for backwards compatibility\n\t\tthis.index2Node = this.indexedNodes;\n\t\tthis.directed = directed;\n\t\t// weighted defined if edge.weight is present\n\t\tif(edges.length > 0 && edges[0].hasOwnProperty(\"weight\")){\n\t\t\tthis.weighted = true;\n\t\t}\n\t\tfor (const [nodeID, node] of Object.entries(nodes)) {\n\t\t\tif(!this.ID2index.hasOwnProperty(nodeID)){\n\t\t\t\tlet nodeIndex = this.indexedNodes.length;\n\t\t\t\tthis.ID2index[nodeID] = nodeIndex;\n\t\t\t\tnode.index = nodeIndex;\n\t\t\t\tnode.ID = nodeID;\n\t\t\t\tthis.indexedNodes.push(node);\n\t\t\t\tnode.neighbors = [];\n\t\t\t\tnode.edges = [];\n\t\t\t}\n\t\t}\n\n\t\tthis.indexedEdges = new Int32Array(edges.length*2);\n\t\tthis.edgeWeights = new Float32Array(edges.length);\n\t\tthis.edgeAttributes = {};\n\t\t\n\t\tfor (let edgeIndex = 0; edgeIndex < edges.length; edgeIndex++) {\n\t\t\tconst edge = edges[edgeIndex];\n\t\t\t// console.log(this.indexedNodes)\n\t\t\tlet fromIndex =this.ID2index[edge.source];\n\t\t\tlet toIndex = this.ID2index[edge.target];\n\t\t\t// let fromNode = this.indexedNodes[fromIndex];\n\t\t\t// let toNode = this.indexedNodes[toIndex];\n\t\t\tthis.indexedEdges[edgeIndex*2] = fromIndex;\n\t\t\tthis.indexedEdges[edgeIndex*2+1] = toIndex;\n\t\t\tif(this.weighted){\n\t\t\t\tthis.edgeWeights[edgeIndex] = edge.weight;\n\t\t\t}\n\t\t\tfor (const [edgeProperty, value] of Object.entries(edge)) {\n\t\t\t\tif(edgeProperty == \"source\" || edgeProperty == \"target\" || edgeProperty == \"weight\"){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif(!this.edgeAttributes.hasOwnProperty(edgeProperty)){\n\t\t\t\t\tthis.edgeAttributes[edgeProperty] = new Array(edges.length);\n\t\t\t\t}\n\t\t\t\tthis.edgeAttributes[edgeProperty][edgeIndex] = value;\n\t\t\t}\n\t\t}\n\n\t\tthis.positions = new Float32Array(3*this.indexedNodes.length);\n\t\tthis.colors = new Float32Array(4*this.indexedNodes.length);\n\t\tthis.sizes = new Float32Array(this.indexedNodes.length);\n\t\tthis.outlineColors = new Float32Array(4*this.indexedNodes.length);\n\t\t//set intensities to 1.0\n\t\tfor (let nodeIndex=0; nodeIndex<this.indexedNodes.length;nodeIndex++){\n\t\t\tthis.colors[nodeIndex*4+3] = 1.0;\n\t\t\tthis.outlineColors[nodeIndex*4+3] = 1.0;\n\t\t}\n\n\t\tthis.outlineWidths = new Float32Array(this.indexedNodes.length);\n\t\t\n\t\tthis.edgePositions = null; //new Float32Array(3*this.indexedEdges.length);\n\t\tthis.edgeColors = null; //new Float32Array(3*this.indexedEdges.length);\n\t\tthis.edgeSizes = null; //new Float32Array(this.indexedEdges.length);\n\t\t// this.intensities = new Float32Array(this.indexedEdges.length);\n\t\t// this.outlineColors = new Float32Array(3*this.indexedEdges.length);\n\t\t// this.outlineWidths = new Float32Array(this.indexedEdges.length);\n\n\t\t// for (let index = 0; index < this.positions.length; index++) {\n\t\t//   this.positions[index] = (Math.random()-0.5)*2*200;\n\t\t//   this.colors[index] = Math.random()*0.8+0.2;\n\t\t// }\n\n\t\tthis.nodes = {}\n\t\t\n\t\tlet colorScale = linearScale([0, this.indexedNodes.length], [0, 1]);\n\t\tlet colorMap = createColorMap(inferno, colorScale);\n\t\tfor (let index = 0; index < this.indexedNodes.length; index++) {\n\t\t\tlet node = this.indexedNodes[index];\n\t\t\tif(node.hasOwnProperty(\"Position\")){\n\t\t\t\tthis.positions[index*3]   = node[\"Position\"][0];\n\t\t\t\tthis.positions[index*3+1] = node[\"Position\"][1];\n\t\t\t\tthis.positions[index*3+2] = node[\"Position\"][2];\n\t\t\t}else{\n\t\t\t\tif(node.hasOwnProperty(\"posx\") && node.hasOwnProperty(\"posy\")){\n\t\t\t\t\tthis.positions[index*3]   = node[\"posx\"];\n\t\t\t\t\tthis.positions[index*3+1] = node[\"posy\"];\n\t\t\t\t\tif(node.hasOwnProperty(\"posz\")){\n\t\t\t\t\t\tthis.positions[index*3+2] = node[\"posz\"];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.positions[index*3+2] = 0;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.positions[index*3+0] = (Math.random()-0.5)*2*200;\n\t\t\t\t\tthis.positions[index*3+1] = (Math.random()-0.5)*2*200;\n\t\t\t\t\tthis.positions[index*3+2] = (Math.random()-0.5)*2*200;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(node.hasOwnProperty(\"Color\")){\n\t\t\t\tif(index==0){\n\t\t\t\t\tconsole.log(\"NODE COLOR:\",node[\"Color\"])\n\t\t\t\t}\n\t\t\t\tthis.colors[index*4+0] = node[\"Color\"][0];\n\t\t\t\tthis.colors[index*4+1] = node[\"Color\"][1];\n\t\t\t\tthis.colors[index*4+2] = node[\"Color\"][2];\n\t\t\t\tif(node[\"Color\"].length > 3){\n\t\t\t\t\tthis.colors[index*4+3] = node[\"Color\"][3];\n\t\t\t\t}else{\n\t\t\t\t\tthis.colors[index*4+3]=1.0;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tlet color = colorMap(index);\n\t\t\t\tthis.colors[index*4+0] = color[0];\n\t\t\t\tthis.colors[index*4+1] = color[1];\n\t\t\t\tthis.colors[index*4+2] = color[2];\n\t\t\t\tif(color.length > 3){\n\t\t\t\t\tthis.colors[index*4+3] = color[3];\n\t\t\t\t}else{\n\t\t\t\t\tthis.colors[index*4+3]=1.0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(node.hasOwnProperty(\"Size\")){\n\t\t\t\tthis.sizes[index] = node[\"Size\"];\n\t\t\t}else{\n\t\t\t\tthis.sizes[index] = 1.0;\n\t\t\t}\n\n\t\t\tif(node.hasOwnProperty(\"OutlineColor\")){\n\t\t\t\tthis.outlineColors[index*4+0] = node[\"OutlineColor\"][0];\n\t\t\t\tthis.outlineColors[index*4+1] = node[\"OutlineColor\"][1];\n\t\t\t\tthis.outlineColors[index*4+2] = node[\"OutlineColor\"][2];\n\t\t\t\tif(node[\"OutlineColor\"].length > 3){\n\t\t\t\t\tthis.outlineColors[index*4+3] = node[\"OutlineColor\"][3];\n\t\t\t\t}else{\n\t\t\t\t\tthis.outlineColors[index*4+3]=1.0;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.outlineColors[index*4+0] = 1.0;\n\t\t\t\tthis.outlineColors[index*4+1] = 1.0;\n\t\t\t\tthis.outlineColors[index*4+2] = 1.0;\n\t\t\t\tthis.outlineColors[index*4+3] = 1.0;\n\t\t\t}\n\n\t\t\tif(node.hasOwnProperty(\"OutlineWidth\")){\n\t\t\t\tthis.outlineWidths[index] = node[\"OutlineWidth\"];\n\t\t\t}else{\n\t\t\t\tthis.outlineWidths[index] = 0.0;\n\t\t\t}\n\n\t\t\tlet newNode = new Node(node,node.ID,index,this);\n\t\t\tthis.indexedNodes[index] = newNode;\n\t\t\tthis.nodes[node.ID] = newNode;\n\t\t}\n\t\tfor (let edgeIndex = 0; edgeIndex < edges.length; edgeIndex++) {\n\t\t\tconst edge = edges[edgeIndex];\n\t\t\t// console.log(this.indexedNodes)\n\t\t\tlet fromIndex =this.ID2index[edge.source];\n\t\t\tlet toIndex = this.ID2index[edge.target];\n\t\t\tlet fromNode = this.indexedNodes[fromIndex];\n\t\t\tlet toNode = this.indexedNodes[toIndex];\n\t\t\tfromNode.neighbors.push(toNode);\n\t\t\tfromNode.edges.push(edgeIndex);\n\t\t\tif(!this.directed){\n\t\t\t\ttoNode.neighbors.push(fromNode);\n\t\t\t\ttoNode.edges.push(edgeIndex);\n\t\t\t}\n\t\t}\n\n\t\t// if weighted make edgeSizes proportional\n\t\tif(this.weighted){\n\t\t\tif (this.edgeSizes == null) {\n\t\t\t\tthis.edgeSizes = new Float32Array(this.indexedEdges.length);\n\t\t\t}\n\t\t\tlet edgeWeights = this.edgeWeights;\n\t\t\tlet edgeSizes = this.edgeSizes;\n\t\t\tlet maxWeight = -Infinity;\n\t\t\tfor (let i = 0; i < edgeWeights.length; i++) {\n\t\t\t  if (edgeWeights[i] > maxWeight) {\n\t\t\t\tmaxWeight = edgeWeights[i];\n\t\t\t  }\n\t\t\t}\n\t\t\tfor (let edgeIndex = 0; edgeIndex < edgeWeights.length; edgeIndex++) {\n\t\t\t\tedgeSizes[edgeIndex*2] = edgeWeights[edgeIndex]/maxWeight;\n\t\t\t\tedgeSizes[edgeIndex*2+1] = edgeWeights[edgeIndex]/maxWeight;\n\n\t\t\t}\n\t\t}\n\t}\n\n\tget nodeCount(){\n\t\treturn this.indexedNodes.length;\n\t}\n\n\tupdateEdgePositions() {\n\t\tif (this.edgePositions == null) {\n\t\t\tthis.edgePositions = new Float32Array(3 * this.indexedEdges.length);\n\t\t}\n\t\n\t\tconst edgesLength = this.indexedEdges.length;\n\t\tconst nodePositions = this.positions;\n\t\tconst edgePositions = this.edgePositions;\n\t\tconst indexedEdges = this.indexedEdges;\n\t\tfor (let edgeIndex = 0; edgeIndex < edgesLength / 2; edgeIndex++) {\n\t\t\tconst fromIndex = indexedEdges[edgeIndex * 2] * 3;\n\t\t\tconst toIndex = indexedEdges[edgeIndex * 2 + 1] * 3;\n\t\t\tconst edgeFromPositionIndex = edgeIndex * 6;\n\t\t\tconst edgeToPositionIndex = edgeFromPositionIndex + 3;\n\t\n\t\t\tedgePositions[edgeFromPositionIndex] = nodePositions[fromIndex];\n\t\t\tedgePositions[edgeFromPositionIndex + 1] = nodePositions[fromIndex + 1];\n\t\t\tedgePositions[edgeFromPositionIndex + 2] = nodePositions[fromIndex + 2];\n\t\n\t\t\tedgePositions[edgeToPositionIndex] = nodePositions[toIndex];\n\t\t\tedgePositions[edgeToPositionIndex + 1] = nodePositions[toIndex + 1];\n\t\t\tedgePositions[edgeToPositionIndex + 2] = nodePositions[toIndex + 2];\n\t\t}\n\t}\n\t\n\tupdateEdgeColors(updateOpacity = true) {\n\t\tif (this.edgeColors == null) {\n\t\t\tthis.edgeColors = new Float32Array(4 * this.indexedEdges.length);\n\t\t}\n\t\n\t\tconst edgesLength = this.indexedEdges.length;\n\t\tconst edgeColors = this.edgeColors;\n\t\tconst nodeColors = this.colors;\n\t\tconst indexedEdges = this.indexedEdges;\n\t\tfor (let edgeIndex = 0; edgeIndex < edgesLength / 2; edgeIndex++) {\n\t\t\tconst fromIndex = indexedEdges [edgeIndex * 2] * 4;\n\t\t\tconst toIndex = indexedEdges [edgeIndex * 2 + 1] * 4;\n\t\t\tconst edgeFromColorIndex = edgeIndex * 8;\n\t\t\tconst edgeToColorIndex = edgeFromColorIndex + 4;\n\t\n\t\t\tedgeColors[edgeFromColorIndex]     = nodeColors[fromIndex];\n\t\t\tedgeColors[edgeFromColorIndex + 1] = nodeColors[fromIndex + 1];\n\t\t\tedgeColors[edgeFromColorIndex + 2] = nodeColors[fromIndex + 2];\n\t\n\t\t\tedgeColors[edgeToColorIndex]     = nodeColors[toIndex];\n\t\t\tedgeColors[edgeToColorIndex + 1] = nodeColors[toIndex + 1];\n\t\t\tedgeColors[edgeToColorIndex + 2] = nodeColors [toIndex + 2];\n\t\n\t\t\tif (updateOpacity) {\n\t\t\t\tedgeColors[edgeFromColorIndex + 3] = nodeColors[fromIndex + 3];\n\t\t\t\tedgeColors[edgeToColorIndex + 3] = nodeColors[toIndex + 3];\n\t\t\t}\n\t\t}\n\t}\n\t\n\tupdateEdgeSizes() {\n\t\t// console.log(\"UPDATING EDGE SIZES...\");\n\t\tif (this.edgeSizes == null) {\n\t\t\tthis.edgeSizes = new Float32Array(this.indexedEdges.length);\n\t\t}\n\t\n\t\tconst edgesLength = this.indexedEdges.length;\n\t\tconst edgeSizes  = this.edgeSizes;\n\t\tconst nodeSizes = this.sizes;\n\t\tconst indexedEdges = this.indexedEdges;\n\t\tfor (let edgeIndex = 0; edgeIndex < edgesLength / 2; edgeIndex++) {\n\t\t\tconst fromIndex = indexedEdges[edgeIndex * 2];\n\t\t\tconst toIndex = indexedEdges[edgeIndex * 2 + 1];\n\t\t\tedgeSizes[edgeIndex * 2] = nodeSizes[fromIndex];\n\t\t\tedgeSizes[edgeIndex * 2 + 1] = nodeSizes[toIndex];\n\t\t}\n\t}\n\t\n\n\n\tupdateEdgeOpacity() {\n\t\tif (this.edgeColors == null) {\n\t\t\tthis.edgeColors = new Float32Array(4 * this.indexedEdges.length);\n\t\t}\n\t\n\t\tconst edgesLength = this.indexedEdges.length;\n\t\tconst edgeColors = this.edgeColors;\n\t\tconst nodeColors = this.colors;\n\t\tconst indexedEdges = this.indexedEdges;\n\t\tfor (let edgeIndex = 0; edgeIndex < edgesLength / 2; edgeIndex++) {\n\t\t\tconst fromIndex = indexedEdges[edgeIndex * 2] * 4;\n\t\t\tconst toIndex = indexedEdges[edgeIndex * 2 + 1] * 4;\n\t\t\tedgeColors[edgeIndex * 8 + 3] = nodeColors[fromIndex + 3];\n\t\t\tedgeColors[edgeIndex * 8 + 7] = nodeColors[toIndex + 3];\n\t\t}\n\t}\n\t\n\tedgeAttribute(attributeName, value){\n\t\t// Get or set the following attribute to all edges in the network, if value is function call it for each edge\n\t\tconst edges = this.indexedEdges;\n\t\tif(value === undefined){\n\t\t\t// Get attribute for all edges in network\n\t\t\treturn this.edgeAttributes[attributeName];\n\t\t} else {\n\t\t\t// Set attribute for all edges in network\n\t\t\tif(typeof value === \"function\"){\n\t\t\t\tfor(let i = 0; i < edges.length; i++){\n\t\t\t\t\tconst edgeIndex = edges[i];\n\t\t\t\t\tthis.edgeAttributes[attributeName][edgeIndex] = value(this.edgeAttributes[attributeName][edgeIndex]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor(let i = 0; i < edges.length; i++){\n\t\t\t\t\tconst edgeIndex = edges[i];\n\t\t\t\t\tthis.edgeAttributes[attributeName][edgeIndex] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this; // For chaining\n\t}\n\n\tmapEdges(attributeName, visualAttribute, transformFunction){\n\t\t// Map the edges to a visual attribute based on the attribute name\n\t\t// The transform function will be passed the attribute value and should return the visual attribute value\n\t\tif(!this.edgeAttributes.hasOwnProperty(attributeName)){\n\t\t\tthrow new Error(`Attribute ${attributeName} does not exist`);\n\t\t}\n\t\tif(visualAttribute == \"color\"){\n\t\t\tthis.edgeColors = new Float32Array(4*this.indexedEdges.length);\n\t\t\tconst edgeColors = this.edgeColors;\n\t\t\tconst edgeAttributes = this.edgeAttributes[attributeName];\n\t\t\tfor(let edgeIndex = 0; edgeIndex < this.indexedEdges.length/2; edgeIndex++){\n\t\t\t\tconst attributeValue = edgeAttributes[edgeIndex];\n\t\t\t\tconst visualAttributeValue = transformFunction(attributeValue);\n\t\t\t\tedgeColors[edgeIndex*4*2+0] = visualAttributeValue[0];\n\t\t\t\tedgeColors[edgeIndex*4*2+1] = visualAttributeValue[1];\n\t\t\t\tedgeColors[edgeIndex*4*2+2] = visualAttributeValue[2];\n\t\t\t\t\n\t\t\t\tedgeColors[edgeIndex*4*2+4] = visualAttributeValue[0];\n\t\t\t\tedgeColors[edgeIndex*4*2+5] = visualAttributeValue[1];\n\t\t\t\tedgeColors[edgeIndex*4*2+6] = visualAttributeValue[2];\n\n\n\t\t\t\tif(visualAttributeValue.length > 3){\n\t\t\t\t\tedgeColors[edgeIndex*4*2+3] = visualAttributeValue[3];\n\t\t\t\t\tedgeColors[edgeIndex*4*2+7] = visualAttributeValue[3];\n\t\t\t\t}else{\n\t\t\t\t\tedgeColors[edgeIndex*4*2+3]=1.0;\n\t\t\t\t\tedgeColors[edgeIndex*4*2+7]=1.0;\n\t\t\t\t}\n\t\t\t}\n\t\t}else if(visualAttribute == \"size\" || visualAttribute == \"width\"){\n\t\t\tthis.edgeSizes = new Float32Array(this.indexedEdges.length);\n\t\t\tconst edgeSizes = this.edgeSizes;\n\t\t\tconst edgeAttributes = this.edgeAttributes[attributeName];\n\t\t\tfor(let edgeIndex = 0; edgeIndex < this.indexedEdges.length/2; edgeIndex++){\n\t\t\t\tconst attributeValue = edgeAttributes[edgeIndex];\n\t\t\t\tconst visualAttributeValue = transformFunction(attributeValue);\n\t\t\t\tedgeSizes[edgeIndex*2] = visualAttributeValue;\n\t\t\t\tedgeSizes[edgeIndex*2+1] = visualAttributeValue;\n\t\t\t}\n\t\t}else if(visualAttribute == \"opacity\"){\n\t\t\tthis.edgeColors = new Float32Array(4*this.indexedEdges.length);\n\t\t\tconst edges = this.indexedEdges;\n\t\t\tconst edgeColors = this.edgeColors;\n\t\t\tconst edgeAttributes = this.edgeAttributes[attributeName];\n\t\t\tfor(let edgeIndex = 0; edgeIndex < this.indexedEdges.length/2; edgeIndex++){\n\t\t\t\tconst attributeValue = edgeAttributes[edgeIndex];\n\t\t\t\tconst visualAttributeValue = transformFunction(attributeValue);\n\t\t\t\tedgeColors[edgeIndex*4*2+3] = visualAttributeValue;\n\t\t\t\tedgeColors[edgeIndex*4*2+7] = visualAttributeValue;\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tthrow new Error(`Visual attribute ${visualAttribute} is not supported`);\n\t\t}\n\t\treturn this; // For chaining\n\t}\n}\n\n\n// Create a class for a Node Selector\nclass NodeSelector{\n\tconstructor(network,{nodeIndices = [], nodeIDs = []}){ //NodeIndices or nodeIDs, not both\n\t\tthis._network = network;\n\t\t// Check if nodeIndices and nodeIDs are provided\n\t\tif(nodeIndices.length > 0 && nodeIDs.length > 0){\n\t\t\tthrow new Error(\"NodeSelector can only be initialized with nodeIndices or nodeIDs, not both\");\n\t\t}\n\t\tthis._nodeIndices = nodeIndices;\n\t\tif(nodeIDs.length > 0){\n\t\t\tthis._nodeIndices = nodeIDs.map(id => this._network.ID2index[id]);\n\t\t}\n\t}\n\n\tincludeNodeID(nodeID){\n\t\tthis._nodeIndices.push(this._network.ID2index[nodeID]);\n\t}\n\n\tincludeNode(node){\n\t\tthis._nodeIndices.push(node.index);\n\t}\n\n\tincludeNodeIndex(nodeIndex){\n\t\tthis._nodeIndices.push(nodeIndex);\n\t}\n\n\tfilter(selectorFunction){\n\t\t// will select a subset of the nodes based on a function\n\t\t// the function will be passed a node object and should return true or false\n\n\t\tconst nodes = this._network.nodes;\n\t\tconst nodeIndices = this._nodeIndices;\n\t\tconst selectedNodeIndices = [];\n\t\tfor(let i = 0; i < nodeIndices.length; i++){\n\t\t\tconst nodeIndex = nodeIndices[i];\n\t\t\tif(selectorFunction(nodes[nodeIndex])){\n\t\t\t\tselectedNodeIndices.push(nodeIndex);\n\t\t\t}\n\t\t}\n\t\treturn new NodeSelector(this._network,{nodeIndices: selectedNodeIndices});\n\t}\n\n\tselectFromAttributes(attributeNames, selectorFunction){\n\t\t// Use a list of attributes that will be passed to selectorFunction to check if a node should be selected or not\n\t\t// selectorFunction will be passed an object with the attributes as properties\n\n\t\tconst nodes = this._network.nodes;\n\t\tconst nodeIndices = this._nodeIndices;\n\t\tconst selectedNodeIndices = [];\n\t\tfor(let i = 0; i < nodeIndices.length; i++){\n\t\t\tconst nodeIndex = nodeIndices[i];\n\t\t\tconst node = nodes[nodeIndex];\n\t\t\tconst nodeAttributes = {};\n\t\t\tfor(let j = 0; j < attributeNames.length; j++){\n\t\t\t\tconst attributeName = attributeNames[j];\n\t\t\t\tnodeAttributes[attributeName] = node[attributeName];\n\t\t\t}\n\t\t\tif(selectorFunction(nodeAttributes)){\n\t\t\t\tselectedNodeIndices.push(nodeIndex);\n\t\t\t}\n\t\t}\n\t\treturn new NodeSelector(this._network,{nodeIndices: selectedNodeIndices});\n\t}\n\n\tget indices (){\n\t\treturn this._nodeIndices;\n\t}\n\n\tget nodes(){\n\t\treturn this._nodeIndices.map(nodeIndex => this._network.nodes[nodeIndex]);\n\t}\n\n\tget nodeIDs(){\n\t\treturn this._nodeIndices.map(nodeIndex => this._network.nodes[nodeIndex].ID);\n\t}\n\n\tnodeAttribute(attributeName, value){\n\t\t// Get or set the following attribute to all nodes in the selector, if value is function call it for each node\n\t\tconst nodes = this._network.nodes;\n\t\tconst nodeIndices = this._nodeIndices;\n\t\tif(value === undefined){\n\t\t\t// Get attribute for all nodes in selector\n\t\t\tconst attributeValues = [];\n\t\t\tfor(let i = 0; i < nodeIndices.length; i++){\n\t\t\t\tconst nodeIndex = nodeIndices[i];\n\t\t\t\tattributeValues.push(nodes[nodeIndex][attributeName]);\n\t\t\t}\n\t\t\treturn attributeValues;\n\t\t} else {\n\t\t\t// Set attribute for all nodes in selector\n\t\t\tif(typeof value === \"function\"){\n\t\t\t\tfor(let i = 0; i < nodeIndices.length; i++){\n\t\t\t\t\tconst nodeIndex = nodeIndices[i];\n\t\t\t\t\tnodes[nodeIndex][attributeName] = value(nodes[nodeIndex]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor(let i = 0; i < nodeIndices.length; i++){\n\t\t\t\t\tconst nodeIndex = nodeIndices[i];\n\t\t\t\t\tnodes[nodeIndex][attributeName] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this; // For chaining\n\t}\n}\n\n\n\n\n\n","\n\n// //dictionary\nexport class HeliosScheduler {\n\tconstructor(helios, { FPS = 60, throttle = true, maxQueueLength = 10 }) {\n\t\t// TODO: Check if Weakref is needed\n\t\tthis.helios = helios;\n\t\tthis.needsRender = false;\n\t\tthis.needsUpdateNodesGeometry = false;\n\t\tthis.needsUpdateEdgesGeometry = false;\n\t\tthis._FPS = FPS;\n\t\tthis._throttle = throttle; // will throttle to the requested FPS\n\t\tthis._maxQueueLength = maxQueueLength;\n\t\tthis._started = false;\n\t\tthis._paused = true;\n\t\tthis._lastFPS = 0;\n\t\tthis._averageFPS = 0;\n\t\tthis._tasks = {};\n\t\tthis._executionCount = 0,\n\t\tthis._lastTimestamp = null,\n\t\tthis._currentTimestamp = null,\n\t\tthis._lastExecutionTimestamp = null,\n\t\tthis._lastRequestFrameID = 0;\n\t\tthis._timeout = null;\n\t\tthis._times = [];\n\t\tthis._lastRepeatInterval = 0;\n\t\tthis._shouldCleanup = false;\n\t}\n\n\tFPS(value) {\n\t\tif (value === undefined) {\n\t\t\treturn this.FPS;\n\t\t}\n\t\tthis.FPS = value;\n\t\treturn this;\n\t}\n\n\tschedule({\n\t\tname = \"default\",\n\t\tcallback = null,\n\t\tdelay = 0,\n\t\trepeat = false,\n\t\tmaxRepeatCount = Infinity,\n\t\tmaxRepeatTime = Infinity,\n\t\trepeatInterval = 0,\n\t\tsynchronized = true,\n\t\timmediateUpdates = false,\n\t\tupdateNodesGeometry = false,\n\t\tupdateEdgesGeometry = false,\n\t\tafterRedraw = false,\n\t\tredraw = true,\n\t\treplace = true\n\t}) {\n\n\t\tlet newTask = {\n\t\t\tname,\n\t\t\tcallback,\n\t\t\tdelay,\n\t\t\trepeat,\n\t\t\tmaxRepeatCount,\n\t\t\tmaxRepeatTime,\n\t\t\trepeatInterval,\n\t\t\tsynchronized,\n\t\t\timmediateUpdates,\n\t\t\tupdateNodesGeometry,\n\t\t\tupdateEdgesGeometry,\n\t\t\tafterRedraw,\n\t\t\tredraw,\n\t\t\treplace,\n\t\t\texecutionCount: 0,\n\t\t\tlastTimestamp: window.performance.now(),\n\t\t\tlastExecutionTime: 0,\n\t\t\tshouldBeRemoved: false,\n\t\t\tcancel: function () {\n\t\t\t\tthis.shouldBeRemoved = true;\n\t\t\t\tif (!this.synchronized) {\n\t\t\t\t\tclearTimeout(this._timeout)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!(name in this._tasks)) {\n\t\t\tthis._tasks[name] = [];\n\t\t}\n\n\t\tif (replace) {\n\t\t\tthis._clearTask(name);\n\t\t}\n\n\t\tif (!synchronized) {\n\t\t\tthis.runAsyncTask(newTask, newTask.delay);\n\t\t}\n\n\t\tthis._addTaskToQueue(newTask, name);\n\n\t\tif (this._paused && this._started) {\n\t\t\tthis._updateTimeout();\n\t\t}\n\t\treturn this;\n\t}\n\n\trunAsyncTask(newTask, delay = 0) {\n\t\tthis._executionCount+=1;\n\t\tnewTask.timeout = setTimeout(() => {\n\t\t\tif (newTask.shouldBeRemoved) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet currentTimestamp = window.performance.now();\n\t\t\tlet elapsedTime = currentTimestamp - newTask.lastTimestamp;\n\t\t\tnewTask.callback?.(elapsedTime, newTask);\n\t\t\tnewTask.executionCount += 1;\n\t\t\tif (newTask.immediateUpdates) {\n\t\t\t\tthis._updateHelios(newTask.needsRender, newTask.needsUpdateNodesGeometry, newTask.needsUpdateEdgesGeometry);\n\t\t\t} else {\n\t\t\t\tif (newTask.redraw) {\n\t\t\t\t\tthis.needsRender = true;\n\t\t\t\t}\n\t\t\t\tif (newTask.updateNodesGeometry) {\n\t\t\t\t\tthis.needsUpdateNodesGeometry = true;\n\t\t\t\t}\n\t\t\t\tif (newTask.updateEdgesGeometry) {\n\t\t\t\t\tthis.needsUpdateEdgesGeometry = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (newTask.repeat) {\n\t\t\t\tlet newCurrentTimestamp = window.performance.now();\n\t\t\t\tnewTask.lastExecutionTime = newCurrentTimestamp - currentTimestamp;\n\t\t\t\tnewTask.lastTimestamp = currentTimestamp;\n\t\t\t\tlet repeatInterval = newTask.repeatInterval - (newCurrentTimestamp - currentTimestamp)\n\t\t\t\tif (repeatInterval < 0) {\n\t\t\t\t\trepeatInterval = 0;\n\t\t\t\t}\n\t\t\t\tif (newTask.executionCount >= newTask.maxRepeatCount) {\n\t\t\t\t\tnewTask.shouldBeRemoved = true;\n\t\t\t\t}else{\n\t\t\t\t\tthis.runAsyncTask(newTask, repeatInterval);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewTask.shouldBeRemoved = true;\n\t\t\t}\n\t\t\tif(this._started && this._paused){\n\t\t\t\tthis._updateTimeout();\n\t\t\t}\n\t\t}, delay);\n\t}\n\n\t_executeTask(task,elapsedTime,currentTimestamp){\n\t\t// console.log(\"Executing \"+task.name+\" task at iteration \"+task.executionCount+\"\")\n\t\ttask.callback?.(elapsedTime, task);\n\t\tif(task === undefined){\n\t\t\treturn false;\n\t\t}\n\t\ttask.executionCount += 1;\n\t\tif (task.repeat && task.executionCount < task.maxRepeatCount) {\n\t\t\tlet newCurrentTimestamp = window.performance.now();\n\t\t\ttask.lastExecutionTime = newCurrentTimestamp - currentTimestamp;\n\t\t\ttask.lastTimestamp = currentTimestamp;\n\t\t} else {\n\t\t\ttask.shouldBeRemoved = true;\n\t\t}\n\t\treturn true;\n\t}\n\n\trunSyncTasks() {\n\t\tif(this._shouldCleanup){\n\t\t\treturn;\n\t\t}\n\t\tthis._executionCount+=1;\n\t\tlet afterRedrawTasks = [];\n\t\tlet allTasksCurrentTimestamp = window.performance.now();\n\t\tfor (let taskName of Object.keys(this._tasks).sort()) {\n\t\t\tlet task = this._tasks[taskName];\n\t\t\tfor (let i = 0; i < task.length; i++) {\n\t\t\t\tif(task[i].synchronized || !task[i].immediateUpdates){\n\t\t\t\t\tif(task[i].redraw){\n\t\t\t\t\t\tthis.needsRender = true;\n\t\t\t\t\t}\n\t\t\t\t\tif(task[i].updateNodesGeometry){\n\t\t\t\t\t\tthis.needsUpdateNodesGeometry = true;\n\t\t\t\t\t}\n\t\t\t\t\tif(task[i].updateEdgesGeometry){\n\t\t\t\t\t\tthis.needsUpdateEdgesGeometry = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!task[i]?.shouldBeRemoved) {\n\t\t\t\t\tlet currentTimestamp = window.performance.now();\n\t\t\t\t\tlet elapsedTime = currentTimestamp - task[i].lastTimestamp + task[i].lastExecutionTime;\n\t\t\t\t\tif (elapsedTime < 0) {\n\t\t\t\t\t\telapsedTime = 0;\n\t\t\t\t\t}\n\t\t\t\t\tlet willExecute = false\n\t\t\t\t\tif (task[i].executionCount == 0) {\n\t\t\t\t\t\tif (elapsedTime >= task[i].delay) {\n\t\t\t\t\t\t\twillExecute = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (elapsedTime >= task[i].repeatInterval) {\n\t\t\t\t\t\t\twillExecute = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (willExecute) {\n\t\t\t\t\t\tif(task[i].afterRedraw){\n\t\t\t\t\t\t\tafterRedrawTasks.push({\n\t\t\t\t\t\t\t\ttask:task[i],\n\t\t\t\t\t\t\t\telapsedTime,\n\t\t\t\t\t\t\t\tcurrentTimestamp,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(!this._executeTask(task[i],elapsedTime,currentTimestamp)){\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (task[i]?.shouldBeRemoved) {\n\t\t\t\t\ttask.splice(i, 1);\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (task.length == 0) {\n\t\t\t\tdelete this._tasks[taskName];\n\t\t\t}\n\t\t}\n\t\tthis._updateHelios(this.needsRender, this.needsUpdateNodesGeometry, this.needsUpdateEdgesGeometry, true, afterRedrawTasks);\n\t\tthis._lastTimestamp = allTasksCurrentTimestamp;\n\t}\n\n\n\t_updateHelios(needsRender, needsUpdateNodesGeometry, needsUpdateEdgesGeometry, updateTimeoutAfterRender,afterRedrawTasks) {\n\t\tif (needsRender === undefined) {\n\t\t\tneedsRender = this.needsRender;\n\t\t}\n\t\tif (needsUpdateNodesGeometry === undefined) {\n\t\t\tneedsUpdateNodesGeometry = this.needsUpdateNodesGeometry;\n\t\t}\n\t\tif (needsUpdateEdgesGeometry === undefined) {\n\t\t\tneedsUpdateEdgesGeometry = this.needsUpdateEdgesGeometry;\n\t\t}\n\n\t\tif (needsUpdateNodesGeometry) {\n\t\t\tthis.helios.updateNodesGeometry();\n\t\t\tthis.needsUpdateNodesGeometry = false;\n\t\t}\n\n\t\tif (needsUpdateEdgesGeometry) {\n\t\t\tthis.helios.updateEdgesGeometry();\n\t\t\tthis.needsUpdateEdgesGeometry = false;\n\t\t}\n\n\t\tcancelAnimationFrame(this.lastRequestFrameID);\n\t\tthis.lastRequestFrameID = requestAnimationFrame(() => {\n\t\t\t// console.log(\"Executed: \"+this.lastRequestFrameID);\n\t\t\tif(this._shouldCleanup){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst now = window.performance.now();\n\t\t\twhile (this._times.length > 0 && this._times[0] <= now - 1000) {\n\t\t\t\tthis._times.shift();\n\t\t\t}\n\t\t\tthis._times.push(now);\n\t\t\tthis._averageFPS = this._times.length;\n\t\t\t// console.log(this._averageFPS);\n\n\t\t\t// if (needsUpdateNodesGeometry) {\n\t\t\t// \tthis.helios.updateNodesGeometry();\n\t\t\t// \tthis.needsUpdateNodesGeometry = false;\n\t\t\t// }\n\n\t\t\t// if (needsUpdateEdgesGeometry) {\n\t\t\t// \tthis.helios.updateEdgesGeometry();\n\t\t\t// \tthis.needsUpdateEdgesGeometry = false;\n\t\t\t// }\n\n\t\t\tif (needsRender) {\n\t\t\t\tthis.helios.redraw();\n\t\t\t\tthis.needsRender = false;\n\t\t\t}\n\t\t\tif((afterRedrawTasks?.length ||0) > 0){\n\t\t\t\tafterRedrawTasks.forEach((task) => {\n\t\t\t\t\ttask.task._timeout = setTimeout(() => {\n\t\t\t\t\t\tthis._executeTask(task.task,task.elapsedTime,task.currentTimestamp);\n\t\t\t\t\t}, 0);\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (updateTimeoutAfterRender) {\n\t\t\t\tthis._lastExecutionTimestamp = window.performance.now();\n\t\t\t\tthis._updateTimeout();\n\t\t\t}\n\t\t});\n\t\t// console.log(\"Requested: \"+this.lastRequestFrameID);\n\t}\n\n\t_addTaskToQueue(task, name) {\n\t\tlet taskQueue = this._tasks[name];\n\t\ttaskQueue.push(task);\n\t\tif (taskQueue.length > this._maxQueueLength) {\n\t\t\tif (taskQueue[0].timeout) {\n\t\t\t\ttaskQueue[0].shouldBeRemoved = true;\n\t\t\t\tclearTimeout(task.taskQueue[0]);\n\t\t\t}\n\t\t\ttaskQueue.shift();\n\t\t\tconsole.warn(`One task was discarded because of too many tasks in the ${name} queue. (maxQueueLength = ${this._maxQueueLength})`);\n\t\t}\n\t}\n\n\t_clearTask(name) {\n\t\tif (name in this._tasks) {\n\t\t\tlet taskQueue = this._tasks[name];\n\t\t\tfor (let taskIndex = 0; taskIndex < taskQueue.length; taskIndex++) {\n\t\t\t\tlet task = taskQueue[taskIndex];\n\t\t\t\tif (task.timeout) {\n\t\t\t\t\ttask.shouldBeRemoved = true;\n\t\t\t\t\tclearTimeout(task.timeout);\n\t\t\t\t}\n\t\t\t}\n\t\t\ttaskQueue.length = 0;\n\t\t}\n\t}\n\n\tunschedule(name) {\n\t\t\n\t\tif (name in this._tasks) {\n\t\t\tthis._clearTask(name);\n\t\t\tdelete this._tasks[name];\n\t\t}\n\t\tthis._updateTimeout();\n\t\treturn this;\n\t}\n\n\thasTask(name) {\n\t\treturn name in this._tasks;\n\t}\n\n\n\tstart() {\n\t\tthis._started = true;\n\t\tthis._updateTimeout();\n\t\treturn this;\n\t}\n\n\n\n\tstop() {\n\t\tthis._shouldCleanup = true;\n\t\tclearTimeout(this._timeout);\n\t\tthis.paused = false;\n\t\tthis.started = false;\n\t\tthis._lastTimestamp = null;\n\t\tthis._lastExecutionTime = 0;\n\t\treturn this;\n\t}\n\n\t_updateTimeout() {\n\t\tclearTimeout(this._timeout);\n\t\tif (this._started) {\n\t\t\tif (Object.keys(this._tasks).length === 0) {\n\t\t\t\tthis.paused = true;\n\t\t\t} else {\n\t\t\t\tthis.paused = false;\n\t\t\t\tlet repeatInterval = 0\n\t\t\t\tlet currentTimestamp = window.performance.now();\n\t\t\t\tif (this._lastTimestamp != null && this._throttle) {\n\t\t\t\t\tlet fpsRepeatInterval = 1000 / this._FPS;\n\t\t\t\t\trepeatInterval = fpsRepeatInterval - (currentTimestamp-this._lastTimestamp)\n\t\t\t\t\tif (repeatInterval < 0) {\n\t\t\t\t\t\trepeatInterval = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis._lastFPS = 1000 / ((currentTimestamp-this._lastTimestamp));\n\t\t\t\t// this._lastTimestamp = this._currentTimestamp;\n\t\t\t\t\n\t\t\t\tthis._timeout = setTimeout(() => {\n\t\t\t\t\tthis.runSyncTasks();\n\t\t\t\t}, repeatInterval);\n\t\t\t}\n\t\t}\n\t}\n\n}","/*!\n\npica\nhttps://github.com/nodeca/pica\n\n*/\n\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.pica = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(_dereq_,module,exports){\n// Collection of math functions\n//\n// 1. Combine components together\n// 2. Has async init to load wasm modules\n//\n'use strict';\n\nvar Multimath = _dereq_('multimath');\n\nvar mm_unsharp_mask = _dereq_('./mm_unsharp_mask');\n\nvar mm_resize = _dereq_('./mm_resize');\n\nfunction MathLib(requested_features) {\n  var __requested_features = requested_features || [];\n\n  var features = {\n    js: __requested_features.indexOf('js') >= 0,\n    wasm: __requested_features.indexOf('wasm') >= 0\n  };\n  Multimath.call(this, features);\n  this.features = {\n    js: features.js,\n    wasm: features.wasm && this.has_wasm()\n  };\n  this.use(mm_unsharp_mask);\n  this.use(mm_resize);\n}\n\nMathLib.prototype = Object.create(Multimath.prototype);\nMathLib.prototype.constructor = MathLib;\n\nMathLib.prototype.resizeAndUnsharp = function resizeAndUnsharp(options, cache) {\n  var result = this.resize(options, cache);\n\n  if (options.unsharpAmount) {\n    this.unsharp_mask(result, options.toWidth, options.toHeight, options.unsharpAmount, options.unsharpRadius, options.unsharpThreshold);\n  }\n\n  return result;\n};\n\nmodule.exports = MathLib;\n\n},{\"./mm_resize\":4,\"./mm_unsharp_mask\":9,\"multimath\":19}],2:[function(_dereq_,module,exports){\n// Resize convolvers, pure JS implementation\n//\n'use strict'; // Precision of fixed FP values\n//var FIXED_FRAC_BITS = 14;\n\nfunction clampTo8(i) {\n  return i < 0 ? 0 : i > 255 ? 255 : i;\n}\n\nfunction clampNegative(i) {\n  return i >= 0 ? i : 0;\n} // Convolve image data in horizontal direction. Can be used for:\n//\n// 1. bitmap with premultiplied alpha\n// 2. bitmap without alpha (all values 255)\n//\n// Notes:\n//\n// - output is transposed\n// - output resolution is ~15 bits per channel(for better precision).\n//\n\n\nfunction convolveHor(src, dest, srcW, srcH, destW, filters) {\n  var r, g, b, a;\n  var filterPtr, filterShift, filterSize;\n  var srcPtr, srcY, destX, filterVal;\n  var srcOffset = 0,\n      destOffset = 0; // For each row\n\n  for (srcY = 0; srcY < srcH; srcY++) {\n    filterPtr = 0; // Apply precomputed filters to each destination row point\n\n    for (destX = 0; destX < destW; destX++) {\n      // Get the filter that determines the current output pixel.\n      filterShift = filters[filterPtr++];\n      filterSize = filters[filterPtr++];\n      srcPtr = srcOffset + filterShift * 4 | 0;\n      r = g = b = a = 0; // Apply the filter to the row to get the destination pixel r, g, b, a\n\n      for (; filterSize > 0; filterSize--) {\n        filterVal = filters[filterPtr++]; // Use reverse order to workaround deopts in old v8 (node v.10)\n        // Big thanks to @mraleph (Vyacheslav Egorov) for the tip.\n\n        a = a + filterVal * src[srcPtr + 3] | 0;\n        b = b + filterVal * src[srcPtr + 2] | 0;\n        g = g + filterVal * src[srcPtr + 1] | 0;\n        r = r + filterVal * src[srcPtr] | 0;\n        srcPtr = srcPtr + 4 | 0;\n      } // Store 15 bits between passes for better precision\n      // Instead of shift to 14 (FIXED_FRAC_BITS), shift to 7 only\n      //\n\n\n      dest[destOffset + 3] = clampNegative(a >> 7);\n      dest[destOffset + 2] = clampNegative(b >> 7);\n      dest[destOffset + 1] = clampNegative(g >> 7);\n      dest[destOffset] = clampNegative(r >> 7);\n      destOffset = destOffset + srcH * 4 | 0;\n    }\n\n    destOffset = (srcY + 1) * 4 | 0;\n    srcOffset = (srcY + 1) * srcW * 4 | 0;\n  }\n} // Supplementary method for `convolveHor()`\n//\n\n\nfunction convolveVert(src, dest, srcW, srcH, destW, filters) {\n  var r, g, b, a;\n  var filterPtr, filterShift, filterSize;\n  var srcPtr, srcY, destX, filterVal;\n  var srcOffset = 0,\n      destOffset = 0; // For each row\n\n  for (srcY = 0; srcY < srcH; srcY++) {\n    filterPtr = 0; // Apply precomputed filters to each destination row point\n\n    for (destX = 0; destX < destW; destX++) {\n      // Get the filter that determines the current output pixel.\n      filterShift = filters[filterPtr++];\n      filterSize = filters[filterPtr++];\n      srcPtr = srcOffset + filterShift * 4 | 0;\n      r = g = b = a = 0; // Apply the filter to the row to get the destination pixel r, g, b, a\n\n      for (; filterSize > 0; filterSize--) {\n        filterVal = filters[filterPtr++]; // Use reverse order to workaround deopts in old v8 (node v.10)\n        // Big thanks to @mraleph (Vyacheslav Egorov) for the tip.\n\n        a = a + filterVal * src[srcPtr + 3] | 0;\n        b = b + filterVal * src[srcPtr + 2] | 0;\n        g = g + filterVal * src[srcPtr + 1] | 0;\n        r = r + filterVal * src[srcPtr] | 0;\n        srcPtr = srcPtr + 4 | 0;\n      } // Sync with premultiplied version for exact result match\n\n\n      r >>= 7;\n      g >>= 7;\n      b >>= 7;\n      a >>= 7; // Bring this value back in range + round result.\n      //\n\n      dest[destOffset + 3] = clampTo8(a + (1 << 13) >> 14);\n      dest[destOffset + 2] = clampTo8(b + (1 << 13) >> 14);\n      dest[destOffset + 1] = clampTo8(g + (1 << 13) >> 14);\n      dest[destOffset] = clampTo8(r + (1 << 13) >> 14);\n      destOffset = destOffset + srcH * 4 | 0;\n    }\n\n    destOffset = (srcY + 1) * 4 | 0;\n    srcOffset = (srcY + 1) * srcW * 4 | 0;\n  }\n} // Premultiply & convolve image data in horizontal direction. Can be used for:\n//\n// - Any bitmap data, extracted with `.getImageData()` method (with\n//   non-premultiplied alpha)\n//\n// For images without alpha channel this method is slower than `convolveHor()`\n//\n\n\nfunction convolveHorWithPre(src, dest, srcW, srcH, destW, filters) {\n  var r, g, b, a, alpha;\n  var filterPtr, filterShift, filterSize;\n  var srcPtr, srcY, destX, filterVal;\n  var srcOffset = 0,\n      destOffset = 0; // For each row\n\n  for (srcY = 0; srcY < srcH; srcY++) {\n    filterPtr = 0; // Apply precomputed filters to each destination row point\n\n    for (destX = 0; destX < destW; destX++) {\n      // Get the filter that determines the current output pixel.\n      filterShift = filters[filterPtr++];\n      filterSize = filters[filterPtr++];\n      srcPtr = srcOffset + filterShift * 4 | 0;\n      r = g = b = a = 0; // Apply the filter to the row to get the destination pixel r, g, b, a\n\n      for (; filterSize > 0; filterSize--) {\n        filterVal = filters[filterPtr++]; // Use reverse order to workaround deopts in old v8 (node v.10)\n        // Big thanks to @mraleph (Vyacheslav Egorov) for the tip.\n\n        alpha = src[srcPtr + 3];\n        a = a + filterVal * alpha | 0;\n        b = b + filterVal * src[srcPtr + 2] * alpha | 0;\n        g = g + filterVal * src[srcPtr + 1] * alpha | 0;\n        r = r + filterVal * src[srcPtr] * alpha | 0;\n        srcPtr = srcPtr + 4 | 0;\n      } // Premultiply is (* alpha / 255).\n      // Postpone division for better performance\n\n\n      b = b / 255 | 0;\n      g = g / 255 | 0;\n      r = r / 255 | 0; // Store 15 bits between passes for better precision\n      // Instead of shift to 14 (FIXED_FRAC_BITS), shift to 7 only\n      //\n\n      dest[destOffset + 3] = clampNegative(a >> 7);\n      dest[destOffset + 2] = clampNegative(b >> 7);\n      dest[destOffset + 1] = clampNegative(g >> 7);\n      dest[destOffset] = clampNegative(r >> 7);\n      destOffset = destOffset + srcH * 4 | 0;\n    }\n\n    destOffset = (srcY + 1) * 4 | 0;\n    srcOffset = (srcY + 1) * srcW * 4 | 0;\n  }\n} // Supplementary method for `convolveHorWithPre()`\n//\n\n\nfunction convolveVertWithPre(src, dest, srcW, srcH, destW, filters) {\n  var r, g, b, a;\n  var filterPtr, filterShift, filterSize;\n  var srcPtr, srcY, destX, filterVal;\n  var srcOffset = 0,\n      destOffset = 0; // For each row\n\n  for (srcY = 0; srcY < srcH; srcY++) {\n    filterPtr = 0; // Apply precomputed filters to each destination row point\n\n    for (destX = 0; destX < destW; destX++) {\n      // Get the filter that determines the current output pixel.\n      filterShift = filters[filterPtr++];\n      filterSize = filters[filterPtr++];\n      srcPtr = srcOffset + filterShift * 4 | 0;\n      r = g = b = a = 0; // Apply the filter to the row to get the destination pixel r, g, b, a\n\n      for (; filterSize > 0; filterSize--) {\n        filterVal = filters[filterPtr++]; // Use reverse order to workaround deopts in old v8 (node v.10)\n        // Big thanks to @mraleph (Vyacheslav Egorov) for the tip.\n\n        a = a + filterVal * src[srcPtr + 3] | 0;\n        b = b + filterVal * src[srcPtr + 2] | 0;\n        g = g + filterVal * src[srcPtr + 1] | 0;\n        r = r + filterVal * src[srcPtr] | 0;\n        srcPtr = srcPtr + 4 | 0;\n      } // Downscale to leave room for un-premultiply\n\n\n      r >>= 7;\n      g >>= 7;\n      b >>= 7;\n      a >>= 7; // Un-premultiply\n\n      a = clampTo8(a + (1 << 13) >> 14);\n\n      if (a > 0) {\n        r = r * 255 / a | 0;\n        g = g * 255 / a | 0;\n        b = b * 255 / a | 0;\n      } // Bring this value back in range + round result.\n      // Shift value = FIXED_FRAC_BITS + 7\n      //\n\n\n      dest[destOffset + 3] = a;\n      dest[destOffset + 2] = clampTo8(b + (1 << 13) >> 14);\n      dest[destOffset + 1] = clampTo8(g + (1 << 13) >> 14);\n      dest[destOffset] = clampTo8(r + (1 << 13) >> 14);\n      destOffset = destOffset + srcH * 4 | 0;\n    }\n\n    destOffset = (srcY + 1) * 4 | 0;\n    srcOffset = (srcY + 1) * srcW * 4 | 0;\n  }\n}\n\nmodule.exports = {\n  convolveHor: convolveHor,\n  convolveVert: convolveVert,\n  convolveHorWithPre: convolveHorWithPre,\n  convolveVertWithPre: convolveVertWithPre\n};\n\n},{}],3:[function(_dereq_,module,exports){\n// This is autogenerated file from math.wasm, don't edit.\n//\n'use strict';\n/* eslint-disable max-len */\n\nmodule.exports = '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';\n\n},{}],4:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = {\n  name: 'resize',\n  fn: _dereq_('./resize'),\n  wasm_fn: _dereq_('./resize_wasm'),\n  wasm_src: _dereq_('./convolve_wasm_base64')\n};\n\n},{\"./convolve_wasm_base64\":3,\"./resize\":5,\"./resize_wasm\":8}],5:[function(_dereq_,module,exports){\n'use strict';\n\nvar createFilters = _dereq_('./resize_filter_gen');\n\nvar _require = _dereq_('./convolve'),\n    convolveHor = _require.convolveHor,\n    convolveVert = _require.convolveVert,\n    convolveHorWithPre = _require.convolveHorWithPre,\n    convolveVertWithPre = _require.convolveVertWithPre;\n\nfunction hasAlpha(src, width, height) {\n  var ptr = 3,\n      len = width * height * 4 | 0;\n\n  while (ptr < len) {\n    if (src[ptr] !== 255) return true;\n    ptr = ptr + 4 | 0;\n  }\n\n  return false;\n}\n\nfunction resetAlpha(dst, width, height) {\n  var ptr = 3,\n      len = width * height * 4 | 0;\n\n  while (ptr < len) {\n    dst[ptr] = 0xFF;\n    ptr = ptr + 4 | 0;\n  }\n}\n\nmodule.exports = function resize(options) {\n  var src = options.src;\n  var srcW = options.width;\n  var srcH = options.height;\n  var destW = options.toWidth;\n  var destH = options.toHeight;\n  var scaleX = options.scaleX || options.toWidth / options.width;\n  var scaleY = options.scaleY || options.toHeight / options.height;\n  var offsetX = options.offsetX || 0;\n  var offsetY = options.offsetY || 0;\n  var dest = options.dest || new Uint8Array(destW * destH * 4);\n  var filter = typeof options.filter === 'undefined' ? 'mks2013' : options.filter;\n  var filtersX = createFilters(filter, srcW, destW, scaleX, offsetX),\n      filtersY = createFilters(filter, srcH, destH, scaleY, offsetY);\n  var tmp = new Uint16Array(destW * srcH * 4); // Autodetect if alpha channel exists, and use appropriate method\n\n  if (hasAlpha(src, srcW, srcH)) {\n    convolveHorWithPre(src, tmp, srcW, srcH, destW, filtersX);\n    convolveVertWithPre(tmp, dest, srcH, destW, destH, filtersY);\n  } else {\n    convolveHor(src, tmp, srcW, srcH, destW, filtersX);\n    convolveVert(tmp, dest, srcH, destW, destH, filtersY);\n    resetAlpha(dest, destW, destH);\n  }\n\n  return dest;\n};\n\n},{\"./convolve\":2,\"./resize_filter_gen\":6}],6:[function(_dereq_,module,exports){\n// Calculate convolution filters for each destination point,\n// and pack data to Int16Array:\n//\n// [ shift, length, data..., shift2, length2, data..., ... ]\n//\n// - shift - offset in src image\n// - length - filter length (in src points)\n// - data - filter values sequence\n//\n'use strict';\n\nvar FILTER_INFO = _dereq_('./resize_filter_info'); // Precision of fixed FP values\n\n\nvar FIXED_FRAC_BITS = 14;\n\nfunction toFixedPoint(num) {\n  return Math.round(num * ((1 << FIXED_FRAC_BITS) - 1));\n}\n\nmodule.exports = function resizeFilterGen(filter, srcSize, destSize, scale, offset) {\n  var filterFunction = FILTER_INFO.filter[filter].fn;\n  var scaleInverted = 1.0 / scale;\n  var scaleClamped = Math.min(1.0, scale); // For upscale\n  // Filter window (averaging interval), scaled to src image\n\n  var srcWindow = FILTER_INFO.filter[filter].win / scaleClamped;\n  var destPixel, srcPixel, srcFirst, srcLast, filterElementSize, floatFilter, fxpFilter, total, pxl, idx, floatVal, filterTotal, filterVal;\n  var leftNotEmpty, rightNotEmpty, filterShift, filterSize;\n  var maxFilterElementSize = Math.floor((srcWindow + 1) * 2);\n  var packedFilter = new Int16Array((maxFilterElementSize + 2) * destSize);\n  var packedFilterPtr = 0;\n  var slowCopy = !packedFilter.subarray || !packedFilter.set; // For each destination pixel calculate source range and built filter values\n\n  for (destPixel = 0; destPixel < destSize; destPixel++) {\n    // Scaling should be done relative to central pixel point\n    srcPixel = (destPixel + 0.5) * scaleInverted + offset;\n    srcFirst = Math.max(0, Math.floor(srcPixel - srcWindow));\n    srcLast = Math.min(srcSize - 1, Math.ceil(srcPixel + srcWindow));\n    filterElementSize = srcLast - srcFirst + 1;\n    floatFilter = new Float32Array(filterElementSize);\n    fxpFilter = new Int16Array(filterElementSize);\n    total = 0.0; // Fill filter values for calculated range\n\n    for (pxl = srcFirst, idx = 0; pxl <= srcLast; pxl++, idx++) {\n      floatVal = filterFunction((pxl + 0.5 - srcPixel) * scaleClamped);\n      total += floatVal;\n      floatFilter[idx] = floatVal;\n    } // Normalize filter, convert to fixed point and accumulate conversion error\n\n\n    filterTotal = 0;\n\n    for (idx = 0; idx < floatFilter.length; idx++) {\n      filterVal = floatFilter[idx] / total;\n      filterTotal += filterVal;\n      fxpFilter[idx] = toFixedPoint(filterVal);\n    } // Compensate normalization error, to minimize brightness drift\n\n\n    fxpFilter[destSize >> 1] += toFixedPoint(1.0 - filterTotal); //\n    // Now pack filter to useable form\n    //\n    // 1. Trim heading and tailing zero values, and compensate shitf/length\n    // 2. Put all to single array in this format:\n    //\n    //    [ pos shift, data length, value1, value2, value3, ... ]\n    //\n\n    leftNotEmpty = 0;\n\n    while (leftNotEmpty < fxpFilter.length && fxpFilter[leftNotEmpty] === 0) {\n      leftNotEmpty++;\n    }\n\n    if (leftNotEmpty < fxpFilter.length) {\n      rightNotEmpty = fxpFilter.length - 1;\n\n      while (rightNotEmpty > 0 && fxpFilter[rightNotEmpty] === 0) {\n        rightNotEmpty--;\n      }\n\n      filterShift = srcFirst + leftNotEmpty;\n      filterSize = rightNotEmpty - leftNotEmpty + 1;\n      packedFilter[packedFilterPtr++] = filterShift; // shift\n\n      packedFilter[packedFilterPtr++] = filterSize; // size\n\n      if (!slowCopy) {\n        packedFilter.set(fxpFilter.subarray(leftNotEmpty, rightNotEmpty + 1), packedFilterPtr);\n        packedFilterPtr += filterSize;\n      } else {\n        // fallback for old IE < 11, without subarray/set methods\n        for (idx = leftNotEmpty; idx <= rightNotEmpty; idx++) {\n          packedFilter[packedFilterPtr++] = fxpFilter[idx];\n        }\n      }\n    } else {\n      // zero data, write header only\n      packedFilter[packedFilterPtr++] = 0; // shift\n\n      packedFilter[packedFilterPtr++] = 0; // size\n    }\n  }\n\n  return packedFilter;\n};\n\n},{\"./resize_filter_info\":7}],7:[function(_dereq_,module,exports){\n// Filter definitions to build tables for\n// resizing convolvers.\n//\n// Presets for quality 0..3. Filter functions + window size\n//\n'use strict';\n\nvar filter = {\n  // Nearest neibor\n  box: {\n    win: 0.5,\n    fn: function fn(x) {\n      if (x < 0) x = -x;\n      return x < 0.5 ? 1.0 : 0.0;\n    }\n  },\n  // // Hamming\n  hamming: {\n    win: 1.0,\n    fn: function fn(x) {\n      if (x < 0) x = -x;\n\n      if (x >= 1.0) {\n        return 0.0;\n      }\n\n      if (x < 1.19209290E-07) {\n        return 1.0;\n      }\n\n      var xpi = x * Math.PI;\n      return Math.sin(xpi) / xpi * (0.54 + 0.46 * Math.cos(xpi / 1.0));\n    }\n  },\n  // Lanczos, win = 2\n  lanczos2: {\n    win: 2.0,\n    fn: function fn(x) {\n      if (x < 0) x = -x;\n\n      if (x >= 2.0) {\n        return 0.0;\n      }\n\n      if (x < 1.19209290E-07) {\n        return 1.0;\n      }\n\n      var xpi = x * Math.PI;\n      return Math.sin(xpi) / xpi * Math.sin(xpi / 2.0) / (xpi / 2.0);\n    }\n  },\n  // Lanczos, win = 3\n  lanczos3: {\n    win: 3.0,\n    fn: function fn(x) {\n      if (x < 0) x = -x;\n\n      if (x >= 3.0) {\n        return 0.0;\n      }\n\n      if (x < 1.19209290E-07) {\n        return 1.0;\n      }\n\n      var xpi = x * Math.PI;\n      return Math.sin(xpi) / xpi * Math.sin(xpi / 3.0) / (xpi / 3.0);\n    }\n  },\n  // Magic Kernel Sharp 2013, win = 2.5\n  // http://johncostella.com/magic/\n  mks2013: {\n    win: 2.5,\n    fn: function fn(x) {\n      if (x < 0) x = -x;\n\n      if (x >= 2.5) {\n        return 0.0;\n      }\n\n      if (x >= 1.5) {\n        return -0.125 * (x - 2.5) * (x - 2.5);\n      }\n\n      if (x >= 0.5) {\n        return 0.25 * (4 * x * x - 11 * x + 7);\n      }\n\n      return 1.0625 - 1.75 * x * x;\n    }\n  }\n};\nmodule.exports = {\n  filter: filter,\n  // Legacy mapping\n  f2q: {\n    box: 0,\n    hamming: 1,\n    lanczos2: 2,\n    lanczos3: 3\n  },\n  q2f: ['box', 'hamming', 'lanczos2', 'lanczos3']\n};\n\n},{}],8:[function(_dereq_,module,exports){\n'use strict';\n\nvar createFilters = _dereq_('./resize_filter_gen');\n\nfunction hasAlpha(src, width, height) {\n  var ptr = 3,\n      len = width * height * 4 | 0;\n\n  while (ptr < len) {\n    if (src[ptr] !== 255) return true;\n    ptr = ptr + 4 | 0;\n  }\n\n  return false;\n}\n\nfunction resetAlpha(dst, width, height) {\n  var ptr = 3,\n      len = width * height * 4 | 0;\n\n  while (ptr < len) {\n    dst[ptr] = 0xFF;\n    ptr = ptr + 4 | 0;\n  }\n}\n\nfunction asUint8Array(src) {\n  return new Uint8Array(src.buffer, 0, src.byteLength);\n}\n\nvar IS_LE = true; // should not crash everything on module load in old browsers\n\ntry {\n  IS_LE = new Uint32Array(new Uint8Array([1, 0, 0, 0]).buffer)[0] === 1;\n} catch (__) {}\n\nfunction copyInt16asLE(src, target, target_offset) {\n  if (IS_LE) {\n    target.set(asUint8Array(src), target_offset);\n    return;\n  }\n\n  for (var ptr = target_offset, i = 0; i < src.length; i++) {\n    var data = src[i];\n    target[ptr++] = data & 0xFF;\n    target[ptr++] = data >> 8 & 0xFF;\n  }\n}\n\nmodule.exports = function resize_wasm(options) {\n  var src = options.src;\n  var srcW = options.width;\n  var srcH = options.height;\n  var destW = options.toWidth;\n  var destH = options.toHeight;\n  var scaleX = options.scaleX || options.toWidth / options.width;\n  var scaleY = options.scaleY || options.toHeight / options.height;\n  var offsetX = options.offsetX || 0.0;\n  var offsetY = options.offsetY || 0.0;\n  var dest = options.dest || new Uint8Array(destW * destH * 4);\n  var filter = typeof options.filter === 'undefined' ? 'mks2013' : options.filter;\n  var filtersX = createFilters(filter, srcW, destW, scaleX, offsetX),\n      filtersY = createFilters(filter, srcH, destH, scaleY, offsetY); // destination is 0 too.\n\n  var src_offset = 0;\n  var src_size = Math.max(src.byteLength, dest.byteLength); // buffer between convolve passes\n\n  var tmp_offset = this.__align(src_offset + src_size);\n\n  var tmp_size = srcH * destW * 4 * 2; // 2 bytes per channel\n\n  var filtersX_offset = this.__align(tmp_offset + tmp_size);\n\n  var filtersY_offset = this.__align(filtersX_offset + filtersX.byteLength);\n\n  var alloc_bytes = filtersY_offset + filtersY.byteLength;\n\n  var instance = this.__instance('resize', alloc_bytes); //\n  // Fill memory block with data to process\n  //\n\n\n  var mem = new Uint8Array(this.__memory.buffer);\n  var mem32 = new Uint32Array(this.__memory.buffer); // 32-bit copy is much faster in chrome\n\n  var src32 = new Uint32Array(src.buffer);\n  mem32.set(src32); // We should guarantee LE bytes order. Filters are not big, so\n  // speed difference is not significant vs direct .set()\n\n  copyInt16asLE(filtersX, mem, filtersX_offset);\n  copyInt16asLE(filtersY, mem, filtersY_offset); // Now call webassembly method\n  // emsdk does method names with '_'\n\n  var fn = instance.exports.convolveHV || instance.exports._convolveHV;\n\n  if (hasAlpha(src, srcW, srcH)) {\n    fn(filtersX_offset, filtersY_offset, tmp_offset, srcW, srcH, destW, destH, 1);\n  } else {\n    fn(filtersX_offset, filtersY_offset, tmp_offset, srcW, srcH, destW, destH, 0);\n    resetAlpha(dest, destW, destH);\n  } //\n  // Copy data back to typed array\n  //\n  // 32-bit copy is much faster in chrome\n\n\n  var dest32 = new Uint32Array(dest.buffer);\n  dest32.set(new Uint32Array(this.__memory.buffer, 0, destH * destW));\n  return dest;\n};\n\n},{\"./resize_filter_gen\":6}],9:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = {\n  name: 'unsharp_mask',\n  fn: _dereq_('./unsharp_mask'),\n  wasm_fn: _dereq_('./unsharp_mask_wasm'),\n  wasm_src: _dereq_('./unsharp_mask_wasm_base64')\n};\n\n},{\"./unsharp_mask\":10,\"./unsharp_mask_wasm\":11,\"./unsharp_mask_wasm_base64\":12}],10:[function(_dereq_,module,exports){\n// Unsharp mask filter\n//\n// http://stackoverflow.com/a/23322820/1031804\n// USM(O) = O + (2 * (Amount / 100) * (O - GB))\n// GB - gaussian blur.\n//\n// Image is converted from RGB to HSV, unsharp mask is applied to the\n// brightness channel and then image is converted back to RGB.\n//\n'use strict';\n\nvar glur_mono16 = _dereq_('glur/mono16');\n\nfunction hsv_v16(img, width, height) {\n  var size = width * height;\n  var out = new Uint16Array(size);\n  var r, g, b, max;\n\n  for (var i = 0; i < size; i++) {\n    r = img[4 * i];\n    g = img[4 * i + 1];\n    b = img[4 * i + 2];\n    max = r >= g && r >= b ? r : g >= b && g >= r ? g : b;\n    out[i] = max << 8;\n  }\n\n  return out;\n}\n\nmodule.exports = function unsharp(img, width, height, amount, radius, threshold) {\n  var v1, v2, vmul;\n  var diff, iTimes4;\n\n  if (amount === 0 || radius < 0.5) {\n    return;\n  }\n\n  if (radius > 2.0) {\n    radius = 2.0;\n  }\n\n  var brightness = hsv_v16(img, width, height);\n  var blured = new Uint16Array(brightness); // copy, because blur modify src\n\n  glur_mono16(blured, width, height, radius);\n  var amountFp = amount / 100 * 0x1000 + 0.5 | 0;\n  var thresholdFp = threshold << 8;\n  var size = width * height;\n  /* eslint-disable indent */\n\n  for (var i = 0; i < size; i++) {\n    v1 = brightness[i];\n    diff = v1 - blured[i];\n\n    if (Math.abs(diff) >= thresholdFp) {\n      // add unsharp mask to the brightness channel\n      v2 = v1 + (amountFp * diff + 0x800 >> 12); // Both v1 and v2 are within [0.0 .. 255.0] (0000-FF00) range, never going into\n      // [255.003 .. 255.996] (FF01-FFFF). This allows to round this value as (x+.5)|0\n      // later without overflowing.\n\n      v2 = v2 > 0xff00 ? 0xff00 : v2;\n      v2 = v2 < 0x0000 ? 0x0000 : v2; // Avoid division by 0. V=0 means rgb(0,0,0), unsharp with unsharpAmount>0 cannot\n      // change this value (because diff between colors gets inflated), so no need to verify correctness.\n\n      v1 = v1 !== 0 ? v1 : 1; // Multiplying V in HSV model by a constant is equivalent to multiplying each component\n      // in RGB by the same constant (same for HSL), see also:\n      // https://beesbuzz.biz/code/16-hsv-color-transforms\n\n      vmul = (v2 << 12) / v1 | 0; // Result will be in [0..255] range because:\n      //  - all numbers are positive\n      //  - r,g,b <= (v1/256)\n      //  - r,g,b,(v1/256),(v2/256) <= 255\n      // So highest this number can get is X*255/X+0.5=255.5 which is < 256 and rounds down.\n\n      iTimes4 = i * 4;\n      img[iTimes4] = img[iTimes4] * vmul + 0x800 >> 12; // R\n\n      img[iTimes4 + 1] = img[iTimes4 + 1] * vmul + 0x800 >> 12; // G\n\n      img[iTimes4 + 2] = img[iTimes4 + 2] * vmul + 0x800 >> 12; // B\n    }\n  }\n};\n\n},{\"glur/mono16\":18}],11:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = function unsharp(img, width, height, amount, radius, threshold) {\n  if (amount === 0 || radius < 0.5) {\n    return;\n  }\n\n  if (radius > 2.0) {\n    radius = 2.0;\n  }\n\n  var pixels = width * height;\n  var img_bytes_cnt = pixels * 4;\n  var hsv_bytes_cnt = pixels * 2;\n  var blur_bytes_cnt = pixels * 2;\n  var blur_line_byte_cnt = Math.max(width, height) * 4; // float32 array\n\n  var blur_coeffs_byte_cnt = 8 * 4; // float32 array\n\n  var img_offset = 0;\n  var hsv_offset = img_bytes_cnt;\n  var blur_offset = hsv_offset + hsv_bytes_cnt;\n  var blur_tmp_offset = blur_offset + blur_bytes_cnt;\n  var blur_line_offset = blur_tmp_offset + blur_bytes_cnt;\n  var blur_coeffs_offset = blur_line_offset + blur_line_byte_cnt;\n\n  var instance = this.__instance('unsharp_mask', img_bytes_cnt + hsv_bytes_cnt + blur_bytes_cnt * 2 + blur_line_byte_cnt + blur_coeffs_byte_cnt, {\n    exp: Math.exp\n  }); // 32-bit copy is much faster in chrome\n\n\n  var img32 = new Uint32Array(img.buffer);\n  var mem32 = new Uint32Array(this.__memory.buffer);\n  mem32.set(img32); // HSL\n\n  var fn = instance.exports.hsv_v16 || instance.exports._hsv_v16;\n  fn(img_offset, hsv_offset, width, height); // BLUR\n\n  fn = instance.exports.blurMono16 || instance.exports._blurMono16;\n  fn(hsv_offset, blur_offset, blur_tmp_offset, blur_line_offset, blur_coeffs_offset, width, height, radius); // UNSHARP\n\n  fn = instance.exports.unsharp || instance.exports._unsharp;\n  fn(img_offset, img_offset, hsv_offset, blur_offset, width, height, amount, threshold); // 32-bit copy is much faster in chrome\n\n  img32.set(new Uint32Array(this.__memory.buffer, 0, pixels));\n};\n\n},{}],12:[function(_dereq_,module,exports){\n// This is autogenerated file from math.wasm, don't edit.\n//\n'use strict';\n/* eslint-disable max-len */\n\nmodule.exports = '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';\n\n},{}],13:[function(_dereq_,module,exports){\n'use strict';\n\nvar GC_INTERVAL = 100;\n\nfunction Pool(create, idle) {\n  this.create = create;\n  this.available = [];\n  this.acquired = {};\n  this.lastId = 1;\n  this.timeoutId = 0;\n  this.idle = idle || 2000;\n}\n\nPool.prototype.acquire = function () {\n  var _this = this;\n\n  var resource;\n\n  if (this.available.length !== 0) {\n    resource = this.available.pop();\n  } else {\n    resource = this.create();\n    resource.id = this.lastId++;\n\n    resource.release = function () {\n      return _this.release(resource);\n    };\n  }\n\n  this.acquired[resource.id] = resource;\n  return resource;\n};\n\nPool.prototype.release = function (resource) {\n  var _this2 = this;\n\n  delete this.acquired[resource.id];\n  resource.lastUsed = Date.now();\n  this.available.push(resource);\n\n  if (this.timeoutId === 0) {\n    this.timeoutId = setTimeout(function () {\n      return _this2.gc();\n    }, GC_INTERVAL);\n  }\n};\n\nPool.prototype.gc = function () {\n  var _this3 = this;\n\n  var now = Date.now();\n  this.available = this.available.filter(function (resource) {\n    if (now - resource.lastUsed > _this3.idle) {\n      resource.destroy();\n      return false;\n    }\n\n    return true;\n  });\n\n  if (this.available.length !== 0) {\n    this.timeoutId = setTimeout(function () {\n      return _this3.gc();\n    }, GC_INTERVAL);\n  } else {\n    this.timeoutId = 0;\n  }\n};\n\nmodule.exports = Pool;\n\n},{}],14:[function(_dereq_,module,exports){\n// Add intermediate resizing steps when scaling down by a very large factor.\n//\n// For example, when resizing 10000x10000 down to 10x10, it'll resize it to\n// 300x300 first.\n//\n// It's needed because tiler has issues when the entire tile is scaled down\n// to a few pixels (1024px source tile with border size 3 should result in\n// at least 3+3+2 = 8px target tile, so max scale factor is 128 here).\n//\n// Also, adding intermediate steps can speed up processing if we use lower\n// quality algorithms for first stages.\n//\n'use strict'; // min size = 0 results in infinite loop,\n// min size = 1 can consume large amount of memory\n\nvar MIN_INNER_TILE_SIZE = 2;\n\nmodule.exports = function createStages(fromWidth, fromHeight, toWidth, toHeight, srcTileSize, destTileBorder) {\n  var scaleX = toWidth / fromWidth;\n  var scaleY = toHeight / fromHeight; // derived from createRegions equation:\n  // innerTileWidth = pixelFloor(srcTileSize * scaleX) - 2 * destTileBorder;\n\n  var minScale = (2 * destTileBorder + MIN_INNER_TILE_SIZE + 1) / srcTileSize; // refuse to scale image multiple times by less than twice each time,\n  // it could only happen because of invalid options\n\n  if (minScale > 0.5) return [[toWidth, toHeight]];\n  var stageCount = Math.ceil(Math.log(Math.min(scaleX, scaleY)) / Math.log(minScale)); // no additional resizes are necessary,\n  // stageCount can be zero or be negative when enlarging the image\n\n  if (stageCount <= 1) return [[toWidth, toHeight]];\n  var result = [];\n\n  for (var i = 0; i < stageCount; i++) {\n    var width = Math.round(Math.pow(Math.pow(fromWidth, stageCount - i - 1) * Math.pow(toWidth, i + 1), 1 / stageCount));\n    var height = Math.round(Math.pow(Math.pow(fromHeight, stageCount - i - 1) * Math.pow(toHeight, i + 1), 1 / stageCount));\n    result.push([width, height]);\n  }\n\n  return result;\n};\n\n},{}],15:[function(_dereq_,module,exports){\n// Split original image into multiple 1024x1024 chunks to reduce memory usage\n// (images have to be unpacked into typed arrays for resizing) and allow\n// parallel processing of multiple tiles at a time.\n//\n'use strict';\n/*\n * pixelFloor and pixelCeil are modified versions of Math.floor and Math.ceil\n * functions which take into account floating point arithmetic errors.\n * Those errors can cause undesired increments/decrements of sizes and offsets:\n * Math.ceil(36 / (36 / 500)) = 501\n * pixelCeil(36 / (36 / 500)) = 500\n */\n\nvar PIXEL_EPSILON = 1e-5;\n\nfunction pixelFloor(x) {\n  var nearest = Math.round(x);\n\n  if (Math.abs(x - nearest) < PIXEL_EPSILON) {\n    return nearest;\n  }\n\n  return Math.floor(x);\n}\n\nfunction pixelCeil(x) {\n  var nearest = Math.round(x);\n\n  if (Math.abs(x - nearest) < PIXEL_EPSILON) {\n    return nearest;\n  }\n\n  return Math.ceil(x);\n}\n\nmodule.exports = function createRegions(options) {\n  var scaleX = options.toWidth / options.width;\n  var scaleY = options.toHeight / options.height;\n  var innerTileWidth = pixelFloor(options.srcTileSize * scaleX) - 2 * options.destTileBorder;\n  var innerTileHeight = pixelFloor(options.srcTileSize * scaleY) - 2 * options.destTileBorder; // prevent infinite loop, this should never happen\n\n  if (innerTileWidth < 1 || innerTileHeight < 1) {\n    throw new Error('Internal error in pica: target tile width/height is too small.');\n  }\n\n  var x, y;\n  var innerX, innerY, toTileWidth, toTileHeight;\n  var tiles = [];\n  var tile; // we go top-to-down instead of left-to-right to make image displayed from top to\n  // doesn in the browser\n\n  for (innerY = 0; innerY < options.toHeight; innerY += innerTileHeight) {\n    for (innerX = 0; innerX < options.toWidth; innerX += innerTileWidth) {\n      x = innerX - options.destTileBorder;\n\n      if (x < 0) {\n        x = 0;\n      }\n\n      toTileWidth = innerX + innerTileWidth + options.destTileBorder - x;\n\n      if (x + toTileWidth >= options.toWidth) {\n        toTileWidth = options.toWidth - x;\n      }\n\n      y = innerY - options.destTileBorder;\n\n      if (y < 0) {\n        y = 0;\n      }\n\n      toTileHeight = innerY + innerTileHeight + options.destTileBorder - y;\n\n      if (y + toTileHeight >= options.toHeight) {\n        toTileHeight = options.toHeight - y;\n      }\n\n      tile = {\n        toX: x,\n        toY: y,\n        toWidth: toTileWidth,\n        toHeight: toTileHeight,\n        toInnerX: innerX,\n        toInnerY: innerY,\n        toInnerWidth: innerTileWidth,\n        toInnerHeight: innerTileHeight,\n        offsetX: x / scaleX - pixelFloor(x / scaleX),\n        offsetY: y / scaleY - pixelFloor(y / scaleY),\n        scaleX: scaleX,\n        scaleY: scaleY,\n        x: pixelFloor(x / scaleX),\n        y: pixelFloor(y / scaleY),\n        width: pixelCeil(toTileWidth / scaleX),\n        height: pixelCeil(toTileHeight / scaleY)\n      };\n      tiles.push(tile);\n    }\n  }\n\n  return tiles;\n};\n\n},{}],16:[function(_dereq_,module,exports){\n'use strict';\n\nfunction objClass(obj) {\n  return Object.prototype.toString.call(obj);\n}\n\nmodule.exports.isCanvas = function isCanvas(element) {\n  var cname = objClass(element);\n  return cname === '[object HTMLCanvasElement]'\n  /* browser */\n  || cname === '[object OffscreenCanvas]' || cname === '[object Canvas]'\n  /* node-canvas */\n  ;\n};\n\nmodule.exports.isImage = function isImage(element) {\n  return objClass(element) === '[object HTMLImageElement]';\n};\n\nmodule.exports.isImageBitmap = function isImageBitmap(element) {\n  return objClass(element) === '[object ImageBitmap]';\n};\n\nmodule.exports.limiter = function limiter(concurrency) {\n  var active = 0,\n      queue = [];\n\n  function roll() {\n    if (active < concurrency && queue.length) {\n      active++;\n      queue.shift()();\n    }\n  }\n\n  return function limit(fn) {\n    return new Promise(function (resolve, reject) {\n      queue.push(function () {\n        fn().then(function (result) {\n          resolve(result);\n          active--;\n          roll();\n        }, function (err) {\n          reject(err);\n          active--;\n          roll();\n        });\n      });\n      roll();\n    });\n  };\n};\n\nmodule.exports.cib_quality_name = function cib_quality_name(num) {\n  switch (num) {\n    case 0:\n      return 'pixelated';\n\n    case 1:\n      return 'low';\n\n    case 2:\n      return 'medium';\n  }\n\n  return 'high';\n};\n\nmodule.exports.cib_support = function cib_support(createCanvas) {\n  return Promise.resolve().then(function () {\n    if (typeof createImageBitmap === 'undefined') {\n      return false;\n    }\n\n    var c = createCanvas(100, 100);\n    return createImageBitmap(c, 0, 0, 100, 100, {\n      resizeWidth: 10,\n      resizeHeight: 10,\n      resizeQuality: 'high'\n    }).then(function (bitmap) {\n      var status = bitmap.width === 10; // Branch below is filtered on upper level. We do not call resize\n      // detection for basic ImageBitmap.\n      //\n      // https://developer.mozilla.org/en-US/docs/Web/API/ImageBitmap\n      // old Crome 51 has ImageBitmap without .close(). Then this code\n      // will throw and return 'false' as expected.\n      //\n\n      bitmap.close();\n      c = null;\n      return status;\n    });\n  })[\"catch\"](function () {\n    return false;\n  });\n};\n\nmodule.exports.worker_offscreen_canvas_support = function worker_offscreen_canvas_support() {\n  return new Promise(function (resolve, reject) {\n    if (typeof OffscreenCanvas === 'undefined') {\n      // if OffscreenCanvas is present, we assume browser supports Worker and built-in Promise as well\n      resolve(false);\n      return;\n    }\n\n    function workerPayload(self) {\n      if (typeof createImageBitmap === 'undefined') {\n        self.postMessage(false);\n        return;\n      }\n\n      Promise.resolve().then(function () {\n        var canvas = new OffscreenCanvas(10, 10); // test that 2d context can be used in worker\n\n        var ctx = canvas.getContext('2d');\n        ctx.rect(0, 0, 1, 1); // test that cib can be used to return image bitmap from worker\n\n        return createImageBitmap(canvas, 0, 0, 1, 1);\n      }).then(function () {\n        return self.postMessage(true);\n      }, function () {\n        return self.postMessage(false);\n      });\n    }\n\n    var code = btoa(\"(\".concat(workerPayload.toString(), \")(self);\"));\n    var w = new Worker(\"data:text/javascript;base64,\".concat(code));\n\n    w.onmessage = function (ev) {\n      return resolve(ev.data);\n    };\n\n    w.onerror = reject;\n  }).then(function (result) {\n    return result;\n  }, function () {\n    return false;\n  });\n}; // Check if canvas.getContext('2d').getImageData can be used,\n// FireFox randomizes the output of that function in `privacy.resistFingerprinting` mode\n\n\nmodule.exports.can_use_canvas = function can_use_canvas(createCanvas) {\n  var usable = false;\n\n  try {\n    var canvas = createCanvas(2, 1);\n    var ctx = canvas.getContext('2d');\n    var d = ctx.createImageData(2, 1);\n    d.data[0] = 12;\n    d.data[1] = 23;\n    d.data[2] = 34;\n    d.data[3] = 255;\n    d.data[4] = 45;\n    d.data[5] = 56;\n    d.data[6] = 67;\n    d.data[7] = 255;\n    ctx.putImageData(d, 0, 0);\n    d = null;\n    d = ctx.getImageData(0, 0, 2, 1);\n\n    if (d.data[0] === 12 && d.data[1] === 23 && d.data[2] === 34 && d.data[3] === 255 && d.data[4] === 45 && d.data[5] === 56 && d.data[6] === 67 && d.data[7] === 255) {\n      usable = true;\n    }\n  } catch (err) {}\n\n  return usable;\n}; // Check if createImageBitmap(img, sx, sy, sw, sh) signature works correctly\n// with JPEG images oriented with Exif;\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1220671\n// TODO: remove after it's fixed in chrome for at least 2 releases\n\n\nmodule.exports.cib_can_use_region = function cib_can_use_region() {\n  return new Promise(function (resolve) {\n    // `Image` check required for use in `ServiceWorker`\n    if (typeof Image === 'undefined' || typeof createImageBitmap === 'undefined') {\n      resolve(false);\n      return;\n    }\n\n    var image = new Image();\n    image.src = 'data:image/jpeg;base64,' + '/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAA' + 'AABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9' + 'sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRc' + 'ZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoa' + 'GhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRA' + 'f/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAA' + 'IQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAA' + 'AAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIB' + 'AT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAA' + 'AAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAA' + 'AAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQ' + 'QAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z';\n\n    image.onload = function () {\n      createImageBitmap(image, 0, 0, image.width, image.height).then(function (bitmap) {\n        if (bitmap.width === image.width && bitmap.height === image.height) {\n          resolve(true);\n        } else {\n          resolve(false);\n        }\n      }, function () {\n        return resolve(false);\n      });\n    };\n\n    image.onerror = function () {\n      return resolve(false);\n    };\n  });\n};\n\n},{}],17:[function(_dereq_,module,exports){\n// Web Worker wrapper for image resize function\n'use strict';\n\nmodule.exports = function () {\n  var MathLib = _dereq_('./mathlib');\n\n  var mathLib;\n  /* eslint-disable no-undef */\n\n  onmessage = function onmessage(ev) {\n    var tileOpts = ev.data.opts;\n    var returnBitmap = false;\n\n    if (!tileOpts.src && tileOpts.srcBitmap) {\n      var canvas = new OffscreenCanvas(tileOpts.width, tileOpts.height);\n      var ctx = canvas.getContext('2d');\n      ctx.drawImage(tileOpts.srcBitmap, 0, 0);\n      tileOpts.src = ctx.getImageData(0, 0, tileOpts.width, tileOpts.height).data;\n      canvas.width = canvas.height = 0;\n      canvas = null;\n      tileOpts.srcBitmap.close();\n      tileOpts.srcBitmap = null; // Temporary force out data to typed array, because Chrome have artefacts\n      // https://github.com/nodeca/pica/issues/223\n      // returnBitmap = true;\n    }\n\n    if (!mathLib) mathLib = new MathLib(ev.data.features); // Use multimath's sync auto-init. Avoid Promise use in old browsers,\n    // because polyfills are not propagated to webworker.\n\n    var data = mathLib.resizeAndUnsharp(tileOpts);\n\n    if (returnBitmap) {\n      var toImageData = new ImageData(new Uint8ClampedArray(data), tileOpts.toWidth, tileOpts.toHeight);\n\n      var _canvas = new OffscreenCanvas(tileOpts.toWidth, tileOpts.toHeight);\n\n      var _ctx = _canvas.getContext('2d');\n\n      _ctx.putImageData(toImageData, 0, 0);\n\n      createImageBitmap(_canvas).then(function (bitmap) {\n        postMessage({\n          bitmap: bitmap\n        }, [bitmap]);\n      });\n    } else {\n      postMessage({\n        data: data\n      }, [data.buffer]);\n    }\n  };\n};\n\n},{\"./mathlib\":1}],18:[function(_dereq_,module,exports){\n// Calculate Gaussian blur of an image using IIR filter\n// The method is taken from Intel's white paper and code example attached to it:\n// https://software.intel.com/en-us/articles/iir-gaussian-blur-filter\n// -implementation-using-intel-advanced-vector-extensions\n\nvar a0, a1, a2, a3, b1, b2, left_corner, right_corner;\n\nfunction gaussCoef(sigma) {\n  if (sigma < 0.5) {\n    sigma = 0.5;\n  }\n\n  var a = Math.exp(0.726 * 0.726) / sigma,\n      g1 = Math.exp(-a),\n      g2 = Math.exp(-2 * a),\n      k = (1 - g1) * (1 - g1) / (1 + 2 * a * g1 - g2);\n\n  a0 = k;\n  a1 = k * (a - 1) * g1;\n  a2 = k * (a + 1) * g1;\n  a3 = -k * g2;\n  b1 = 2 * g1;\n  b2 = -g2;\n  left_corner = (a0 + a1) / (1 - b1 - b2);\n  right_corner = (a2 + a3) / (1 - b1 - b2);\n\n  // Attempt to force type to FP32.\n  return new Float32Array([ a0, a1, a2, a3, b1, b2, left_corner, right_corner ]);\n}\n\nfunction convolveMono16(src, out, line, coeff, width, height) {\n  // takes src image and writes the blurred and transposed result into out\n\n  var prev_src, curr_src, curr_out, prev_out, prev_prev_out;\n  var src_index, out_index, line_index;\n  var i, j;\n  var coeff_a0, coeff_a1, coeff_b1, coeff_b2;\n\n  for (i = 0; i < height; i++) {\n    src_index = i * width;\n    out_index = i;\n    line_index = 0;\n\n    // left to right\n    prev_src = src[src_index];\n    prev_prev_out = prev_src * coeff[6];\n    prev_out = prev_prev_out;\n\n    coeff_a0 = coeff[0];\n    coeff_a1 = coeff[1];\n    coeff_b1 = coeff[4];\n    coeff_b2 = coeff[5];\n\n    for (j = 0; j < width; j++) {\n      curr_src = src[src_index];\n\n      curr_out = curr_src * coeff_a0 +\n                 prev_src * coeff_a1 +\n                 prev_out * coeff_b1 +\n                 prev_prev_out * coeff_b2;\n\n      prev_prev_out = prev_out;\n      prev_out = curr_out;\n      prev_src = curr_src;\n\n      line[line_index] = prev_out;\n      line_index++;\n      src_index++;\n    }\n\n    src_index--;\n    line_index--;\n    out_index += height * (width - 1);\n\n    // right to left\n    prev_src = src[src_index];\n    prev_prev_out = prev_src * coeff[7];\n    prev_out = prev_prev_out;\n    curr_src = prev_src;\n\n    coeff_a0 = coeff[2];\n    coeff_a1 = coeff[3];\n\n    for (j = width - 1; j >= 0; j--) {\n      curr_out = curr_src * coeff_a0 +\n                 prev_src * coeff_a1 +\n                 prev_out * coeff_b1 +\n                 prev_prev_out * coeff_b2;\n\n      prev_prev_out = prev_out;\n      prev_out = curr_out;\n\n      prev_src = curr_src;\n      curr_src = src[src_index];\n\n      out[out_index] = line[line_index] + prev_out;\n\n      src_index--;\n      line_index--;\n      out_index -= height;\n    }\n  }\n}\n\n\nfunction blurMono16(src, width, height, radius) {\n  // Quick exit on zero radius\n  if (!radius) { return; }\n\n  var out      = new Uint16Array(src.length),\n      tmp_line = new Float32Array(Math.max(width, height));\n\n  var coeff = gaussCoef(radius);\n\n  convolveMono16(src, out, tmp_line, coeff, width, height, radius);\n  convolveMono16(out, src, tmp_line, coeff, height, width, radius);\n}\n\nmodule.exports = blurMono16;\n\n},{}],19:[function(_dereq_,module,exports){\n'use strict';\n\n\nvar assign         = _dereq_('object-assign');\nvar base64decode   = _dereq_('./lib/base64decode');\nvar hasWebAssembly = _dereq_('./lib/wa_detect');\n\n\nvar DEFAULT_OPTIONS = {\n  js: true,\n  wasm: true\n};\n\n\nfunction MultiMath(options) {\n  if (!(this instanceof MultiMath)) return new MultiMath(options);\n\n  var opts = assign({}, DEFAULT_OPTIONS, options || {});\n\n  this.options         = opts;\n\n  this.__cache         = {};\n\n  this.__init_promise  = null;\n  this.__modules       = opts.modules || {};\n  this.__memory        = null;\n  this.__wasm          = {};\n\n  this.__isLE = ((new Uint32Array((new Uint8Array([ 1, 0, 0, 0 ])).buffer))[0] === 1);\n\n  if (!this.options.js && !this.options.wasm) {\n    throw new Error('mathlib: at least \"js\" or \"wasm\" should be enabled');\n  }\n}\n\n\nMultiMath.prototype.has_wasm = hasWebAssembly;\n\n\nMultiMath.prototype.use = function (module) {\n  this.__modules[module.name] = module;\n\n  // Pin the best possible implementation\n  if (this.options.wasm && this.has_wasm() && module.wasm_fn) {\n    this[module.name] = module.wasm_fn;\n  } else {\n    this[module.name] = module.fn;\n  }\n\n  return this;\n};\n\n\nMultiMath.prototype.init = function () {\n  if (this.__init_promise) return this.__init_promise;\n\n  if (!this.options.js && this.options.wasm && !this.has_wasm()) {\n    return Promise.reject(new Error('mathlib: only \"wasm\" was enabled, but it\\'s not supported'));\n  }\n\n  var self = this;\n\n  this.__init_promise = Promise.all(Object.keys(self.__modules).map(function (name) {\n    var module = self.__modules[name];\n\n    if (!self.options.wasm || !self.has_wasm() || !module.wasm_fn) return null;\n\n    // If already compiled - exit\n    if (self.__wasm[name]) return null;\n\n    // Compile wasm source\n    return WebAssembly.compile(self.__base64decode(module.wasm_src))\n      .then(function (m) { self.__wasm[name] = m; });\n  }))\n    .then(function () { return self; });\n\n  return this.__init_promise;\n};\n\n\n////////////////////////////////////////////////////////////////////////////////\n// Methods below are for internal use from plugins\n\n\n// Simple decode base64 to typed array. Useful to load embedded webassembly\n// code. You probably don't need to call this method directly.\n//\nMultiMath.prototype.__base64decode = base64decode;\n\n\n// Increase current memory to include specified number of bytes. Do nothing if\n// size is already ok. You probably don't need to call this method directly,\n// because it will be invoked from `.__instance()`.\n//\nMultiMath.prototype.__reallocate = function mem_grow_to(bytes) {\n  if (!this.__memory) {\n    this.__memory = new WebAssembly.Memory({\n      initial: Math.ceil(bytes / (64 * 1024))\n    });\n    return this.__memory;\n  }\n\n  var mem_size = this.__memory.buffer.byteLength;\n\n  if (mem_size < bytes) {\n    this.__memory.grow(Math.ceil((bytes - mem_size) / (64 * 1024)));\n  }\n\n  return this.__memory;\n};\n\n\n// Returns instantinated webassembly item by name, with specified memory size\n// and environment.\n// - use cache if available\n// - do sync module init, if async init was not called earlier\n// - allocate memory if not enougth\n// - can export functions to webassembly via \"env_extra\",\n//   for example, { exp: Math.exp }\n//\nMultiMath.prototype.__instance = function instance(name, memsize, env_extra) {\n  if (memsize) this.__reallocate(memsize);\n\n  // If .init() was not called, do sync compile\n  if (!this.__wasm[name]) {\n    var module = this.__modules[name];\n    this.__wasm[name] = new WebAssembly.Module(this.__base64decode(module.wasm_src));\n  }\n\n  if (!this.__cache[name]) {\n    var env_base = {\n      memoryBase: 0,\n      memory: this.__memory,\n      tableBase: 0,\n      table: new WebAssembly.Table({ initial: 0, element: 'anyfunc' })\n    };\n\n    this.__cache[name] = new WebAssembly.Instance(this.__wasm[name], {\n      env: assign(env_base, env_extra || {})\n    });\n  }\n\n  return this.__cache[name];\n};\n\n\n// Helper to calculate memory aligh for pointers. Webassembly does not require\n// this, but you may wish to experiment. Default base = 8;\n//\nMultiMath.prototype.__align = function align(number, base) {\n  base = base || 8;\n  var reminder = number % base;\n  return number + (reminder ? base - reminder : 0);\n};\n\n\nmodule.exports = MultiMath;\n\n},{\"./lib/base64decode\":20,\"./lib/wa_detect\":21,\"object-assign\":22}],20:[function(_dereq_,module,exports){\n// base64 decode str -> Uint8Array, to load WA modules\n//\n'use strict';\n\n\nvar BASE64_MAP = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n\nmodule.exports = function base64decode(str) {\n  var input = str.replace(/[\\r\\n=]/g, ''), // remove CR/LF & padding to simplify scan\n      max   = input.length;\n\n  var out = new Uint8Array((max * 3) >> 2);\n\n  // Collect by 6*4 bits (3 bytes)\n\n  var bits = 0;\n  var ptr  = 0;\n\n  for (var idx = 0; idx < max; idx++) {\n    if ((idx % 4 === 0) && idx) {\n      out[ptr++] = (bits >> 16) & 0xFF;\n      out[ptr++] = (bits >> 8) & 0xFF;\n      out[ptr++] = bits & 0xFF;\n    }\n\n    bits = (bits << 6) | BASE64_MAP.indexOf(input.charAt(idx));\n  }\n\n  // Dump tail\n\n  var tailbits = (max % 4) * 6;\n\n  if (tailbits === 0) {\n    out[ptr++] = (bits >> 16) & 0xFF;\n    out[ptr++] = (bits >> 8) & 0xFF;\n    out[ptr++] = bits & 0xFF;\n  } else if (tailbits === 18) {\n    out[ptr++] = (bits >> 10) & 0xFF;\n    out[ptr++] = (bits >> 2) & 0xFF;\n  } else if (tailbits === 12) {\n    out[ptr++] = (bits >> 4) & 0xFF;\n  }\n\n  return out;\n};\n\n},{}],21:[function(_dereq_,module,exports){\n// Detect WebAssembly support.\n// - Check global WebAssembly object\n// - Try to load simple module (can be disabled via CSP)\n//\n'use strict';\n\n\nvar wa;\n\n\nmodule.exports = function hasWebAssembly() {\n  // use cache if called before;\n  if (typeof wa !== 'undefined') return wa;\n\n  wa = false;\n\n  if (typeof WebAssembly === 'undefined') return wa;\n\n  // If WebAssenbly is disabled, code can throw on compile\n  try {\n    // https://github.com/brion/min-wasm-fail/blob/master/min-wasm-fail.in.js\n    // Additional check that WA internals are correct\n\n    /* eslint-disable comma-spacing, max-len */\n    var bin      = new Uint8Array([ 0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11 ]);\n    var module   = new WebAssembly.Module(bin);\n    var instance = new WebAssembly.Instance(module, {});\n\n    // test storing to and loading from a non-zero location via a parameter.\n    // Safari on iOS 11.2.5 returns 0 unexpectedly at non-zero locations\n    if (instance.exports.test(4) !== 0) wa = true;\n\n    return wa;\n  } catch (__) {}\n\n  return wa;\n};\n\n},{}],22:[function(_dereq_,module,exports){\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n},{}],23:[function(_dereq_,module,exports){\nvar bundleFn = arguments[3];\nvar sources = arguments[4];\nvar cache = arguments[5];\n\nvar stringify = JSON.stringify;\n\nmodule.exports = function (fn, options) {\n    var wkey;\n    var cacheKeys = Object.keys(cache);\n\n    for (var i = 0, l = cacheKeys.length; i < l; i++) {\n        var key = cacheKeys[i];\n        var exp = cache[key].exports;\n        // Using babel as a transpiler to use esmodule, the export will always\n        // be an object with the default export as a property of it. To ensure\n        // the existing api and babel esmodule exports are both supported we\n        // check for both\n        if (exp === fn || exp && exp.default === fn) {\n            wkey = key;\n            break;\n        }\n    }\n\n    if (!wkey) {\n        wkey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n        var wcache = {};\n        for (var i = 0, l = cacheKeys.length; i < l; i++) {\n            var key = cacheKeys[i];\n            wcache[key] = key;\n        }\n        sources[wkey] = [\n            'function(require,module,exports){' + fn + '(self); }',\n            wcache\n        ];\n    }\n    var skey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n\n    var scache = {}; scache[wkey] = wkey;\n    sources[skey] = [\n        'function(require,module,exports){' +\n            // try to call default if defined to also support babel esmodule exports\n            'var f = require(' + stringify(wkey) + ');' +\n            '(f.default ? f.default : f)(self);' +\n        '}',\n        scache\n    ];\n\n    var workerSources = {};\n    resolveSources(skey);\n\n    function resolveSources(key) {\n        workerSources[key] = true;\n\n        for (var depPath in sources[key][1]) {\n            var depKey = sources[key][1][depPath];\n            if (!workerSources[depKey]) {\n                resolveSources(depKey);\n            }\n        }\n    }\n\n    var src = '(' + bundleFn + ')({'\n        + Object.keys(workerSources).map(function (key) {\n            return stringify(key) + ':['\n                + sources[key][0]\n                + ',' + stringify(sources[key][1]) + ']'\n            ;\n        }).join(',')\n        + '},{},[' + stringify(skey) + '])'\n    ;\n\n    var URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\n\n    var blob = new Blob([src], { type: 'text/javascript' });\n    if (options && options.bare) { return blob; }\n    var workerUrl = URL.createObjectURL(blob);\n    var worker = new Worker(workerUrl);\n    worker.objectURL = workerUrl;\n    return worker;\n};\n\n},{}],\"/index.js\":[function(_dereq_,module,exports){\n'use strict';\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar assign = _dereq_('object-assign');\n\nvar webworkify = _dereq_('webworkify');\n\nvar MathLib = _dereq_('./lib/mathlib');\n\nvar Pool = _dereq_('./lib/pool');\n\nvar utils = _dereq_('./lib/utils');\n\nvar worker = _dereq_('./lib/worker');\n\nvar createStages = _dereq_('./lib/stepper');\n\nvar createRegions = _dereq_('./lib/tiler');\n\nvar filter_info = _dereq_('./lib/mm_resize/resize_filter_info'); // Deduplicate pools & limiters with the same configs\n// when user creates multiple pica instances.\n\n\nvar singletones = {};\nvar NEED_SAFARI_FIX = false;\n\ntry {\n  if (typeof navigator !== 'undefined' && navigator.userAgent) {\n    NEED_SAFARI_FIX = navigator.userAgent.indexOf('Safari') >= 0;\n  }\n} catch (e) {}\n\nvar concurrency = 1;\n\nif (typeof navigator !== 'undefined') {\n  concurrency = Math.min(navigator.hardwareConcurrency || 1, 4);\n}\n\nvar DEFAULT_PICA_OPTS = {\n  tile: 1024,\n  concurrency: concurrency,\n  features: ['js', 'wasm', 'ww'],\n  idle: 2000,\n  createCanvas: function createCanvas(width, height) {\n    var tmpCanvas = document.createElement('canvas');\n    tmpCanvas.width = width;\n    tmpCanvas.height = height;\n    return tmpCanvas;\n  }\n};\nvar DEFAULT_RESIZE_OPTS = {\n  filter: 'mks2013',\n  unsharpAmount: 0,\n  unsharpRadius: 0.0,\n  unsharpThreshold: 0\n};\nvar CAN_NEW_IMAGE_DATA = false;\nvar CAN_CREATE_IMAGE_BITMAP = false;\nvar CAN_USE_CANVAS_GET_IMAGE_DATA = false;\nvar CAN_USE_OFFSCREEN_CANVAS = false;\nvar CAN_USE_CIB_REGION_FOR_IMAGE = false;\n\nfunction workerFabric() {\n  return {\n    value: webworkify(worker),\n    destroy: function destroy() {\n      this.value.terminate();\n\n      if (typeof window !== 'undefined') {\n        var url = window.URL || window.webkitURL || window.mozURL || window.msURL;\n\n        if (url && url.revokeObjectURL && this.value.objectURL) {\n          url.revokeObjectURL(this.value.objectURL);\n        }\n      }\n    }\n  };\n} ////////////////////////////////////////////////////////////////////////////////\n// API methods\n\n\nfunction Pica(options) {\n  if (!(this instanceof Pica)) return new Pica(options);\n  this.options = assign({}, DEFAULT_PICA_OPTS, options || {});\n  var limiter_key = \"lk_\".concat(this.options.concurrency); // Share limiters to avoid multiple parallel workers when user creates\n  // multiple pica instances.\n\n  this.__limit = singletones[limiter_key] || utils.limiter(this.options.concurrency);\n  if (!singletones[limiter_key]) singletones[limiter_key] = this.__limit; // List of supported features, according to options & browser/node.js\n\n  this.features = {\n    js: false,\n    // pure JS implementation, can be disabled for testing\n    wasm: false,\n    // webassembly implementation for heavy functions\n    cib: false,\n    // resize via createImageBitmap (only FF at this moment)\n    ww: false // webworkers\n\n  };\n  this.__workersPool = null; // Store requested features for webworkers\n\n  this.__requested_features = [];\n  this.__mathlib = null;\n}\n\nPica.prototype.init = function () {\n  var _this = this;\n\n  if (this.__initPromise) return this.__initPromise; // Test if we can create ImageData without canvas and memory copy\n\n  if (typeof ImageData !== 'undefined' && typeof Uint8ClampedArray !== 'undefined') {\n    try {\n      /* eslint-disable no-new */\n      new ImageData(new Uint8ClampedArray(400), 10, 10);\n      CAN_NEW_IMAGE_DATA = true;\n    } catch (__) {}\n  } // ImageBitmap can be effective in 2 places:\n  //\n  // 1. Threaded jpeg unpack (basic)\n  // 2. Built-in resize (blocked due problem in chrome, see issue #89)\n  //\n  // For basic use we also need ImageBitmap wo support .close() method,\n  // see https://developer.mozilla.org/ru/docs/Web/API/ImageBitmap\n\n\n  if (typeof ImageBitmap !== 'undefined') {\n    if (ImageBitmap.prototype && ImageBitmap.prototype.close) {\n      CAN_CREATE_IMAGE_BITMAP = true;\n    } else {\n      this.debug('ImageBitmap does not support .close(), disabled');\n    }\n  }\n\n  var features = this.options.features.slice();\n\n  if (features.indexOf('all') >= 0) {\n    features = ['cib', 'wasm', 'js', 'ww'];\n  }\n\n  this.__requested_features = features;\n  this.__mathlib = new MathLib(features); // Check WebWorker support if requested\n\n  if (features.indexOf('ww') >= 0) {\n    if (typeof window !== 'undefined' && 'Worker' in window) {\n      // IE <= 11 don't allow to create webworkers from string. We should check it.\n      // https://connect.microsoft.com/IE/feedback/details/801810/web-workers-from-blob-urls-in-ie-10-and-11\n      try {\n        var wkr = _dereq_('webworkify')(function () {});\n\n        wkr.terminate();\n        this.features.ww = true; // pool uniqueness depends on pool config + webworker config\n\n        var wpool_key = \"wp_\".concat(JSON.stringify(this.options));\n\n        if (singletones[wpool_key]) {\n          this.__workersPool = singletones[wpool_key];\n        } else {\n          this.__workersPool = new Pool(workerFabric, this.options.idle);\n          singletones[wpool_key] = this.__workersPool;\n        }\n      } catch (__) {}\n    }\n  }\n\n  var initMath = this.__mathlib.init().then(function (mathlib) {\n    // Copy detected features\n    assign(_this.features, mathlib.features);\n  });\n\n  var checkCibResize;\n\n  if (!CAN_CREATE_IMAGE_BITMAP) {\n    checkCibResize = Promise.resolve(false);\n  } else {\n    checkCibResize = utils.cib_support(this.options.createCanvas).then(function (status) {\n      if (_this.features.cib && features.indexOf('cib') < 0) {\n        _this.debug('createImageBitmap() resize supported, but disabled by config');\n\n        return;\n      }\n\n      if (features.indexOf('cib') >= 0) _this.features.cib = status;\n    });\n  }\n\n  CAN_USE_CANVAS_GET_IMAGE_DATA = utils.can_use_canvas(this.options.createCanvas);\n  var checkOffscreenCanvas;\n\n  if (CAN_CREATE_IMAGE_BITMAP && CAN_NEW_IMAGE_DATA && features.indexOf('ww') !== -1) {\n    checkOffscreenCanvas = utils.worker_offscreen_canvas_support();\n  } else {\n    checkOffscreenCanvas = Promise.resolve(false);\n  }\n\n  checkOffscreenCanvas = checkOffscreenCanvas.then(function (result) {\n    CAN_USE_OFFSCREEN_CANVAS = result;\n  }); // we use createImageBitmap to crop image data and pass it to workers,\n  // so need to check whether function works correctly;\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=1220671\n\n  var checkCibRegion = utils.cib_can_use_region().then(function (result) {\n    CAN_USE_CIB_REGION_FOR_IMAGE = result;\n  }); // Init math lib. That's async because can load some\n\n  this.__initPromise = Promise.all([initMath, checkCibResize, checkOffscreenCanvas, checkCibRegion]).then(function () {\n    return _this;\n  });\n  return this.__initPromise;\n}; // Call resizer in webworker or locally, depending on config\n\n\nPica.prototype.__invokeResize = function (tileOpts, opts) {\n  var _this2 = this;\n\n  // Share cache between calls:\n  //\n  // - wasm instance\n  // - wasm memory object\n  //\n  opts.__mathCache = opts.__mathCache || {};\n  return Promise.resolve().then(function () {\n    if (!_this2.features.ww) {\n      // not possible to have ImageBitmap here if user disabled WW\n      return {\n        data: _this2.__mathlib.resizeAndUnsharp(tileOpts, opts.__mathCache)\n      };\n    }\n\n    return new Promise(function (resolve, reject) {\n      var w = _this2.__workersPool.acquire();\n\n      if (opts.cancelToken) opts.cancelToken[\"catch\"](function (err) {\n        return reject(err);\n      });\n\n      w.value.onmessage = function (ev) {\n        w.release();\n        if (ev.data.err) reject(ev.data.err);else resolve(ev.data);\n      };\n\n      var transfer = [];\n      if (tileOpts.src) transfer.push(tileOpts.src.buffer);\n      if (tileOpts.srcBitmap) transfer.push(tileOpts.srcBitmap);\n      w.value.postMessage({\n        opts: tileOpts,\n        features: _this2.__requested_features,\n        preload: {\n          wasm_nodule: _this2.__mathlib.__\n        }\n      }, transfer);\n    });\n  });\n}; // this function can return promise if createImageBitmap is used\n\n\nPica.prototype.__extractTileData = function (tile, from, opts, stageEnv, extractTo) {\n  if (this.features.ww && CAN_USE_OFFSCREEN_CANVAS && ( // createImageBitmap doesn't work for images (Image, ImageBitmap) with Exif orientation in Chrome,\n  // can use canvas because canvas doesn't have orientation;\n  // see https://bugs.chromium.org/p/chromium/issues/detail?id=1220671\n  utils.isCanvas(from) || CAN_USE_CIB_REGION_FOR_IMAGE)) {\n    this.debug('Create tile for OffscreenCanvas');\n    return createImageBitmap(stageEnv.srcImageBitmap || from, tile.x, tile.y, tile.width, tile.height).then(function (bitmap) {\n      extractTo.srcBitmap = bitmap;\n      return extractTo;\n    });\n  } // Extract tile RGBA buffer, depending on input type\n\n\n  if (utils.isCanvas(from)) {\n    if (!stageEnv.srcCtx) stageEnv.srcCtx = from.getContext('2d'); // If input is Canvas - extract region data directly\n\n    this.debug('Get tile pixel data');\n    extractTo.src = stageEnv.srcCtx.getImageData(tile.x, tile.y, tile.width, tile.height).data;\n    return extractTo;\n  } // If input is Image or decoded to ImageBitmap,\n  // draw region to temporary canvas and extract data from it\n  //\n  // Note! Attempt to reuse this canvas causes significant slowdown in chrome\n  //\n\n\n  this.debug('Draw tile imageBitmap/image to temporary canvas');\n  var tmpCanvas = this.options.createCanvas(tile.width, tile.height);\n  var tmpCtx = tmpCanvas.getContext('2d');\n  tmpCtx.globalCompositeOperation = 'copy';\n  tmpCtx.drawImage(stageEnv.srcImageBitmap || from, tile.x, tile.y, tile.width, tile.height, 0, 0, tile.width, tile.height);\n  this.debug('Get tile pixel data');\n  extractTo.src = tmpCtx.getImageData(0, 0, tile.width, tile.height).data; // Safari 12 workaround\n  // https://github.com/nodeca/pica/issues/199\n\n  tmpCanvas.width = tmpCanvas.height = 0;\n  return extractTo;\n};\n\nPica.prototype.__landTileData = function (tile, result, stageEnv) {\n  var toImageData;\n  this.debug('Convert raw rgba tile result to ImageData');\n\n  if (result.bitmap) {\n    stageEnv.toCtx.drawImage(result.bitmap, tile.toX, tile.toY);\n    return null;\n  }\n\n  if (CAN_NEW_IMAGE_DATA) {\n    // this branch is for modern browsers\n    // If `new ImageData()` & Uint8ClampedArray suported\n    toImageData = new ImageData(new Uint8ClampedArray(result.data), tile.toWidth, tile.toHeight);\n  } else {\n    // fallback for `node-canvas` and old browsers\n    // (IE11 has ImageData but does not support `new ImageData()`)\n    toImageData = stageEnv.toCtx.createImageData(tile.toWidth, tile.toHeight);\n\n    if (toImageData.data.set) {\n      toImageData.data.set(result.data);\n    } else {\n      // IE9 don't have `.set()`\n      for (var i = toImageData.data.length - 1; i >= 0; i--) {\n        toImageData.data[i] = result.data[i];\n      }\n    }\n  }\n\n  this.debug('Draw tile');\n\n  if (NEED_SAFARI_FIX) {\n    // Safari draws thin white stripes between tiles without this fix\n    stageEnv.toCtx.putImageData(toImageData, tile.toX, tile.toY, tile.toInnerX - tile.toX, tile.toInnerY - tile.toY, tile.toInnerWidth + 1e-5, tile.toInnerHeight + 1e-5);\n  } else {\n    stageEnv.toCtx.putImageData(toImageData, tile.toX, tile.toY, tile.toInnerX - tile.toX, tile.toInnerY - tile.toY, tile.toInnerWidth, tile.toInnerHeight);\n  }\n\n  return null;\n};\n\nPica.prototype.__tileAndResize = function (from, to, opts) {\n  var _this3 = this;\n\n  var stageEnv = {\n    srcCtx: null,\n    srcImageBitmap: null,\n    isImageBitmapReused: false,\n    toCtx: null\n  };\n\n  var processTile = function processTile(tile) {\n    return _this3.__limit(function () {\n      if (opts.canceled) return opts.cancelToken;\n      var tileOpts = {\n        width: tile.width,\n        height: tile.height,\n        toWidth: tile.toWidth,\n        toHeight: tile.toHeight,\n        scaleX: tile.scaleX,\n        scaleY: tile.scaleY,\n        offsetX: tile.offsetX,\n        offsetY: tile.offsetY,\n        filter: opts.filter,\n        unsharpAmount: opts.unsharpAmount,\n        unsharpRadius: opts.unsharpRadius,\n        unsharpThreshold: opts.unsharpThreshold\n      };\n\n      _this3.debug('Invoke resize math');\n\n      return Promise.resolve(tileOpts).then(function (tileOpts) {\n        return _this3.__extractTileData(tile, from, opts, stageEnv, tileOpts);\n      }).then(function (tileOpts) {\n        _this3.debug('Invoke resize math');\n\n        return _this3.__invokeResize(tileOpts, opts);\n      }).then(function (result) {\n        if (opts.canceled) return opts.cancelToken;\n        stageEnv.srcImageData = null;\n        return _this3.__landTileData(tile, result, stageEnv);\n      });\n    });\n  }; // Need to normalize data source first. It can be canvas or image.\n  // If image - try to decode in background if possible\n\n\n  return Promise.resolve().then(function () {\n    stageEnv.toCtx = to.getContext('2d');\n    if (utils.isCanvas(from)) return null;\n\n    if (utils.isImageBitmap(from)) {\n      stageEnv.srcImageBitmap = from;\n      stageEnv.isImageBitmapReused = true;\n      return null;\n    }\n\n    if (utils.isImage(from)) {\n      // try do decode image in background for faster next operations;\n      // if we're using offscreen canvas, cib is called per tile, so not needed here\n      if (!CAN_CREATE_IMAGE_BITMAP) return null;\n\n      _this3.debug('Decode image via createImageBitmap');\n\n      return createImageBitmap(from).then(function (imageBitmap) {\n        stageEnv.srcImageBitmap = imageBitmap;\n      }) // Suppress error to use fallback, if method fails\n      // https://github.com/nodeca/pica/issues/190\n\n      /* eslint-disable no-unused-vars */\n      [\"catch\"](function (e) {\n        return null;\n      });\n    }\n\n    throw new Error('Pica: \".from\" should be Image, Canvas or ImageBitmap');\n  }).then(function () {\n    if (opts.canceled) return opts.cancelToken;\n\n    _this3.debug('Calculate tiles'); //\n    // Here we are with \"normalized\" source,\n    // follow to tiling\n    //\n\n\n    var regions = createRegions({\n      width: opts.width,\n      height: opts.height,\n      srcTileSize: _this3.options.tile,\n      toWidth: opts.toWidth,\n      toHeight: opts.toHeight,\n      destTileBorder: opts.__destTileBorder\n    });\n    var jobs = regions.map(function (tile) {\n      return processTile(tile);\n    });\n\n    function cleanup(stageEnv) {\n      if (stageEnv.srcImageBitmap) {\n        if (!stageEnv.isImageBitmapReused) stageEnv.srcImageBitmap.close();\n        stageEnv.srcImageBitmap = null;\n      }\n    }\n\n    _this3.debug('Process tiles');\n\n    return Promise.all(jobs).then(function () {\n      _this3.debug('Finished!');\n\n      cleanup(stageEnv);\n      return to;\n    }, function (err) {\n      cleanup(stageEnv);\n      throw err;\n    });\n  });\n};\n\nPica.prototype.__processStages = function (stages, from, to, opts) {\n  var _this4 = this;\n\n  if (opts.canceled) return opts.cancelToken;\n\n  var _stages$shift = stages.shift(),\n      _stages$shift2 = _slicedToArray(_stages$shift, 2),\n      toWidth = _stages$shift2[0],\n      toHeight = _stages$shift2[1];\n\n  var isLastStage = stages.length === 0; // Optimization for legacy filters -\n  // only use user-defined quality for the last stage,\n  // use simpler (Hamming) filter for the first stages where\n  // scale factor is large enough (more than 2-3)\n  //\n  // For advanced filters (mks2013 and custom) - skip optimization,\n  // because need to apply sharpening every time\n\n  var filter;\n  if (isLastStage || filter_info.q2f.indexOf(opts.filter) < 0) filter = opts.filter;else if (opts.filter === 'box') filter = 'box';else filter = 'hamming';\n  opts = assign({}, opts, {\n    toWidth: toWidth,\n    toHeight: toHeight,\n    filter: filter\n  });\n  var tmpCanvas;\n\n  if (!isLastStage) {\n    // create temporary canvas\n    tmpCanvas = this.options.createCanvas(toWidth, toHeight);\n  }\n\n  return this.__tileAndResize(from, isLastStage ? to : tmpCanvas, opts).then(function () {\n    if (isLastStage) return to;\n    opts.width = toWidth;\n    opts.height = toHeight;\n    return _this4.__processStages(stages, tmpCanvas, to, opts);\n  }).then(function (res) {\n    if (tmpCanvas) {\n      // Safari 12 workaround\n      // https://github.com/nodeca/pica/issues/199\n      tmpCanvas.width = tmpCanvas.height = 0;\n    }\n\n    return res;\n  });\n};\n\nPica.prototype.__resizeViaCreateImageBitmap = function (from, to, opts) {\n  var _this5 = this;\n\n  var toCtx = to.getContext('2d');\n  this.debug('Resize via createImageBitmap()');\n  return createImageBitmap(from, {\n    resizeWidth: opts.toWidth,\n    resizeHeight: opts.toHeight,\n    resizeQuality: utils.cib_quality_name(filter_info.f2q[opts.filter])\n  }).then(function (imageBitmap) {\n    if (opts.canceled) return opts.cancelToken; // if no unsharp - draw directly to output canvas\n\n    if (!opts.unsharpAmount) {\n      toCtx.drawImage(imageBitmap, 0, 0);\n      imageBitmap.close();\n      toCtx = null;\n\n      _this5.debug('Finished!');\n\n      return to;\n    }\n\n    _this5.debug('Unsharp result');\n\n    var tmpCanvas = _this5.options.createCanvas(opts.toWidth, opts.toHeight);\n\n    var tmpCtx = tmpCanvas.getContext('2d');\n    tmpCtx.drawImage(imageBitmap, 0, 0);\n    imageBitmap.close();\n    var iData = tmpCtx.getImageData(0, 0, opts.toWidth, opts.toHeight);\n\n    _this5.__mathlib.unsharp_mask(iData.data, opts.toWidth, opts.toHeight, opts.unsharpAmount, opts.unsharpRadius, opts.unsharpThreshold);\n\n    toCtx.putImageData(iData, 0, 0); // Safari 12 workaround\n    // https://github.com/nodeca/pica/issues/199\n\n    tmpCanvas.width = tmpCanvas.height = 0;\n    iData = tmpCtx = tmpCanvas = toCtx = null;\n\n    _this5.debug('Finished!');\n\n    return to;\n  });\n};\n\nPica.prototype.resize = function (from, to, options) {\n  var _this6 = this;\n\n  this.debug('Start resize...');\n  var opts = assign({}, DEFAULT_RESIZE_OPTS);\n\n  if (!isNaN(options)) {\n    opts = assign(opts, {\n      quality: options\n    });\n  } else if (options) {\n    opts = assign(opts, options);\n  }\n\n  opts.toWidth = to.width;\n  opts.toHeight = to.height;\n  opts.width = from.naturalWidth || from.width;\n  opts.height = from.naturalHeight || from.height; // Legacy `.quality` option\n\n  if (Object.prototype.hasOwnProperty.call(opts, 'quality')) {\n    if (opts.quality < 0 || opts.quality > 3) {\n      throw new Error(\"Pica: .quality should be [0..3], got \".concat(opts.quality));\n    }\n\n    opts.filter = filter_info.q2f[opts.quality];\n  } // Prevent stepper from infinite loop\n\n\n  if (to.width === 0 || to.height === 0) {\n    return Promise.reject(new Error(\"Invalid output size: \".concat(to.width, \"x\").concat(to.height)));\n  }\n\n  if (opts.unsharpRadius > 2) opts.unsharpRadius = 2;\n  opts.canceled = false;\n\n  if (opts.cancelToken) {\n    // Wrap cancelToken to avoid successive resolve & set flag\n    opts.cancelToken = opts.cancelToken.then(function (data) {\n      opts.canceled = true;\n      throw data;\n    }, function (err) {\n      opts.canceled = true;\n      throw err;\n    });\n  }\n\n  var DEST_TILE_BORDER = 3; // Max possible filter window size\n\n  opts.__destTileBorder = Math.ceil(Math.max(DEST_TILE_BORDER, 2.5 * opts.unsharpRadius | 0));\n  return this.init().then(function () {\n    if (opts.canceled) return opts.cancelToken; // if createImageBitmap supports resize, just do it and return\n\n    if (_this6.features.cib) {\n      if (filter_info.q2f.indexOf(opts.filter) >= 0) {\n        return _this6.__resizeViaCreateImageBitmap(from, to, opts);\n      }\n\n      _this6.debug('cib is enabled, but not supports provided filter, fallback to manual math');\n    }\n\n    if (!CAN_USE_CANVAS_GET_IMAGE_DATA) {\n      var err = new Error('Pica: cannot use getImageData on canvas, ' + \"make sure fingerprinting protection isn't enabled\");\n      err.code = 'ERR_GET_IMAGE_DATA';\n      throw err;\n    } //\n    // No easy way, let's resize manually via arrays\n    //\n\n\n    var stages = createStages(opts.width, opts.height, opts.toWidth, opts.toHeight, _this6.options.tile, opts.__destTileBorder);\n    return _this6.__processStages(stages, from, to, opts);\n  });\n}; // RGBA buffer resize\n//\n\n\nPica.prototype.resizeBuffer = function (options) {\n  var _this7 = this;\n\n  var opts = assign({}, DEFAULT_RESIZE_OPTS, options); // Legacy `.quality` option\n\n  if (Object.prototype.hasOwnProperty.call(opts, 'quality')) {\n    if (opts.quality < 0 || opts.quality > 3) {\n      throw new Error(\"Pica: .quality should be [0..3], got \".concat(opts.quality));\n    }\n\n    opts.filter = filter_info.q2f[opts.quality];\n  }\n\n  return this.init().then(function () {\n    return _this7.__mathlib.resizeAndUnsharp(opts);\n  });\n};\n\nPica.prototype.toBlob = function (canvas, mimeType, quality) {\n  mimeType = mimeType || 'image/png';\n  return new Promise(function (resolve) {\n    if (canvas.toBlob) {\n      canvas.toBlob(function (blob) {\n        return resolve(blob);\n      }, mimeType, quality);\n      return;\n    }\n\n    if (canvas.convertToBlob) {\n      resolve(canvas.convertToBlob({\n        type: mimeType,\n        quality: quality\n      }));\n      return;\n    } // Fallback for old browsers\n\n\n    var asString = atob(canvas.toDataURL(mimeType, quality).split(',')[1]);\n    var len = asString.length;\n    var asBuffer = new Uint8Array(len);\n\n    for (var i = 0; i < len; i++) {\n      asBuffer[i] = asString.charCodeAt(i);\n    }\n\n    resolve(new Blob([asBuffer], {\n      type: mimeType\n    }));\n  });\n};\n\nPica.prototype.debug = function () {};\n\nmodule.exports = Pica;\n\n},{\"./lib/mathlib\":1,\"./lib/mm_resize/resize_filter_info\":7,\"./lib/pool\":13,\"./lib/stepper\":14,\"./lib/tiler\":15,\"./lib/utils\":16,\"./lib/worker\":17,\"object-assign\":22,\"webworkify\":23}]},{},[])(\"/index.js\")\n});\n","export let createNanoEvents = () => ({\n  emit(event, ...args) {\n    for (\n      let callbacks = this.events[event] || [],\n        i = 0,\n        length = callbacks.length;\n      i < length;\n      i++\n    ) {\n      callbacks[i](...args)\n    }\n  },\n  events: {},\n  on(event, cb) {\n    ;(this.events[event] ||= []).push(cb)\n    return () => {\n      this.events[event] = this.events[event]?.filter(i => cb !== i)\n    }\n  }\n})\n","import { createNanoEvents } from 'nanoevents';\n\nclass TrackedSettings {\n\tconstructor(initial = {}, settingsDefinition = {}) {\n\t\t\n\t\tthis._emitter = createNanoEvents();\n\t\tthis._definition = settingsDefinition;\n\n\t\tlet defaultSettings = {};\n\t\tfor (const key in settingsDefinition) {\n\t\t\tif (settingsDefinition.hasOwnProperty(key)) {\n\t\t\t\tconst setting = settingsDefinition[key];\n\t\t\t\tdefaultSettings[key] = setting.default;\n\t\t\t}\n\t\t}\n\t\tthis._values = { ...defaultSettings, ...initial };\n\n\t\treturn new Proxy(this, {\n\t\t\tget(target, prop) {\n\t\t\t\tif (prop in target) return target[prop];\n\t\t\t\treturn target._values[prop];\n\t\t\t},\n\t\t\tset(target, prop, value) {\n\t\t\t\tconst oldValue = target._values[prop];\n\t\t\t\tif (oldValue !== value) {\n\t\t\t\t\ttarget._values[prop] = value;\n\t\t\t\t\ttarget._emitter.emit(prop, value);\n\t\t\t\t\ttarget._emitter.emit(\"change\", { key: prop, value, oldValue });\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\thas(target, prop) {\n\t\t\t\treturn prop in target._values || prop in target;\n\t\t\t},\n\t\t\townKeys(target) {\n\t\t\t\t// Only enumerate _values props, not internal methods\n\t\t\t\treturn Reflect.ownKeys(target._values);\n\t\t\t},\n\t\t\tgetOwnPropertyDescriptor(target, prop) {\n\t\t\t\tif (prop in target._values) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tconfigurable: true,\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\twritable: true,\n\t\t\t\t\t\tvalue: target._values[prop]\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t// Allow Object.keys and others to still find internal props\n\t\t\t\treturn Reflect.getOwnPropertyDescriptor(target, prop);\n\t\t\t}\n\t\t});\n\t}\n\n\tgetAll() {\n\t\treturn { ...this._values };\n\t}\n\n\tsetAll(newValues) {\n\t\tfor (let key in newValues) {\n\t\t\tthis[key] = newValues[key]; // triggers proxy\n\t\t}\n\t}\n\n\tget(key) {\n\t\treturn this._values[key];\n\t}\n\n\tset(key, value) {\n\t\tthis[key] = value; // Triggers proxy + event\n\t}\n\t\n\n\ton(event, handler) {\n\t\treturn this._emitter.on(event, handler); // Returns unsubscribe()\n\t}\n\n\toff(event, handler) {\n\t\t// Not native to nanoevents, but you can filter manually if needed\n\t\t// or recreate emitter without that handler\n\t}\n\n\tdefinition () {\n\t\treturn this._definition;\n\t}\n}\n\nexport default TrackedSettings;\nexport { TrackedSettings };","\r\n// Temporary fix for\r\n// https://github.com/evanw/esbuild/issues/312\r\n\r\n// const { forceLink, link } = require(\"d3\");\r\nimport TrackedSettings from \"../utilities/TrackedSettings.js\";\r\n\r\nlet workerFunction = (function (){\r\n\t//dummy require\r\n\tvar require = function(moduleName){};\r\n\t// // // https://d3js.org/d3-dispatch/ v3.0.1 Copyright 2010-2021 Mike Bostock\r\n\t!function(n,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?e(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],e):e((n=\"undefined\"!=typeof globalThis?globalThis:n||self).d3=n.d3||{})}(this,(function(n){\"use strict\";var e={value:()=>{}};function t(){for(var n,e=0,t=arguments.length,o={};e<t;++e){if(!(n=arguments[e]+\"\")||n in o||/[\\s.]/.test(n))throw new Error(\"illegal type: \"+n);o[n]=[]}return new r(o)}function r(n){this._=n}function o(n,e){return n.trim().split(/^|\\s+/).map((function(n){var t=\"\",r=n.indexOf(\".\");if(r>=0&&(t=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error(\"unknown type: \"+n);return{type:n,name:t}}))}function i(n,e){for(var t,r=0,o=n.length;r<o;++r)if((t=n[r]).name===e)return t.value}function f(n,t,r){for(var o=0,i=n.length;o<i;++o)if(n[o].name===t){n[o]=e,n=n.slice(0,o).concat(n.slice(o+1));break}return null!=r&&n.push({name:t,value:r}),n}r.prototype=t.prototype={constructor:r,on:function(n,e){var t,r=this._,l=o(n+\"\",r),a=-1,u=l.length;if(!(arguments.length<2)){if(null!=e&&\"function\"!=typeof e)throw new Error(\"invalid callback: \"+e);for(;++a<u;)if(t=(n=l[a]).type)r[t]=f(r[t],n.name,e);else if(null==e)for(t in r)r[t]=f(r[t],n.name,null);return this}for(;++a<u;)if((t=(n=l[a]).type)&&(t=i(r[t],n.name)))return t},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new r(n)},call:function(n,e){if((t=arguments.length-2)>0)for(var t,r,o=new Array(t),i=0;i<t;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error(\"unknown type: \"+n);for(i=0,t=(r=this._[n]).length;i<t;++i)r[i].value.apply(e,o)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error(\"unknown type: \"+n);for(var r=this._[n],o=0,i=r.length;o<i;++o)r[o].value.apply(e,t)}},n.dispatch=t,Object.defineProperty(n,\"__esModule\",{value:!0})}));\r\n\t// // // https://d3js.org/d3-quadtree/ v3.0.1 Copyright 2010-2021 Mike Bostock\r\n\t!function(t,i){\"object\"==typeof exports&&\"undefined\"!=typeof module?i(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],i):i((t=\"undefined\"!=typeof globalThis?globalThis:t||self).d3=t.d3||{})}(this,(function(t){\"use strict\";function i(t,i,e,n){if(isNaN(i)||isNaN(e))return t;var r,s,h,o,a,u,l,_,f,c=t._root,x={data:n},y=t._x0,d=t._y0,p=t._x1,v=t._y1;if(!c)return t._root=x,t;for(;c.length;)if((u=i>=(s=(y+p)/2))?y=s:p=s,(l=e>=(h=(d+v)/2))?d=h:v=h,r=c,!(c=c[_=l<<1|u]))return r[_]=x,t;if(o=+t._x.call(null,c.data),a=+t._y.call(null,c.data),i===o&&e===a)return x.next=c,r?r[_]=x:t._root=x,t;do{r=r?r[_]=new Array(4):t._root=new Array(4),(u=i>=(s=(y+p)/2))?y=s:p=s,(l=e>=(h=(d+v)/2))?d=h:v=h}while((_=l<<1|u)==(f=(a>=h)<<1|o>=s));return r[f]=c,r[_]=x,t}function e(t,i,e,n,r){this.node=t,this.x0=i,this.y0=e,this.x1=n,this.y1=r}function n(t){return t[0]}function r(t){return t[1]}function s(t,i,e){var s=new h(null==i?n:i,null==e?r:e,NaN,NaN,NaN,NaN);return null==t?s:s.addAll(t)}function h(t,i,e,n,r,s){this._x=t,this._y=i,this._x0=e,this._y0=n,this._x1=r,this._y1=s,this._root=void 0}function o(t){for(var i={data:t.data},e=i;t=t.next;)e=e.next={data:t.data};return i}var a=s.prototype=h.prototype;a.copy=function(){var t,i,e=new h(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return e;if(!n.length)return e._root=o(n),e;for(t=[{source:n,target:e._root=new Array(4)}];n=t.pop();)for(var r=0;r<4;++r)(i=n.source[r])&&(i.length?t.push({source:i,target:n.target[r]=new Array(4)}):n.target[r]=o(i));return e},a.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return i(this.cover(e,n),e,n,t)},a.addAll=function(t){var e,n,r,s,h=t.length,o=new Array(h),a=new Array(h),u=1/0,l=1/0,_=-1/0,f=-1/0;for(n=0;n<h;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(o[n]=r,a[n]=s,r<u&&(u=r),r>_&&(_=r),s<l&&(l=s),s>f&&(f=s));if(u>_||l>f)return this;for(this.cover(u,l).cover(_,f),n=0;n<h;++n)i(this,o[n],a[n],t[n]);return this},a.cover=function(t,i){if(isNaN(t=+t)||isNaN(i=+i))return this;var e=this._x0,n=this._y0,r=this._x1,s=this._y1;if(isNaN(e))r=(e=Math.floor(t))+1,s=(n=Math.floor(i))+1;else{for(var h,o,a=r-e||1,u=this._root;e>t||t>=r||n>i||i>=s;)switch(o=(i<n)<<1|t<e,(h=new Array(4))[o]=u,u=h,a*=2,o){case 0:r=e+a,s=n+a;break;case 1:e=r-a,s=n+a;break;case 2:r=e+a,n=s-a;break;case 3:e=r-a,n=s-a}this._root&&this._root.length&&(this._root=u)}return this._x0=e,this._y0=n,this._x1=r,this._y1=s,this},a.data=function(){var t=[];return this.visit((function(i){if(!i.length)do{t.push(i.data)}while(i=i.next)})),t},a.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},a.find=function(t,i,n){var r,s,h,o,a,u,l,_=this._x0,f=this._y0,c=this._x1,x=this._y1,y=[],d=this._root;for(d&&y.push(new e(d,_,f,c,x)),null==n?n=1/0:(_=t-n,f=i-n,c=t+n,x=i+n,n*=n);u=y.pop();)if(!(!(d=u.node)||(s=u.x0)>c||(h=u.y0)>x||(o=u.x1)<_||(a=u.y1)<f))if(d.length){var p=(s+o)/2,v=(h+a)/2;y.push(new e(d[3],p,v,o,a),new e(d[2],s,v,p,a),new e(d[1],p,h,o,v),new e(d[0],s,h,p,v)),(l=(i>=v)<<1|t>=p)&&(u=y[y.length-1],y[y.length-1]=y[y.length-1-l],y[y.length-1-l]=u)}else{var w=t-+this._x.call(null,d.data),N=i-+this._y.call(null,d.data),g=w*w+N*N;if(g<n){var A=Math.sqrt(n=g);_=t-A,f=i-A,c=t+A,x=i+A,r=d.data}}return r},a.remove=function(t){if(isNaN(s=+this._x.call(null,t))||isNaN(h=+this._y.call(null,t)))return this;var i,e,n,r,s,h,o,a,u,l,_,f,c=this._root,x=this._x0,y=this._y0,d=this._x1,p=this._y1;if(!c)return this;if(c.length)for(;;){if((u=s>=(o=(x+d)/2))?x=o:d=o,(l=h>=(a=(y+p)/2))?y=a:p=a,i=c,!(c=c[_=l<<1|u]))return this;if(!c.length)break;(i[_+1&3]||i[_+2&3]||i[_+3&3])&&(e=i,f=_)}for(;c.data!==t;)if(n=c,!(c=c.next))return this;return(r=c.next)&&delete c.next,n?(r?n.next=r:delete n.next,this):i?(r?i[_]=r:delete i[_],(c=i[0]||i[1]||i[2]||i[3])&&c===(i[3]||i[2]||i[1]||i[0])&&!c.length&&(e?e[f]=c:this._root=c),this):(this._root=r,this)},a.removeAll=function(t){for(var i=0,e=t.length;i<e;++i)this.remove(t[i]);return this},a.root=function(){return this._root},a.size=function(){var t=0;return this.visit((function(i){if(!i.length)do{++t}while(i=i.next)})),t},a.visit=function(t){var i,n,r,s,h,o,a=[],u=this._root;for(u&&a.push(new e(u,this._x0,this._y0,this._x1,this._y1));i=a.pop();)if(!t(u=i.node,r=i.x0,s=i.y0,h=i.x1,o=i.y1)&&u.length){var l=(r+h)/2,_=(s+o)/2;(n=u[3])&&a.push(new e(n,l,_,h,o)),(n=u[2])&&a.push(new e(n,r,_,l,o)),(n=u[1])&&a.push(new e(n,l,s,h,_)),(n=u[0])&&a.push(new e(n,r,s,l,_))}return this},a.visitAfter=function(t){var i,n=[],r=[];for(this._root&&n.push(new e(this._root,this._x0,this._y0,this._x1,this._y1));i=n.pop();){var s=i.node;if(s.length){var h,o=i.x0,a=i.y0,u=i.x1,l=i.y1,_=(o+u)/2,f=(a+l)/2;(h=s[0])&&n.push(new e(h,o,a,_,f)),(h=s[1])&&n.push(new e(h,_,a,u,f)),(h=s[2])&&n.push(new e(h,o,f,_,l)),(h=s[3])&&n.push(new e(h,_,f,u,l))}r.push(i)}for(;i=r.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this},a.x=function(t){return arguments.length?(this._x=t,this):this._x},a.y=function(t){return arguments.length?(this._y=t,this):this._y},t.quadtree=s,Object.defineProperty(t,\"__esModule\",{value:!0})}));\r\n\t// // // https://d3js.org/d3-timer/ v3.0.1 Copyright 2010-2021 Mike Bostock\r\n\t!function(t,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?n(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],n):n((t=\"undefined\"!=typeof globalThis?globalThis:t||self).d3=t.d3||{})}(this,(function(t){\"use strict\";var n,e,o=0,i=0,r=0,l=0,u=0,a=0,s=\"object\"==typeof performance&&performance.now?performance:Date,c=\"object\"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function f(){return u||(c(_),u=s.now()+a)}function _(){u=0}function m(){this._call=this._time=this._next=null}function p(t,n,e){var o=new m;return o.restart(t,n,e),o}function w(){f(),++o;for(var t,e=n;e;)(t=u-e._time)>=0&&e._call.call(void 0,t),e=e._next;--o}function d(){u=(l=s.now())+a,o=i=0;try{w()}finally{o=0,function(){var t,o,i=n,r=1/0;for(;i;)i._call?(r>i._time&&(r=i._time),t=i,i=i._next):(o=i._next,i._next=null,i=t?t._next=o:n=o);e=t,y(r)}(),u=0}}function h(){var t=s.now(),n=t-l;n>1e3&&(a-=n,l=t)}function y(t){o||(i&&(i=clearTimeout(i)),t-u>24?(t<1/0&&(i=setTimeout(d,t-s.now()-a)),r&&(r=clearInterval(r))):(r||(l=s.now(),r=setInterval(h,1e3)),o=1,c(d)))}m.prototype=p.prototype={constructor:m,restart:function(t,o,i){if(\"function\"!=typeof t)throw new TypeError(\"callback is not a function\");i=(null==i?f():+i)+(null==o?0:+o),this._next||e===this||(e?e._next=this:n=this,e=this),this._call=t,this._time=i,y()},stop:function(){this._call&&(this._call=null,this._time=1/0,y())}},t.interval=function(t,n,e){var o=new m,i=n;return null==n?(o.restart(t,n,e),o):(o._restart=o.restart,o.restart=function(t,n,e){n=+n,e=null==e?f():+e,o._restart((function r(l){l+=i,o._restart(r,i+=n,e),t(l)}),n,e)},o.restart(t,n,e),o)},t.now=f,t.timeout=function(t,n,e){var o=new m;return n=null==n?0:+n,o.restart((e=>{o.stop(),t(e+n)}),n,e),o},t.timer=p,t.timerFlush=w,Object.defineProperty(t,\"__esModule\",{value:!0})}));\r\n\t// // // https://d3js.org/d3-force/ v3.0.0 Copyright 2010-2021 Mike Bostock\r\n\t!function(n,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?t(exports,require(\"d3-quadtree\"),require(\"d3-dispatch\"),require(\"d3-timer\")):\"function\"==typeof define&&define.amd?define([\"exports\",\"d3-quadtree\",\"d3-dispatch\",\"d3-timer\"],t):t((n=\"undefined\"!=typeof globalThis?globalThis:n||self).d3=n.d3||{},n.d3,n.d3,n.d3)}(this,(function(n,t,e,r){\"use strict\";function i(n){return function(){return n}}function u(n){return 1e-6*(n()-.5)}function o(n){return n.x+n.vx}function f(n){return n.y+n.vy}function a(n){return n.index}function c(n,t){var e=n.get(t);if(!e)throw new Error(\"node not found: \"+t);return e}const l=4294967296;function h(n){return n.x}function v(n){return n.y}var y=Math.PI*(3-Math.sqrt(5));n.forceCenter=function(n,t){var e,r=1;function i(){var i,u,o=e.length,f=0,a=0;for(i=0;i<o;++i)f+=(u=e[i]).x,a+=u.y;for(f=(f/o-n)*r,a=(a/o-t)*r,i=0;i<o;++i)(u=e[i]).x-=f,u.y-=a}return null==n&&(n=0),null==t&&(t=0),i.initialize=function(n){e=n},i.x=function(t){return arguments.length?(n=+t,i):n},i.y=function(n){return arguments.length?(t=+n,i):t},i.strength=function(n){return arguments.length?(r=+n,i):r},i},n.forceCollide=function(n){var e,r,a,c=1,l=1;function h(){for(var n,i,h,y,d,g,x,s=e.length,p=0;p<l;++p)for(i=t.quadtree(e,o,f).visitAfter(v),n=0;n<s;++n)h=e[n],g=r[h.index],x=g*g,y=h.x+h.vx,d=h.y+h.vy,i.visit(M);function M(n,t,e,r,i){var o=n.data,f=n.r,l=g+f;if(!o)return t>y+l||r<y-l||e>d+l||i<d-l;if(o.index>h.index){var v=y-o.x-o.vx,s=d-o.y-o.vy,p=v*v+s*s;p<l*l&&(0===v&&(p+=(v=u(a))*v),0===s&&(p+=(s=u(a))*s),p=(l-(p=Math.sqrt(p)))/p*c,h.vx+=(v*=p)*(l=(f*=f)/(x+f)),h.vy+=(s*=p)*l,o.vx-=v*(l=1-l),o.vy-=s*l)}}}function v(n){if(n.data)return n.r=r[n.data.index];for(var t=n.r=0;t<4;++t)n[t]&&n[t].r>n.r&&(n.r=n[t].r)}function y(){if(e){var t,i,u=e.length;for(r=new Array(u),t=0;t<u;++t)i=e[t],r[i.index]=+n(i,t,e)}}return\"function\"!=typeof n&&(n=i(null==n?1:+n)),h.initialize=function(n,t){e=n,a=t,y()},h.iterations=function(n){return arguments.length?(l=+n,h):l},h.strength=function(n){return arguments.length?(c=+n,h):c},h.radius=function(t){return arguments.length?(n=\"function\"==typeof t?t:i(+t),y(),h):n},h},n.forceLink=function(n){var t,e,r,o,f,l,h=a,v=function(n){return 1/Math.min(o[n.source.index],o[n.target.index])},y=i(30),d=1;function g(r){for(var i=0,o=n.length;i<d;++i)for(var a,c,h,v,y,g,x,s=0;s<o;++s)c=(a=n[s]).source,v=(h=a.target).x+h.vx-c.x-c.vx||u(l),y=h.y+h.vy-c.y-c.vy||u(l),v*=g=((g=Math.sqrt(v*v+y*y))-e[s])/g*r*t[s],y*=g,h.vx-=v*(x=f[s]),h.vy-=y*x,c.vx+=v*(x=1-x),c.vy+=y*x}function x(){if(r){var i,u,a=r.length,l=n.length,v=new Map(r.map(((n,t)=>[h(n,t,r),n])));for(i=0,o=new Array(a);i<l;++i)(u=n[i]).index=i,\"object\"!=typeof u.source&&(u.source=c(v,u.source)),\"object\"!=typeof u.target&&(u.target=c(v,u.target)),o[u.source.index]=(o[u.source.index]||0)+1,o[u.target.index]=(o[u.target.index]||0)+1;for(i=0,f=new Array(l);i<l;++i)u=n[i],f[i]=o[u.source.index]/(o[u.source.index]+o[u.target.index]);t=new Array(l),s(),e=new Array(l),p()}}function s(){if(r)for(var e=0,i=n.length;e<i;++e)t[e]=+v(n[e],e,n)}function p(){if(r)for(var t=0,i=n.length;t<i;++t)e[t]=+y(n[t],t,n)}return null==n&&(n=[]),g.initialize=function(n,t){r=n,l=t,x()},g.links=function(t){return arguments.length?(n=t,x(),g):n},g.id=function(n){return arguments.length?(h=n,g):h},g.iterations=function(n){return arguments.length?(d=+n,g):d},g.strength=function(n){return arguments.length?(v=\"function\"==typeof n?n:i(+n),s(),g):v},g.distance=function(n){return arguments.length?(y=\"function\"==typeof n?n:i(+n),p(),g):y},g},n.forceManyBody=function(){var n,e,r,o,f,a=i(-30),c=1,l=1/0,y=.81;function d(r){var i,u=n.length,f=t.quadtree(n,h,v).visitAfter(x);for(o=r,i=0;i<u;++i)e=n[i],f.visit(s)}function g(){if(n){var t,e,r=n.length;for(f=new Array(r),t=0;t<r;++t)e=n[t],f[e.index]=+a(e,t,n)}}function x(n){var t,e,r,i,u,o=0,a=0;if(n.length){for(r=i=u=0;u<4;++u)(t=n[u])&&(e=Math.abs(t.value))&&(o+=t.value,a+=e,r+=e*t.x,i+=e*t.y);n.x=r/a,n.y=i/a}else{(t=n).x=t.data.x,t.y=t.data.y;do{o+=f[t.data.index]}while(t=t.next)}n.value=o}function s(n,t,i,a){if(!n.value)return!0;var h=n.x-e.x,v=n.y-e.y,d=a-t,g=h*h+v*v;if(d*d/y<g)return g<l&&(0===h&&(g+=(h=u(r))*h),0===v&&(g+=(v=u(r))*v),g<c&&(g=Math.sqrt(c*g)),e.vx+=h*n.value*o/g,e.vy+=v*n.value*o/g),!0;if(!(n.length||g>=l)){(n.data!==e||n.next)&&(0===h&&(g+=(h=u(r))*h),0===v&&(g+=(v=u(r))*v),g<c&&(g=Math.sqrt(c*g)));do{n.data!==e&&(d=f[n.data.index]*o/g,e.vx+=h*d,e.vy+=v*d)}while(n=n.next)}}return d.initialize=function(t,e){n=t,r=e,g()},d.strength=function(n){return arguments.length?(a=\"function\"==typeof n?n:i(+n),g(),d):a},d.distanceMin=function(n){return arguments.length?(c=n*n,d):Math.sqrt(c)},d.distanceMax=function(n){return arguments.length?(l=n*n,d):Math.sqrt(l)},d.theta=function(n){return arguments.length?(y=n*n,d):Math.sqrt(y)},d},n.forceRadial=function(n,t,e){var r,u,o,f=i(.1);function a(n){for(var i=0,f=r.length;i<f;++i){var a=r[i],c=a.x-t||1e-6,l=a.y-e||1e-6,h=Math.sqrt(c*c+l*l),v=(o[i]-h)*u[i]*n/h;a.vx+=c*v,a.vy+=l*v}}function c(){if(r){var t,e=r.length;for(u=new Array(e),o=new Array(e),t=0;t<e;++t)o[t]=+n(r[t],t,r),u[t]=isNaN(o[t])?0:+f(r[t],t,r)}}return\"function\"!=typeof n&&(n=i(+n)),null==t&&(t=0),null==e&&(e=0),a.initialize=function(n){r=n,c()},a.strength=function(n){return arguments.length?(f=\"function\"==typeof n?n:i(+n),c(),a):f},a.radius=function(t){return arguments.length?(n=\"function\"==typeof t?t:i(+t),c(),a):n},a.x=function(n){return arguments.length?(t=+n,a):t},a.y=function(n){return arguments.length?(e=+n,a):e},a},n.forceSimulation=function(n){var t,i=1,u=.001,o=1-Math.pow(u,1/300),f=0,a=.6,c=new Map,h=r.timer(g),v=e.dispatch(\"tick\",\"end\"),d=function(){let n=1;return()=>(n=(1664525*n+1013904223)%l)/l}();function g(){x(),v.call(\"tick\",t),i<u&&(h.stop(),v.call(\"end\",t))}function x(e){var r,u,l=n.length;void 0===e&&(e=1);for(var h=0;h<e;++h)for(i+=(f-i)*o,c.forEach((function(n){n(i)})),r=0;r<l;++r)null==(u=n[r]).fx?u.x+=u.vx*=a:(u.x=u.fx,u.vx=0),null==u.fy?u.y+=u.vy*=a:(u.y=u.fy,u.vy=0);return t}function s(){for(var t,e=0,r=n.length;e<r;++e){if((t=n[e]).index=e,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=10*Math.sqrt(.5+e),u=e*y;t.x=i*Math.cos(u),t.y=i*Math.sin(u)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function p(t){return t.initialize&&t.initialize(n,d),t}return null==n&&(n=[]),s(),t={tick:x,restart:function(){return h.restart(g),t},stop:function(){return h.stop(),t},nodes:function(e){return arguments.length?(n=e,s(),c.forEach(p),t):n},alpha:function(n){return arguments.length?(i=+n,t):i},alphaMin:function(n){return arguments.length?(u=+n,t):u},alphaDecay:function(n){return arguments.length?(o=+n,t):+o},alphaTarget:function(n){return arguments.length?(f=+n,t):f},velocityDecay:function(n){return arguments.length?(a=1-n,t):1-a},randomSource:function(n){return arguments.length?(d=n,c.forEach(p),t):d},force:function(n,e){return arguments.length>1?(null==e?c.delete(n):c.set(n,p(e)),t):c.get(n)},find:function(t,e,r){var i,u,o,f,a,c=0,l=n.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)(o=(i=t-(f=n[c]).x)*i+(u=e-f.y)*u)<r&&(a=f,r=o);return a},on:function(n,e){return arguments.length>1?(v.on(n,e),t):v.on(n)}}},n.forceX=function(n){var t,e,r,u=i(.1);function o(n){for(var i,u=0,o=t.length;u<o;++u)(i=t[u]).vx+=(r[u]-i.x)*e[u]*n}function f(){if(t){var i,o=t.length;for(e=new Array(o),r=new Array(o),i=0;i<o;++i)e[i]=isNaN(r[i]=+n(t[i],i,t))?0:+u(t[i],i,t)}}return\"function\"!=typeof n&&(n=i(null==n?0:+n)),o.initialize=function(n){t=n,f()},o.strength=function(n){return arguments.length?(u=\"function\"==typeof n?n:i(+n),f(),o):u},o.x=function(t){return arguments.length?(n=\"function\"==typeof t?t:i(+t),f(),o):n},o},n.forceY=function(n){var t,e,r,u=i(.1);function o(n){for(var i,u=0,o=t.length;u<o;++u)(i=t[u]).vy+=(r[u]-i.y)*e[u]*n}function f(){if(t){var i,o=t.length;for(e=new Array(o),r=new Array(o),i=0;i<o;++i)e[i]=isNaN(r[i]=+n(t[i],i,t))?0:+u(t[i],i,t)}}return\"function\"!=typeof n&&(n=i(null==n?0:+n)),o.initialize=function(n){t=n,f()},o.strength=function(n){return arguments.length?(u=\"function\"==typeof n?n:i(+n),f(),o):u},o.y=function(t){return arguments.length?(n=\"function\"==typeof t?t:i(+t),f(),o):n},o},Object.defineProperty(n,\"__esModule\",{value:!0})}));\r\n\t// // // https://github.com/vasturiano/d3-binarytree v0.2.0 Copyright 2021 Vasco Asturiano\r\n\t!function(t,r){\"object\"==typeof exports&&\"undefined\"!=typeof module?r(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],r):r((t=\"undefined\"!=typeof globalThis?globalThis:t||self).d3=t.d3||{})}(this,(function(t){\"use strict\";function r(t,r,e){if(isNaN(r))return t;var n,i,o,s,h,u,a=t._root,f={data:e},l=t._x0,x=t._x1;if(!a)return t._root=f,t;for(;a.length;)if((s=r>=(i=(l+x)/2))?l=i:x=i,n=a,!(a=a[h=+s]))return n[h]=f,t;if(r===(o=+t._x.call(null,a.data)))return f.next=a,n?n[h]=f:t._root=f,t;do{n=n?n[h]=new Array(2):t._root=new Array(2),(s=r>=(i=(l+x)/2))?l=i:x=i}while((h=+s)==(u=+(o>=i)));return n[u]=a,n[h]=f,t}function e(t,r,e){this.node=t,this.x0=r,this.x1=e}function n(t){return t[0]}function i(t,r){var e=new o(null==r?n:r,NaN,NaN);return null==t?e:e.addAll(t)}function o(t,r,e){this._x=t,this._x0=r,this._x1=e,this._root=void 0}function s(t){for(var r={data:t.data},e=r;t=t.next;)e=e.next={data:t.data};return r}var h=i.prototype=o.prototype;h.copy=function(){var t,r,e=new o(this._x,this._x0,this._x1),n=this._root;if(!n)return e;if(!n.length)return e._root=s(n),e;for(t=[{source:n,target:e._root=new Array(2)}];n=t.pop();)for(var i=0;i<2;++i)(r=n.source[i])&&(r.length?t.push({source:r,target:n.target[i]=new Array(2)}):n.target[i]=s(r));return e},h.add=function(t){var e=+this._x.call(null,t);return r(this.cover(e),e,t)},h.addAll=function(t){var e,n,i=t.length,o=new Array(i),s=1/0,h=-1/0;for(e=0;e<i;++e)isNaN(n=+this._x.call(null,t[e]))||(o[e]=n,n<s&&(s=n),n>h&&(h=n));if(s>h)return this;for(this.cover(s).cover(h),e=0;e<i;++e)r(this,o[e],t[e]);return this},h.cover=function(t){if(isNaN(t=+t))return this;var r=this._x0,e=this._x1;if(isNaN(r))e=(r=Math.floor(t))+1;else{for(var n,i,o=e-r||1,s=this._root;r>t||t>=e;)switch(i=+(t<r),(n=new Array(2))[i]=s,s=n,o*=2,i){case 0:e=r+o;break;case 1:r=e-o}this._root&&this._root.length&&(this._root=s)}return this._x0=r,this._x1=e,this},h.data=function(){var t=[];return this.visit((function(r){if(!r.length)do{t.push(r.data)}while(r=r.next)})),t},h.extent=function(t){return arguments.length?this.cover(+t[0][0]).cover(+t[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]},h.find=function(t,r){var n,i,o,s,h,u=this._x0,a=this._x1,f=[],l=this._root;for(l&&f.push(new e(l,u,a)),null==r?r=1/0:(u=t-r,a=t+r);s=f.pop();)if(!(!(l=s.node)||(i=s.x0)>a||(o=s.x1)<u))if(l.length){var x=(i+o)/2;f.push(new e(l[1],x,o),new e(l[0],i,x)),(h=+(t>=x))&&(s=f[f.length-1],f[f.length-1]=f[f.length-1-h],f[f.length-1-h]=s)}else{var _=Math.abs(t-+this._x.call(null,l.data));_<r&&(r=_,u=t-_,a=t+_,n=l.data)}return n},h.remove=function(t){if(isNaN(o=+this._x.call(null,t)))return this;var r,e,n,i,o,s,h,u,a,f=this._root,l=this._x0,x=this._x1;if(!f)return this;if(f.length)for(;;){if((h=o>=(s=(l+x)/2))?l=s:x=s,r=f,!(f=f[u=+h]))return this;if(!f.length)break;r[u+1&1]&&(e=r,a=u)}for(;f.data!==t;)if(n=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,n?(i?n.next=i:delete n.next,this):r?(i?r[u]=i:delete r[u],(f=r[0]||r[1])&&f===(r[1]||r[0])&&!f.length&&(e?e[a]=f:this._root=f),this):(this._root=i,this)},h.removeAll=function(t){for(var r=0,e=t.length;r<e;++r)this.remove(t[r]);return this},h.root=function(){return this._root},h.size=function(){var t=0;return this.visit((function(r){if(!r.length)do{++t}while(r=r.next)})),t},h.visit=function(t){var r,n,i,o,s=[],h=this._root;for(h&&s.push(new e(h,this._x0,this._x1));r=s.pop();)if(!t(h=r.node,i=r.x0,o=r.x1)&&h.length){var u=(i+o)/2;(n=h[1])&&s.push(new e(n,u,o)),(n=h[0])&&s.push(new e(n,i,u))}return this},h.visitAfter=function(t){var r,n=[],i=[];for(this._root&&n.push(new e(this._root,this._x0,this._x1));r=n.pop();){var o=r.node;if(o.length){var s,h=r.x0,u=r.x1,a=(h+u)/2;(s=o[0])&&n.push(new e(s,h,a)),(s=o[1])&&n.push(new e(s,a,u))}i.push(r)}for(;r=i.pop();)t(r.node,r.x0,r.x1);return this},h.x=function(t){return arguments.length?(this._x=t,this):this._x},t.binarytree=i,Object.defineProperty(t,\"__esModule\",{value:!0})}));\r\n\t// // // https://github.com/vasturiano/d3-octree v0.2.0 Copyright 2021 Vasco Asturiano\r\n\t!function(t,i){\"object\"==typeof exports&&\"undefined\"!=typeof module?i(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],i):i((t=\"undefined\"!=typeof globalThis?globalThis:t||self).d3=t.d3||{})}(this,(function(t){\"use strict\";function i(t,i,n,e,s){if(isNaN(i)||isNaN(n)||isNaN(e))return t;var h,r,o,a,l,u,_,f,c,y,x,d,p=t._root,w={data:s},z=t._x0,N=t._y0,v=t._z0,g=t._x1,b=t._y1,A=t._z1;if(!p)return t._root=w,t;for(;p.length;)if((f=i>=(r=(z+g)/2))?z=r:g=r,(c=n>=(o=(N+b)/2))?N=o:b=o,(y=e>=(a=(v+A)/2))?v=a:A=a,h=p,!(p=p[x=y<<2|c<<1|f]))return h[x]=w,t;if(l=+t._x.call(null,p.data),u=+t._y.call(null,p.data),_=+t._z.call(null,p.data),i===l&&n===u&&e===_)return w.next=p,h?h[x]=w:t._root=w,t;do{h=h?h[x]=new Array(8):t._root=new Array(8),(f=i>=(r=(z+g)/2))?z=r:g=r,(c=n>=(o=(N+b)/2))?N=o:b=o,(y=e>=(a=(v+A)/2))?v=a:A=a}while((x=y<<2|c<<1|f)==(d=(_>=a)<<2|(u>=o)<<1|l>=r));return h[d]=p,h[x]=w,t}function n(t,i,n,e,s,h,r){this.node=t,this.x0=i,this.y0=n,this.z0=e,this.x1=s,this.y1=h,this.z1=r}function e(t){return t[0]}function s(t){return t[1]}function h(t){return t[2]}function r(t,i,n,r){var a=new o(null==i?e:i,null==n?s:n,null==r?h:r,NaN,NaN,NaN,NaN,NaN,NaN);return null==t?a:a.addAll(t)}function o(t,i,n,e,s,h,r,o,a){this._x=t,this._y=i,this._z=n,this._x0=e,this._y0=s,this._z0=h,this._x1=r,this._y1=o,this._z1=a,this._root=void 0}function a(t){for(var i={data:t.data},n=i;t=t.next;)n=n.next={data:t.data};return i}var l=r.prototype=o.prototype;l.copy=function(){var t,i,n=new o(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root;if(!e)return n;if(!e.length)return n._root=a(e),n;for(t=[{source:e,target:n._root=new Array(8)}];e=t.pop();)for(var s=0;s<8;++s)(i=e.source[s])&&(i.length?t.push({source:i,target:e.target[s]=new Array(8)}):e.target[s]=a(i));return n},l.add=function(t){var n=+this._x.call(null,t),e=+this._y.call(null,t),s=+this._z.call(null,t);return i(this.cover(n,e,s),n,e,s,t)},l.addAll=function(t){var n,e,s,h,r,o=t.length,a=new Array(o),l=new Array(o),u=new Array(o),_=1/0,f=1/0,c=1/0,y=-1/0,x=-1/0,d=-1/0;for(e=0;e<o;++e)isNaN(s=+this._x.call(null,n=t[e]))||isNaN(h=+this._y.call(null,n))||isNaN(r=+this._z.call(null,n))||(a[e]=s,l[e]=h,u[e]=r,s<_&&(_=s),s>y&&(y=s),h<f&&(f=h),h>x&&(x=h),r<c&&(c=r),r>d&&(d=r));if(_>y||f>x||c>d)return this;for(this.cover(_,f,c).cover(y,x,d),e=0;e<o;++e)i(this,a[e],l[e],u[e],t[e]);return this},l.cover=function(t,i,n){if(isNaN(t=+t)||isNaN(i=+i)||isNaN(n=+n))return this;var e=this._x0,s=this._y0,h=this._z0,r=this._x1,o=this._y1,a=this._z1;if(isNaN(e))r=(e=Math.floor(t))+1,o=(s=Math.floor(i))+1,a=(h=Math.floor(n))+1;else{for(var l,u,_=r-e||1,f=this._root;e>t||t>=r||s>i||i>=o||h>n||n>=a;)switch(u=(n<h)<<2|(i<s)<<1|t<e,(l=new Array(8))[u]=f,f=l,_*=2,u){case 0:r=e+_,o=s+_,a=h+_;break;case 1:e=r-_,o=s+_,a=h+_;break;case 2:r=e+_,s=o-_,a=h+_;break;case 3:e=r-_,s=o-_,a=h+_;break;case 4:r=e+_,o=s+_,h=a-_;break;case 5:e=r-_,o=s+_,h=a-_;break;case 6:r=e+_,s=o-_,h=a-_;break;case 7:e=r-_,s=o-_,h=a-_}this._root&&this._root.length&&(this._root=f)}return this._x0=e,this._y0=s,this._z0=h,this._x1=r,this._y1=o,this._z1=a,this},l.data=function(){var t=[];return this.visit((function(i){if(!i.length)do{t.push(i.data)}while(i=i.next)})),t},l.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1],+t[0][2]).cover(+t[1][0],+t[1][1],+t[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},l.find=function(t,i,e,s){var h,r,o,a,l,u,_,f,c,y=this._x0,x=this._y0,d=this._z0,p=this._x1,w=this._y1,z=this._z1,N=[],v=this._root;for(v&&N.push(new n(v,y,x,d,p,w,z)),null==s?s=1/0:(y=t-s,x=i-s,d=e-s,p=t+s,w=i+s,z=e+s,s*=s);f=N.pop();)if(!(!(v=f.node)||(r=f.x0)>p||(o=f.y0)>w||(a=f.z0)>z||(l=f.x1)<y||(u=f.y1)<x||(_=f.z1)<d))if(v.length){var g=(r+l)/2,b=(o+u)/2,A=(a+_)/2;N.push(new n(v[7],g,b,A,l,u,_),new n(v[6],r,b,A,g,u,_),new n(v[5],g,o,A,l,b,_),new n(v[4],r,o,A,g,b,_),new n(v[3],g,b,a,l,u,A),new n(v[2],r,b,a,g,u,A),new n(v[1],g,o,a,l,b,A),new n(v[0],r,o,a,g,b,A)),(c=(e>=A)<<2|(i>=b)<<1|t>=g)&&(f=N[N.length-1],N[N.length-1]=N[N.length-1-c],N[N.length-1-c]=f)}else{var k=t-+this._x.call(null,v.data),m=i-+this._y.call(null,v.data),M=e-+this._z.call(null,v.data),j=k*k+m*m+M*M;if(j<s){var T=Math.sqrt(s=j);y=t-T,x=i-T,d=e-T,p=t+T,w=i+T,z=e+T,h=v.data}}return h},l.remove=function(t){if(isNaN(h=+this._x.call(null,t))||isNaN(r=+this._y.call(null,t))||isNaN(o=+this._z.call(null,t)))return this;var i,n,e,s,h,r,o,a,l,u,_,f,c,y,x,d=this._root,p=this._x0,w=this._y0,z=this._z0,N=this._x1,v=this._y1,g=this._z1;if(!d)return this;if(d.length)for(;;){if((_=h>=(a=(p+N)/2))?p=a:N=a,(f=r>=(l=(w+v)/2))?w=l:v=l,(c=o>=(u=(z+g)/2))?z=u:g=u,i=d,!(d=d[y=c<<2|f<<1|_]))return this;if(!d.length)break;(i[y+1&7]||i[y+2&7]||i[y+3&7]||i[y+4&7]||i[y+5&7]||i[y+6&7]||i[y+7&7])&&(n=i,x=y)}for(;d.data!==t;)if(e=d,!(d=d.next))return this;return(s=d.next)&&delete d.next,e?(s?e.next=s:delete e.next,this):i?(s?i[y]=s:delete i[y],(d=i[0]||i[1]||i[2]||i[3]||i[4]||i[5]||i[6]||i[7])&&d===(i[7]||i[6]||i[5]||i[4]||i[3]||i[2]||i[1]||i[0])&&!d.length&&(n?n[x]=d:this._root=d),this):(this._root=s,this)},l.removeAll=function(t){for(var i=0,n=t.length;i<n;++i)this.remove(t[i]);return this},l.root=function(){return this._root},l.size=function(){var t=0;return this.visit((function(i){if(!i.length)do{++t}while(i=i.next)})),t},l.visit=function(t){var i,e,s,h,r,o,a,l,u=[],_=this._root;for(_&&u.push(new n(_,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=u.pop();)if(!t(_=i.node,s=i.x0,h=i.y0,r=i.z0,o=i.x1,a=i.y1,l=i.z1)&&_.length){var f=(s+o)/2,c=(h+a)/2,y=(r+l)/2;(e=_[7])&&u.push(new n(e,f,c,y,o,a,l)),(e=_[6])&&u.push(new n(e,s,c,y,f,a,l)),(e=_[5])&&u.push(new n(e,f,h,y,o,c,l)),(e=_[4])&&u.push(new n(e,s,h,y,f,c,l)),(e=_[3])&&u.push(new n(e,f,c,r,o,a,y)),(e=_[2])&&u.push(new n(e,s,c,r,f,a,y)),(e=_[1])&&u.push(new n(e,f,h,r,o,c,y)),(e=_[0])&&u.push(new n(e,s,h,r,f,c,y))}return this},l.visitAfter=function(t){var i,e=[],s=[];for(this._root&&e.push(new n(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=e.pop();){var h=i.node;if(h.length){var r,o=i.x0,a=i.y0,l=i.z0,u=i.x1,_=i.y1,f=i.z1,c=(o+u)/2,y=(a+_)/2,x=(l+f)/2;(r=h[0])&&e.push(new n(r,o,a,l,c,y,x)),(r=h[1])&&e.push(new n(r,c,a,l,u,y,x)),(r=h[2])&&e.push(new n(r,o,y,l,c,_,x)),(r=h[3])&&e.push(new n(r,c,y,l,u,_,x)),(r=h[4])&&e.push(new n(r,o,a,x,c,y,f)),(r=h[5])&&e.push(new n(r,c,a,x,u,y,f)),(r=h[6])&&e.push(new n(r,o,y,x,c,_,f)),(r=h[7])&&e.push(new n(r,c,y,x,u,_,f))}s.push(i)}for(;i=s.pop();)t(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this},l.x=function(t){return arguments.length?(this._x=t,this):this._x},l.y=function(t){return arguments.length?(this._y=t,this):this._y},l.z=function(t){return arguments.length?(this._z=t,this):this._z},t.octree=r,Object.defineProperty(t,\"__esModule\",{value:!0})}));\r\n\t// // // https://github.com/vasturiano/d3-force-3d v3.0.2 Copyright 2025 Vasco Asturiano\r\n\tNEW: !function(n,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?t(exports,require(\"d3-binarytree\"),require(\"d3-quadtree\"),require(\"d3-octree\"),require(\"d3-dispatch\"),require(\"d3-timer\")):\"function\"==typeof define&&define.amd?define([\"exports\",\"d3-binarytree\",\"d3-quadtree\",\"d3-octree\",\"d3-dispatch\",\"d3-timer\"],t):t((n=\"undefined\"!=typeof globalThis?globalThis:n||self).d3=n.d3||{},n.d3,n.d3,n.d3,n.d3,n.d3)}(this,(function(n,t,e,r,i,u){\"use strict\";function o(n){return function(){return n}}function f(n){return 1e-6*(n()-.5)}function a(n){return n.x+n.vx}function c(n){return n.y+n.vy}function l(n){return n.z+n.vz}function h(n){return n.index}function v(n,t){var e=n.get(t);if(!e)throw new Error(\"node not found: \"+t);return e}const d=4294967296;function y(n){return n.x}function s(n){return n.y}function g(n){return n.z}var x=Math.PI*(3-Math.sqrt(5)),z=20*Math.PI/(9+Math.sqrt(221));n.forceCenter=function(n,t,e){var r,i=1;function u(){var u,o,f=r.length,a=0,c=0,l=0;for(u=0;u<f;++u)a+=(o=r[u]).x||0,c+=o.y||0,l+=o.z||0;for(a=(a/f-n)*i,c=(c/f-t)*i,l=(l/f-e)*i,u=0;u<f;++u)o=r[u],a&&(o.x-=a),c&&(o.y-=c),l&&(o.z-=l)}return null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),u.initialize=function(n){r=n},u.x=function(t){return arguments.length?(n=+t,u):n},u.y=function(n){return arguments.length?(t=+n,u):t},u.z=function(n){return arguments.length?(e=+n,u):e},u.strength=function(n){return arguments.length?(i=+n,u):i},u},n.forceCollide=function(n){var i,u,h,v,d=1,y=1;function s(){for(var n,o,s,x,z,p,M,w,q=i.length,N=0;N<y;++N)for(o=(1===u?t.binarytree(i,a):2===u?e.quadtree(i,a,c):3===u?r.octree(i,a,c,l):null).visitAfter(g),n=0;n<q;++n)s=i[n],M=h[s.index],w=M*M,x=s.x+s.vx,u>1&&(z=s.y+s.vy),u>2&&(p=s.z+s.vz),o.visit(m);function m(n,t,e,r,i,o,a){var c=[t,e,r,i,o,a],l=c[0],h=c[1],y=c[2],g=c[u],q=c[u+1],N=c[u+2],m=n.data,A=n.r,b=M+A;if(!m)return l>x+b||g<x-b||u>1&&(h>z+b||q<z-b)||u>2&&(y>p+b||N<p-b);if(m.index>s.index){var k=x-m.x-m.vx,E=u>1?z-m.y-m.vy:0,j=u>2?p-m.z-m.vz:0,D=k*k+E*E+j*j;D<b*b&&(0===k&&(D+=(k=f(v))*k),u>1&&0===E&&(D+=(E=f(v))*E),u>2&&0===j&&(D+=(j=f(v))*j),D=(b-(D=Math.sqrt(D)))/D*d,s.vx+=(k*=D)*(b=(A*=A)/(w+A)),u>1&&(s.vy+=(E*=D)*b),u>2&&(s.vz+=(j*=D)*b),m.vx-=k*(b=1-b),u>1&&(m.vy-=E*b),u>2&&(m.vz-=j*b))}}}function g(n){if(n.data)return n.r=h[n.data.index];for(var t=n.r=0;t<Math.pow(2,u);++t)n[t]&&n[t].r>n.r&&(n.r=n[t].r)}function x(){if(i){var t,e,r=i.length;for(h=new Array(r),t=0;t<r;++t)e=i[t],h[e.index]=+n(e,t,i)}}return\"function\"!=typeof n&&(n=o(null==n?1:+n)),s.initialize=function(n,...t){i=n,v=t.find((n=>\"function\"==typeof n))||Math.random,u=t.find((n=>[1,2,3].includes(n)))||2,x()},s.iterations=function(n){return arguments.length?(y=+n,s):y},s.strength=function(n){return arguments.length?(d=+n,s):d},s.radius=function(t){return arguments.length?(n=\"function\"==typeof t?t:o(+t),x(),s):n},s},n.forceLink=function(n){var t,e,r,i,u,a,c,l=h,d=function(n){return 1/Math.min(a[n.source.index],a[n.target.index])},y=function(n){return a[n.source.index]/(a[n.source.index]+a[n.target.index])},s=o(30),g=1,x=1;function z(i){for(var o=0,a=n.length;o<x;++o)for(var l,h,v,d,y,s=0,z=0,p=0,M=0;s<a;++s){h=(l=n[s]).source,z=(v=l.target).x+v.vx-h.x-h.vx||f(c),u>1&&(p=v.y+v.vy-h.y-h.vy||f(c)),u>2&&(M=v.z+v.vz-h.z-h.vz||f(c));let o=(d=Math.sqrt(z*z+p*p+M*M))-r[s];2==g?o*=Math.abs(o):o=o=Math.sign(o)*Math.pow(Math.abs(o),g),z*=d=o/d*i*t[s],p*=d,M*=d,v.vx-=z*(y=e[s]),u>1&&(v.vy-=p*y),u>2&&(v.vz-=M*y),h.vx+=z*(y=1-y),u>1&&(h.vy+=p*y),u>2&&(h.vz+=M*y)}}function p(){if(i){var u,o,f=i.length,c=n.length,h=new Map(i.map(((n,t)=>[l(n,t,i),n])));for(u=0,a=new Array(f);u<c;++u)(o=n[u]).index=u,\"object\"!=typeof o.source&&(o.source=v(h,o.source)),\"object\"!=typeof o.target&&(o.target=v(h,o.target)),a[o.source.index]=(a[o.source.index]||0)+1,a[o.target.index]=(a[o.target.index]||0)+1;for(u=0;u<c;++u)o=n[u];t=new Array(c),M(),r=new Array(c),q(),e=new Array(c),w()}}function M(){if(i)for(var e=0,r=n.length;e<r;++e)t[e]=+d(n[e],e,n)}function w(){if(i)for(var t=0,r=n.length;t<r;++t)e[t]=+y(n[t],t,n)}function q(){if(i)for(var t=0,e=n.length;t<e;++t)r[t]=+s(n[t],t,n)}return null==n&&(n=[]),z.initialize=function(n,...t){i=n,c=t.find((n=>\"function\"==typeof n))||Math.random,u=t.find((n=>[1,2,3].includes(n)))||2,p()},z.links=function(t){return arguments.length?(n=t,p(),z):n},z.id=function(n){return arguments.length?(l=n,z):l},z.iterations=function(n){return arguments.length?(x=+n,z):x},z.strength=function(n){return arguments.length?(d=\"function\"==typeof n?n:o(+n),M(),z):d},z.bias=function(n){return arguments.length?(y=\"function\"==typeof n?n:o(+n),w(),z):y},z.exponent=function(n){return arguments.length?(g=+n,z):g},z.distance=function(n){return arguments.length?(s=\"function\"==typeof n?n:o(+n),q(),z):s},z},n.forceManyBody=function(){var n,i,u,a,c,l,h=o(-30),v=1,d=1,x=1/0,z=.81;function p(o){var f,a=n.length,l=(1===i?t.binarytree(n,y):2===i?e.quadtree(n,y,s):3===i?r.octree(n,y,s,g):null).visitAfter(w);for(c=o,f=0;f<a;++f)u=n[f],l.visit(q)}function M(){if(n){var t,e,r=n.length;for(l=new Array(r),t=0;t<r;++t)e=n[t],l[e.index]=+h(e,t,n)}}function w(n){var t,e,r,u,o,f,a=0,c=0,h=n.length;if(h){for(r=u=o=f=0;f<h;++f)(t=n[f])&&(e=Math.abs(t.value))&&(a+=t.value,c+=e,r+=e*(t.x||0),u+=e*(t.y||0),o+=e*(t.z||0));a*=Math.sqrt(4/h),n.x=r/c,i>1&&(n.y=u/c),i>2&&(n.z=o/c)}else{(t=n).x=t.data.x,i>1&&(t.y=t.data.y),i>2&&(t.z=t.data.z);do{a+=l[t.data.index]}while(t=t.next)}n.value=a}function q(n,t,e,r,o){if(!n.value)return!0;var h=[e,r,o][i-1],y=n.x-u.x,s=i>1?n.y-u.y:0,g=i>2?n.z-u.z:0,p=h-t,M=y*y+s*s+g*g;if(p*p/z<M){if(M<x){0===y&&(M+=(y=f(a))*y),i>1&&0===s&&(M+=(s=f(a))*s),i>2&&0===g&&(M+=(g=f(a))*g),M<d&&(M=Math.sqrt(d*M));let t=M;1==v||(t=2==v?M*Math.sqrt(M):Math.pow(M,(v+1)/2)),u.vx+=y*n.value*c/t,i>1&&(u.vy+=s*n.value*c/t),i>2&&(u.vz+=g*n.value*c/t)}return!0}if(n.length||M>=x)return;(n.data!==u||n.next)&&(0===y&&(M+=(y=f(a))*y),i>1&&0===s&&(M+=(s=f(a))*s),i>2&&0===g&&(M+=(g=f(a))*g),M<d&&(M=Math.sqrt(d*M)));let w=M;1==v||(w=2==v?M*Math.sqrt(M):Math.pow(M,(v+1)/2));do{n.data!==u&&(p=l[n.data.index]*c/w,u.vx+=y*p,i>1&&(u.vy+=s*p),i>2&&(u.vz+=g*p))}while(n=n.next)}return p.initialize=function(t,...e){n=t,a=e.find((n=>\"function\"==typeof n))||Math.random,i=e.find((n=>[1,2,3].includes(n)))||2,M()},p.strength=function(n){return arguments.length?(h=\"function\"==typeof n?n:o(+n),M(),p):h},p.exponent=function(n){return arguments.length?(v=+n,p):v},p.distanceMin=function(n){return arguments.length?(d=n*n,p):Math.sqrt(d)},p.distanceMax=function(n){return arguments.length?(x=n*n,p):Math.sqrt(x)},p.theta=function(n){return arguments.length?(z=n*n,p):Math.sqrt(z)},p},n.forceRadial=function(n,t,e,r){var i,u,f,a,c=o(.1);function l(n){for(var o=0,c=i.length;o<c;++o){var l=i[o],h=l.x-t||1e-6,v=(l.y||0)-e||1e-6,d=(l.z||0)-r||1e-6,y=Math.sqrt(h*h+v*v+d*d),s=(a[o]-y)*f[o]*n/y;l.vx+=h*s,u>1&&(l.vy+=v*s),u>2&&(l.vz+=d*s)}}function h(){if(i){var t,e=i.length;for(f=new Array(e),a=new Array(e),t=0;t<e;++t)a[t]=+n(i[t],t,i),f[t]=isNaN(a[t])?0:+c(i[t],t,i)}}return\"function\"!=typeof n&&(n=o(+n)),null==t&&(t=0),null==e&&(e=0),null==r&&(r=0),l.initialize=function(n,...t){i=n,u=t.find((n=>[1,2,3].includes(n)))||2,h()},l.strength=function(n){return arguments.length?(c=\"function\"==typeof n?n:o(+n),h(),l):c},l.radius=function(t){return arguments.length?(n=\"function\"==typeof t?t:o(+t),h(),l):n},l.x=function(n){return arguments.length?(t=+n,l):t},l.y=function(n){return arguments.length?(e=+n,l):e},l.z=function(n){return arguments.length?(r=+n,l):r},l},n.forceSimulation=function(n,t){t=t||2;var e,r=Math.min(3,Math.max(1,Math.round(t))),o=1,f=.001,a=1-Math.pow(f,1/300),c=0,l=.6,h=new Map,v=u.timer(g),y=i.dispatch(\"tick\",\"end\"),s=function(){let n=1;return()=>(n=(1664525*n+1013904223)%d)/d}();function g(){p(),y.call(\"tick\",e),o<f&&(v.stop(),y.call(\"end\",e))}function p(t){var i,u,f=n.length;void 0===t&&(t=1);for(var v=0;v<t;++v)for(o+=(c-o)*a,h.forEach((function(n){n(o)})),i=0;i<f;++i)null==(u=n[i]).fx?u.x+=u.vx*=l:(u.x=u.fx,u.vx=0),r>1&&(null==u.fy?u.y+=u.vy*=l:(u.y=u.fy,u.vy=0)),r>2&&(null==u.fz?u.z+=u.vz*=l:(u.z=u.fz,u.vz=0));return e}function M(){for(var t,e=0,i=n.length;e<i;++e){if((t=n[e]).index=e,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),null!=t.fz&&(t.z=t.fz),isNaN(t.x)||r>1&&isNaN(t.y)||r>2&&isNaN(t.z)){var u=10*(r>2?Math.cbrt(.5+e):r>1?Math.sqrt(.5+e):e),o=e*x,f=e*z;1===r?t.x=u:2===r?(t.x=u*Math.cos(o),t.y=u*Math.sin(o)):(t.x=u*Math.sin(o)*Math.cos(f),t.y=u*Math.cos(o),t.z=u*Math.sin(o)*Math.sin(f))}(isNaN(t.vx)||r>1&&isNaN(t.vy)||r>2&&isNaN(t.vz))&&(t.vx=0,r>1&&(t.vy=0),r>2&&(t.vz=0))}}function w(t){return t.initialize&&t.initialize(n,s,r),t}return null==n&&(n=[]),M(),e={tick:p,restart:function(){return v.restart(g),e},stop:function(){return v.stop(),e},numDimensions:function(n){return arguments.length?(r=Math.min(3,Math.max(1,Math.round(n))),h.forEach(w),e):r},nodes:function(t){return arguments.length?(n=t,M(),h.forEach(w),e):n},alpha:function(n){return arguments.length?(o=+n,e):o},alphaMin:function(n){return arguments.length?(f=+n,e):f},alphaDecay:function(n){return arguments.length?(a=+n,e):+a},alphaTarget:function(n){return arguments.length?(c=+n,e):c},velocityDecay:function(n){return arguments.length?(l=1-n,e):1-l},randomSource:function(n){return arguments.length?(s=n,h.forEach(w),e):s},force:function(n,t){return arguments.length>1?(null==t?h.delete(n):h.set(n,w(t)),e):h.get(n)},find:function(){var t,e,i,u,o,f,a=Array.prototype.slice.call(arguments),c=a.shift()||0,l=(r>1?a.shift():null)||0,h=(r>2?a.shift():null)||0,v=a.shift()||1/0,d=0,y=n.length;for(v*=v,d=0;d<y;++d)(u=(t=c-(o=n[d]).x)*t+(e=l-(o.y||0))*e+(i=h-(o.z||0))*i)<v&&(f=o,v=u);return f},on:function(n,t){return arguments.length>1?(y.on(n,t),e):y.on(n)}}},n.forceX=function(n){var t,e,r,i=o(.1);function u(n){for(var i,u=0,o=t.length;u<o;++u)(i=t[u]).vx+=(r[u]-i.x)*e[u]*n}function f(){if(t){var u,o=t.length;for(e=new Array(o),r=new Array(o),u=0;u<o;++u)e[u]=isNaN(r[u]=+n(t[u],u,t))?0:+i(t[u],u,t)}}return\"function\"!=typeof n&&(n=o(null==n?0:+n)),u.initialize=function(n){t=n,f()},u.strength=function(n){return arguments.length?(i=\"function\"==typeof n?n:o(+n),f(),u):i},u.x=function(t){return arguments.length?(n=\"function\"==typeof t?t:o(+t),f(),u):n},u},n.forceY=function(n){var t,e,r,i=o(.1);function u(n){for(var i,u=0,o=t.length;u<o;++u)(i=t[u]).vy+=(r[u]-i.y)*e[u]*n}function f(){if(t){var u,o=t.length;for(e=new Array(o),r=new Array(o),u=0;u<o;++u)e[u]=isNaN(r[u]=+n(t[u],u,t))?0:+i(t[u],u,t)}}return\"function\"!=typeof n&&(n=o(null==n?0:+n)),u.initialize=function(n){t=n,f()},u.strength=function(n){return arguments.length?(i=\"function\"==typeof n?n:o(+n),f(),u):i},u.y=function(t){return arguments.length?(n=\"function\"==typeof t?t:o(+t),f(),u):n},u},n.forceZ=function(n){var t,e,r,i=o(.1);function u(n){for(var i,u=0,o=t.length;u<o;++u)(i=t[u]).vz+=(r[u]-i.z)*e[u]*n}function f(){if(t){var u,o=t.length;for(e=new Array(o),r=new Array(o),u=0;u<o;++u)e[u]=isNaN(r[u]=+n(t[u],u,t))?0:+i(t[u],u,t)}}return\"function\"!=typeof n&&(n=o(null==n?0:+n)),u.initialize=function(n){t=n,f()},u.strength=function(n){return arguments.length?(i=\"function\"==typeof n?n:o(+n),f(),u):i},u.z=function(t){return arguments.length?(n=\"function\"==typeof t?t:o(+t),f(),u):n},u},Object.defineProperty(n,\"__esModule\",{value:!0})}));\r\n\t// // // https://github.com/vasturiano/d3-force-3d v3.0.2 Copyright 2021 Vasco Asturiano\r\n\t// !function(n,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?t(exports,require(\"d3-binarytree\"),require(\"d3-quadtree\"),require(\"d3-octree\"),require(\"d3-dispatch\"),require(\"d3-timer\")):\"function\"==typeof define&&define.amd?define([\"exports\",\"d3-binarytree\",\"d3-quadtree\",\"d3-octree\",\"d3-dispatch\",\"d3-timer\"],t):t((n=\"undefined\"!=typeof globalThis?globalThis:n||self).d3=n.d3||{},n.d3,n.d3,n.d3,n.d3,n.d3)}(this,(function(n,t,e,r,i,u){\"use strict\";function o(n){return function(){return n}}function f(n){return 1e-6*(n()-.5)}function a(n){return n.x+n.vx}function c(n){return n.y+n.vy}function l(n){return n.z+n.vz}function h(n){return n.index}function v(n,t){var e=n.get(t);if(!e)throw new Error(\"node not found: \"+t);return e}const d=4294967296;function y(n){return n.x}function s(n){return n.y}function g(n){return n.z}var x=Math.PI*(3-Math.sqrt(5)),z=20*Math.PI/(9+Math.sqrt(221));n.forceCenter=function(n,t,e){var r,i=1;function u(){var u,o,f=r.length,a=0,c=0,l=0;for(u=0;u<f;++u)a+=(o=r[u]).x||0,c+=o.y||0,l+=o.z||0;for(a=(a/f-n)*i,c=(c/f-t)*i,l=(l/f-e)*i,u=0;u<f;++u)o=r[u],a&&(o.x-=a),c&&(o.y-=c),l&&(o.z-=l)}return null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),u.initialize=function(n){r=n},u.x=function(t){return arguments.length?(n=+t,u):n},u.y=function(n){return arguments.length?(t=+n,u):t},u.z=function(n){return arguments.length?(e=+n,u):e},u.strength=function(n){return arguments.length?(i=+n,u):i},u},n.forceCollide=function(n){var i,u,h,v,d=1,y=1;function s(){for(var n,o,s,x,z,p,M,w,q=i.length,N=0;N<y;++N)for(o=(1===u?t.binarytree(i,a):2===u?e.quadtree(i,a,c):3===u?r.octree(i,a,c,l):null).visitAfter(g),n=0;n<q;++n)s=i[n],M=h[s.index],w=M*M,x=s.x+s.vx,u>1&&(z=s.y+s.vy),u>2&&(p=s.z+s.vz),o.visit(m);function m(n,t,e,r,i,o,a){var c=[t,e,r,i,o,a],l=c[0],h=c[1],y=c[2],g=c[u],q=c[u+1],N=c[u+2],m=n.data,A=n.r,b=M+A;if(!m)return l>x+b||g<x-b||u>1&&(h>z+b||q<z-b)||u>2&&(y>p+b||N<p-b);if(m.index>s.index){var k=x-m.x-m.vx,E=u>1?z-m.y-m.vy:0,j=u>2?p-m.z-m.vz:0,D=k*k+E*E+j*j;D<b*b&&(0===k&&(D+=(k=f(v))*k),u>1&&0===E&&(D+=(E=f(v))*E),u>2&&0===j&&(D+=(j=f(v))*j),D=(b-(D=Math.sqrt(D)))/D*d,s.vx+=(k*=D)*(b=(A*=A)/(w+A)),u>1&&(s.vy+=(E*=D)*b),u>2&&(s.vz+=(j*=D)*b),m.vx-=k*(b=1-b),u>1&&(m.vy-=E*b),u>2&&(m.vz-=j*b))}}}function g(n){if(n.data)return n.r=h[n.data.index];for(var t=n.r=0;t<Math.pow(2,u);++t)n[t]&&n[t].r>n.r&&(n.r=n[t].r)}function x(){if(i){var t,e,r=i.length;for(h=new Array(r),t=0;t<r;++t)e=i[t],h[e.index]=+n(e,t,i)}}return\"function\"!=typeof n&&(n=o(null==n?1:+n)),s.initialize=function(n,...t){i=n,v=t.find((n=>\"function\"==typeof n))||Math.random,u=t.find((n=>[1,2,3].includes(n)))||2,x()},s.iterations=function(n){return arguments.length?(y=+n,s):y},s.strength=function(n){return arguments.length?(d=+n,s):d},s.radius=function(t){return arguments.length?(n=\"function\"==typeof t?t:o(+t),x(),s):n},s},n.forceLink=function(n){var t,e,r,i,u,a,c,l=h,d=function(n){return 1/Math.min(u[n.source.index],u[n.target.index])},y=o(30),s=1;function g(r){for(var u=0,o=n.length;u<s;++u)for(var l,h,v,d,y,g=0,x=0,z=0,p=0;g<o;++g)h=(l=n[g]).source,x=(v=l.target).x+v.vx-h.x-h.vx||f(c),i>1&&(z=v.y+v.vy-h.y-h.vy||f(c)),i>2&&(p=v.z+v.vz-h.z-h.vz||f(c)),x*=d=((d=Math.sqrt(x*x+z*z+p*p))-e[g])/d*r*t[g],z*=d,p*=d,v.vx-=x*(y=a[g]),i>1&&(v.vy-=z*y),i>2&&(v.vz-=p*y),h.vx+=x*(y=1-y),i>1&&(h.vy+=z*y),i>2&&(h.vz+=p*y)}function x(){if(r){var i,o,f=r.length,c=n.length,h=new Map(r.map(((n,t)=>[l(n,t,r),n])));for(i=0,u=new Array(f);i<c;++i)(o=n[i]).index=i,\"object\"!=typeof o.source&&(o.source=v(h,o.source)),\"object\"!=typeof o.target&&(o.target=v(h,o.target)),u[o.source.index]=(u[o.source.index]||0)+1,u[o.target.index]=(u[o.target.index]||0)+1;for(i=0,a=new Array(c);i<c;++i)o=n[i],a[i]=u[o.source.index]/(u[o.source.index]+u[o.target.index]);t=new Array(c),z(),e=new Array(c),p()}}function z(){if(r)for(var e=0,i=n.length;e<i;++e)t[e]=+d(n[e],e,n)}function p(){if(r)for(var t=0,i=n.length;t<i;++t)e[t]=+y(n[t],t,n)}return null==n&&(n=[]),g.initialize=function(n,...t){r=n,c=t.find((n=>\"function\"==typeof n))||Math.random,i=t.find((n=>[1,2,3].includes(n)))||2,x()},g.links=function(t){return arguments.length?(n=t,x(),g):n},g.id=function(n){return arguments.length?(l=n,g):l},g.iterations=function(n){return arguments.length?(s=+n,g):s},g.strength=function(n){return arguments.length?(d=\"function\"==typeof n?n:o(+n),z(),g):d},g.distance=function(n){return arguments.length?(y=\"function\"==typeof n?n:o(+n),p(),g):y},g},n.forceManyBody=function(){var n,i,u,a,c,l,h=o(-30),v=1,d=1/0,x=.81;function z(o){var f,a=n.length,l=(1===i?t.binarytree(n,y):2===i?e.quadtree(n,y,s):3===i?r.octree(n,y,s,g):null).visitAfter(M);for(c=o,f=0;f<a;++f)u=n[f],l.visit(w)}function p(){if(n){var t,e,r=n.length;for(l=new Array(r),t=0;t<r;++t)e=n[t],l[e.index]=+h(e,t,n)}}function M(n){var t,e,r,u,o,f,a=0,c=0,h=n.length;if(h){for(r=u=o=f=0;f<h;++f)(t=n[f])&&(e=Math.abs(t.value))&&(a+=t.value,c+=e,r+=e*(t.x||0),u+=e*(t.y||0),o+=e*(t.z||0));a*=Math.sqrt(4/h),n.x=r/c,i>1&&(n.y=u/c),i>2&&(n.z=o/c)}else{(t=n).x=t.data.x,i>1&&(t.y=t.data.y),i>2&&(t.z=t.data.z);do{a+=l[t.data.index]}while(t=t.next)}n.value=a}function w(n,t,e,r,o){if(!n.value)return!0;var h=[e,r,o][i-1],y=n.x-u.x,s=i>1?n.y-u.y:0,g=i>2?n.z-u.z:0,z=h-t,p=y*y+s*s+g*g;if(z*z/x<p)return p<d&&(0===y&&(p+=(y=f(a))*y),i>1&&0===s&&(p+=(s=f(a))*s),i>2&&0===g&&(p+=(g=f(a))*g),p<v&&(p=Math.sqrt(v*p)),u.vx+=y*n.value*c/p,i>1&&(u.vy+=s*n.value*c/p),i>2&&(u.vz+=g*n.value*c/p)),!0;if(!(n.length||p>=d)){(n.data!==u||n.next)&&(0===y&&(p+=(y=f(a))*y),i>1&&0===s&&(p+=(s=f(a))*s),i>2&&0===g&&(p+=(g=f(a))*g),p<v&&(p=Math.sqrt(v*p)));do{n.data!==u&&(z=l[n.data.index]*c/p,u.vx+=y*z,i>1&&(u.vy+=s*z),i>2&&(u.vz+=g*z))}while(n=n.next)}}return z.initialize=function(t,...e){n=t,a=e.find((n=>\"function\"==typeof n))||Math.random,i=e.find((n=>[1,2,3].includes(n)))||2,p()},z.strength=function(n){return arguments.length?(h=\"function\"==typeof n?n:o(+n),p(),z):h},z.distanceMin=function(n){return arguments.length?(v=n*n,z):Math.sqrt(v)},z.distanceMax=function(n){return arguments.length?(d=n*n,z):Math.sqrt(d)},z.theta=function(n){return arguments.length?(x=n*n,z):Math.sqrt(x)},z},n.forceRadial=function(n,t,e,r){var i,u,f,a,c=o(.1);function l(n){for(var o=0,c=i.length;o<c;++o){var l=i[o],h=l.x-t||1e-6,v=(l.y||0)-e||1e-6,d=(l.z||0)-r||1e-6,y=Math.sqrt(h*h+v*v+d*d),s=(a[o]-y)*f[o]*n/y;l.vx+=h*s,u>1&&(l.vy+=v*s),u>2&&(l.vz+=d*s)}}function h(){if(i){var t,e=i.length;for(f=new Array(e),a=new Array(e),t=0;t<e;++t)a[t]=+n(i[t],t,i),f[t]=isNaN(a[t])?0:+c(i[t],t,i)}}return\"function\"!=typeof n&&(n=o(+n)),null==t&&(t=0),null==e&&(e=0),null==r&&(r=0),l.initialize=function(n,...t){i=n,u=t.find((n=>[1,2,3].includes(n)))||2,h()},l.strength=function(n){return arguments.length?(c=\"function\"==typeof n?n:o(+n),h(),l):c},l.radius=function(t){return arguments.length?(n=\"function\"==typeof t?t:o(+t),h(),l):n},l.x=function(n){return arguments.length?(t=+n,l):t},l.y=function(n){return arguments.length?(e=+n,l):e},l.z=function(n){return arguments.length?(r=+n,l):r},l},n.forceSimulation=function(n,t){t=t||2;var e,r=Math.min(3,Math.max(1,Math.round(t))),o=1,f=.001,a=1-Math.pow(f,1/300),c=0,l=.6,h=new Map,v=u.timer(g),y=i.dispatch(\"tick\",\"end\"),s=function(){let n=1;return()=>(n=(1664525*n+1013904223)%d)/d}();function g(){p(),y.call(\"tick\",e),o<f&&(v.stop(),y.call(\"end\",e))}function p(t){var i,u,f=n.length;void 0===t&&(t=1);for(var v=0;v<t;++v)for(o+=(c-o)*a,h.forEach((function(n){n(o)})),i=0;i<f;++i)null==(u=n[i]).fx?u.x+=u.vx*=l:(u.x=u.fx,u.vx=0),r>1&&(null==u.fy?u.y+=u.vy*=l:(u.y=u.fy,u.vy=0)),r>2&&(null==u.fz?u.z+=u.vz*=l:(u.z=u.fz,u.vz=0));return e}function M(){for(var t,e=0,i=n.length;e<i;++e){if((t=n[e]).index=e,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),null!=t.fz&&(t.z=t.fz),isNaN(t.x)||r>1&&isNaN(t.y)||r>2&&isNaN(t.z)){var u=10*(r>2?Math.cbrt(.5+e):r>1?Math.sqrt(.5+e):e),o=e*x,f=e*z;1===r?t.x=u:2===r?(t.x=u*Math.cos(o),t.y=u*Math.sin(o)):(t.x=u*Math.sin(o)*Math.cos(f),t.y=u*Math.cos(o),t.z=u*Math.sin(o)*Math.sin(f))}(isNaN(t.vx)||r>1&&isNaN(t.vy)||r>2&&isNaN(t.vz))&&(t.vx=0,r>1&&(t.vy=0),r>2&&(t.vz=0))}}function w(t){return t.initialize&&t.initialize(n,s,r),t}return null==n&&(n=[]),M(),e={tick:p,restart:function(){return v.restart(g),e},stop:function(){return v.stop(),e},numDimensions:function(n){return arguments.length?(r=Math.min(3,Math.max(1,Math.round(n))),h.forEach(w),e):r},nodes:function(t){return arguments.length?(n=t,M(),h.forEach(w),e):n},alpha:function(n){return arguments.length?(o=+n,e):o},alphaMin:function(n){return arguments.length?(f=+n,e):f},alphaDecay:function(n){return arguments.length?(a=+n,e):+a},alphaTarget:function(n){return arguments.length?(c=+n,e):c},velocityDecay:function(n){return arguments.length?(l=1-n,e):1-l},randomSource:function(n){return arguments.length?(s=n,h.forEach(w),e):s},force:function(n,t){return arguments.length>1?(null==t?h.delete(n):h.set(n,w(t)),e):h.get(n)},find:function(){var t,e,i,u,o,f,a=Array.prototype.slice.call(arguments),c=a.shift()||0,l=(r>1?a.shift():null)||0,h=(r>2?a.shift():null)||0,v=a.shift()||1/0,d=0,y=n.length;for(v*=v,d=0;d<y;++d)(u=(t=c-(o=n[d]).x)*t+(e=l-(o.y||0))*e+(i=h-(o.z||0))*i)<v&&(f=o,v=u);return f},on:function(n,t){return arguments.length>1?(y.on(n,t),e):y.on(n)}}},n.forceX=function(n){var t,e,r,i=o(.1);function u(n){for(var i,u=0,o=t.length;u<o;++u)(i=t[u]).vx+=(r[u]-i.x)*e[u]*n}function f(){if(t){var u,o=t.length;for(e=new Array(o),r=new Array(o),u=0;u<o;++u)e[u]=isNaN(r[u]=+n(t[u],u,t))?0:+i(t[u],u,t)}}return\"function\"!=typeof n&&(n=o(null==n?0:+n)),u.initialize=function(n){t=n,f()},u.strength=function(n){return arguments.length?(i=\"function\"==typeof n?n:o(+n),f(),u):i},u.x=function(t){return arguments.length?(n=\"function\"==typeof t?t:o(+t),f(),u):n},u},n.forceY=function(n){var t,e,r,i=o(.1);function u(n){for(var i,u=0,o=t.length;u<o;++u)(i=t[u]).vy+=(r[u]-i.y)*e[u]*n}function f(){if(t){var u,o=t.length;for(e=new Array(o),r=new Array(o),u=0;u<o;++u)e[u]=isNaN(r[u]=+n(t[u],u,t))?0:+i(t[u],u,t)}}return\"function\"!=typeof n&&(n=o(null==n?0:+n)),u.initialize=function(n){t=n,f()},u.strength=function(n){return arguments.length?(i=\"function\"==typeof n?n:o(+n),f(),u):i},u.y=function(t){return arguments.length?(n=\"function\"==typeof t?t:o(+t),f(),u):n},u},n.forceZ=function(n){var t,e,r,i=o(.1);function u(n){for(var i,u=0,o=t.length;u<o;++u)(i=t[u]).vz+=(r[u]-i.z)*e[u]*n}function f(){if(t){var u,o=t.length;for(e=new Array(o),r=new Array(o),u=0;u<o;++u)e[u]=isNaN(r[u]=+n(t[u],u,t))?0:+i(t[u],u,t)}}return\"function\"!=typeof n&&(n=o(null==n?0:+n)),u.initialize=function(n){t=n,f()},u.strength=function(n){return arguments.length?(i=\"function\"==typeof n?n:o(+n),f(),u):i},u.z=function(t){return arguments.length?(n=\"function\"==typeof t?t:o(+t),f(),u):n},u},Object.defineProperty(n,\"__esModule\",{value:!0})}));\r\n\t\r\n\t// importScripts(\"https://cdn.jsdelivr.net/npm/d3-dispatch@3\");\r\n\t// importScripts(\"https://cdn.jsdelivr.net/npm/d3-quadtree@3\");\r\n\t// importScripts(\"https://cdn.jsdelivr.net/npm/d3-timer@3\");\r\n\t// importScripts(\"https://cdn.jsdelivr.net/npm/d3-force@3\");\r\n\t// importScripts(\"https://unpkg.com/d3-binarytree\");\r\n\t// importScripts(\"https://unpkg.com/d3-octree\");\r\n\t// importScripts(\"https://unpkg.com/d3-force-3d\");\r\n\r\n\t\"use strict\"\r\n\r\n\tfunction d3gravityForce() {\r\n\t\t// var nodes, strength = 0.20, softening = 0.05;\r\n\t\tvar nodes, strength = 0.05, softening = 0.025;\r\n\t\tfunction force(alpha){\r\n\t\t\tconst totalStrength = Math.sqrt(nodes.length)*alpha * strength;\r\n\t\t\tfor (let i = 0, n = nodes.length, node; i < n; ++i) {\r\n\t\t\t\tnode = nodes[i];\r\n\t\t\t\tlet r2 = node.x * node.x + node.y * node.y + node.z * node.z + softening;\r\n\t\t\t\tlet distance = Math.sqrt(r2);\r\n\t\t\t\t\r\n\t\t\t\tlet invDistMag = totalStrength/(distance);\r\n\t\t\t\tnode.vx -= node.x * invDistMag;\r\n\t\t\t\tnode.vy -= node.y * invDistMag;\r\n\t\t\t\tnode.vz -= node.z * invDistMag;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tforce.initialize = function(_) {\r\n\t\t\tnodes = _;\r\n\t\t};\r\n\t\t\r\n\t\tforce.strength = function(_) {\r\n\t\t\treturn arguments.length ? (strength = +_, force) : strength;\r\n\t\t};\r\n\r\n\t\tforce.softening = function(_) {\r\n\t\t\treturn arguments.length ? (softening = +_, force) : softening;\r\n\t\t};\r\n\t\t\r\n\t\treturn force;\r\n\t}\r\n\r\n\tlet nodes = [];\r\n\tlet inputEdges = [];\r\n\tlet links = [];\r\n\tlet weighted = false;\r\n\tthis.allowedLinks = links;\r\n\tthis.simulation = null;\r\n\tthis._settings = {}\r\n\tthis._repulsiveStrength = 1;\r\n\tthis._attractiveStrength = 1;\r\n\r\n\r\n\tthis._handleSetAttribute = (attributeName,value)=>{\r\n\t\t// example attributeName = \"simulation.alpha\"\r\n\t\t// example this.simulation.attributeName?.(value);\r\n\t\tlet attributeNames = attributeName.split(\".\");\r\n\t\tlet attribute = this;\r\n\t\tfor(let i=0;i<attributeNames.length;i++){\r\n\t\t\tattribute = attribute?.[attributeNames[i]];\r\n\t\t}\r\n\t\tattribute?.(value);\r\n\t};\r\n\r\n\tthis._recalculateRepulsiveAndAttractiveStrengths = ()=>{\r\n\t\tlet baseStrength = this._settings.forcesStrength;\r\n\t\tlet ratio = this._settings.forcesRatio;\r\n\t\tlet repulsiveExponent = this._settings.repulsiveExponent;\r\n\t\tlet attractiveExponent = this._settings.attractiveExponent;\r\n\r\n\t\t// Balance force strengths based on exponent difference\r\n\t\tthis._repulsiveStrength = (baseStrength)*Math.pow(1/(ratio/100), (repulsiveExponent)/2);\r\n\t\tthis._attractiveStrength = (baseStrength)*Math.pow((ratio/100), (attractiveExponent)/2);\r\n\t\t// this._repulsiveStrength = baseStrength * Math.pow(ratio/100, -0.5);\r\n\t\t// this._attractiveStrength = baseStrength * Math.pow(ratio/100, 0.5);\r\n\t\t\r\n\r\n\t};\r\n\r\n\tthis._updateStrengths = ()=>{\r\n\t\tthis._recalculateRepulsiveAndAttractiveStrengths();\r\n\t\tlet attractiveStrength = this._attractiveStrength;\r\n\t\tlet repulsiveStrength = this._repulsiveStrength;\r\n\t\tif(this.simulation){\r\n\t\t\tif(weighted){\r\n\t\t\t\tswitch(this._settings.forceNormalizationType){\r\n\t\t\t\t\tcase \"strength\":\r\n\t\t\t\t\t\tthis.attractiveForce.strength(d => d.weight==0?0:attractiveStrength * d.weight / Math.min(d.target.strength, d.source.strength));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"degree\":\r\n\t\t\t\t\t\tthis.attractiveForce.strength(d => d.weight==0?0:attractiveStrength / Math.min(d.target.degree, d.source.degree));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tthis.attractiveForce.strength(d => attractiveStrength * d.weight);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tswitch(this._settings.forceNormalizationType){\r\n\t\t\t\t\tcase \"strength\":\r\n\t\t\t\t\t\tthis.attractiveForce.strength(d => attractiveStrength / Math.min(d.target.strength, d.source.strength));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"degree\":\r\n\t\t\t\t\t\tthis.attractiveForce.strength(d => attractiveStrength / Math.min(d.target.degree, d.source.degree));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tthis.attractiveForce.strength(attractiveStrength);\r\n\t\t\t\t}\r\n\t\t\t\t// this.attractiveforce.strength(1);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.repulsiveForce.exponent(this._settings.repulsiveExponent);\r\n\t\t\tthis.attractiveForce.exponent(this._settings.attractiveExponent);\r\n\t\t\tthis.repulsiveForce.strength(-repulsiveStrength);\r\n\t\t}\r\n\t};\r\n\t\r\n\r\n\tthis._createNodesAndEdges = ()=>{\r\n\t\t// let inputNodes = msg.data.nodes;\r\n\t\t// let inputEdgeWeights = msg.data.weights;\r\n\t\t\r\n\r\n\t\tfor (let nodeIndex = 0; nodeIndex < inputNodesPositions.length/3; nodeIndex++) {\r\n\t\t\tlet x = inputNodesPositions[nodeIndex*3+0]*10;\r\n\t\t\tlet y = inputNodesPositions[nodeIndex*3+1]*10;\r\n\t\t\tlet z = inputNodesPositions[nodeIndex*3+2]*10;\r\n\t\t\tlet vz = 0;\r\n\t\t\tnodes.push({x,y,z,vz,ID:nodeIndex,strength:1});\r\n\t\t}\r\n\r\n\t\tfor (let index = 0; index < inputEdges.length / 2; index++) {\r\n\t\t\tlet edgeFrom = nodes[(inputEdges[index * 2])];\r\n\t\t\tlet edgeTo = nodes[(inputEdges[index * 2 + 1])];\r\n\t\t\tlet edgeObject = {\r\n\t\t\t\tsource: edgeFrom,\r\n\t\t\t\ttarget: edgeTo,\r\n\t\t\t}\r\n\t\t\tlinks.push(edgeObject);\r\n\t\t}\r\n\t\tthis.allowedLinks = links;\r\n\t\tthis._recalculateNodeStrengths();\r\n\t};\r\n\r\n\tthis.use2D = (value)=>{\r\n\t\tif(value === undefined){\r\n\t\t\tvalue = this._settings.use2D;\r\n\t\t}\r\n\t\tthis._settings.use2D = value;\r\n\t\tif(this.simulation){\r\n\t\t\tthis.simulation.numDimensions(value?2:3);\r\n\t\t}\r\n\t};\r\n\r\n\tthis.forcesStrength = (value,avoidStrengthUpdate=false)=>{\r\n\t\tif(value === undefined){\r\n\t\t\tvalue = this._settings.forcesStrength;\r\n\t\t}\r\n\t\tthis._settings.forcesStrength = value;\r\n\t\tif(!avoidStrengthUpdate){\r\n\t\t\tthis._updateStrengths();\r\n\t\t}\r\n\t};\r\n\r\n\tthis.forcesRatio = (value,avoidStrengthUpdate=false)=>{\r\n\t\tif(value === undefined){\r\n\t\t\tvalue = this._settings.forcesRatio;\r\n\t\t}\r\n\t\tthis._settings.forcesRatio = value;\r\n\t\tif(!avoidStrengthUpdate){\r\n\t\t\tthis._updateStrengths();\r\n\t\t}\r\n\t};\r\n\r\n\tthis.repulsiveExponent = (value,avoidStrengthUpdate=false)=>{\r\n\t\tif(value === undefined){\r\n\t\t\tvalue = this._settings.repulsiveExponent;\r\n\t\t}\r\n\t\tthis._settings.repulsiveExponent = value;\r\n\t\tif(!avoidStrengthUpdate){\r\n\t\t\tthis._updateStrengths();\r\n\t\t}\r\n\t};\r\n\r\n\tthis.attractiveExponent = (value,avoidStrengthUpdate=false)=>{\r\n\t\tif(value === undefined){\r\n\t\t\tvalue = this._settings.attractiveExponent;\r\n\t\t}\r\n\t\tthis._settings.attractiveExponent = value;\r\n\t\tif(!avoidStrengthUpdate){\r\n\t\t\tthis._updateStrengths();\r\n\t\t}\r\n\t};\r\n\r\n\tthis.gravity = (value)=>{\r\n\t\tif(value === undefined){\r\n\t\t\tvalue = this._settings.gravity;\r\n\t\t}\r\n\t\tthis._settings.gravity = value;\r\n\t\tif(this.gravityForce){\r\n\t\t\tthis.gravityForce.strength(value);\r\n\t\t}\r\n\t};\r\n\r\n\tthis.collisionEnabled = (value)=>{\r\n\t\tif(value === undefined){\r\n\t\t\tvalue = this._settings.collisionEnabled;\r\n\t\t}\r\n\t\tthis._settings.collisionEnabled = value;\r\n\t\tif(this.collisionForce){\r\n\t\t\tif(value){\r\n\t\t\t\t// get collision force from simulation\r\n\t\t\t\tif(!this.simulation.force(\"collision\")){\r\n\t\t\t\t\tthis.simulation.force(\"collision\", this.collisionForce);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t// remove collision force from simulation\r\n\t\t\t\tif(this.simulation.force(\"collision\")){\r\n\t\t\t\t\tthis.simulation.force(\"collision\", null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tthis.collisionRadius = (value)=>{\r\n\t\tif(value === undefined){\r\n\t\t\tvalue = this._settings.collisionRadius;\r\n\t\t}\r\n\t\tthis._settings.collisionRadius = value;\r\n\t\tif(this.collisionForce){\r\n\t\t\tthis.collisionForce.radius(value);\r\n\t\t}\r\n\t};\r\n\r\n\tthis.linkDistance = (value)=>{\r\n\t\tif(value === undefined){\r\n\t\t\tvalue = this._settings.linkDistance;\r\n\t\t}\r\n\t\tthis._settings.linkDistance = value;\r\n\t\tif(this.attractiveForce){\r\n\t\t\tthis.attractiveForce.distance(value);\r\n\t\t}\r\n\t};\r\n\r\n\tthis.viscosity = (value)=>{\r\n\t\tif(value === undefined){\r\n\t\t\tvalue = this._settings.viscosity;\r\n\t\t}\r\n\t\tthis._settings.viscosity = value;\r\n\t\tif(this.simulation){\r\n\t\t\tthis.simulation.velocityDecay(value);\r\n\t\t}\r\n\t};\r\n\r\n\tthis.alpha = (value)=>{\r\n\t\tif(value === undefined){\r\n\t\t\tvalue = this._settings.alpha;\r\n\t\t}\r\n\t\tthis._settings.alpha = value;\r\n\t\tif(this.simulation){\r\n\t\t\tthis.simulation.alpha(value);\r\n\t\t}\r\n\t};\r\n\r\n\tthis.alphaDecay = (value)=>{\r\n\t\tif(value === undefined){\r\n\t\t\tvalue = this._settings.alphaDecay;\r\n\t\t}\r\n\t\tthis._settings.alphaDecay = value;\r\n\t\tif(this.simulation){\r\n\t\t\tthis.simulation.alphaDecay(value);\r\n\t\t}\r\n\t};\r\n\r\n\tthis.alphaTarget = (value)=>{\r\n\t\tif(value === undefined){\r\n\t\t\tvalue = this._settings.alphaTarget;\r\n\t\t}\r\n\t\tthis._settings.alphaTarget = value;\r\n\t\tif(this.simulation){\r\n\t\t\tthis.simulation.alphaTarget(value);\r\n\t\t}\r\n\t};\r\n\r\n\tthis.alphaMin = (value)=>{\r\n\t\tif(value === undefined){\r\n\t\t\tvalue = this._settings.alphaMin;\r\n\t\t}\r\n\t\tthis._settings.alphaMin = value;\r\n\t\tif(this.simulation){\r\n\t\t\tthis.simulation.alphaMin(value);\r\n\t\t}\r\n\t};\r\n\r\n\tthis.forceNormalizationType = (value, avoidStrengthUpdate=false)=>{\r\n\t\tif(value === undefined){\r\n\t\t\tvalue = this._settings.forceNormalizationType;\r\n\t\t}\r\n\t\tthis._settings.forceNormalizationType = value;\r\n\t\tif(!avoidStrengthUpdate){\r\n\t\t\tthis._updateStrengths();\r\n\t\t}\r\n\t};\r\n\r\n\t\r\n\r\n\tthis.settings = (settings)=>{\r\n\t\t// always contains:\r\n\t\t// use2D\r\n\t\t// forcesStrength\r\n\t\t// forcesRatio\r\n\t\t// repulsiveExponent\r\n\t\t// attractiveExponent\r\n\t\t// gravity\r\n\t\t// viscosity\r\n\t\t// collisionEnabled\r\n\t\t// collisionRadius\r\n\t\t// linkDistance\r\n\t\t// forceNormalizationType\r\n\t\t// alpha\r\n\t\t// alphaDecay\r\n\t\t// alphaTarget\r\n\t\t// alphaMin\r\n\t\tthis._settings = settings;\r\n\t\tthis._settingsUpdated();\r\n\t}\r\n\r\n\tthis._settingsUpdated = ()=>{\r\n\t\tthis.use2D(this._settings.use2D);\r\n\t\tthis.forcesStrength(this._settings.forcesStrength, false);\r\n\t\tthis.forcesRatio(this._settings.forcesRatio, false);\r\n\t\tthis.repulsiveExponent(this._settings.repulsiveExponent, false);\r\n\t\tthis.attractiveExponent(this._settings.attractiveExponent, false);\r\n\t\tthis.gravity(this._settings.gravity);\r\n\t\tthis.collisionEnabled(this._settings.collisionEnabled);\r\n\t\tthis.collisionRadius(this._settings.collisionRadius);\r\n\t\tthis.linkDistance(this._settings.linkDistance);\r\n\t\tthis.viscosity(this._settings.viscosity);\r\n\t\tthis.alpha(this._settings.alpha);\r\n\t\tthis.alphaDecay(this._settings.alphaDecay);\r\n\t\tthis.alphaTarget(this._settings.alphaTarget);\r\n\t\tthis.alphaMin(this._settings.alphaMin);\r\n\t\tthis.forceNormalizationType(this._settings.forceNormalizationType, false);\r\n\t\tthis._updateStrengths();\r\n\t};\r\n\r\n\tthis._setupForces = (settings)=>{\r\n\t\tthis.repulsiveForce = d3.forceManyBody();\r\n\t\tthis.attractiveForce = d3.forceLink(this.allowedLinks);\r\n\t\tthis.centralForce = d3.forceCenter();\r\n\t\tthis.gravityForce = d3gravityForce();\r\n\t\tthis.collisionForce = d3.forceCollide();\r\n\t\t\r\n\r\n\r\n\t\tthis.simulation = d3.forceSimulation(nodes)\r\n\t\t\t.numDimensions(this._settings.use2D?2:3)\r\n\t\t\t.force(\"repulsive\", this.repulsiveForce)\r\n\t\t\t.force(\"attractive\", this.attractiveForce)\r\n\t\t\t.force(\"central\", this.centralForce)\r\n\t\t\t.force(\"gravity\", this.gravityForce);\r\n\r\n\t\tthis.settings(settings);\r\n\r\n\t\tthis.simulation.on(\"tick\", async () => {\r\n\t\t\t\tlet use2D = this._settings.use2D;\r\n\t\t\t\tfor (let vertexIndex = 0; vertexIndex < nodes.length; vertexIndex++) {\r\n\t\t\t\t\tconst node = nodes[vertexIndex];\r\n\t\t\t\t\tinputNodesPositions[vertexIndex * 3 + 0] = node.x/10;\r\n\t\t\t\t\tinputNodesPositions[vertexIndex * 3 + 1] = node.y/10;\r\n\t\t\t\t\tif(!use2D) {\r\n\t\t\t\t\t\tinputNodesPositions[vertexIndex * 3 + 2] = node.z/10;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tinputNodesPositions[vertexIndex * 3 + 2] = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._settings.alpha = this.simulation.alpha();\r\n\t\t\t\tself.postMessage({ type: \"update\", positions: inputNodesPositions, alpha: this._settings.alpha });\r\n\t\t\t}).on(\"end\", () => {\r\n\t\t\t\tself.postMessage({ type: \"stop\" });\r\n\t\t\t});\r\n\t};\r\n\r\n\tthis._recalculateNodeStrengths = ()=>{\r\n\t\tnodes.forEach((node,index)=>{\r\n\t\t\tnode.strength = 0;\r\n\t\t\tnode.degree = 0;\r\n\t\t});\r\n\t\tif(weighted){\r\n\t\t\t// reset all node strengths\r\n\t\t\tthis.allowedLinks.forEach((link,index)=>{\r\n\t\t\t\tlink.source.strength += link.weight;\r\n\t\t\t\tlink.target.strength += link.weight;\r\n\t\t\t\tlink.source.degree += 1;\r\n\t\t\t\tlink.target.degree += 1;\r\n\t\t\t});\r\n\t\t}else{ //use degree\r\n\t\t\tthis.allowedLinks.forEach((link,index)=>{\r\n\t\t\t\tlink.source.strength += 1;\r\n\t\t\t\tlink.target.strength += 1;\r\n\t\t\t\tlink.source.degree += 1;\r\n\t\t\t\tlink.target.degree += 1;\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tthis._updateWeights = (weights)=>{\r\n\t\tif(weights && weights.length == links.length){\r\n\t\t\tlinks.forEach((link,index)=>{\r\n\t\t\t\tlink.weight = weights[index];\r\n\t\t\t});\r\n\t\t\tweighted = true;\r\n\t\t\tthis._recalculateNodeStrengths();\r\n\t\t\tthis._updateStrengths();\r\n\r\n\t\t}else{\r\n\t\t\tweighted = false;\r\n\t\t}\r\n\t};\r\n\t\r\n\tthis.setAllowedEdges = (allowedEdgesIndices)=>{\r\n\t\tif(allowedEdgesIndices){\r\n\t\t\tthis.allowedLinks = [];\r\n\t\t\tallowedEdgesIndices.forEach((edgeIndex,index)=>{\r\n\t\t\t\tthis.allowedLinks.push(links[edgeIndex]);\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis._recalculateNodeStrengths();\r\n\t\tthis._updateStrengths();\r\n\t\tthis.attractiveForce.links(this.allowedLinks);\r\n\t};\r\n\r\n\r\n\tself.onmessage = function (msg) {\r\n\t\t// console.log(\"RECEIVED:\", msg.data.type);\r\n\t\tif (msg.data.type == \"pause\") {\r\n\t\t\t// console.log(\"PAUSING!!!!\")\r\n\t\t\tthis.simulation.stop();\r\n\t\t} else if (msg.data.type == \"resume\") {\r\n\t\t\tthis.simulation.restart();\r\n\t\t} else if (msg.data.type == \"setAttribute\") {\r\n\t\t\tthis._handleSetAttribute(msg.data.attributeName,msg.data.value);\r\n\t\t} else if (msg.data.type == \"setWeights\") {\r\n\t\t\tthis._updateWeights(msg.data.weights);\r\n\t\t} else if (msg.data.type == \"setAllowedEdges\") {\r\n\t\t\tthis.setAllowedEdges(msg.data.allowedEdgeIndices);\r\n\t\t} else if (msg.data.type == \"start\") {\r\n\t\t\tinputNodesPositions = msg.data.positions;\r\n\t\t\tinputEdges = msg.data.edges;\r\n\t\t\tthis._createNodesAndEdges();\r\n\t\t\tthis._setupForces(msg.data.settings);\r\n\t\t\tif(msg.data.weights){\r\n\t\t\t\tthis._updateWeights(msg.data.weights);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n})\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nlet workerFunctionString = workerFunction.toString();\r\nlet workerURL = URL.createObjectURL(new Blob([`(${workerFunctionString})()`], {type:'text/javascript'}));\r\n\r\n\r\n\r\n// settings for d3ForceLayoutWorker\r\nconst SETTINGS_DEFINITION = {\r\n\tuse2D: {\r\n\t\ttype: \"boolean\",\r\n\t\tdefault: false,\r\n\t\tlabel: \"Use 2D\",\r\n\t\taccess: \"readwrite\",\r\n\t\tdescription: \"Use 2D forces instead of 3D forces. This will ignore the z-coordinate of nodes and edges.\",\r\n\t\t// default change function (instance.use2D(value))\r\n\t},\r\n\tforcesStrength: {\r\n\t\ttype: \"number\",\r\n\t\tdefault: 1,\r\n\t\tlabel: \"Forces Strength\",\r\n\t\taccess: \"readwrite\",\r\n\t\tpreferableRange: [0.1, 10],\r\n\t\ttransform: \"log\",\r\n\t\tdescription: \"The strength of the forces applied to the nodes. Higher values will result in stronger forces.\",\r\n\t},\r\n\tforcesRatio: {\r\n\t\ttype: \"number\",\r\n\t\tdefault: 1,\r\n\t\tlabel: \"Forces Ratio\",\r\n\t\taccess: \"readwrite\",\r\n\t\tpreferableRange: [0.05, 20],\r\n\t\ttransform: \"log\",\r\n\t\tdescription: \"The ratio between attractive and repulsive forces. A value of 1 means equal strength, higher values mean stronger attractive forces.\",\r\n\t},\r\n\trepulsiveExponent: {\r\n\t\ttype: \"number\",\r\n\t\tdefault: 1,\r\n\t\tlabel: \"Repulsive Exponent\",\r\n\t\taccess: \"readwrite\",\r\n\t\tpreferableRange: [0.5, 2],\r\n\t\ttransform: \"log\",\r\n\t\tdescription: \"The exponent for the repulsive force. Higher values will result in stronger repulsive forces.\",\r\n\t},\r\n\tattractiveExponent: {\r\n\t\ttype: \"number\",\r\n\t\tdefault: 1,\r\n\t\tlabel: \"Attractive Exponent\",\r\n\t\taccess: \"readwrite\",\r\n\t\tpreferableRange: [0.5, 2],\r\n\t\ttransform: \"log\",\r\n\t\tdescription: \"The exponent for the attractive force. Higher values will result in stronger attractive forces.\",\r\n\t},\r\n\tgravity: {\r\n\t\ttype: \"number\",\r\n\t\tdefault: 0.05,\r\n\t\tlabel: \"Gravity\",\r\n\t\taccess: \"readwrite\",\r\n\t\tpreferableRange: [0.001, 10],\r\n\t\ttransform: \"log\",\r\n\t\tdescription: \"The strength of the gravity force applied to the nodes. Higher values will result in stronger gravity forces.\",\r\n\t},\r\n\tviscosity: {\r\n\t\ttype: \"number\",\r\n\t\tdefault: 0.05,\r\n\t\tlabel: \"Viscosity\",\r\n\t\taccess: \"readwrite\",\r\n\t\tpreferableRange: [0.01, 1],\r\n\t\ttransform: \"log\",\r\n\t\tdescription: \"The strength of the viscosity force applied to the nodes. Higher values will result in stronger viscosity forces.\",\r\n\t},\r\n\tcollisionRadius: {\r\n\t\ttype: \"number\",\r\n\t\tdefault: 50,\r\n\t\tlabel: \"Collision Radius\",\r\n\t\taccess: \"readwrite\",\r\n\t\tpreferableRange: [1, 100],\r\n\t\ttransform: \"log\",\r\n\t\tdescription: \"The radius of the collision force applied to the nodes. Higher values will result in larger collision areas.\",\r\n\t\tenabled: \"collisionEnabled\",\r\n\t},\r\n\tcollisionEnabled: {\r\n\t\ttype: \"boolean\",\r\n\t\tdefault: false,\r\n\t\tlabel: \"Collision Force\",\r\n\t\taccess: \"readwrite\",\r\n\t\tdescription: \"Enable or disable the collision force. When enabled, nodes will repel each other based on their collision radius.\",\r\n\t},\r\n\tlinkDistance: {\r\n\t\ttype: \"number\",\r\n\t\tdefault: 30,\r\n\t\tlabel: \"Link Distance\",\r\n\t\taccess: \"readwrite\",\r\n\t\tpreferableRange: [0, 100],\r\n\t\tdescription: \"The distance between linked nodes. Higher values will result in more spaced out nodes.\",\r\n\t},\r\n\tforceNormalizationType: {\r\n\t\ttype: \"categorical\",\r\n\t\toptions: {\r\n\t\t\t\"Strength\":\"strength\",\r\n\t\t\t\"Degree\":\"degree\",\r\n\t\t\t\"None\":\"none\"\r\n\t\t},\r\n\t\tdefault: \"degree\",\r\n\t\tlabel: \"Normalization Type\",\r\n\t\taccess: \"readwrite\",\r\n\t\tdescription: \"The type of normalization applied to the attractive force. 'strength' normalizes by the minimum strength of the linked nodes, 'degree' normalizes by the minimum degree of the linked nodes, and 'none' applies the force without normalization.\",\r\n\t},\r\n\tinteractionAlpha: {\r\n\t\ttype: \"number\",\r\n\t\tdefault: 0.5,\r\n\t\tlabel: \"Interaction Alpha\",\r\n\t\ttransform: \"log\",\r\n\t\tpreferableRange: [0.1, 1],\r\n\t\tdescription: \"The alpha value used for each interaction.\"\r\n\t},\r\n\talphaDecay: {\r\n\t\ttype: \"number\",\r\n\t\tdefault: 1 - Math.pow(0.001, 1 / 300),\r\n\t\tlabel: \"Alpha Decay\",\r\n\t\taccess: \"readwrite\",\r\n\t\tpreferableRange: [0.001, 1],\r\n\t\ttransform: \"log\",\r\n\t\tdescription: \"The decay rate of the alpha value. This controls how quickly the forces applied to the nodes will decrease over time. A value of 1 means no decay, while a value close to 0 means very fast decay.\",\r\n\t},\r\n\talphaTarget: {\r\n\t\ttype: \"number\",\r\n\t\tdefault: 0,\r\n\t\tlabel: \"Alpha Target\",\r\n\t\taccess: \"readwrite\",\r\n\t\tpreferableRange: [0, 1],\r\n\t\tdescription: \"The target alpha value of the simulation. This controls the final strength of the forces applied to the nodes. The alpha value will decay towards this target value over time.\",\r\n\t},\r\n\talphaMin: {\r\n\t\ttype: \"number\",\r\n\t\tdefault: 0.001,\r\n\t\tlabel: \"Alpha Min\",\r\n\t\taccess: \"readwrite\",\r\n\t\tpreferableRange: [0.0001, 1],\r\n\t\ttransform: \"log\",\r\n\t\tdescription: \"The minimum alpha value of the simulation. This controls the minimum strength of the forces applied to the nodes. The alpha value will not decay below this value.\",\r\n\t},\r\n\talpha: {\r\n\t\ttype: \"number\",\r\n\t\tdefault: 1.0,\r\n\t\tlabel: \"Alpha\",\r\n\t\taccess: \"readonly\",\r\n\t\ttransform: \"log\",\r\n\t\tdescription: \"The alpha value of the simulation. This controls the strength of the forces applied to the nodes. The value will decay over time, simulating a cooling effect.\",\r\n\t},\r\n\trunning: {\r\n\t\ttype: \"boolean\",\r\n\t\tdefault: false,\r\n\t\tlabel: \"Running\",\r\n\t\taccess: \"readonly\",\r\n\t\tdescription: \"Indicates whether the layout is currently running. This is set to true when the layout is started and false when it is stopped.\",\r\n\t},\r\n};\r\n\r\nclass d3ForceLayoutWorker {\r\n\tconstructor({\r\n\t\tnetwork=null,\r\n\t\tonUpdate=null,\r\n\t\tonStop=null,\r\n\t\tonStart=null,\r\n\t\tuse2D=false, // DEPRECATED, use settings.use2D instead\r\n\t\tsettings = {}\r\n\t}) {\r\n\t\tthis._network = network;\r\n\t\tthis._onUpdate = onUpdate;\r\n\t\tthis._onStop = onStop;\r\n\t\tthis._onStart = onStart;\r\n\t\tthis._settings = new TrackedSettings(settings, SETTINGS_DEFINITION);\r\n\t\tif (use2D !== undefined) {\r\n\t\t\tconsole.warn(\"use2D is deprecated, use settings.use2D instead.\");\r\n\t\t\tthis._settings.use2D = use2D;\r\n\t\t}\r\n\t\tthis._layoutWorker = null;\r\n\t}\r\n\r\n\r\n\treset(){\r\n\t\tif(this._layoutWorker){\r\n\t\t\tthis.stop();\r\n\t\t\tif(this._settings.running){\r\n\t\t\t\tthis.start();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstart(){\r\n\t\tif(!this._layoutWorker){\r\n\t\t\tthis._layoutWorker = new Worker(workerURL);\r\n\t\t\tthis._layoutWorker.onmessage = (msg) => {\r\n\t\t\t\tif (msg.data.type == \"update\") {\r\n\t\t\t\t\tthis._settings.alpha = msg.data.alpha;\r\n\t\t\t\t\tthis._onUpdate?.(msg.data);\r\n\t\t\t\t\t// update settings.alpha\r\n\t\t\t\t}else if (msg.data.type == \"stop\") {\r\n\t\t\t\t\tthis._onStop?.(msg.data);\r\n\t\t\t\t\tthis._settings.running = false;\r\n\t\t\t\t}else if (msg.data.type == \"getAttribute\") {\r\n\t\t\t\t\tthis._handleReturnAttribute(msg.data);\r\n\t\t\t\t}else {\r\n\t\t\t\t\tconsole.log(\"Layout received Unknown msg: \", msg);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis._settings.running = true;\r\n\t\t\tthis._onStart?.();\r\n\t\t\tlet startMessage = {\r\n\t\t\t\ttype: \"start\",\r\n\t\t\t\t// network: this.network,\r\n\t\t\t\t// nodes:this._network.nodes,\r\n\t\t\t\tpositions:this._network.positions,\r\n\t\t\t\tedges:this._network.indexedEdges, \r\n\t\t\t\tsettings: this._settings.getAll(),\r\n\t\t\t};\r\n\t\t\tif(this._network.weighted){\r\n\t\t\t\tstartMessage.weights = this._network.edgeWeights;\r\n\t\t\t}\r\n\t\t\tthis._layoutWorker.postMessage(startMessage);\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\trestart(){\r\n\t\tthis.stop();\r\n\t\tthis.start();\r\n\t\treturn this;\r\n\t}\r\n\r\n\tstop(){\r\n\t\tif(this._settings.running){\r\n\t\t\tthis._onStop?.();\r\n\t\t}\r\n\t\tthis._layoutWorker?.terminate();\r\n\t\tthis._settings.running = false;\r\n\t\tdelete this._layoutWorker;\r\n\t\tthis._layoutWorker = null;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tresume() {\r\n\t\tthis.start();\r\n\t\tif(!this._settings.running){\r\n\t\t\tthis._onStart?.();\r\n\t\t}\r\n\t\tthis._layoutWorker.postMessage({ type: \"resume\" });\r\n\t\tthis._settings.running=true;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpause(){\r\n\t\tthis._layoutWorker.postMessage({ type: \"pause\"});\r\n\t\tthis._settings.running=false;\r\n\t\tthis._onStop?.();\r\n\t\treturn this;\r\n\t}\r\n\r\n\tonUpdate(callback) {\r\n\t\tthis._onUpdate = callback;\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tonStop(callback) {\r\n\t\tthis._onStop = callback;\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tonStart(callback) {\r\n\t\tthis._onStart = callback;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tisRunning() {\r\n\t\treturn this._settings.running;\r\n\t}\r\n\t\r\n\tcleanup() {\r\n\t\tthis.stop();\r\n\t}\r\n\r\n\t_handleGetAttribute(){\r\n\t\t//Not implemented yet\r\n\t}\r\n\r\n\tsetAttribute(attributeName,value){\r\n\t\tthis._layoutWorker.postMessage({\r\n\t\t\ttype: \"setAttribute\",\r\n\t\t\tattributeName: attributeName,\r\n\t\t\tvalue: value\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n\r\n\t// use2D\r\n\t// forcesStrength\r\n\t// forcesRatio\r\n\t// repulsiveExponent\r\n\t// attractiveExponent\r\n\t// gravity\r\n\t// viscosity\r\n\t// collisionRadius\r\n\t// collisionEnabled\r\n\t// linkDistance\r\n\t// forceNormalizationType\r\n\t// alpha\r\n\t// alphaDecay\r\n\t// alphaTarget\r\n\t// alphaMin\r\n\r\n\tuse2D(value){\r\n\t\tif(value === undefined){\r\n\t\t\treturn this._settings.use2D;\r\n\t\t}\r\n\t\tthis._settings.use2D = value;\r\n\t\tthis.setAttribute(\"use2D\", value);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tforcesStrength(strength) {\r\n\t\tif(strength === undefined){\r\n\t\t\treturn this._settings.forcesStrength;\r\n\t\t}\r\n\t\tthis._settings.forcesStrength = strength;\r\n\t\tthis.setAttribute(\"forcesStrength\", strength);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tforcesRatio(forceRatio) {\r\n\t\tif(forceRatio === undefined){\r\n\t\t\treturn this._settings.forcesRatio;\r\n\t\t}\r\n\t\tthis._settings.forcesRatio = forceRatio;\r\n\t\tthis.setAttribute(\"forcesRatio\", forceRatio);\r\n\t\treturn this;\r\n\t}\r\n\r\n\trepulsiveExponent(exponent) {\r\n\t\tif(exponent === undefined){\r\n\t\t\treturn this._settings.repulsiveExponent;\r\n\t\t}\r\n\t\tthis._settings.repulsiveExponent = exponent;\r\n\t\tthis.setAttribute(\"repulsiveExponent\", exponent);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tattractiveExponent(exponent) {\r\n\t\tif(exponent === undefined){\r\n\t\t\treturn this._settings.attractiveExponent;\r\n\t\t}\r\n\t\tthis._settings.attractiveExponent = exponent;\r\n\t\tthis.setAttribute(\"attractiveExponent\", exponent);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tgravity(strength) {\r\n\t\tif(strength === undefined){\r\n\t\t\treturn this._settings.gravity;\r\n\t\t}\r\n\t\tthis._settings.gravity = strength;\r\n\t\tthis.setAttribute(\"gravityForce.strength\", strength);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tviscosity(strength) {\r\n\t\tif(strength === undefined){\r\n\t\t\treturn this._settings.viscosity;\r\n\t\t}\r\n\t\tthis._settings.viscosity = strength;\r\n\t\tthis.setAttribute(\"viscosity\", strength);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tcollisionRadius(radius) {\r\n\t\tif(radius === undefined){\r\n\t\t\treturn this._settings.collisionRadius;\r\n\t\t}\r\n\t\tthis._settings.collisionRadius = radius;\r\n\t\tthis.setAttribute(\"collisionRadius\", radius);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tcollisionEnabled(enabled) {\r\n\t\tif(enabled === undefined){\r\n\t\t\treturn this._settings.collisionEnabled;\r\n\t\t}\r\n\t\tthis._settings.collisionEnabled = enabled;\r\n\t\tthis.setAttribute(\"collisionEnabled\", enabled);\r\n\t}\r\n\r\n\tforceNormalizationType(forceNormalizationType) {\r\n\t\tif(forceNormalizationType === undefined){\r\n\t\t\treturn this._settings.forceNormalizationType;\r\n\t\t}\r\n\t\tthis._settings.forceNormalizationType = forceNormalizationType;\r\n\t\tthis.setAttribute(\"forceNormalizationType\", forceNormalizationType);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tlinkDistance(distance) {\r\n\t\tif(distance === undefined){\r\n\t\t\treturn this._settings.linkDistance;\r\n\t\t}\r\n\t\tthis._settings.linkDistance = distance;\r\n\t\tthis.setAttribute(\"linkDistance\", distance);\r\n\t\treturn this;\r\n\t}\r\n\r\n\t\r\n\talpha(alphaValue){\r\n\t\tif(alphaValue === undefined){\r\n\t\t\treturn this._settings.alpha;\r\n\t\t}\r\n\r\n\t\t// console.log(`Updating alpha to ${alphaValue}`);\r\n\t\t// this._settings.alpha = alphaValue;\r\n\t\tthis.setAttribute(\"alpha\", alphaValue);\r\n\t\treturn this;\r\n\t}\r\n\r\n\talphaDecay(alphaDecayValue){\r\n\t\tif(alphaDecayValue === undefined){\r\n\t\t\treturn this._settings.alphaDecay;\r\n\t\t}\r\n\t\tthis._settings.alphaDecay = alphaDecayValue;\r\n\t\tthis.setAttribute(\"alphaDecay\", alphaDecayValue);\r\n\t\treturn this;\r\n\t}\r\n\r\n\talphaTarget(alphaTargetValue){\r\n\t\tif(alphaTargetValue === undefined){\r\n\t\t\treturn this._settings.alphaTarget;\r\n\t\t}\r\n\t\tthis._settings.alphaTarget = alphaTargetValue;\r\n\t\tthis.setAttribute(\"alphaTarget\", alphaTargetValue);\r\n\t\treturn this;\r\n\t}\r\n\r\n\talphaMin(alphaMinValue){\r\n\t\tif(alphaMinValue === undefined){\r\n\t\t\treturn this._settings.alphaMin;\r\n\t\t}\r\n\t\tthis._settings.alphaMin = alphaMinValue;\r\n\t\tthis.setAttribute(\"alphaMin\", alphaMinValue);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tinteractionAlpha(interactionAlphaValue){\r\n\t\tif(interactionAlphaValue === undefined){\r\n\t\t\treturn this._settings.interactionAlpha;\r\n\t\t}\r\n\t\tthis._settings.interactionAlpha = interactionAlphaValue;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tinteractionReheat(){\r\n\t\tthis.alpha(this._settings.interactionAlpha);\r\n\t}\r\n\r\n\tsettings(settings){\r\n\t\tif(settings === undefined){\r\n\t\t\treturn this._settings;\r\n\t\t}\r\n\r\n\t\tObject.entries(settings).forEach(([key, value]) => {\r\n\t\t\tif (key in this._settings) {\r\n\t\t\t\tthis._settings[key] = value;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.setAttribute(\"settings\", settings);\r\n\t\treturn this;\r\n\t}\r\n\r\n\r\n\tupdateForcesStrength(strength, forceRatio){\r\n\t\tthis._settings.forcesStrength = strength;\r\n\t\tthis._settings.forcesRatio = forceRatio;\r\n\t\tthis.setAttribute(\"forcesStrength\", strength);\r\n\t\tthis.setAttribute(\"forcesRatio\", forceRatio);\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tsetWeights(weights){\r\n\t\tthis._layoutWorker.postMessage({\r\n\t\t\ttype: \"setWeights\",\r\n\t\t\tweights: weights\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n\r\n\tsetAllowedEdges(allowedEdgesIndices){\r\n\t\tthis._layoutWorker.postMessage({\r\n\t\t\ttype: \"setAllowedEdges\",\r\n\t\t\tallowedEdgeIndices: allowedEdgesIndices\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n\r\n}\r\n\r\nexport {d3ForceLayoutWorker as layoutWorker};","\n\n\n\n//\n// EDGES VERTEX SHADER\n//\n\nlet vertexShader = /*glsl*/`\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\n \nuniform float globalSizeScale;\nuniform float globalSizeBase;\nuniform float globalWidthScale;\nuniform float globalWidthBase;\n\nuniform float globalOpacityScale;\nuniform float globalOpacityBase;\n\nuniform float scaleWithNodeSize;\n\nattribute vec3 fromVertex;\nattribute vec3 toVertex;\nattribute vec2 vertexType;\n// 0,1:  0.0, 1.0, // source, top\n// 0,0:  0.0, 0.0, // source, bottom\n// 1,1:  1.0, 1.0, // target, top\n// 1,0:  1.0, 0.0, // target, bottom\n\nattribute vec4 fromColor;\nattribute vec4 toColor;\nattribute float fromSize;\nattribute float toSize;\nattribute vec4 encodedIndex;\n\nvarying vec4 vColor;\nvarying vec3 vOffset;\nvarying vec4 vEncodedIndex;\n\nvarying vec3 vOffsetFromVertex;\nvarying vec3 vOffsetToVertex;\n\n\n//varying float vZComponent;\n\nvoid main(void){\n\tvColor = (fromColor)*vertexType.x + (toColor)*(1.0-vertexType.x);\n\tvColor.w = clamp(globalOpacityBase+globalOpacityScale*vColor.w,0.0,1.0);\n\tfloat updatedFromSize = 1.0*globalSizeScale*fromSize+globalSizeBase;\n\tfloat updatedToSize = 1.0*globalSizeScale*toSize+globalSizeBase;\n\tvEncodedIndex = encodedIndex;\n\t//vZComponent = viewVertex.z;\n\t\n\t// TODO Implement: correct version\n\t// float fromSizeEffect = scaleWithNodeSize*updatedFromSize+1.0-scaleWithNodeSize;\n\t// float toSizeEffect = scaleWithNodeSize*updatedToSize+1.0-scaleWithNodeSize;\n\tfloat fromSizeEffect = updatedFromSize;\n\tfloat toSizeEffect = updatedToSize;\n\n    // Compute the normalized direction of the edge from source to target\n    vec3 direction = normalize(toVertex - fromVertex);\n\n    // Offset source and target positions\n    vec3 offsetFromVertex = fromVertex + direction * updatedFromSize;\n    vec3 offsetToVertex = toVertex - direction * updatedToSize;\n\n    // Adjust the vertex center based on the updated source and target positions\n    vec3 vertexCenter = offsetFromVertex * vertexType.x + offsetToVertex * (1.0 - vertexType.x);\n\n\t// vec3 vertexCenter = fromVertex.xyz*vertexType.x + toVertex.xyz*(1.0-vertexType.x);\n    vec4 clipFrom = projectionMatrix * viewMatrix * vec4(fromVertex, 1.0);\n    vec4 clipTo = projectionMatrix * viewMatrix * vec4(toVertex, 1.0);\n    \n    vec3 clipDisplacement = (clipTo.xyz / clipTo.w - clipFrom.xyz / clipFrom.w);\n    vec3 perpendicularVector = normalize(vec3(-clipDisplacement.y, clipDisplacement.x, 0.0));\n    \n    float width = globalWidthBase + globalWidthScale * ((fromSizeEffect) * vertexType.x + (toSizeEffect) * (1.0 - vertexType.x));\n    \n    vec3 offset = width * (vertexType.y - 0.5) * 2.0 * 1.5 * perpendicularVector;\n    \n    vec4 viewVertex = viewMatrix * vec4(vertexCenter, 1.0);\n    vec4 offsetVertex = viewVertex + vec4(offset, 0.0);\n    \n    vec4 finalPos = projectionMatrix * offsetVertex;\n    gl_Position = finalPos;\n\t\n}\n`;\n\n\n\n\n\n//\n// EDGES VERTEX SHADER HYPERBOLIC\n//\n\nlet vertexHyperbolicShader = /*glsl*/`\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\n \nuniform float globalSizeScale;\nuniform float globalSizeBase;\nuniform float globalWidthScale;\nuniform float globalWidthBase;\n\nuniform float globalOpacityScale;\nuniform float globalOpacityBase;\n\nattribute vec3 fromVertex;\nattribute vec3 toVertex;\nattribute vec2 vertexType;\n// 0,1:  0.0, 1.0, // source, top\n// 0,0:  0.0, 0.0, // source, bottom\n// 1,1:  1.0, 1.0, // target, top\n// 1,0:  1.0, 0.0, // target, bottom\n\nattribute vec4 fromColor;\nattribute vec4 toColor;\nattribute float fromSize;\nattribute float toSize;\nattribute vec4 encodedIndex;\n\nvarying vec4 vColor;\nvarying vec3 vOffset;\nvarying vec4 vEncodedIndex;\n\n\nvec2 hyperbolicNormFactor(vec2 vertex, float scaling){\n\tvec2 pos = vertex.xy;\n\tfloat r = length(pos.xy);\n\t// //polar\n\tvec2 normFactor = (r+scaling)*vec2(1.0,1.0);\n\t// catersian\n\t// vec2 normFactor = sqrt(vertex.xy*vertex.xy+scaling*scaling);\n\treturn normFactor;\n}\n\n//varying float vZComponent;\n\nvoid main(void){\n\tvColor = (fromColor)*vertexType.x + (toColor)*(1.0-vertexType.x);\n\tvColor.w = clamp(globalOpacityBase+globalOpacityScale*vColor.w,0.0,1.0);\n\tfloat updatedFromSize = globalSizeScale*fromSize+globalSizeBase;\n\tfloat updatedToSize = globalSizeScale*toSize+globalSizeBase;\n\n\tfloat width = globalWidthBase+globalWidthScale*((updatedFromSize)*vertexType.x + (updatedToSize)*(1.0-vertexType.x));\n\tvEncodedIndex = encodedIndex;\n\t//vZComponent = viewVertex.z;\n\n\tfloat scaling = -viewMatrix[3][2];\n\t\n\tvec4 fromVertexView = viewMatrix * vec4(fromVertex.xyz,1.0);\n\tvec4 toVertexView = viewMatrix * vec4(toVertex.xyz,1.0);\n\n\tvec2 normFactorFrom = hyperbolicNormFactor(fromVertexView.xy, scaling);\n\tvec2 normFactorTo = hyperbolicNormFactor(toVertexView.xy, scaling);\n\t\n\tvec3 vertexCenter = fromVertexView.xyz*vertexType.x + toVertexView.xyz*(1.0-vertexType.x);\n\tvec3 destinationVertexCenter = fromVertexView.xyz*(1.0-vertexType.x) + toVertexView.xyz*vertexType.x;\n\n\tvec2 normFactorCenter = hyperbolicNormFactor(vertexCenter.xy, scaling);\n\tvec2 normFactorDestinationCenter = hyperbolicNormFactor(destinationVertexCenter.xy, scaling);\n\n\tfromVertexView.xy = fromVertexView.xy/normFactorFrom/vec2(projectionMatrix[0][0],projectionMatrix[1][1]);\n\ttoVertexView.xy = toVertexView.xy/normFactorTo/vec2(projectionMatrix[0][0],projectionMatrix[1][1]);\n\tvertexCenter.xy = vertexCenter.xy/normFactorCenter/vec2(projectionMatrix[0][0],projectionMatrix[1][1]);\n\tdestinationVertexCenter.xy = destinationVertexCenter.xy/normFactorDestinationCenter/vec2(projectionMatrix[0][0],projectionMatrix[1][1]);\n\n\tvec3 displacement = vec4((destinationVertexCenter-vertexCenter),0.0).xyz;\n\tvec3 perpendicularVector = normalize(vec3(-displacement.y, displacement.x, 0.0));\n\tvec3 offset = width*(vertexType.x-0.5)*(vertexType.y-0.5)*4.0*1.0*perpendicularVector/length(normFactorCenter)*scaling;\n\t\n\tvec4 viewVertex = vec4(vertexCenter.xyz,1.0)+vec4(offset,0.0);\n\tfloat displacementLength = length(displacement);\n\t// vOffset = vec3(vertexType.x,updatedToSize/displacementLength*1.0,updatedFromSize/displacementLength*1.0);\n\tvOffset = vec3(0.0,0.0,0.0);\n\tviewVertex.zw = vec2(0.0,1.0);\n\tvec4 temp_pos = projectionMatrix*viewVertex;\n\tgl_Position = temp_pos;\n}\n`;\n\n\n//\n// EDGES FRAGMENT SHADER\n//\n\nlet fragmentShader = /*glsl*/`\n#ifdef GL_ES\n\tprecision highp float;\n#endif\n//uniform vec2 nearFar;\nvarying vec4 vEncodedIndex;\nvarying vec4 vColor;\nvarying vec3 vOffset;\n//varying float vZComponent;\n//gl_DepthRange.near)/gl_DepthRange.diff\nvoid main(){\n\t//float w = (-vZComponent-nearFar[0])/(nearFar[1]-nearFar[0]);\n\t// if(vOffset.x<vOffset.y || vOffset.x>(1.0-vOffset.z)){\n\t// \tdiscard;\n\t// }\n\n\t// gl_FragColor = vec4(vOffset.x,vOffset.x,0,1.0);//vec4(vColor.xyz,globalOpacity*vColor.w);\n\tgl_FragColor = vColor;\n}\n`;\n\n\n\n//\n// EDGES PICKING FRAGMENT SHADER\n//\n\nlet pickingShader = /*glsl*/`\n#ifdef GL_ES\n\tprecision highp float;\n#endif\n//uniform vec2 nearFar;\nvarying vec4 vEncodedIndex;\nvarying vec4 vColor;\nvarying vec3 vOffset;\n//varying float vZComponent;\n//gl_DepthRange.near)/gl_DepthRange.diff\nvoid main(){\n\n\tif(vOffset.x<vOffset.y*1.1 || vOffset.x>(1.0-vOffset.z*1.1) || (vEncodedIndex.x+vEncodedIndex.y+vEncodedIndex.z+vEncodedIndex.w)<=0.0){\n\t\tdiscard;\n\t}\n\t//float w = (-vZComponent-nearFar[0])/(nearFar[1]-nearFar[0]);\n\tgl_FragColor = vEncodedIndex;\n\t\n}\n`;\n\n\n//\n// EDGES FAST VERTEX SHADER\n//\n\nlet fastVertexShader = /*glsl*/`\nuniform mat4 projectionViewMatrix;\nuniform float globalOpacityScale;\nuniform float globalOpacityBase;\n\nattribute vec3 vertex;\nattribute vec4 color;\n\n\nvarying vec4 vColor;\nvarying vec4 vEncodedIndex;\n\n//varying float vZComponent;\n\nvoid main(void){\n\tvColor = color;\n\tvColor.w = clamp(globalOpacityBase+globalOpacityScale*vColor.w,0.0,1.0);\n\t//vZComponent = viewVertex.z;\n\tgl_Position =   projectionViewMatrix * vec4(vertex,1.0);\n}\n`;\n\n\n//\n// EDGES FAST VERTEX SHADER HYPERBOLIC\n//\n\nlet fastVertexHyperbolicShader = /*glsl*/`\nuniform mat4 projectionViewMatrix;\nuniform float globalOpacityScale;\nuniform float globalOpacityBase;\n\nattribute vec3 vertex;\nattribute vec4 color;\n\n\nvarying vec4 vColor;\nvarying vec4 vEncodedIndex;\n\n//varying float vZComponent;\n\nvoid main(void){\n\tvColor = color;\n\tvColor.w = clamp(globalOpacityBase+globalOpacityScale*vColor.w,0.0,1.0);\n\t//vZComponent = viewVertex.z;\n\n\tvec4 temp_pos = projectionViewMatrix * vec4(vertex,1.0);\n\tvec4 eye_vec = vec4(0.0,0.0,1.0,0);\n\tfloat dist = length(eye_vec);\n\tvec4 lookat = eye_vec - temp_pos;\n\tvec4 dir = temp_pos - eye_vec;\n\tvec4 center = normalize(-eye_vec);\n\tvec4 proj = dot(temp_pos, normalize(-lookat)) * normalize(-lookat);\n\tvec4 c = temp_pos - proj;\n\tfloat magnitude = 1.0-acos(dot(normalize(-eye_vec), normalize(temp_pos)));\n\n\tc = length(c) * magnitude * normalize(c);\n\tvec4 dir2 = normalize(c-lookat);\n\ttemp_pos.xy = (dir2).xy;\n\ttemp_pos.z = 0.0;\n\ttemp_pos.w = 1.0;\n\tgl_Position = temp_pos;\n}\n`;\n\n//\n// EDGES FAST FRAGMENT SHADER\n//\n\nlet fastFragmentShader = /*glsl*/`\n#ifdef GL_ES\n\tprecision highp float;\n#endif\n//uniform vec2 nearFar;\nvarying vec4 vColor;\n//varying float vZComponent;\n//gl_DepthRange.near)/gl_DepthRange.diff\nvoid main(){\n\t//float w = (-vZComponent-nearFar[0])/(nearFar[1]-nearFar[0]);\n\tgl_FragColor = vColor;\n\t// gl_FragColor = vec4(vEncodedIndex.x/10,0,0,1.0);\n}\n\n`;\n\n\n\n\n\nexport {fragmentShader,vertexShader,\n\tpickingShader,fastFragmentShader,\n\tfastVertexShader,fastVertexHyperbolicShader,\n\tvertexHyperbolicShader};\n","\n\n//\n// NODES VERTEX SHADER\n//\n\nlet vertexShader = /*glsl*/`\n// uniform mat4 projectionMatrix;\n// uniform mat4 viewMatrix;\n// uniform mat3 normalMatrix;\n\n\n// attribute vec4 vertex;\n// attribute vec3 normal;\n// attribute vec3 position;\n// attribute vec3 color;\n// attribute float size;\n// attribute float Opacity;\n\n// varying vec3 vNormal;\n// varying vec3 vEye;\n\n// varying vec3 vColor;\n// varying float vSize;\n// varying float vOpacity;\n\n// void main(void){\n// \tvec4 viewVertex = viewMatrix * (vertex*vec4(vec3(size),1.0) + vec4(position,0.0));\n// \tvNormal = normalMatrix * normal;\n// \tvEye = -vec3(viewVertex);\n// \tvOpacity = Opacity;\n// \tvColor = color;\n// \tgl_Position =   projectionMatrix * viewVertex;\n// }\n\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\n\nuniform float globalOpacityScale;\nuniform float globalSizeScale;\nuniform float globalOutlineWidthScale;\n\nuniform float globalOpacityBase;\nuniform float globalSizeBase;\nuniform float globalOutlineWidthBase;\n\nattribute vec2 vertex;\n// attribute vec3 normal;\nattribute vec3 position;\nattribute vec4 color;\nattribute float size;\nattribute float outlineWidth;\nattribute vec4 outlineColor;\nattribute vec4 encodedIndex;\n\nvarying vec3 vNormal;\nvarying vec3 vEye;\nvarying vec4 vColor;\nvarying vec2 vOffset;\nvarying float vSize;\nvarying vec4 vEncodedIndex;\nvarying float vOutlineThreshold;\nvarying vec4 vOutlineColor;\nvarying vec4 vPosition;\n\nvoid main(void){\n\tfloat BoxCorrection = 1.5;\n\tvec2 offset = vertex;\n\tfloat updatedSize = globalSizeScale*size+globalSizeBase;\n\tfloat updatedOutlineWidth = globalOutlineWidthScale*outlineWidth+globalOutlineWidthBase;\n\tfloat fullSize = updatedSize + updatedOutlineWidth;\n\t// vec4 viewCenters = viewMatrix*vec4(position,1);\n\t// vec3 viewCenters = position;\n\t// fragCenter = viewCenters\n\t// float scalingFactor = 1.0 / abs(centers.x)*0.001;\n\t// offset*=scalingFactor;\n\tvec3 cameraRight = normalize(vec3(viewMatrix[0][0], viewMatrix[1][0], viewMatrix[2][0]));\n\tvec3 cameraUp = normalize(vec3(viewMatrix[0][1], viewMatrix[1][1], viewMatrix[2][1]));\n\n\t// viewCenters.xy += offset*updatedSize*CameraRight_worldspace;\n\t\n\tvec4 viewCenters = viewMatrix*vec4(position+BoxCorrection*fullSize*(cameraRight*offset.x + cameraUp*offset.y),1.0);\n\tvNormal = vec3(0.0,0.0,1.0); //normalMatrix * normal;\n\tvEye = -vec3(offset,0.0);\n\tvEncodedIndex = encodedIndex;\n\tvColor = color;\n\tvColor.w = clamp(globalOpacityBase+globalOpacityScale*vColor.w,0.0,1.0);\n\tvOutlineColor.w = clamp(globalOpacityBase+globalOpacityScale*vOutlineColor.w,0.0,1.0);\n\tvOffset = vertex;\n\tvSize = updatedSize;\n\tvOutlineThreshold = updatedOutlineWidth/fullSize;\n\n\tvOutlineColor = outlineColor;\n\tvPosition = projectionMatrix * viewCenters;\n\n\t// vec4 temp_pos = vPosition;\n\t// vec4 eye_vec = vec4(0.0,0.0,0.0,0);\n\t// float dist = length(eye_vec);\n\t// vec4 lookat = eye_vec - temp_pos;\n\t// vec4 dir = temp_pos - eye_vec;\n\t// vec4 center = normalize(-eye_vec);\n\t// vec4 proj = dot(temp_pos, normalize(-lookat)) * normalize(-lookat);\n\t// vec4 c = temp_pos - proj;\n\t// float magnitude = 1.0-acos(dot(normalize(-eye_vec), normalize(temp_pos)));\n\n\t// c = length(c) * magnitude * normalize(c);\n\t// vec4 dir2 = normalize(c-lookat);\n\t// vPosition.xy = (dir2).xy;\n\t// vPosition.z = 0.0;\n\t// vPosition.w = 1.0;\n\tgl_Position = vPosition;\n}\n`;\n\n\n//\n// NODES VERTEX SHADER HYPERBOLIC\n//\n\nlet vertexHyperbolicShader = /*glsl*/`\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\n\nuniform float globalOpacityScale;\nuniform float globalSizeScale;\nuniform float globalOutlineWidthScale;\n\nuniform float globalOpacityBase;\nuniform float globalSizeBase;\nuniform float globalOutlineWidthBase;\n\nattribute vec2 vertex;\n// attribute vec3 normal;\nattribute vec3 position;\nattribute vec4 color;\nattribute float size;\nattribute float outlineWidth;\nattribute vec4 outlineColor;\nattribute vec4 encodedIndex;\n\nvarying vec3 vNormal;\nvarying vec3 vEye;\nvarying vec4 vColor;\nvarying vec2 vOffset;\nvarying float vSize;\nvarying vec4 vEncodedIndex;\nvarying float vOutlineThreshold;\nvarying vec4 vOutlineColor;\nvarying vec4 vPosition;\n\nvec2 hyperbolicNormFactor(vec2 vertex, float scaling){\n\tvec2 pos = vertex.xy;\n\tfloat r = length(pos.xy);\n\t// //polar\n\tvec2 normFactor = (r+scaling)*vec2(1.0,1.0);\n\t// catersian\n\t// vec2 normFactor = sqrt(vertex.xy*vertex.xy+scaling*scaling);\n\treturn normFactor;\n}\n\nvoid main(void){\n\tfloat BoxCorrection = 1.5;\n\tvec2 offset = vertex;\n\tfloat updatedSize = globalSizeScale*size+globalSizeBase;\n\tfloat updatedOutlineWidth = globalOutlineWidthScale*outlineWidth+globalOutlineWidthBase;\n\tfloat fullSize = updatedSize + updatedOutlineWidth;\n\t// vec4 viewCenters = viewMatrix*vec4(position,1);\n\t// vec3 viewCenters = position;\n\t// fragCenter = viewCenters\n\t// float scalingFactor = 1.0 / abs(centers.x)*0.001;\n\t// offset*=scalingFactor;\n\tvec3 cameraRight = normalize(vec3(viewMatrix[0][0], viewMatrix[1][0], viewMatrix[2][0]));\n\tvec3 cameraUp = normalize(vec3(viewMatrix[0][1], viewMatrix[1][1], viewMatrix[2][1]));\n\n\t// viewCenters.xy += offset*updatedSize*CameraRight_worldspace;\n\t\n\n\n\t// temp_pos.z = 0.0;\n\t// temp_pos.w = 1.0;\n\n\n\n\tvec4 viewCenters = viewMatrix*vec4(position.xyz,1.0);\n\tfloat scaling = -viewMatrix[3][2];\n\tvec4 temp_pos = viewCenters;\n\t\n\tvec2 normFactor = hyperbolicNormFactor(viewCenters.xy, scaling);\n\t// catersian\n\t// vec2 normFactor = sqrt(temp_pos.xy*temp_pos.xy+scaling*scaling);\n\ttemp_pos.xy = temp_pos.xy/normFactor;\n\n\tviewCenters.xy = temp_pos.xy/vec2(projectionMatrix[0][0],projectionMatrix[1][1]);\n\tviewCenters.xy+=BoxCorrection*fullSize*offset.xy/length(normFactor)*scaling;\n\t\n\n\tvNormal = vec3(0.0,0.0,1.0); //normalMatrix * normal;\n\tvEye = -vec3(offset,0.0);\n\tvEncodedIndex = encodedIndex;\n\tvColor = color;\n\tvColor.w = clamp(globalOpacityBase+globalOpacityScale*vColor.w,0.0,1.0);\n\tvOutlineColor.w = clamp(globalOpacityBase+globalOpacityScale*vOutlineColor.w,0.0,1.0);\n\tvOffset = vertex;\n\tvSize = updatedSize;\n\tvOutlineThreshold = updatedOutlineWidth/fullSize;\n\n\tvOutlineColor = outlineColor;\n\tvPosition = projectionMatrix * viewCenters;\n\n\tgl_Position = vPosition;\n}\n`;\n\n\n\n\n//\n// NODES FRAGMENT SHADER (SHADED)\n//\n\nlet fragmentShader = /*glsl*/`// #ifdef GL_ES\n// \tprecision highp float;\n// #endif\n\nprecision mediump float;\nvarying vec4 vColor;\nvarying vec4 vEncodedIndex;\nvarying vec3 vNormal;\nvarying vec3 vEye;\nvarying float vSize;\nvarying vec2 vOffset;\nvarying float vOutlineThreshold;\nvarying vec4 vOutlineColor;\nvarying vec4 vPosition;\n\n\n\nvoid main(){\n\t// const vec3 lightDirection = vec3(0.577350269,0.577350269,0.577350269);\n\t// const float ambientFactor = 0.6;\n\t\n\t// vec3 normal = normalize(vNormal);\n\t// vec3 eye = normalize(vEye);\n\t\n\t// //Ambient+Diffuse\n\t// float cosTheta = max(dot(lightDirection,normal),0.0);\n\t// vec3 newColor = vColor*(ambientFactor+cosTheta);\n\t\n\t// //Specular\n\t// vec3 reflection = reflect(-lightDirection, normal);\n\t// float eyeDotReflection = max(dot(eye, reflection), 0.0);\n\t// newColor +=  vec3(0.5)* pow(eyeDotReflection, 60.0);\n\t\n\t// gl_FragColor = vec4(newColor,vOpacity);\n\t// gl_FragColor = vec4(eye,Opacity);\n\t//gl_FragData[0] = vec4(newColor,Opacity);\n\n// Renaming variables passed from the Vertex Shader\n\n\t// vec3 cameraPos;\n\t// vec3 cameraNormal;\n\n\t// float lensqr = dot(vOffset, vOffset);\n\n\t// if(lensqr > 1.0)\n\t// \t\tdiscard;\n\t\t\n\t// cameraNormal = vec3(vOffset, sqrt(1.0 - lensqr));\n\t// cameraPos = (cameraNormal * size) + cameraSpherePos;\n\n\t// float len = length(point);\n\t// // VTK Fake Spheres\n\t// float radius = 1.;\n\t// if(len > radius)\n\t// \t\tdiscard;\n\t// vec3 normalizedPoint = normalize(vec3(point.xy, sqrt(1. - len)));\n\t// vec3 direction = normalize(vec3(1., 1., 1.));\n\t// float df2 = max(0, dot(direction, normalizedPoint));\n\t// float sf2 = pow(df2, 90);\n\t// fragOutput0 = vec4(max((df2+0.3) * color, sf2 * vec3(1)), 1);\n\n\t// fragOutput1 = vec4(vertexVC.xyz, 1.0);\n\t// fragOutput2 = vec4(normalVCVSOutput, 1.0);\n\t\n\tfloat lensqr = dot(vOffset, vOffset);\n\n\tif(lensqr > 1.0)\n\t\tdiscard;\n\t\n\n\tvec3 normalizedPoint = normalize(vec3(vOffset.xy, sqrt(1. - lensqr)));\n\tconst vec3 lightDirection = vec3(0.577350269,0.577350269,0.577350269);\n\tconst float ambientFactor = 0.6;\n\t\n\tvec3 normal = normalizedPoint;\n\tvec3 eye = normalize(vEye);\n\t\n\t//Ambient+Diffuse\n\tfloat cosTheta = max(dot(lightDirection,normal),0.0);\n\tvec3 newColor = vColor.xyz*(ambientFactor+cosTheta);\n\t\n\t//Specular\n\tvec3 reflection = reflect(-lightDirection, normal);\n\tfloat eyeDotReflection = max(dot(eye, reflection), 0.0);\n\tnewColor +=  vec3(0.5)* pow(eyeDotReflection, 60.0);\n\t\n\t\n\t\n\tif(lensqr < 1.0-vOutlineThreshold){\n\t\t// gl_FragColor = vec4(vColor,vOpacity)\n\t\tgl_FragColor = vec4(newColor,vColor.w);;\n\t}else{\n\t\tgl_FragColor = vec4(vOutlineColor.xyz,vOutlineColor.w);\n\t}\n\t// gl_FragDepthEXT = 0.5; \n}\n`;\n\n\n//\n// NODES PICKING SHADER\n//\n\nlet pickingShader = /*glsl*/`\n// #ifdef GL_ES\n// \tprecision highp float;\n// #endif\n\nprecision mediump float;\nvarying vec4 vColor;\nvarying vec4 vEncodedIndex;\nvarying vec3 vNormal;\nvarying vec3 vEye;\nvarying float vSize;\nvarying vec2 vOffset;\nvarying float vOutlineThreshold;\nvarying vec4 vOutlineColor;\n\nvoid main(){\n\tfloat lensqr = dot(vOffset, vOffset);\n\n\tif(lensqr > 1.0)\n\t\t\tdiscard;\n\t\n\tgl_FragColor = vEncodedIndex;\n}\n`;\n\n\n//\n// NODES FAST FRAGMENT SHADER\n//\n\n\nlet fastFragmentShader = /*glsl*/`\n// #ifdef GL_ES\n// \tprecision highp float;\n// #endif\n\nprecision mediump float;\nvarying vec4 vColor;\nvarying vec4 vEncodedIndex;\nvarying vec3 vNormal;\nvarying vec3 vEye;\nvarying float vSize;\nvarying vec2 vOffset;\nvarying float vOutlineThreshold;\nvarying vec4 vOutlineColor;\nvarying vec4 vPosition;\n\n\n\nvoid main(){\n\t\n\tfloat lensqr = dot(vOffset, vOffset);\n\n\tif(lensqr > 1.0)\n\t\t\tdiscard;\n\t\n\tif(lensqr < 1.0-vOutlineThreshold){\n\t\t// gl_FragColor = vec4(vColor,vOpacity)\n\t\tgl_FragColor = vColor;\n\t}else{\n\t\tgl_FragColor = vOutlineColor;\n\t}\n\t// gl_FragDepthEXT = 0.5; \n}\n`;\n\nlet fastVertexShader = vertexShader;\n\nexport {fragmentShader, vertexShader,\n\t\tpickingShader,fastFragmentShader,\n\t\tfastVertexShader, vertexHyperbolicShader};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar LinkedList = exports.LinkedList = function () {\n    function LinkedList() {\n        _classCallCheck(this, LinkedList);\n\n        this.length = 0;\n        this.first = null;\n        this.last = null;\n    }\n\n    _createClass(LinkedList, [{\n        key: \"forEach\",\n        value: function forEach(fn, context) {\n            var node = this.first,\n                n = this.length;\n            for (var i = 0; i < n; i++) {\n                fn.call(context, node, i);\n                node = node.next;\n            }\n        }\n    }, {\n        key: \"at\",\n        value: function at(i) {\n            if (!(i >= 0 && i < this.length)) {\n                return null;\n            }\n            var node = this.first;\n            while (i--) {\n                node = node.next;\n            }\n            return node;\n        }\n    }, {\n        key: \"randomNode\",\n        value: function randomNode() {\n            var n = Math.floor(Math.random() * this.length);\n            return this.at(n);\n        }\n    }, {\n        key: \"toArray\",\n        value: function toArray() {\n            var arr = [],\n                node = this.first,\n                n = this.length;\n            while (n--) {\n                arr.push(node.data || node);\n                node = node.next;\n            }\n            return arr;\n        }\n    }]);\n\n    return LinkedList;\n}();\n\nLinkedList.prototype.each = LinkedList.prototype.forEach;\n//# sourceMappingURL=LinkedList.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.CircularLinkedList = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _LinkedList2 = require(\"./LinkedList\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CircularLinkedList = exports.CircularLinkedList = function (_LinkedList) {\n    _inherits(CircularLinkedList, _LinkedList);\n\n    function CircularLinkedList() {\n        _classCallCheck(this, CircularLinkedList);\n\n        return _possibleConstructorReturn(this, Object.getPrototypeOf(CircularLinkedList).apply(this, arguments));\n    }\n\n    _createClass(CircularLinkedList, [{\n        key: \"append\",\n        value: function append(node) {\n            if (this.first === null) {\n                node.prev = node;\n                node.next = node;\n                this.first = node;\n                this.last = node;\n            } else {\n                node.prev = this.last;\n                node.next = this.first;\n                this.first.prev = node;\n                this.last.next = node;\n                this.last = node;\n            }\n            this.length++;\n        }\n    }, {\n        key: \"prepend\",\n        value: function prepend(node) {\n            if (this.first === null) {\n                this.append(node);\n                return;\n            } else {\n                node.prev = this.last;\n                node.next = this.first;\n                this.first.prev = node;\n                this.last.next = node;\n                this.first = node;\n            }\n            this.length++;\n        }\n    }, {\n        key: \"insertAfter\",\n        value: function insertAfter(node, newNode) {\n            newNode.prev = node;\n            newNode.next = node.next;\n            node.next.prev = newNode;\n            node.next = newNode;\n            if (newNode.prev === this.last) {\n                this.last = newNode;\n            }\n            this.length++;\n        }\n    }, {\n        key: \"insertBefore\",\n        value: function insertBefore(node, newNode) {\n            newNode.prev = node.prev;\n            newNode.next = node;\n            node.prev.next = newNode;\n            node.prev = newNode;\n            if (newNode.next === this.first) {\n                this.first = newNode;\n            }\n            this.length++;\n        }\n    }, {\n        key: \"remove\",\n        value: function remove(node) {\n            if (this.length > 1) {\n                node.prev.next = node.next;\n                node.next.prev = node.prev;\n                if (node === this.first) {\n                    this.first = node.next;\n                }\n                if (node === this.last) {\n                    this.last = node.prev;\n                }\n            } else {\n                this.first = null;\n                this.last = null;\n            }\n            node.prev = null;\n            node.next = null;\n            this.length--;\n        }\n    }, {\n        key: \"withData\",\n        value: function withData(data) {\n            var nodeFromStart = this.first,\n                nodeFromEnd = this.last,\n                n = Math.ceil(this.length / 2);\n            while (n--) {\n                if (nodeFromStart.data === data) {\n                    return nodeFromStart;\n                }\n                if (nodeFromEnd.data === data) {\n                    return nodeFromEnd;\n                }\n                nodeFromStart = nodeFromStart.next;\n                nodeFromEnd = nodeFromEnd.prev;\n            }\n            return null;\n        }\n    }]);\n\n    return CircularLinkedList;\n}(_LinkedList2.LinkedList);\n\n;\n\nCircularLinkedList.fromArray = function (list, useNodes) {\n    var linked = new CircularLinkedList();\n    var n = list.length;\n    while (n--) {\n        linked.prepend(useNodes ? new _LinkedList2.LinkedList.Node(list[n]) : list[n]);\n    }\n    return linked;\n};\n//# sourceMappingURL=CircularLinkedList.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar PRECISION = exports.PRECISION = 1e-6;\n//# sourceMappingURL=PRECISION.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Matrix = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _PRECISION = require(\"./PRECISION\");\n\nvar _Vector = require(\"./Vector\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Matrix = exports.Matrix = function () {\n    function Matrix(elements) {\n        _classCallCheck(this, Matrix);\n\n        this.setElements(elements);\n    }\n\n    _createClass(Matrix, [{\n        key: \"e\",\n        value: function e(i, j) {\n            if (i < 1 || i > this.elements.length || j < 1 || j > this.elements[0].length) {\n                return null;\n            }\n            return this.elements[i - 1][j - 1];\n        }\n    }, {\n        key: \"row\",\n        value: function row(i) {\n            if (i > this.elements.length) {\n                return null;\n            }\n            return new _Vector.Vector(this.elements[i - 1]);\n        }\n    }, {\n        key: \"col\",\n        value: function col(j) {\n            if (this.elements.length === 0) {\n                return null;\n            }\n            if (j > this.elements[0].length) {\n                return null;\n            }\n            var col = [],\n                n = this.elements.length;\n            for (var i = 0; i < n; i++) {\n                col.push(this.elements[i][j - 1]);\n            }\n            return new _Vector.Vector(col);\n        }\n    }, {\n        key: \"dimensions\",\n        value: function dimensions() {\n            var cols = this.elements.length === 0 ? 0 : this.elements[0].length;\n            return { rows: this.elements.length, cols: cols };\n        }\n    }, {\n        key: \"rows\",\n        value: function rows() {\n            return this.elements.length;\n        }\n    }, {\n        key: \"cols\",\n        value: function cols() {\n            if (this.elements.length === 0) {\n                return 0;\n            }\n            return this.elements[0].length;\n        }\n    }, {\n        key: \"eql\",\n        value: function eql(matrix) {\n            var M = matrix.elements || matrix;\n            if (!M[0] || typeof M[0][0] === 'undefined') {\n                M = new Matrix(M).elements;\n            }\n            if (this.elements.length === 0 || M.length === 0) {\n                return this.elements.length === M.length;\n            }\n            if (this.elements.length !== M.length) {\n                return false;\n            }\n            if (this.elements[0].length !== M[0].length) {\n                return false;\n            }\n            var i = this.elements.length,\n                nj = this.elements[0].length,\n                j;\n            while (i--) {\n                j = nj;\n                while (j--) {\n                    if (Math.abs(this.elements[i][j] - M[i][j]) > _PRECISION.PRECISION) {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        }\n    }, {\n        key: \"dup\",\n        value: function dup() {\n            return new Matrix(this.elements);\n        }\n    }, {\n        key: \"map\",\n        value: function map(fn, context) {\n            if (this.elements.length === 0) {\n                return new Matrix([]);\n            }\n            var els = [],\n                i = this.elements.length,\n                nj = this.elements[0].length,\n                j;\n            while (i--) {\n                j = nj;\n                els[i] = [];\n                while (j--) {\n                    els[i][j] = fn.call(context, this.elements[i][j], i + 1, j + 1);\n                }\n            }\n            return new Matrix(els);\n        }\n    }, {\n        key: \"isSameSizeAs\",\n        value: function isSameSizeAs(matrix) {\n            var M = matrix.elements || matrix;\n            if (typeof M[0][0] === 'undefined') {\n                M = new Matrix(M).elements;\n            }\n            if (this.elements.length === 0) {\n                return M.length === 0;\n            }\n            return this.elements.length === M.length && this.elements[0].length === M[0].length;\n        }\n    }, {\n        key: \"add\",\n        value: function add(matrix) {\n            if (this.elements.length === 0) {\n                return this.map(function (x) {\n                    return x;\n                });\n            }\n            var M = matrix.elements || matrix;\n            if (typeof M[0][0] === 'undefined') {\n                M = new Matrix(M).elements;\n            }\n            if (!this.isSameSizeAs(M)) {\n                return null;\n            }\n            return this.map(function (x, i, j) {\n                return x + M[i - 1][j - 1];\n            });\n        }\n    }, {\n        key: \"subtract\",\n        value: function subtract(matrix) {\n            if (this.elements.length === 0) {\n                return this.map(function (x) {\n                    return x;\n                });\n            }\n            var M = matrix.elements || matrix;\n            if (typeof M[0][0] === 'undefined') {\n                M = new Matrix(M).elements;\n            }\n            if (!this.isSameSizeAs(M)) {\n                return null;\n            }\n            return this.map(function (x, i, j) {\n                return x - M[i - 1][j - 1];\n            });\n        }\n    }, {\n        key: \"canMultiplyFromLeft\",\n        value: function canMultiplyFromLeft(matrix) {\n            if (this.elements.length === 0) {\n                return false;\n            }\n            var M = matrix.elements || matrix;\n            if (typeof M[0][0] === 'undefined') {\n                M = new Matrix(M).elements;\n            }\n            // this.columns should equal matrix.rows\n            return this.elements[0].length === M.length;\n        }\n    }, {\n        key: \"multiply\",\n        value: function multiply(matrix) {\n            if (this.elements.length === 0) {\n                return null;\n            }\n            if (!matrix.elements) {\n                return this.map(function (x) {\n                    return x * matrix;\n                });\n            }\n            var returnVector = matrix.modulus ? true : false;\n            var M = matrix.elements || matrix;\n            if (typeof M[0][0] === 'undefined') {\n                M = new Matrix(M).elements;\n            }\n            if (!this.canMultiplyFromLeft(M)) {\n                return null;\n            }\n            var i = this.elements.length,\n                nj = M[0].length,\n                j;\n            var cols = this.elements[0].length,\n                c,\n                elements = [],\n                sum;\n            while (i--) {\n                j = nj;\n                elements[i] = [];\n                while (j--) {\n                    c = cols;\n                    sum = 0;\n                    while (c--) {\n                        sum += this.elements[i][c] * M[c][j];\n                    }\n                    elements[i][j] = sum;\n                }\n            }\n            var M = new Matrix(elements);\n            return returnVector ? M.col(1) : M;\n        }\n    }, {\n        key: \"minor\",\n        value: function minor(a, b, c, d) {\n            if (this.elements.length === 0) {\n                return null;\n            }\n            var elements = [],\n                ni = c,\n                i,\n                nj,\n                j;\n            var rows = this.elements.length,\n                cols = this.elements[0].length;\n            while (ni--) {\n                i = c - ni - 1;\n                elements[i] = [];\n                nj = d;\n                while (nj--) {\n                    j = d - nj - 1;\n                    elements[i][j] = this.elements[(a + i - 1) % rows][(b + j - 1) % cols];\n                }\n            }\n            return new Matrix(elements);\n        }\n    }, {\n        key: \"transpose\",\n        value: function transpose() {\n            if (this.elements.length === 0) {\n                return new Matrix([]);\n            }\n            var rows = this.elements.length,\n                i,\n                cols = this.elements[0].length,\n                j;\n            var elements = [],\n                i = cols;\n            while (i--) {\n                j = rows;\n                elements[i] = [];\n                while (j--) {\n                    elements[i][j] = this.elements[j][i];\n                }\n            }\n            return new Matrix(elements);\n        }\n    }, {\n        key: \"isSquare\",\n        value: function isSquare() {\n            var cols = this.elements.length === 0 ? 0 : this.elements[0].length;\n            return this.elements.length === cols;\n        }\n    }, {\n        key: \"max\",\n        value: function max() {\n            if (this.elements.length === 0) {\n                return null;\n            }\n            var m = 0,\n                i = this.elements.length,\n                nj = this.elements[0].length,\n                j;\n            while (i--) {\n                j = nj;\n                while (j--) {\n                    if (Math.abs(this.elements[i][j]) > Math.abs(m)) {\n                        m = this.elements[i][j];\n                    }\n                }\n            }\n            return m;\n        }\n    }, {\n        key: \"indexOf\",\n        value: function indexOf(x) {\n            if (this.elements.length === 0) {\n                return null;\n            }\n            var index = null,\n                ni = this.elements.length,\n                i,\n                nj = this.elements[0].length,\n                j;\n            for (i = 0; i < ni; i++) {\n                for (j = 0; j < nj; j++) {\n                    if (this.elements[i][j] === x) {\n                        return {\n                            i: i + 1,\n                            j: j + 1\n                        };\n                    }\n                }\n            }\n            return null;\n        }\n    }, {\n        key: \"diagonal\",\n        value: function diagonal() {\n            if (!this.isSquare) {\n                return null;\n            }\n            var els = [],\n                n = this.elements.length;\n            for (var i = 0; i < n; i++) {\n                els.push(this.elements[i][i]);\n            }\n            return new _Vector.Vector(els);\n        }\n    }, {\n        key: \"toRightTriangular\",\n        value: function toRightTriangular() {\n            if (this.elements.length === 0) {\n                return new Matrix([]);\n            }\n            var M = this.dup(),\n                els;\n            var n = this.elements.length,\n                i,\n                j,\n                np = this.elements[0].length,\n                p;\n            for (i = 0; i < n; i++) {\n                if (M.elements[i][i] === 0) {\n                    for (j = i + 1; j < n; j++) {\n                        if (M.elements[j][i] !== 0) {\n                            els = [];\n                            for (p = 0; p < np; p++) {\n                                els.push(M.elements[i][p] + M.elements[j][p]);\n                            }\n                            M.elements[i] = els;\n                            break;\n                        }\n                    }\n                }\n                if (M.elements[i][i] !== 0) {\n                    for (j = i + 1; j < n; j++) {\n                        var multiplier = M.elements[j][i] / M.elements[i][i];\n                        els = [];\n                        for (p = 0; p < np; p++) {\n                            // Elements with column numbers up to an including the number of the\n                            // row that we're subtracting can safely be set straight to zero,\n                            // since that's the point of this routine and it avoids having to\n                            // loop over and correct rounding errors later\n                            els.push(p <= i ? 0 : M.elements[j][p] - M.elements[i][p] * multiplier);\n                        }\n                        M.elements[j] = els;\n                    }\n                }\n            }\n            return M;\n        }\n    }, {\n        key: \"determinant\",\n        value: function determinant() {\n            if (this.elements.length === 0) {\n                return 1;\n            }\n            if (!this.isSquare()) {\n                return null;\n            }\n            var M = this.toRightTriangular();\n            var det = M.elements[0][0],\n                n = M.elements.length;\n            for (var i = 1; i < n; i++) {\n                det = det * M.elements[i][i];\n            }\n            return det;\n        }\n    }, {\n        key: \"isSingular\",\n        value: function isSingular() {\n            return this.isSquare() && this.determinant() === 0;\n        }\n    }, {\n        key: \"trace\",\n        value: function trace() {\n            if (this.elements.length === 0) {\n                return 0;\n            }\n            if (!this.isSquare()) {\n                return null;\n            }\n            var tr = this.elements[0][0],\n                n = this.elements.length;\n            for (var i = 1; i < n; i++) {\n                tr += this.elements[i][i];\n            }\n            return tr;\n        }\n    }, {\n        key: \"rank\",\n        value: function rank() {\n            if (this.elements.length === 0) {\n                return 0;\n            }\n            var M = this.toRightTriangular(),\n                rank = 0;\n            var i = this.elements.length,\n                nj = this.elements[0].length,\n                j;\n            while (i--) {\n                j = nj;\n                while (j--) {\n                    if (Math.abs(M.elements[i][j]) > _PRECISION.PRECISION) {\n                        rank++;\n                        break;\n                    }\n                }\n            }\n            return rank;\n        }\n    }, {\n        key: \"augment\",\n        value: function augment(matrix) {\n            if (this.elements.length === 0) {\n                return this.dup();\n            }\n            var M = matrix.elements || matrix;\n            if (typeof M[0][0] === 'undefined') {\n                M = new Matrix(M).elements;\n            }\n            var T = this.dup(),\n                cols = T.elements[0].length;\n            var i = T.elements.length,\n                nj = M[0].length,\n                j;\n            if (i !== M.length) {\n                return null;\n            }\n            while (i--) {\n                j = nj;\n                while (j--) {\n                    T.elements[i][cols + j] = M[i][j];\n                }\n            }\n            return T;\n        }\n    }, {\n        key: \"inverse\",\n        value: function inverse() {\n            if (this.elements.length === 0) {\n                return null;\n            }\n            if (!this.isSquare() || this.isSingular()) {\n                return null;\n            }\n            var n = this.elements.length,\n                i = n,\n                j;\n            var M = this.augment(Matrix.I(n)).toRightTriangular();\n            var np = M.elements[0].length,\n                p,\n                els,\n                divisor;\n            var inverse_elements = [],\n                new_element;\n            // Matrix is non-singular so there will be no zeros on the\n            // diagonal. Cycle through rows from last to first.\n            while (i--) {\n                // First, normalise diagonal elements to 1\n                els = [];\n                inverse_elements[i] = [];\n                divisor = M.elements[i][i];\n                for (p = 0; p < np; p++) {\n                    new_element = M.elements[i][p] / divisor;\n                    els.push(new_element);\n                    // Shuffle off the current row of the right hand side into the results\n                    // array as it will not be modified by later runs through this loop\n                    if (p >= n) {\n                        inverse_elements[i].push(new_element);\n                    }\n                }\n                M.elements[i] = els;\n                // Then, subtract this row from those above it to give the identity matrix\n                // on the left hand side\n                j = i;\n                while (j--) {\n                    els = [];\n                    for (p = 0; p < np; p++) {\n                        els.push(M.elements[j][p] - M.elements[i][p] * M.elements[j][i]);\n                    }\n                    M.elements[j] = els;\n                }\n            }\n            return new Matrix(inverse_elements);\n        }\n    }, {\n        key: \"round\",\n        value: function round() {\n            return this.map(function (x) {\n                return Math.round(x);\n            });\n        }\n    }, {\n        key: \"snapTo\",\n        value: function snapTo(x) {\n            return this.map(function (p) {\n                return Math.abs(p - x) <= _PRECISION.PRECISION ? x : p;\n            });\n        }\n    }, {\n        key: \"inspect\",\n        value: function inspect() {\n            var matrix_rows = [];\n            var n = this.elements.length;\n            if (n === 0) return '[]';\n            for (var i = 0; i < n; i++) {\n                matrix_rows.push(new _Vector.Vector(this.elements[i]).inspect());\n            }\n            return matrix_rows.join('\\n');\n        }\n    }, {\n        key: \"setElements\",\n        value: function setElements(els) {\n            var i,\n                j,\n                elements = els.elements || els;\n            if (elements[0] && typeof elements[0][0] !== 'undefined') {\n                i = elements.length;\n                this.elements = [];\n                while (i--) {\n                    j = elements[i].length;\n                    this.elements[i] = [];\n                    while (j--) {\n                        this.elements[i][j] = elements[i][j];\n                    }\n                }\n                return this;\n            }\n            var n = elements.length;\n            this.elements = [];\n            for (i = 0; i < n; i++) {\n                this.elements.push([elements[i]]);\n            }\n            return this;\n        }\n\n        //From glUtils.js\n\n    }, {\n        key: \"flatten\",\n        value: function flatten() {\n            var result = [];\n            if (this.elements.length == 0) {\n                return [];\n            }\n\n            for (var j = 0; j < this.elements[0].length; j++) {\n                for (var i = 0; i < this.elements.length; i++) {\n                    result.push(this.elements[i][j]);\n                }\n            }\n            return result;\n        }\n\n        //From glUtils.js\n\n    }, {\n        key: \"ensure4x4\",\n        value: function ensure4x4() {\n            if (this.elements.length == 4 && this.elements[0].length == 4) {\n                return this;\n            }\n\n            if (this.elements.length > 4 || this.elements[0].length > 4) {\n                return null;\n            }\n\n            for (var i = 0; i < this.elements.length; i++) {\n                for (var j = this.elements[i].length; j < 4; j++) {\n                    if (i == j) {\n                        this.elements[i].push(1);\n                    } else {\n                        this.elements[i].push(0);\n                    }\n                }\n            }\n\n            for (var i = this.elements.length; i < 4; i++) {\n                if (i == 0) {\n                    this.elements.push([1, 0, 0, 0]);\n                } else if (i == 1) {\n                    this.elements.push([0, 1, 0, 0]);\n                } else if (i == 2) {\n                    this.elements.push([0, 0, 1, 0]);\n                } else if (i == 3) {\n                    this.elements.push([0, 0, 0, 1]);\n                }\n            }\n\n            return this;\n        }\n\n        //From glUtils.js\n\n    }, {\n        key: \"make3x3\",\n        value: function make3x3() {\n            if (this.elements.length != 4 || this.elements[0].length != 4) {\n                return null;\n            }\n\n            return new Matrix([[this.elements[0][0], this.elements[0][1], this.elements[0][2]], [this.elements[1][0], this.elements[1][1], this.elements[1][2]], [this.elements[2][0], this.elements[2][1], this.elements[2][2]]]);\n        }\n    }]);\n\n    return Matrix;\n}();\n\nMatrix.I = function (n) {\n    var els = [],\n        i = n,\n        j;\n    while (i--) {\n        j = n;\n        els[i] = [];\n        while (j--) {\n            els[i][j] = i === j ? 1 : 0;\n        }\n    }\n    return new Matrix(els);\n};\n\nMatrix.Diagonal = function (elements) {\n    var i = elements.length;\n    var M = Matrix.I(i);\n    while (i--) {\n        M.elements[i][i] = elements[i];\n    }\n    return M;\n};\n\nMatrix.Rotation = function (theta, a) {\n    if (!a) {\n        return new Matrix([[Math.cos(theta), -Math.sin(theta)], [Math.sin(theta), Math.cos(theta)]]);\n    }\n    var axis = a.dup();\n    if (axis.elements.length !== 3) {\n        return null;\n    }\n    var mod = axis.modulus();\n    var x = axis.elements[0] / mod,\n        y = axis.elements[1] / mod,\n        z = axis.elements[2] / mod;\n    var s = Math.sin(theta),\n        c = Math.cos(theta),\n        t = 1 - c;\n    // Formula derived here: http://www.gamedev.net/reference/articles/article1199.asp\n    // That proof rotates the co-ordinate system so theta becomes -theta and sin\n    // becomes -sin here.\n    return new Matrix([[t * x * x + c, t * x * y - s * z, t * x * z + s * y], [t * x * y + s * z, t * y * y + c, t * y * z - s * x], [t * x * z - s * y, t * y * z + s * x, t * z * z + c]]);\n};\n\nMatrix.RotationX = function (t) {\n    var c = Math.cos(t),\n        s = Math.sin(t);\n    return new Matrix([[1, 0, 0], [0, c, -s], [0, s, c]]);\n};\nMatrix.RotationY = function (t) {\n    var c = Math.cos(t),\n        s = Math.sin(t);\n    return new Matrix([[c, 0, s], [0, 1, 0], [-s, 0, c]]);\n};\nMatrix.RotationZ = function (t) {\n    var c = Math.cos(t),\n        s = Math.sin(t);\n    return new Matrix([[c, -s, 0], [s, c, 0], [0, 0, 1]]);\n};\n\nMatrix.Random = function (n, m) {\n    return Matrix.Zero(n, m).map(function () {\n        return Math.random();\n    });\n};\n\n//From glUtils.js\nMatrix.Translation = function (v) {\n    if (v.elements.length == 2) {\n        var r = Matrix.I(3);\n        r.elements[2][0] = v.elements[0];\n        r.elements[2][1] = v.elements[1];\n        return r;\n    }\n\n    if (v.elements.length == 3) {\n        var r = Matrix.I(4);\n        r.elements[0][3] = v.elements[0];\n        r.elements[1][3] = v.elements[1];\n        r.elements[2][3] = v.elements[2];\n        return r;\n    }\n\n    throw \"Invalid length for Translation\";\n};\n\nMatrix.Zero = function (n, m) {\n    var els = [],\n        i = n,\n        j;\n    while (i--) {\n        j = m;\n        els[i] = [];\n        while (j--) {\n            els[i][j] = 0;\n        }\n    }\n    return new Matrix(els);\n};\n\nMatrix.prototype.toUpperTriangular = Matrix.prototype.toRightTriangular;\nMatrix.prototype.det = Matrix.prototype.determinant;\nMatrix.prototype.tr = Matrix.prototype.trace;\nMatrix.prototype.rk = Matrix.prototype.rank;\nMatrix.prototype.inv = Matrix.prototype.inverse;\nMatrix.prototype.x = Matrix.prototype.multiply;\n//# sourceMappingURL=Matrix.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Vector = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Matrix = require(\"./Matrix\");\n\nvar _PRECISION = require(\"./PRECISION\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Vector = exports.Vector = function () {\n    function Vector(elements) {\n        _classCallCheck(this, Vector);\n\n        this.setElements(elements);\n    }\n\n    _createClass(Vector, [{\n        key: \"e\",\n        value: function e(i) {\n            return i < 1 || i > this.elements.length ? null : this.elements[i - 1];\n        }\n    }, {\n        key: \"dimensions\",\n        value: function dimensions() {\n            return this.elements.length;\n        }\n    }, {\n        key: \"modulus\",\n        value: function modulus() {\n            return Math.sqrt(this.dot(this));\n        }\n    }, {\n        key: \"eql\",\n        value: function eql(vector) {\n            var n = this.elements.length;\n            var V = vector.elements || vector;\n            if (n !== V.length) {\n                return false;\n            }\n            while (n--) {\n                if (Math.abs(this.elements[n] - V[n]) > _PRECISION.PRECISION) {\n                    return false;\n                }\n            }\n            return true;\n        }\n    }, {\n        key: \"dup\",\n        value: function dup() {\n            return new Vector(this.elements);\n        }\n    }, {\n        key: \"map\",\n        value: function map(fn, context) {\n            var elements = [];\n            this.each(function (x, i) {\n                elements.push(fn.call(context, x, i));\n            });\n            return new Vector(elements);\n        }\n    }, {\n        key: \"forEach\",\n        value: function forEach(fn, context) {\n            var n = this.elements.length;\n            for (var i = 0; i < n; i++) {\n                fn.call(context, this.elements[i], i + 1);\n            }\n        }\n    }, {\n        key: \"toUnitVector\",\n        value: function toUnitVector() {\n            var r = this.modulus();\n            if (r === 0) {\n                return this.dup();\n            }\n            return this.map(function (x) {\n                return x / r;\n            });\n        }\n    }, {\n        key: \"angleFrom\",\n        value: function angleFrom(vector) {\n            var V = vector.elements || vector;\n            var n = this.elements.length,\n                k = n,\n                i;\n            if (n !== V.length) {\n                return null;\n            }\n            var dot = 0,\n                mod1 = 0,\n                mod2 = 0;\n            // Work things out in parallel to save time\n            this.each(function (x, i) {\n                dot += x * V[i - 1];\n                mod1 += x * x;\n                mod2 += V[i - 1] * V[i - 1];\n            });\n            mod1 = Math.sqrt(mod1);mod2 = Math.sqrt(mod2);\n            if (mod1 * mod2 === 0) {\n                return null;\n            }\n            var theta = dot / (mod1 * mod2);\n            if (theta < -1) {\n                theta = -1;\n            }\n            if (theta > 1) {\n                theta = 1;\n            }\n            return Math.acos(theta);\n        }\n    }, {\n        key: \"isParallelTo\",\n        value: function isParallelTo(vector) {\n            var angle = this.angleFrom(vector);\n            return angle === null ? null : angle <= _PRECISION.PRECISION;\n        }\n    }, {\n        key: \"isAntiparallelTo\",\n        value: function isAntiparallelTo(vector) {\n            var angle = this.angleFrom(vector);\n            return angle === null ? null : Math.abs(angle - Math.PI) <= _PRECISION.PRECISION;\n        }\n    }, {\n        key: \"isPerpendicularTo\",\n        value: function isPerpendicularTo(vector) {\n            var dot = this.dot(vector);\n            return dot === null ? null : Math.abs(dot) <= _PRECISION.PRECISION;\n        }\n    }, {\n        key: \"add\",\n        value: function add(vector) {\n            var V = vector.elements || vector;\n            if (this.elements.length !== V.length) {\n                return null;\n            }\n            return this.map(function (x, i) {\n                return x + V[i - 1];\n            });\n        }\n    }, {\n        key: \"subtract\",\n        value: function subtract(vector) {\n            var V = vector.elements || vector;\n            if (this.elements.length !== V.length) {\n                return null;\n            }\n            return this.map(function (x, i) {\n                return x - V[i - 1];\n            });\n        }\n    }, {\n        key: \"multiply\",\n        value: function multiply(k) {\n            return this.map(function (x) {\n                return x * k;\n            });\n        }\n    }, {\n        key: \"dot\",\n        value: function dot(vector) {\n            var V = vector.elements || vector;\n            var i,\n                product = 0,\n                n = this.elements.length;\n            if (n !== V.length) {\n                return null;\n            }\n            while (n--) {\n                product += this.elements[n] * V[n];\n            }\n            return product;\n        }\n    }, {\n        key: \"cross\",\n        value: function cross(vector) {\n            var B = vector.elements || vector;\n            if (this.elements.length !== 3 || B.length !== 3) {\n                return null;\n            }\n            var A = this.elements;\n            return new Vector([A[1] * B[2] - A[2] * B[1], A[2] * B[0] - A[0] * B[2], A[0] * B[1] - A[1] * B[0]]);\n        }\n    }, {\n        key: \"max\",\n        value: function max() {\n            var m = 0,\n                i = this.elements.length;\n            while (i--) {\n                if (Math.abs(this.elements[i]) > Math.abs(m)) {\n                    m = this.elements[i];\n                }\n            }\n            return m;\n        }\n    }, {\n        key: \"indexOf\",\n        value: function indexOf(x) {\n            var index = null,\n                n = this.elements.length;\n            for (var i = 0; i < n; i++) {\n                if (index === null && this.elements[i] === x) {\n                    index = i + 1;\n                }\n            }\n            return index;\n        }\n    }, {\n        key: \"toDiagonalMatrix\",\n        value: function toDiagonalMatrix() {\n            return _Matrix.Matrix.Diagonal(this.elements);\n        }\n    }, {\n        key: \"round\",\n        value: function round() {\n            return this.map(function (x) {\n                return Math.round(x);\n            });\n        }\n    }, {\n        key: \"snapTo\",\n        value: function snapTo(x) {\n            return this.map(function (y) {\n                return Math.abs(y - x) <= _PRECISION.PRECISION ? x : y;\n            });\n        }\n    }, {\n        key: \"distanceFrom\",\n        value: function distanceFrom(obj) {\n            if (obj.anchor || obj.start && obj.end) {\n                return obj.distanceFrom(this);\n            }\n            var V = obj.elements || obj;\n            if (V.length !== this.elements.length) {\n                return null;\n            }\n            var sum = 0,\n                part;\n            this.each(function (x, i) {\n                part = x - V[i - 1];\n                sum += part * part;\n            });\n            return Math.sqrt(sum);\n        }\n    }, {\n        key: \"liesOn\",\n        value: function liesOn(line) {\n            return line.contains(this);\n        }\n    }, {\n        key: \"liesIn\",\n        value: function liesIn(plane) {\n            return plane.contains(this);\n        }\n    }, {\n        key: \"rotate\",\n        value: function rotate(t, obj) {\n            var V,\n                R = null,\n                x,\n                y,\n                z;\n            if (t.determinant) {\n                R = t.elements;\n            }\n            switch (this.elements.length) {\n                case 2:\n                    {\n                        V = obj.elements || obj;\n                        if (V.length !== 2) {\n                            return null;\n                        }\n                        if (!R) {\n                            R = _Matrix.Matrix.Rotation(t).elements;\n                        }\n                        x = this.elements[0] - V[0];\n                        y = this.elements[1] - V[1];\n                        return new Vector([V[0] + R[0][0] * x + R[0][1] * y, V[1] + R[1][0] * x + R[1][1] * y]);\n                        break;\n                    }\n                case 3:\n                    {\n                        if (!obj.direction) {\n                            return null;\n                        }\n                        var C = obj.pointClosestTo(this).elements;\n                        if (!R) {\n                            R = _Matrix.Matrix.Rotation(t, obj.direction).elements;\n                        }\n                        x = this.elements[0] - C[0];\n                        y = this.elements[1] - C[1];\n                        z = this.elements[2] - C[2];\n                        return new Vector([C[0] + R[0][0] * x + R[0][1] * y + R[0][2] * z, C[1] + R[1][0] * x + R[1][1] * y + R[1][2] * z, C[2] + R[2][0] * x + R[2][1] * y + R[2][2] * z]);\n                        break;\n                    }\n                default:\n                    {\n                        return null;\n                    }\n            }\n        }\n    }, {\n        key: \"reflectionIn\",\n        value: function reflectionIn(obj) {\n            if (obj.anchor) {\n                // obj is a plane or line\n                var P = this.elements.slice();\n                var C = obj.pointClosestTo(P).elements;\n                return new Vector([C[0] + (C[0] - P[0]), C[1] + (C[1] - P[1]), C[2] + (C[2] - (P[2] || 0))]);\n            } else {\n                // obj is a point\n                var Q = obj.elements || obj;\n                if (this.elements.length !== Q.length) {\n                    return null;\n                }\n                return this.map(function (x, i) {\n                    return Q[i - 1] + (Q[i - 1] - x);\n                });\n            }\n        }\n    }, {\n        key: \"to3D\",\n        value: function to3D() {\n            var V = this.dup();\n            switch (V.elements.length) {\n                case 3:\n                    {\n                        break;\n                    }\n                case 2:\n                    {\n                        V.elements.push(0);\n                        break;\n                    }\n                default:\n                    {\n                        return null;\n                    }\n            }\n            return V;\n        }\n    }, {\n        key: \"inspect\",\n        value: function inspect() {\n            return '[' + this.elements.join(', ') + ']';\n        }\n    }, {\n        key: \"setElements\",\n        value: function setElements(els) {\n            this.elements = (els.elements || els).slice();\n            return this;\n        }\n\n        //From glUtils.js\n\n    }, {\n        key: \"flatten\",\n        value: function flatten() {\n            return this.elements;\n        }\n    }]);\n\n    return Vector;\n}();\n\nVector.Random = function (n) {\n    var elements = [];\n    while (n--) {\n        elements.push(Math.random());\n    }\n    return new Vector(elements);\n};\n\nVector.Zero = function (n) {\n    var elements = [];\n    while (n--) {\n        elements.push(0);\n    }\n    return new Vector(elements);\n};\n\nVector.prototype.x = Vector.prototype.multiply;\nVector.prototype.each = Vector.prototype.forEach;\n\nVector.i = new Vector([1, 0, 0]);\nVector.j = new Vector([0, 1, 0]);\nVector.k = new Vector([0, 0, 1]);\n//# sourceMappingURL=Vector.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Plane = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _PRECISION = require(\"./PRECISION\");\n\nvar _Matrix = require(\"./Matrix\");\n\nvar _Vector = require(\"./Vector\");\n\nvar _Line = require(\"./Line\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Plane = exports.Plane = function () {\n    function Plane(anchor, v1, v2) {\n        _classCallCheck(this, Plane);\n\n        this.setVectors(anchor, v1, v2);\n    }\n\n    _createClass(Plane, [{\n        key: \"eql\",\n        value: function eql(plane) {\n            return this.contains(plane.anchor) && this.isParallelTo(plane);\n        }\n    }, {\n        key: \"dup\",\n        value: function dup() {\n            return new Plane(this.anchor, this.normal);\n        }\n    }, {\n        key: \"translate\",\n        value: function translate(vector) {\n            var V = vector.elements || vector;\n            return new Plane([this.anchor.elements[0] + V[0], this.anchor.elements[1] + V[1], this.anchor.elements[2] + (V[2] || 0)], this.normal);\n        }\n    }, {\n        key: \"isParallelTo\",\n        value: function isParallelTo(obj) {\n            var theta;\n            if (obj.normal) {\n                // obj is a plane\n                theta = this.normal.angleFrom(obj.normal);\n                return Math.abs(theta) <= _PRECISION.PRECISION || Math.abs(Math.PI - theta) <= _PRECISION.PRECISION;\n            } else if (obj.direction) {\n                // obj is a line\n                return this.normal.isPerpendicularTo(obj.direction);\n            }\n            return null;\n        }\n    }, {\n        key: \"isPerpendicularTo\",\n        value: function isPerpendicularTo(plane) {\n            var theta = this.normal.angleFrom(plane.normal);\n            return Math.abs(Math.PI / 2 - theta) <= _PRECISION.PRECISION;\n        }\n    }, {\n        key: \"distanceFrom\",\n        value: function distanceFrom(obj) {\n            if (this.intersects(obj) || this.contains(obj)) {\n                return 0;\n            }\n            if (obj.anchor) {\n                // obj is a plane or line\n                var A = this.anchor.elements,\n                    B = obj.anchor.elements,\n                    N = this.normal.elements;\n                return Math.abs((A[0] - B[0]) * N[0] + (A[1] - B[1]) * N[1] + (A[2] - B[2]) * N[2]);\n            } else {\n                // obj is a point\n                var P = obj.elements || obj;\n                var A = this.anchor.elements,\n                    N = this.normal.elements;\n                return Math.abs((A[0] - P[0]) * N[0] + (A[1] - P[1]) * N[1] + (A[2] - (P[2] || 0)) * N[2]);\n            }\n        }\n    }, {\n        key: \"contains\",\n        value: function contains(obj) {\n            if (obj.normal) {\n                return null;\n            }\n            if (obj.direction) {\n                return this.contains(obj.anchor) && this.contains(obj.anchor.add(obj.direction));\n            } else {\n                var P = obj.elements || obj;\n                var A = this.anchor.elements,\n                    N = this.normal.elements;\n                var diff = Math.abs(N[0] * (A[0] - P[0]) + N[1] * (A[1] - P[1]) + N[2] * (A[2] - (P[2] || 0)));\n                return diff <= _PRECISION.PRECISION;\n            }\n        }\n    }, {\n        key: \"intersects\",\n        value: function intersects(obj) {\n            if (typeof obj.direction === 'undefined' && typeof obj.normal === 'undefined') {\n                return null;\n            }\n            return !this.isParallelTo(obj);\n        }\n    }, {\n        key: \"intersectionWith\",\n        value: function intersectionWith(obj) {\n            if (!this.intersects(obj)) {\n                return null;\n            }\n            if (obj.direction) {\n                // obj is a line\n                var A = obj.anchor.elements,\n                    D = obj.direction.elements,\n                    P = this.anchor.elements,\n                    N = this.normal.elements;\n                var multiplier = (N[0] * (P[0] - A[0]) + N[1] * (P[1] - A[1]) + N[2] * (P[2] - A[2])) / (N[0] * D[0] + N[1] * D[1] + N[2] * D[2]);\n                return new _Vector.Vector([A[0] + D[0] * multiplier, A[1] + D[1] * multiplier, A[2] + D[2] * multiplier]);\n            } else if (obj.normal) {\n                // obj is a plane\n                var direction = this.normal.cross(obj.normal).toUnitVector();\n                // To find an anchor point, we find one co-ordinate that has a value of\n                // zero somewhere on the intersection, and remember which one we picked\n                var N = this.normal.elements,\n                    A = this.anchor.elements,\n                    O = obj.normal.elements,\n                    B = obj.anchor.elements;\n                var solver = _Matrix.Matrix.Zero(2, 2),\n                    i = 0;\n                while (solver.isSingular()) {\n                    i++;\n                    solver = new _Matrix.Matrix([[N[i % 3], N[(i + 1) % 3]], [O[i % 3], O[(i + 1) % 3]]]);\n                }\n                // Then we solve the simultaneous equations in the remaining dimensions\n                var inverse = solver.inverse().elements;\n                var x = N[0] * A[0] + N[1] * A[1] + N[2] * A[2];\n                var y = O[0] * B[0] + O[1] * B[1] + O[2] * B[2];\n                var intersection = [inverse[0][0] * x + inverse[0][1] * y, inverse[1][0] * x + inverse[1][1] * y];\n                var anchor = [];\n                for (var j = 1; j <= 3; j++) {\n                    // This formula picks the right element from intersection by cycling\n                    // depending on which element we set to zero above\n                    anchor.push(i === j ? 0 : intersection[(j + (5 - i) % 3) % 3]);\n                }\n                return new _Line.Line(anchor, direction);\n            }\n        }\n    }, {\n        key: \"pointClosestTo\",\n        value: function pointClosestTo(point) {\n            var P = point.elements || point;\n            var A = this.anchor.elements,\n                N = this.normal.elements;\n            var dot = (A[0] - P[0]) * N[0] + (A[1] - P[1]) * N[1] + (A[2] - (P[2] || 0)) * N[2];\n            return new _Vector.Vector([P[0] + N[0] * dot, P[1] + N[1] * dot, (P[2] || 0) + N[2] * dot]);\n        }\n    }, {\n        key: \"rotate\",\n        value: function rotate(t, line) {\n            var R = t.determinant ? t.elements : _Matrix.Matrix.Rotation(t, line.direction).elements;\n            var C = line.pointClosestTo(this.anchor).elements;\n            var A = this.anchor.elements,\n                N = this.normal.elements;\n            var C1 = C[0],\n                C2 = C[1],\n                C3 = C[2],\n                A1 = A[0],\n                A2 = A[1],\n                A3 = A[2];\n            var x = A1 - C1,\n                y = A2 - C2,\n                z = A3 - C3;\n            return new Plane([C1 + R[0][0] * x + R[0][1] * y + R[0][2] * z, C2 + R[1][0] * x + R[1][1] * y + R[1][2] * z, C3 + R[2][0] * x + R[2][1] * y + R[2][2] * z], [R[0][0] * N[0] + R[0][1] * N[1] + R[0][2] * N[2], R[1][0] * N[0] + R[1][1] * N[1] + R[1][2] * N[2], R[2][0] * N[0] + R[2][1] * N[1] + R[2][2] * N[2]]);\n        }\n    }, {\n        key: \"reflectionIn\",\n        value: function reflectionIn(obj) {\n            if (obj.normal) {\n                // obj is a plane\n                var A = this.anchor.elements,\n                    N = this.normal.elements;\n                var A1 = A[0],\n                    A2 = A[1],\n                    A3 = A[2],\n                    N1 = N[0],\n                    N2 = N[1],\n                    N3 = N[2];\n                var newA = this.anchor.reflectionIn(obj).elements;\n                // Add the plane's normal to its anchor, then mirror that in the other plane\n                var AN1 = A1 + N1,\n                    AN2 = A2 + N2,\n                    AN3 = A3 + N3;\n                var Q = obj.pointClosestTo([AN1, AN2, AN3]).elements;\n                var newN = [Q[0] + (Q[0] - AN1) - newA[0], Q[1] + (Q[1] - AN2) - newA[1], Q[2] + (Q[2] - AN3) - newA[2]];\n                return new Plane(newA, newN);\n            } else if (obj.direction) {\n                // obj is a line\n                return this.rotate(Math.PI, obj);\n            } else {\n                // obj is a point\n                var P = obj.elements || obj;\n                return new Plane(this.anchor.reflectionIn([P[0], P[1], P[2] || 0]), this.normal);\n            }\n        }\n    }, {\n        key: \"setVectors\",\n        value: function setVectors(anchor, v1, v2) {\n            anchor = new _Vector.Vector(anchor);\n            anchor = anchor.to3D();if (anchor === null) {\n                return null;\n            }\n            v1 = new _Vector.Vector(v1);\n            v1 = v1.to3D();if (v1 === null) {\n                return null;\n            }\n            if (typeof v2 === 'undefined') {\n                v2 = null;\n            } else {\n                v2 = new _Vector.Vector(v2);\n                v2 = v2.to3D();\n                if (v2 === null) {\n                    return null;\n                }\n            }\n            var A1 = anchor.elements[0],\n                A2 = anchor.elements[1],\n                A3 = anchor.elements[2];\n            var v11 = v1.elements[0],\n                v12 = v1.elements[1],\n                v13 = v1.elements[2];\n            var normal, mod;\n            if (v2 !== null) {\n                var v21 = v2.elements[0],\n                    v22 = v2.elements[1],\n                    v23 = v2.elements[2];\n                normal = new _Vector.Vector([(v12 - A2) * (v23 - A3) - (v13 - A3) * (v22 - A2), (v13 - A3) * (v21 - A1) - (v11 - A1) * (v23 - A3), (v11 - A1) * (v22 - A2) - (v12 - A2) * (v21 - A1)]);\n                mod = normal.modulus();\n                if (mod === 0) {\n                    return null;\n                }\n                normal = new _Vector.Vector([normal.elements[0] / mod, normal.elements[1] / mod, normal.elements[2] / mod]);\n            } else {\n                mod = Math.sqrt(v11 * v11 + v12 * v12 + v13 * v13);\n                if (mod === 0) {\n                    return null;\n                }\n                normal = new _Vector.Vector([v1.elements[0] / mod, v1.elements[1] / mod, v1.elements[2] / mod]);\n            }\n            this.anchor = anchor;\n            this.normal = normal;\n            return this;\n        }\n    }]);\n\n    return Plane;\n}();\n\nPlane.XY = new Plane(_Vector.Vector.Zero(3), _Vector.Vector.k);\nPlane.YZ = new Plane(_Vector.Vector.Zero(3), _Vector.Vector.i);\nPlane.ZX = new Plane(_Vector.Vector.Zero(3), _Vector.Vector.j);\nPlane.YX = Plane.XY;Plane.ZY = Plane.YZ;Plane.XZ = Plane.ZX;\n\nPlane.fromPoints = function (points) {\n    var np = points.length,\n        list = [],\n        i,\n        P,\n        n,\n        N,\n        A,\n        B,\n        C,\n        D,\n        theta,\n        prevN,\n        totalN = _Vector.Vector.Zero(3);\n    for (i = 0; i < np; i++) {\n        P = new _Vector.Vector(points[i]).to3D();\n        if (P === null) {\n            return null;\n        }\n        list.push(P);\n        n = list.length;\n        if (n > 2) {\n            // Compute plane normal for the latest three points\n            A = list[n - 1].elements;B = list[n - 2].elements;C = list[n - 3].elements;\n            N = new _Vector.Vector([(A[1] - B[1]) * (C[2] - B[2]) - (A[2] - B[2]) * (C[1] - B[1]), (A[2] - B[2]) * (C[0] - B[0]) - (A[0] - B[0]) * (C[2] - B[2]), (A[0] - B[0]) * (C[1] - B[1]) - (A[1] - B[1]) * (C[0] - B[0])]).toUnitVector();\n            if (n > 3) {\n                // If the latest normal is not (anti)parallel to the previous one, we've\n                // strayed off the plane. This might be a slightly long-winded way of\n                // doing things, but we need the sum of all the normals to find which\n                // way the plane normal should point so that the points form an\n                // anticlockwise list.\n                theta = N.angleFrom(prevN);\n                if (theta !== null) {\n                    if (!(Math.abs(theta) <= _PRECISION.PRECISION || Math.abs(theta - Math.PI) <= _PRECISION.PRECISION)) {\n                        return null;\n                    }\n                }\n            }\n            totalN = totalN.add(N);\n            prevN = N;\n        }\n    }\n    // We need to add in the normals at the start and end points, which the above\n    // misses out\n    A = list[1].elements;B = list[0].elements;C = list[n - 1].elements;D = list[n - 2].elements;\n    totalN = totalN.add(new _Vector.Vector([(A[1] - B[1]) * (C[2] - B[2]) - (A[2] - B[2]) * (C[1] - B[1]), (A[2] - B[2]) * (C[0] - B[0]) - (A[0] - B[0]) * (C[2] - B[2]), (A[0] - B[0]) * (C[1] - B[1]) - (A[1] - B[1]) * (C[0] - B[0])]).toUnitVector()).add(new _Vector.Vector([(B[1] - C[1]) * (D[2] - C[2]) - (B[2] - C[2]) * (D[1] - C[1]), (B[2] - C[2]) * (D[0] - C[0]) - (B[0] - C[0]) * (D[2] - C[2]), (B[0] - C[0]) * (D[1] - C[1]) - (B[1] - C[1]) * (D[0] - C[0])]).toUnitVector());\n    return new Plane(list[0], totalN);\n};\n//# sourceMappingURL=Plane.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Line = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _PRECISION = require(\"./PRECISION\");\n\nvar _Vector = require(\"./Vector\");\n\nvar _Matrix = require(\"./Matrix\");\n\nvar _Plane = require(\"./Plane\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Line = exports.Line = function () {\n    function Line(anchor, direction) {\n        _classCallCheck(this, Line);\n\n        this.setVectors(anchor, direction);\n    }\n\n    _createClass(Line, [{\n        key: \"eql\",\n        value: function eql(line) {\n            return this.isParallelTo(line) && this.contains(line.anchor);\n        }\n    }, {\n        key: \"dup\",\n        value: function dup() {\n            return new Line(this.anchor, this.direction);\n        }\n    }, {\n        key: \"translate\",\n        value: function translate(vector) {\n            var V = vector.elements || vector;\n            return new Line([this.anchor.elements[0] + V[0], this.anchor.elements[1] + V[1], this.anchor.elements[2] + (V[2] || 0)], this.direction);\n        }\n    }, {\n        key: \"isParallelTo\",\n        value: function isParallelTo(obj) {\n            if (obj.normal || obj.start && obj.end) {\n                return obj.isParallelTo(this);\n            }\n            var theta = this.direction.angleFrom(obj.direction);\n            return Math.abs(theta) <= _PRECISION.PRECISION || Math.abs(theta - Math.PI) <= _PRECISION.PRECISION;\n        }\n    }, {\n        key: \"distanceFrom\",\n        value: function distanceFrom(obj) {\n            if (obj.normal || obj.start && obj.end) {\n                return obj.distanceFrom(this);\n            }\n            if (obj.direction) {\n                // obj is a line\n                if (this.isParallelTo(obj)) {\n                    return this.distanceFrom(obj.anchor);\n                }\n                var N = this.direction.cross(obj.direction).toUnitVector().elements;\n                var A = this.anchor.elements,\n                    B = obj.anchor.elements;\n                return Math.abs((A[0] - B[0]) * N[0] + (A[1] - B[1]) * N[1] + (A[2] - B[2]) * N[2]);\n            } else {\n                // obj is a point\n                var P = obj.elements || obj;\n                var A = this.anchor.elements,\n                    D = this.direction.elements;\n                var PA1 = P[0] - A[0],\n                    PA2 = P[1] - A[1],\n                    PA3 = (P[2] || 0) - A[2];\n                var modPA = Math.sqrt(PA1 * PA1 + PA2 * PA2 + PA3 * PA3);\n                if (modPA === 0) {\n                    return 0;\n                }\n                // Assumes direction vector is normalized\n                var cosTheta = (PA1 * D[0] + PA2 * D[1] + PA3 * D[2]) / modPA;\n                var sin2 = 1 - cosTheta * cosTheta;\n                return Math.abs(modPA * Math.sqrt(sin2 < 0 ? 0 : sin2));\n            }\n        }\n    }, {\n        key: \"contains\",\n        value: function contains(obj) {\n            if (obj.start && obj.end) {\n                return this.contains(obj.start) && this.contains(obj.end);\n            }\n            var dist = this.distanceFrom(obj);\n            return dist !== null && dist <= _PRECISION.PRECISION;\n        }\n    }, {\n        key: \"positionOf\",\n        value: function positionOf(point) {\n            if (!this.contains(point)) {\n                return null;\n            }\n            var P = point.elements || point;\n            var A = this.anchor.elements,\n                D = this.direction.elements;\n            return (P[0] - A[0]) * D[0] + (P[1] - A[1]) * D[1] + ((P[2] || 0) - A[2]) * D[2];\n        }\n    }, {\n        key: \"liesIn\",\n        value: function liesIn(plane) {\n            return plane.contains(this);\n        }\n    }, {\n        key: \"intersects\",\n        value: function intersects(obj) {\n            if (obj.normal) {\n                return obj.intersects(this);\n            }\n            return !this.isParallelTo(obj) && this.distanceFrom(obj) <= _PRECISION.PRECISION;\n        }\n    }, {\n        key: \"intersectionWith\",\n        value: function intersectionWith(obj) {\n            if (obj.normal || obj.start && obj.end) {\n                return obj.intersectionWith(this);\n            }\n            if (!this.intersects(obj)) {\n                return null;\n            }\n            var P = this.anchor.elements,\n                X = this.direction.elements,\n                Q = obj.anchor.elements,\n                Y = obj.direction.elements;\n            var X1 = X[0],\n                X2 = X[1],\n                X3 = X[2],\n                Y1 = Y[0],\n                Y2 = Y[1],\n                Y3 = Y[2];\n            var PsubQ1 = P[0] - Q[0],\n                PsubQ2 = P[1] - Q[1],\n                PsubQ3 = P[2] - Q[2];\n            var XdotQsubP = -X1 * PsubQ1 - X2 * PsubQ2 - X3 * PsubQ3;\n            var YdotPsubQ = Y1 * PsubQ1 + Y2 * PsubQ2 + Y3 * PsubQ3;\n            var XdotX = X1 * X1 + X2 * X2 + X3 * X3;\n            var YdotY = Y1 * Y1 + Y2 * Y2 + Y3 * Y3;\n            var XdotY = X1 * Y1 + X2 * Y2 + X3 * Y3;\n            var k = (XdotQsubP * YdotY / XdotX + XdotY * YdotPsubQ) / (YdotY - XdotY * XdotY);\n            return new _Vector.Vector([P[0] + k * X1, P[1] + k * X2, P[2] + k * X3]);\n        }\n    }, {\n        key: \"pointClosestTo\",\n        value: function pointClosestTo(obj) {\n            if (obj.start && obj.end) {\n                // obj is a line segment\n                var P = obj.pointClosestTo(this);\n                return P === null ? null : this.pointClosestTo(P);\n            } else if (obj.direction) {\n                // obj is a line\n                if (this.intersects(obj)) {\n                    return this.intersectionWith(obj);\n                }\n                if (this.isParallelTo(obj)) {\n                    return null;\n                }\n                var D = this.direction.elements,\n                    E = obj.direction.elements;\n                var D1 = D[0],\n                    D2 = D[1],\n                    D3 = D[2],\n                    E1 = E[0],\n                    E2 = E[1],\n                    E3 = E[2];\n                // Create plane containing obj and the shared normal and intersect this\n                // with it Thank you:\n                // http://www.cgafaq.info/wiki/Line-line_distance\n                var x = D3 * E1 - D1 * E3,\n                    y = D1 * E2 - D2 * E1,\n                    z = D2 * E3 - D3 * E2;\n                var N = [x * E3 - y * E2, y * E1 - z * E3, z * E2 - x * E1];\n                var P = new _Plane.Plane(obj.anchor, N);\n                return P.intersectionWith(this);\n            } else {\n                // obj is a point\n                var P = obj.elements || obj;\n                if (this.contains(P)) {\n                    return new _Vector.Vector(P);\n                }\n                var A = this.anchor.elements,\n                    D = this.direction.elements;\n                var D1 = D[0],\n                    D2 = D[1],\n                    D3 = D[2],\n                    A1 = A[0],\n                    A2 = A[1],\n                    A3 = A[2];\n                var x = D1 * (P[1] - A2) - D2 * (P[0] - A1),\n                    y = D2 * ((P[2] || 0) - A3) - D3 * (P[1] - A2),\n                    z = D3 * (P[0] - A1) - D1 * ((P[2] || 0) - A3);\n                var V = new _Vector.Vector([D2 * x - D3 * z, D3 * y - D1 * x, D1 * z - D2 * y]);\n                var k = this.distanceFrom(P) / V.modulus();\n                return new _Vector.Vector([P[0] + V.elements[0] * k, P[1] + V.elements[1] * k, (P[2] || 0) + V.elements[2] * k]);\n            }\n        }\n\n        // Returns a copy of the line rotated by t radians about the given line. Works\n        // by finding the argument's closest point to this line's anchor point (call\n        // this C) and rotating the anchor about C. Also rotates the line's direction\n        // about the argument's. Be careful with this - the rotation axis' direction\n        // affects the outcome!\n\n    }, {\n        key: \"rotate\",\n        value: function rotate(t, line) {\n            // If we're working in 2D\n            if (typeof line.direction === 'undefined') {\n                line = new Line(line.to3D(), _Vector.Vector.k);\n            }\n            var R = _Matrix.Matrix.Rotation(t, line.direction).elements;\n            var C = line.pointClosestTo(this.anchor).elements;\n            var A = this.anchor.elements,\n                D = this.direction.elements;\n            var C1 = C[0],\n                C2 = C[1],\n                C3 = C[2],\n                A1 = A[0],\n                A2 = A[1],\n                A3 = A[2];\n            var x = A1 - C1,\n                y = A2 - C2,\n                z = A3 - C3;\n            return new Line([C1 + R[0][0] * x + R[0][1] * y + R[0][2] * z, C2 + R[1][0] * x + R[1][1] * y + R[1][2] * z, C3 + R[2][0] * x + R[2][1] * y + R[2][2] * z], [R[0][0] * D[0] + R[0][1] * D[1] + R[0][2] * D[2], R[1][0] * D[0] + R[1][1] * D[1] + R[1][2] * D[2], R[2][0] * D[0] + R[2][1] * D[1] + R[2][2] * D[2]]);\n        }\n    }, {\n        key: \"reverse\",\n        value: function reverse() {\n            return new Line(this.anchor, this.direction.x(-1));\n        }\n    }, {\n        key: \"reflectionIn\",\n        value: function reflectionIn(obj) {\n            if (obj.normal) {\n                // obj is a plane\n                var A = this.anchor.elements,\n                    D = this.direction.elements;\n                var A1 = A[0],\n                    A2 = A[1],\n                    A3 = A[2],\n                    D1 = D[0],\n                    D2 = D[1],\n                    D3 = D[2];\n                var newA = this.anchor.reflectionIn(obj).elements;\n                // Add the line's direction vector to its anchor, then mirror that in the plane\n                var AD1 = A1 + D1,\n                    AD2 = A2 + D2,\n                    AD3 = A3 + D3;\n                var Q = obj.pointClosestTo([AD1, AD2, AD3]).elements;\n                var newD = [Q[0] + (Q[0] - AD1) - newA[0], Q[1] + (Q[1] - AD2) - newA[1], Q[2] + (Q[2] - AD3) - newA[2]];\n                return new Line(newA, newD);\n            } else if (obj.direction) {\n                // obj is a line - reflection obtained by rotating PI radians about obj\n                return this.rotate(Math.PI, obj);\n            } else {\n                // obj is a point - just reflect the line's anchor in it\n                var P = obj.elements || obj;\n                return new Line(this.anchor.reflectionIn([P[0], P[1], P[2] || 0]), this.direction);\n            }\n        }\n    }, {\n        key: \"setVectors\",\n        value: function setVectors(anchor, direction) {\n            // Need to do this so that line's properties are not references to the\n            // arguments passed in\n            anchor = new _Vector.Vector(anchor);\n            direction = new _Vector.Vector(direction);\n            if (anchor.elements.length === 2) {\n                anchor.elements.push(0);\n            }\n            if (direction.elements.length === 2) {\n                direction.elements.push(0);\n            }\n            if (anchor.elements.length > 3 || direction.elements.length > 3) {\n                return null;\n            }\n            var mod = direction.modulus();\n            if (mod === 0) {\n                return null;\n            }\n            this.anchor = anchor;\n            this.direction = new _Vector.Vector([direction.elements[0] / mod, direction.elements[1] / mod, direction.elements[2] / mod]);\n            return this;\n        }\n    }]);\n\n    return Line;\n}();\n\nLine.X = new Line(_Vector.Vector.Zero(3), _Vector.Vector.i);\nLine.Y = new Line(_Vector.Vector.Zero(3), _Vector.Vector.j);\nLine.Z = new Line(_Vector.Vector.Zero(3), _Vector.Vector.k);\n//# sourceMappingURL=Line.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.LineSegment = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Vector = require(\"./Vector\");\n\nvar _Plane = require(\"./Plane\");\n\nvar _Line = require(\"./Line\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar LineSegment = exports.LineSegment = function () {\n    function LineSegment(v1, v2) {\n        _classCallCheck(this, LineSegment);\n\n        this.setPoints(v1, v2);\n    }\n\n    _createClass(LineSegment, [{\n        key: \"eql\",\n        value: function eql(segment) {\n            return this.start.eql(segment.start) && this.end.eql(segment.end) || this.start.eql(segment.end) && this.end.eql(segment.start);\n        }\n    }, {\n        key: \"dup\",\n        value: function dup() {\n            return new LineSegment(this.start, this.end);\n        }\n    }, {\n        key: \"length\",\n        value: function length() {\n            var A = this.start.elements,\n                B = this.end.elements;\n            var C1 = B[0] - A[0],\n                C2 = B[1] - A[1],\n                C3 = B[2] - A[2];\n            return Math.sqrt(C1 * C1 + C2 * C2 + C3 * C3);\n        }\n    }, {\n        key: \"toVector\",\n        value: function toVector() {\n            var A = this.start.elements,\n                B = this.end.elements;\n            return new _Vector.Vector([B[0] - A[0], B[1] - A[1], B[2] - A[2]]);\n        }\n    }, {\n        key: \"midpoint\",\n        value: function midpoint() {\n            var A = this.start.elements,\n                B = this.end.elements;\n            return new _Vector.Vector([(B[0] + A[0]) / 2, (B[1] + A[1]) / 2, (B[2] + A[2]) / 2]);\n        }\n    }, {\n        key: \"bisectingPlane\",\n        value: function bisectingPlane() {\n            return new _Plane.Plane(this.midpoint(), this.toVector());\n        }\n    }, {\n        key: \"translate\",\n        value: function translate(vector) {\n            var V = vector.elements || vector;\n            var S = this.start.elements,\n                E = this.end.elements;\n            return new LineSegment([S[0] + V[0], S[1] + V[1], S[2] + (V[2] || 0)], [E[0] + V[0], E[1] + V[1], E[2] + (V[2] || 0)]);\n        }\n    }, {\n        key: \"isParallelTo\",\n        value: function isParallelTo(obj) {\n            return this.line.isParallelTo(obj);\n        }\n    }, {\n        key: \"distanceFrom\",\n        value: function distanceFrom(obj) {\n            var P = this.pointClosestTo(obj);\n            return P === null ? null : P.distanceFrom(obj);\n        }\n    }, {\n        key: \"contains\",\n        value: function contains(obj) {\n            if (obj.start && obj.end) {\n                return this.contains(obj.start) && this.contains(obj.end);\n            }\n            var P = (obj.elements || obj).slice();\n            if (P.length === 2) {\n                P.push(0);\n            }\n            if (this.start.eql(P)) {\n                return true;\n            }\n            var S = this.start.elements;\n            var V = new _Vector.Vector([S[0] - P[0], S[1] - P[1], S[2] - (P[2] || 0)]);\n            var vect = this.toVector();\n            return V.isAntiparallelTo(vect) && V.modulus() <= vect.modulus();\n        }\n    }, {\n        key: \"intersects\",\n        value: function intersects(obj) {\n            return this.intersectionWith(obj) !== null;\n        }\n    }, {\n        key: \"intersectionWith\",\n        value: function intersectionWith(obj) {\n            if (!this.line.intersects(obj)) {\n                return null;\n            }\n            var P = this.line.intersectionWith(obj);\n            return this.contains(P) ? P : null;\n        }\n    }, {\n        key: \"pointClosestTo\",\n        value: function pointClosestTo(obj) {\n            if (obj.normal) {\n                // obj is a plane\n                var V = this.line.intersectionWith(obj);\n                if (V === null) {\n                    return null;\n                }\n                return this.pointClosestTo(V);\n            } else {\n                // obj is a line (segment) or point\n                var P = this.line.pointClosestTo(obj);\n                if (P === null) {\n                    return null;\n                }\n                if (this.contains(P)) {\n                    return P;\n                }\n                return (this.line.positionOf(P) < 0 ? this.start : this.end).dup();\n            }\n        }\n    }, {\n        key: \"setPoints\",\n        value: function setPoints(startPoint, endPoint) {\n            startPoint = new _Vector.Vector(startPoint).to3D();\n            endPoint = new _Vector.Vector(endPoint).to3D();\n            if (startPoint === null || endPoint === null) {\n                return null;\n            }\n            this.line = new _Line.Line(startPoint, endPoint.subtract(startPoint));\n            this.start = startPoint;\n            this.end = endPoint;\n            return this;\n        }\n    }]);\n\n    return LineSegment;\n}();\n//# sourceMappingURL=LineSegment.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar LinkedListNode = exports.LinkedListNode = function LinkedListNode(data) {\n    _classCallCheck(this, LinkedListNode);\n\n    this.prev = null;\n    this.next = null;\n    this.data = data;\n};\n//# sourceMappingURL=LinkedListNode.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Polygon = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _LinkedList = require(\"./LinkedList\");\n\nvar _PRECISION = require(\"./PRECISION\");\n\nvar _Matrix = require(\"./Matrix\");\n\nvar _Vector = require(\"./Vector\");\n\nvar _Plane = require(\"./Plane\");\n\nvar _Line = require(\"./Line\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Polygon = exports.Polygon = function () {\n    function Polygon(points, plane) {\n        _classCallCheck(this, Polygon);\n\n        this.setVertices(points, plane);\n    }\n\n    _createClass(Polygon, [{\n        key: \"v\",\n        value: function v(i) {\n            return this.vertices.at(i - 1).data;\n        }\n    }, {\n        key: \"nodeFor\",\n        value: function nodeFor(vertex) {\n            return this.vertices.withData(vertex);\n        }\n    }, {\n        key: \"dup\",\n        value: function dup() {\n            return new Polygon(this.vertices, this.plane);\n        }\n    }, {\n        key: \"translate\",\n        value: function translate(vector) {\n            var P = vector.elements || vector;\n            this.vertices.each(function (node) {\n                var E = node.data.elements;\n                node.data.setElements([E[0] + P[0], E[1] + P[1], E[2] + (P[2] || 0)]);\n            });\n            this.plane = this.plane.translate(vector);\n            this.updateTrianglePlanes(function (plane) {\n                return plane.translate(vector);\n            });\n            return this;\n        }\n    }, {\n        key: \"rotate\",\n        value: function rotate(t, line) {\n            var R = _Matrix.Matrix.Rotation(t, line.direction);\n            this.vertices.each(function (node) {\n                node.data.setElements(node.data.rotate(R, line).elements);\n            });\n            this.plane = this.plane.rotate(R, line);\n            this.updateTrianglePlanes(function (plane) {\n                return plane.rotate(R, line);\n            });\n            return this;\n        }\n    }, {\n        key: \"scale\",\n        value: function scale(k, point) {\n            var P = point.elements || point;\n            this.vertices.each(function (node) {\n                var E = node.data.elements;\n                node.data.setElements([P[0] + k * (E[0] - P[0]), P[1] + k * (E[1] - P[1]), (P[2] || 0) + k * (E[2] - (P[2] || 0))]);\n            });\n            var anchor = this.vertices.first.data;\n            this.plane.anchor.setElements(anchor);\n            this.updateTrianglePlanes(function (plane) {\n                return new _Plane.Plane(anchor, plane.normal);\n            });\n            return this;\n        }\n\n        // Updates the plane properties of all the cached triangles belonging to the\n        // polygon according to the given function. For example, suppose you just\n        // rotated the polygon, you should call:\n        //\n        //   poly.updateTrianglePlanes(function(plane) { return plane.rotate(t, line); });\n        //\n        // This method is called automatically by Polygon.translate,\n        // Polygon.rotate and Polygon.scale transformation methods.\n\n    }, {\n        key: \"updateTrianglePlanes\",\n        value: function updateTrianglePlanes(fn) {\n            var i;\n            if (this.cached.triangles !== null) {\n                i = this.cached.triangles.length;\n                while (i--) {\n                    this.cached.triangles[i].plane = fn(this.cached.triangles[i].plane);\n                }\n            }\n            if (this.cached.surfaceIntegralElements !== null) {\n                i = this.cached.surfaceIntegralElements.length;\n                while (i--) {\n                    this.cached.surfaceIntegralElements[i].plane = fn(this.cached.surfaceIntegralElements[i].plane);\n                }\n            }\n        }\n    }, {\n        key: \"isTriangle\",\n        value: function isTriangle() {\n            return this.vertices.length === 3;\n        }\n\n        // Returns a collection of triangles used for calculating area and center of\n        // mass. Some of the triangles will not lie inside the polygon - this\n        // collection is essentially a series of itervals in a surface integral, so\n        // some are 'negative'. If you want the polygon broken into constituent\n        // triangles, use toTriangles(). This method is used because it's much faster\n        // than toTriangles().\n        //\n        // The triangles generated share vertices with the original polygon, so they\n        // transform with the polygon. They are cached after first calculation and\n        // should remain in sync with changes to the parent polygon.\n\n    }, {\n        key: \"trianglesForSurfaceIntegral\",\n        value: function trianglesForSurfaceIntegral() {\n            if (this.cached.surfaceIntegralElements !== null) {\n                return this.cached.surfaceIntegralElements;\n            }\n            var triangles = [];\n            var firstVertex = this.vertices.first.data;\n            var plane = this.plane;\n            this.vertices.each(function (node, i) {\n                if (i < 2) {\n                    return;\n                }\n                var points = [firstVertex, node.prev.data, node.data];\n                // If the vertices lie on a straigh line, give the polygon's own plane. If\n                // the element has no area, it doesn't matter which way its normal faces.\n                triangles.push(new Polygon(points, _Plane.Plane.fromPoints(points) || plane));\n            });\n            return this.setCache('surfaceIntegralElements', triangles);\n        }\n    }, {\n        key: \"area\",\n        value: function area() {\n            if (this.isTriangle()) {\n                // Area is half the modulus of the cross product of two sides\n                var A = this.vertices.first,\n                    B = A.next,\n                    C = B.next;\n                A = A.data.elements;B = B.data.elements;C = C.data.elements;\n                return 0.5 * new _Vector.Vector([(A[1] - B[1]) * (C[2] - B[2]) - (A[2] - B[2]) * (C[1] - B[1]), (A[2] - B[2]) * (C[0] - B[0]) - (A[0] - B[0]) * (C[2] - B[2]), (A[0] - B[0]) * (C[1] - B[1]) - (A[1] - B[1]) * (C[0] - B[0])]).modulus();\n            } else {\n                var trigs = this.trianglesForSurfaceIntegral(),\n                    area = 0;\n                var i = trigs.length;\n                while (i--) {\n                    area += trigs[i].area() * trigs[i].plane.normal.dot(this.plane.normal);\n                }\n                return area;\n            }\n        }\n    }, {\n        key: \"centroid\",\n        value: function centroid() {\n            if (this.isTriangle()) {\n                var A = this.v(1).elements,\n                    B = this.v(2).elements,\n                    C = this.v(3).elements;\n                return new _Vector.Vector([(A[0] + B[0] + C[0]) / 3, (A[1] + B[1] + C[1]) / 3, (A[2] + B[2] + C[2]) / 3]);\n            } else {\n                var A,\n                    M = 0,\n                    V = _Vector.Vector.Zero(3),\n                    P,\n                    C,\n                    trigs = this.trianglesForSurfaceIntegral();\n                var i = trigs.length;\n                while (i--) {\n                    A = trigs[i].area() * trigs[i].plane.normal.dot(this.plane.normal);\n                    M += A;\n                    P = V.elements;\n                    C = trigs[i].centroid().elements;\n                    V.setElements([P[0] + C[0] * A, P[1] + C[1] * A, P[2] + C[2] * A]);\n                }\n                return V.x(1 / M);\n            }\n        }\n    }, {\n        key: \"projectionOn\",\n        value: function projectionOn(plane) {\n            var points = [];\n            this.vertices.each(function (node) {\n                points.push(plane.pointClosestTo(node.data));\n            });\n            return new Polygon(points);\n        }\n    }, {\n        key: \"removeVertex\",\n        value: function removeVertex(vertex) {\n            if (this.isTriangle()) {\n                return;\n            }\n            var node = this.nodeFor(vertex);\n            if (node === null) {\n                return null;\n            }\n            this.clearCache();\n            // Previous and next entries in the main vertex list\n            var prev = node.prev,\n                next = node.next;\n            var prevWasConvex = prev.data.isConvex(this);\n            var nextWasConvex = next.data.isConvex(this);\n            if (node.data.isConvex(this)) {\n                this.convexVertices.remove(this.convexVertices.withData(node.data));\n            } else {\n                this.reflexVertices.remove(this.reflexVertices.withData(node.data));\n            }\n            this.vertices.remove(node);\n            // Deal with previous vertex's change of class\n            if (prevWasConvex !== prev.data.isConvex(this)) {\n                if (prevWasConvex) {\n                    this.convexVertices.remove(this.convexVertices.withData(prev.data));\n                    this.reflexVertices.append(new _LinkedList.LinkedList.Node(prev.data));\n                } else {\n                    this.reflexVertices.remove(this.reflexVertices.withData(prev.data));\n                    this.convexVertices.append(new _LinkedList.LinkedList.Node(prev.data));\n                }\n            }\n            // Deal with next vertex's change of class\n            if (nextWasConvex !== next.data.isConvex(this)) {\n                if (nextWasConvex) {\n                    this.convexVertices.remove(this.convexVertices.withData(next.data));\n                    this.reflexVertices.append(new _LinkedList.LinkedList.Node(next.data));\n                } else {\n                    this.reflexVertices.remove(this.reflexVertices.withData(next.data));\n                    this.convexVertices.append(new _LinkedList.LinkedList.Node(next.data));\n                }\n            }\n            return this;\n        }\n    }, {\n        key: \"contains\",\n        value: function contains(point) {\n            return this.containsByWindingNumber(point);\n        }\n    }, {\n        key: \"containsByWindingNumber\",\n        value: function containsByWindingNumber(point) {\n            var P = point.elements || point;\n            if (!this.plane.contains(P)) {\n                return false;\n            }\n            if (this.hasEdgeContaining(P)) {\n                return false;\n            }\n            var V,\n                W,\n                A,\n                B,\n                theta = 0,\n                dt,\n                loops = 0,\n                self = this;\n            this.vertices.each(function (node) {\n                V = node.data.elements;\n                W = node.next.data.elements;\n                A = new _Vector.Vector([V[0] - P[0], V[1] - P[1], V[2] - (P[2] || 0)]);\n                B = new _Vector.Vector([W[0] - P[0], W[1] - P[1], W[2] - (P[2] || 0)]);\n                dt = A.angleFrom(B);\n                if (dt === null || dt === 0) {\n                    return;\n                }\n                theta += (A.cross(B).isParallelTo(self.plane.normal) ? 1 : -1) * dt;\n                if (theta >= 2 * Math.PI - _PRECISION.PRECISION) {\n                    loops++;theta -= 2 * Math.PI;\n                }\n                if (theta <= -2 * Math.PI + _PRECISION.PRECISION) {\n                    loops--;theta += 2 * Math.PI;\n                }\n            });\n            return loops !== 0;\n        }\n    }, {\n        key: \"hasEdgeContaining\",\n        value: function hasEdgeContaining(point) {\n            var P = point.elements || point;\n            var success = false;\n            this.vertices.each(function (node) {\n                if (_Line.Line.Segment.create(node.data, node.next.data).contains(P)) {\n                    success = true;\n                }\n            });\n            return success;\n        }\n    }, {\n        key: \"toTriangles\",\n        value: function toTriangles() {\n            if (this.cached.triangles !== null) {\n                return this.cached.triangles;\n            }\n            return this.setCache('triangles', this.triangulateByEarClipping());\n        }\n\n        // Implementation of ear clipping algorithm\n        // Found in 'Triangulation by ear clipping', by David Eberly\n        // at http://www.geometrictools.com\n        // This will not deal with overlapping sections - contruct your polygons\n        // sensibly\n\n    }, {\n        key: \"triangulateByEarClipping\",\n        value: function triangulateByEarClipping() {\n            var poly = this.dup(),\n                triangles = [],\n                success,\n                convexNode,\n                mainNode,\n                trig;\n            while (!poly.isTriangle()) {\n                success = false;\n                while (!success) {\n                    success = true;\n                    // Ear tips must be convex vertices - let's pick one at random\n                    convexNode = poly.convexVertices.randomNode();\n                    mainNode = poly.vertices.withData(convexNode.data);\n                    // For convex vertices, this order will always be anticlockwise\n                    trig = new Polygon([mainNode.data, mainNode.next.data, mainNode.prev.data], this.plane);\n                    // Now test whether any reflex vertices lie within the ear\n                    poly.reflexVertices.each(function (node) {\n                        // Don't test points belonging to this triangle. node won't be equal\n                        // to convexNode as node is reflex and vertex is convex.\n                        if (node.data !== mainNode.prev.data && node.data !== mainNode.next.data) {\n                            if (trig.contains(node.data) || trig.hasEdgeContaining(node.data)) {\n                                success = false;\n                            }\n                        }\n                    });\n                }\n                triangles.push(trig);\n                poly.removeVertex(mainNode.data);\n            }\n            // Need to do this to renumber the remaining vertices\n            triangles.push(new Polygon(poly.vertices, this.plane));\n            return triangles;\n        }\n    }, {\n        key: \"setVertices\",\n        value: function setVertices(points, plane) {\n            var pointSet = points.toArray ? points.toArray() : points;\n            this.plane = plane && plane.normal ? plane.dup() : _Plane.Plane.fromPoints(pointSet);\n            if (this.plane === null) {\n                return null;\n            }\n            this.vertices = new _LinkedList.LinkedList.Circular();\n            // Construct linked list of vertices. If each point is already a polygon\n            // vertex, we reference it rather than creating a new vertex.\n            var i = pointSet.length,\n                newVertex;\n            while (i--) {\n                newVertex = pointSet[i].isConvex ? pointSet[i] : new Polygon.Vertex(pointSet[i]);\n                this.vertices.prepend(new _LinkedList.LinkedList.Node(newVertex));\n            }\n            this.clearCache();\n            this.populateVertexTypeLists();\n            return this;\n        }\n    }, {\n        key: \"populateVertexTypeLists\",\n        value: function populateVertexTypeLists() {\n            this.convexVertices = new _LinkedList.LinkedList.Circular();\n            this.reflexVertices = new _LinkedList.LinkedList.Circular();\n            var self = this;\n            this.vertices.each(function (node) {\n                // Split vertices into convex / reflex groups. The\n                // LinkedList.Node class wraps each vertex so it can belong to\n                // many linked lists.\n                self[node.data.type(self) + 'Vertices'].append(new _LinkedList.LinkedList.Node(node.data));\n            });\n        }\n    }, {\n        key: \"copyVertices\",\n        value: function copyVertices() {\n            this.clearCache();\n            this.vertices.each(function (node) {\n                node.data = new Polygon.Vertex(node.data);\n            });\n            this.populateVertexTypeLists();\n        }\n    }, {\n        key: \"clearCache\",\n        value: function clearCache() {\n            this.cached = {\n                triangles: null,\n                surfaceIntegralElements: null\n            };\n        }\n    }, {\n        key: \"setCache\",\n        value: function setCache(key, value) {\n            this.cached[key] = value;\n            return value;\n        }\n    }, {\n        key: \"inspect\",\n        value: function inspect() {\n            var points = [];\n            this.vertices.each(function (node) {\n                points.push(node.data.inspect());\n            });\n            return points.join(' -> ');\n        }\n    }]);\n\n    return Polygon;\n}();\n//# sourceMappingURL=Polygon.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Vertex = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Vector2 = require(\"./Vector\");\n\nvar _PRECISION = require(\"./PRECISION\");\n\nvar _Polygon = require(\"./Polygon\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Vertex = exports.Vertex = function (_Vector) {\n    _inherits(Vertex, _Vector);\n\n    function Vertex(point) {\n        _classCallCheck(this, Vertex);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Vertex).call(this, point));\n\n        _this.setElements(point);\n        if (_this.elements.length === 2) {\n            _this.elements.push(0);\n        }\n        if (_this.elements.length !== 3) {\n            var _ret;\n\n            return _ret = null, _possibleConstructorReturn(_this, _ret);\n        }\n        return _this;\n    }\n\n    // Returns true iff the vertex's internal angle is 0 <= x < 180\n    // in the context of the given polygon object. Returns null if the\n    // vertex does not exist in the polygon.\n\n\n    _createClass(Vertex, [{\n        key: \"isConvex\",\n        value: function isConvex(polygon) {\n            var node = polygon.nodeFor(this);\n            if (node === null) {\n                return null;\n            }\n            var prev = node.prev.data,\n                next = node.next.data;\n            var A = next.subtract(this);\n            var B = prev.subtract(this);\n            var theta = A.angleFrom(B);\n            if (theta <= _PRECISION.PRECISION) {\n                return true;\n            }\n            if (Math.abs(theta - Math.PI) <= _PRECISION.PRECISION) {\n                return false;\n            }\n            return A.cross(B).dot(polygon.plane.normal) > 0;\n        }\n\n        // Returns true iff the vertex's internal angle is 180 <= x < 360\n\n    }, {\n        key: \"isReflex\",\n        value: function isReflex(polygon) {\n            var result = this.isConvex(polygon);\n            return result === null ? null : !result;\n        }\n    }, {\n        key: \"type\",\n        value: function type(polygon) {\n            var result = this.isConvex(polygon);\n            return result === null ? null : result ? 'convex' : 'reflex';\n        }\n    }]);\n\n    return Vertex;\n}(_Vector2.Vector);\n\n// Method for converting a set of arrays/vectors/whatever to a set of Vertex objects\n\n\nVertex.convert = function (points) {\n    var pointSet = points.toArray ? points.toArray() : points;\n    var list = [],\n        n = pointSet.length;\n    for (var i = 0; i < n; i++) {\n        list.push(new Vertex(pointSet[i]));\n    }\n    return list;\n};\n//# sourceMappingURL=Vertex.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.mht = mht;\nexports.makeLookAt = makeLookAt;\nexports.makeOrtho = makeOrtho;\nexports.makePerspective = makePerspective;\nexports.makeFrustum = makeFrustum;\n\nvar _Vector = require(\"./Vector\");\n\nvar _Matrix = require(\"./Matrix\");\n\n//From glUtils.js\nfunction mht(m) {\n    var s = \"\";\n    if (m.length == 16) {\n        for (var i = 0; i < 4; i++) {\n            s += \"<span style='font-family: monospace'>[\" + m[i * 4 + 0].toFixed(4) + \",\" + m[i * 4 + 1].toFixed(4) + \",\" + m[i * 4 + 2].toFixed(4) + \",\" + m[i * 4 + 3].toFixed(4) + \"]</span><br>\";\n        }\n    } else if (m.length == 9) {\n        for (var i = 0; i < 3; i++) {\n            s += \"<span style='font-family: monospace'>[\" + m[i * 3 + 0].toFixed(4) + \",\" + m[i * 3 + 1].toFixed(4) + \",\" + m[i * 3 + 2].toFixed(4) + \"]</font><br>\";\n        }\n    } else {\n        return m.toString();\n    }\n    return s;\n}\n\n//From glUtils.js\n//\n// gluLookAt\n//\nfunction makeLookAt(ex, ey, ez, cx, cy, cz, ux, uy, uz) {\n    var eye = new _Vector.Vector([ex, ey, ez]);\n    var center = new _Vector.Vector([cx, cy, cz]);\n    var up = new _Vector.Vector([ux, uy, uz]);\n\n    var mag;\n\n    var z = eye.subtract(center).toUnitVector();\n    var x = up.cross(z).toUnitVector();\n    var y = z.cross(x).toUnitVector();\n\n    var m = new _Matrix.Matrix([[x.e(1), x.e(2), x.e(3), 0], [y.e(1), y.e(2), y.e(3), 0], [z.e(1), z.e(2), z.e(3), 0], [0, 0, 0, 1]]);\n\n    var t = new _Matrix.Matrix([[1, 0, 0, -ex], [0, 1, 0, -ey], [0, 0, 1, -ez], [0, 0, 0, 1]]);\n    return m.x(t);\n}\n\n//From glUtils.js\n//\n// glOrtho\n//\nfunction makeOrtho(left, right, bottom, top, znear, zfar) {\n    var tx = -(right + left) / (right - left);\n    var ty = -(top + bottom) / (top - bottom);\n    var tz = -(zfar + znear) / (zfar - znear);\n\n    return new _Matrix.Matrix([[2 / (right - left), 0, 0, tx], [0, 2 / (top - bottom), 0, ty], [0, 0, -2 / (zfar - znear), tz], [0, 0, 0, 1]]);\n}\n\n//From glUtils.js\n//\n// gluPerspective\n//\nfunction makePerspective(fovy, aspect, znear, zfar) {\n    var ymax = znear * Math.tan(fovy * Math.PI / 360.0);\n    var ymin = -ymax;\n    var xmin = ymin * aspect;\n    var xmax = ymax * aspect;\n\n    return makeFrustum(xmin, xmax, ymin, ymax, znear, zfar);\n}\n\n//From glUtils.js\n//\n// glFrustum\n//\nfunction makeFrustum(left, right, bottom, top, znear, zfar) {\n    var X = 2 * znear / (right - left);\n    var Y = 2 * znear / (top - bottom);\n    var A = (right + left) / (right - left);\n    var B = (top + bottom) / (top - bottom);\n    var C = -(zfar + znear) / (zfar - znear);\n    var D = -2 * zfar * znear / (zfar - znear);\n\n    return new _Matrix.Matrix([[X, 0, A, 0], [0, Y, B, 0], [0, 0, C, D], [0, 0, -1, 0]]);\n}\n","\"use strict\";\n\n//Classes\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _CircularLinkedList = require(\"./CircularLinkedList\");\n\nObject.defineProperty(exports, \"CircularLinkedList\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _CircularLinkedList.CircularLinkedList;\n\t}\n});\n\nvar _Line = require(\"./Line\");\n\nObject.defineProperty(exports, \"Line\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _Line.Line;\n\t}\n});\n\nvar _LineSegment = require(\"./LineSegment\");\n\nObject.defineProperty(exports, \"LineSegment\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _LineSegment.LineSegment;\n\t}\n});\n\nvar _LinkedList = require(\"./LinkedList\");\n\nObject.defineProperty(exports, \"LinkedList\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _LinkedList.LinkedList;\n\t}\n});\n\nvar _LinkedListNode = require(\"./LinkedListNode\");\n\nObject.defineProperty(exports, \"LinkedListNode\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _LinkedListNode.LinkedListNode;\n\t}\n});\n\nvar _Matrix = require(\"./Matrix\");\n\nObject.defineProperty(exports, \"Matrix\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _Matrix.Matrix;\n\t}\n});\n\nvar _Plane = require(\"./Plane\");\n\nObject.defineProperty(exports, \"Plane\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _Plane.Plane;\n\t}\n});\n\nvar _Polygon = require(\"./Polygon\");\n\nObject.defineProperty(exports, \"Polygon\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _Polygon.Polygon;\n\t}\n});\n\nvar _Vector = require(\"./Vector\");\n\nObject.defineProperty(exports, \"Vector\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _Vector.Vector;\n\t}\n});\n\nvar _Vertex = require(\"./Vertex\");\n\nObject.defineProperty(exports, \"Vertex\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _Vertex.Vertex;\n\t}\n});\n\nvar _Utils = require(\"./Utils\");\n\nObject.defineProperty(exports, \"mht\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _Utils.mht;\n\t}\n});\nObject.defineProperty(exports, \"makeLookAt\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _Utils.makeLookAt;\n\t}\n});\nObject.defineProperty(exports, \"makePerspective\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _Utils.makePerspective;\n\t}\n});\nObject.defineProperty(exports, \"makeFrustum\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _Utils.makeFrustum;\n\t}\n});\nObject.defineProperty(exports, \"makeOrtho\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _Utils.makeOrtho;\n\t}\n});\n\nvar _PRECISION = require(\"./PRECISION\");\n\nObject.defineProperty(exports, \"PRECISION\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _PRECISION.PRECISION;\n\t}\n});\n//# sourceMappingURL=Sylvester.js.map\n","export default function(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n}\n","import colors from \"../colors.js\";\n\nexport default colors(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab\");\n","import {interpolateRgbBasis} from \"d3-interpolate\";\n\nexport default scheme => interpolateRgbBasis(scheme[scheme.length - 1]);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"d8b365f5f5f55ab4ac\",\n  \"a6611adfc27d80cdc1018571\",\n  \"a6611adfc27df5f5f580cdc1018571\",\n  \"8c510ad8b365f6e8c3c7eae55ab4ac01665e\",\n  \"8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e\",\n  \"8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e\",\n  \"8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e\",\n  \"5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30\",\n  \"5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"af8dc3f7f7f77fbf7b\",\n  \"7b3294c2a5cfa6dba0008837\",\n  \"7b3294c2a5cff7f7f7a6dba0008837\",\n  \"762a83af8dc3e7d4e8d9f0d37fbf7b1b7837\",\n  \"762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837\",\n  \"762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837\",\n  \"762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837\",\n  \"40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b\",\n  \"40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e9a3c9f7f7f7a1d76a\",\n  \"d01c8bf1b6dab8e1864dac26\",\n  \"d01c8bf1b6daf7f7f7b8e1864dac26\",\n  \"c51b7de9a3c9fde0efe6f5d0a1d76a4d9221\",\n  \"c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221\",\n  \"c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221\",\n  \"c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221\",\n  \"8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419\",\n  \"8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"998ec3f7f7f7f1a340\",\n  \"5e3c99b2abd2fdb863e66101\",\n  \"5e3c99b2abd2f7f7f7fdb863e66101\",\n  \"542788998ec3d8daebfee0b6f1a340b35806\",\n  \"542788998ec3d8daebf7f7f7fee0b6f1a340b35806\",\n  \"5427888073acb2abd2d8daebfee0b6fdb863e08214b35806\",\n  \"5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806\",\n  \"2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08\",\n  \"2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62f7f7f767a9cf\",\n  \"ca0020f4a58292c5de0571b0\",\n  \"ca0020f4a582f7f7f792c5de0571b0\",\n  \"b2182bef8a62fddbc7d1e5f067a9cf2166ac\",\n  \"b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac\",\n  \"b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac\",\n  \"b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac\",\n  \"67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061\",\n  \"67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62ffffff999999\",\n  \"ca0020f4a582bababa404040\",\n  \"ca0020f4a582ffffffbababa404040\",\n  \"b2182bef8a62fddbc7e0e0e09999994d4d4d\",\n  \"b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d\",\n  \"b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d\",\n  \"b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d\",\n  \"67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a\",\n  \"67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91bfdb\",\n  \"d7191cfdae61abd9e92c7bb6\",\n  \"d7191cfdae61ffffbfabd9e92c7bb6\",\n  \"d73027fc8d59fee090e0f3f891bfdb4575b4\",\n  \"d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4\",\n  \"d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4\",\n  \"d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4\",\n  \"a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695\",\n  \"a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91cf60\",\n  \"d7191cfdae61a6d96a1a9641\",\n  \"d7191cfdae61ffffbfa6d96a1a9641\",\n  \"d73027fc8d59fee08bd9ef8b91cf601a9850\",\n  \"d73027fc8d59fee08bffffbfd9ef8b91cf601a9850\",\n  \"d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850\",\n  \"d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850\",\n  \"a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837\",\n  \"a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf99d594\",\n  \"d7191cfdae61abdda42b83ba\",\n  \"d7191cfdae61ffffbfabdda42b83ba\",\n  \"d53e4ffc8d59fee08be6f59899d5943288bd\",\n  \"d53e4ffc8d59fee08bffffbfe6f59899d5943288bd\",\n  \"d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd\",\n  \"d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd\",\n  \"9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2\",\n  \"9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5f999d8c92ca25f\",\n  \"edf8fbb2e2e266c2a4238b45\",\n  \"edf8fbb2e2e266c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e0ecf49ebcda8856a7\",\n  \"edf8fbb3cde38c96c688419d\",\n  \"edf8fbb3cde38c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e0f3dba8ddb543a2ca\",\n  \"f0f9e8bae4bc7bccc42b8cbe\",\n  \"f0f9e8bae4bc7bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee8c8fdbb84e34a33\",\n  \"fef0d9fdcc8afc8d59d7301f\",\n  \"fef0d9fdcc8afc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ece2f0a6bddb1c9099\",\n  \"f6eff7bdc9e167a9cf02818a\",\n  \"f6eff7bdc9e167a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ece7f2a6bddb2b8cbe\",\n  \"f1eef6bdc9e174a9cf0570b0\",\n  \"f1eef6bdc9e174a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e7e1efc994c7dd1c77\",\n  \"f1eef6d7b5d8df65b0ce1256\",\n  \"f1eef6d7b5d8df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fde0ddfa9fb5c51b8a\",\n  \"feebe2fbb4b9f768a1ae017e\",\n  \"feebe2fbb4b9f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"edf8b17fcdbb2c7fb8\",\n  \"ffffcca1dab441b6c4225ea8\",\n  \"ffffcca1dab441b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"f7fcb9addd8e31a354\",\n  \"ffffccc2e69978c679238443\",\n  \"ffffccc2e69978c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fff7bcfec44fd95f0e\",\n  \"ffffd4fed98efe9929cc4c02\",\n  \"ffffd4fed98efe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ffeda0feb24cf03b20\",\n  \"ffffb2fecc5cfd8d3ce31a1c\",\n  \"ffffb2fecc5cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"deebf79ecae13182bd\",\n  \"eff3ffbdd7e76baed62171b5\",\n  \"eff3ffbdd7e76baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5e0a1d99b31a354\",\n  \"edf8e9bae4b374c476238b45\",\n  \"edf8e9bae4b374c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"f0f0f0bdbdbd636363\",\n  \"f7f7f7cccccc969696525252\",\n  \"f7f7f7cccccc969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"efedf5bcbddc756bb1\",\n  \"f2f0f7cbc9e29e9ac86a51a3\",\n  \"f2f0f7cbc9e29e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee0d2fc9272de2d26\",\n  \"fee5d9fcae91fb6a4acb181d\",\n  \"fee5d9fcae91fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee6cefdae6be6550d\",\n  \"feeddefdbe85fd8d3cd94701\",\n  \"feeddefdbe85fd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704\"\n).map(colors);\n\nexport default ramp(scheme);\n","export default function(t) {\n  t = Math.max(0, Math.min(1, t));\n  return \"rgb(\"\n      + Math.max(0, Math.min(255, Math.round(-4.54 - t * (35.34 - t * (2381.73 - t * (6402.7 - t * (7024.72 - t * 2710.57))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(32.49 + t * (170.73 + t * (52.82 - t * (131.46 - t * (176.58 - t * 67.37))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(81.24 + t * (442.36 - t * (2482.43 - t * (6167.24 - t * (6614.94 - t * 2475.67)))))))\n      + \")\";\n}\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport default interpolateCubehelixLong(cubehelix(300, 0.5, 0.0), cubehelix(-240, 0.5, 1.0));\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport var warm = interpolateCubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nexport var cool = interpolateCubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nvar c = cubehelix();\n\nexport default function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  c.h = 360 * t - 100;\n  c.s = 1.5 - 1.5 * ts;\n  c.l = 0.8 - 0.9 * ts;\n  return c + \"\";\n}\n","import {rgb} from \"d3-color\";\n\nvar c = rgb(),\n    pi_1_3 = Math.PI / 3,\n    pi_2_3 = Math.PI * 2 / 3;\n\nexport default function(t) {\n  var x;\n  t = (0.5 - t) * Math.PI;\n  c.r = 255 * (x = Math.sin(t)) * x;\n  c.g = 255 * (x = Math.sin(t + pi_1_3)) * x;\n  c.b = 255 * (x = Math.sin(t + pi_2_3)) * x;\n  return c + \"\";\n}\n","export default function(t) {\n  t = Math.max(0, Math.min(1, t));\n  return \"rgb(\"\n      + Math.max(0, Math.min(255, Math.round(34.61 + t * (1172.33 - t * (10793.56 - t * (33300.12 - t * (38394.49 - t * 14825.05))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(23.31 + t * (557.33 + t * (1225.33 - t * (3574.96 - t * (1073.77 + t * 707.56))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(27.2 + t * (3211.1 - t * (15327.97 - t * (27814 - t * (22569.18 - t * 6838.66)))))))\n      + \")\";\n}\n","import colors from \"../colors.js\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n","export default function ascending(a, b) {\n  return a == null || b == null ? NaN : a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function descending(a, b) {\n  return a == null || b == null ? NaN\n    : b < a ? -1\n    : b > a ? 1\n    : b >= a ? 0\n    : NaN;\n}\n","import ascending from \"./ascending.js\";\nimport descending from \"./descending.js\";\n\nexport default function bisector(f) {\n  let compare1, compare2, delta;\n\n  // If an accessor is specified, promote it to a comparator. In this case we\n  // can test whether the search value is (self-) comparable. We can’t do this\n  // for a comparator (except for specific, known comparators) because we can’t\n  // tell if the comparator is symmetric, and an asymmetric comparator can’t be\n  // used to test whether a single value is comparable.\n  if (f.length !== 2) {\n    compare1 = ascending;\n    compare2 = (d, x) => ascending(f(d), x);\n    delta = (d, x) => f(d) - x;\n  } else {\n    compare1 = f === ascending || f === descending ? f : zero;\n    compare2 = f;\n    delta = f;\n  }\n\n  function left(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function right(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) <= 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function center(a, x, lo = 0, hi = a.length) {\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction zero() {\n  return 0;\n}\n","export default function number(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","// https://github.com/python/cpython/blob/a74eea238f5baba15797e2e8b570d153bc8690a7/Modules/mathmodule.c#L1423\nexport class Adder {\n  constructor() {\n    this._partials = new Float64Array(32);\n    this._n = 0;\n  }\n  add(x) {\n    const p = this._partials;\n    let i = 0;\n    for (let j = 0; j < this._n && j < 32; j++) {\n      const y = p[j],\n        hi = x + y,\n        lo = Math.abs(x) < Math.abs(y) ? x - (hi - y) : y - (hi - x);\n      if (lo) p[i++] = lo;\n      x = hi;\n    }\n    p[i] = x;\n    this._n = i + 1;\n    return this;\n  }\n  valueOf() {\n    const p = this._partials;\n    let n = this._n, x, y, lo, hi = 0;\n    if (n > 0) {\n      hi = p[--n];\n      while (n > 0) {\n        x = hi;\n        y = p[--n];\n        hi = x + y;\n        lo = y - (hi - x);\n        if (lo) break;\n      }\n      if (n > 0 && ((lo < 0 && p[n - 1] < 0) || (lo > 0 && p[n - 1] > 0))) {\n        y = lo * 2;\n        x = hi + y;\n        if (y == x - hi) hi = x;\n      }\n    }\n    return hi;\n  }\n}\n\nexport function fsum(values, valueof) {\n  const adder = new Adder();\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        adder.add(value);\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        adder.add(value);\n      }\n    }\n  }\n  return +adder;\n}\n\nexport function fcumsum(values, valueof) {\n  const adder = new Adder();\n  let index = -1;\n  return Float64Array.from(values, valueof === undefined\n      ? v => adder.add(+v || 0)\n      : v => adder.add(+valueof(v, ++index, values) || 0)\n  );\n}\n","export class InternMap extends Map {\n  constructor(entries, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (entries != null) for (const [key, value] of entries) this.set(key, value);\n  }\n  get(key) {\n    return super.get(intern_get(this, key));\n  }\n  has(key) {\n    return super.has(intern_get(this, key));\n  }\n  set(key, value) {\n    return super.set(intern_set(this, key), value);\n  }\n  delete(key) {\n    return super.delete(intern_delete(this, key));\n  }\n}\n\nexport class InternSet extends Set {\n  constructor(values, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (values != null) for (const value of values) this.add(value);\n  }\n  has(value) {\n    return super.has(intern_get(this, value));\n  }\n  add(value) {\n    return super.add(intern_set(this, value));\n  }\n  delete(value) {\n    return super.delete(intern_delete(this, value));\n  }\n}\n\nfunction intern_get({_intern, _key}, value) {\n  const key = _key(value);\n  return _intern.has(key) ? _intern.get(key) : value;\n}\n\nfunction intern_set({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) return _intern.get(key);\n  _intern.set(key, value);\n  return value;\n}\n\nfunction intern_delete({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) {\n    value = _intern.get(key);\n    _intern.delete(key);\n  }\n  return value;\n}\n\nfunction keyof(value) {\n  return value !== null && typeof value === \"object\" ? value.valueOf() : value;\n}\n","import ascending from \"./ascending.js\";\nimport permute from \"./permute.js\";\n\nexport default function sort(values, ...F) {\n  if (typeof values[Symbol.iterator] !== \"function\") throw new TypeError(\"values is not iterable\");\n  values = Array.from(values);\n  let [f] = F;\n  if ((f && f.length !== 2) || F.length > 1) {\n    const index = Uint32Array.from(values, (d, i) => i);\n    if (F.length > 1) {\n      F = F.map(f => values.map(f));\n      index.sort((i, j) => {\n        for (const f of F) {\n          const c = ascendingDefined(f[i], f[j]);\n          if (c) return c;\n        }\n      });\n    } else {\n      f = values.map(f);\n      index.sort((i, j) => ascendingDefined(f[i], f[j]));\n    }\n    return permute(values, index);\n  }\n  return values.sort(compareDefined(f));\n}\n\nexport function compareDefined(compare = ascending) {\n  if (compare === ascending) return ascendingDefined;\n  if (typeof compare !== \"function\") throw new TypeError(\"compare is not a function\");\n  return (a, b) => {\n    const x = compare(a, b);\n    if (x || x === 0) return x;\n    return (compare(b, b) === 0) - (compare(a, a) === 0);\n  };\n}\n\nexport function ascendingDefined(a, b) {\n  return (a == null || !(a >= a)) - (b == null || !(b >= b)) || (a < b ? -1 : a > b ? 1 : 0);\n}\n","const e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nfunction tickSpec(start, stop, count) {\n  const step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log10(step)),\n      error = step / Math.pow(10, power),\n      factor = error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1;\n  let i1, i2, inc;\n  if (power < 0) {\n    inc = Math.pow(10, -power) / factor;\n    i1 = Math.round(start * inc);\n    i2 = Math.round(stop * inc);\n    if (i1 / inc < start) ++i1;\n    if (i2 / inc > stop) --i2;\n    inc = -inc;\n  } else {\n    inc = Math.pow(10, power) * factor;\n    i1 = Math.round(start / inc);\n    i2 = Math.round(stop / inc);\n    if (i1 * inc < start) ++i1;\n    if (i2 * inc > stop) --i2;\n  }\n  if (i2 < i1 && 0.5 <= count && count < 2) return tickSpec(start, stop, count * 2);\n  return [i1, i2, inc];\n}\n\nexport default function ticks(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  if (!(count > 0)) return [];\n  if (start === stop) return [start];\n  const reverse = stop < start, [i1, i2, inc] = reverse ? tickSpec(stop, start, count) : tickSpec(start, stop, count);\n  if (!(i2 >= i1)) return [];\n  const n = i2 - i1 + 1, ticks = new Array(n);\n  if (reverse) {\n    if (inc < 0) for (let i = 0; i < n; ++i) ticks[i] = (i2 - i) / -inc;\n    else for (let i = 0; i < n; ++i) ticks[i] = (i2 - i) * inc;\n  } else {\n    if (inc < 0) for (let i = 0; i < n; ++i) ticks[i] = (i1 + i) / -inc;\n    else for (let i = 0; i < n; ++i) ticks[i] = (i1 + i) * inc;\n  }\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  return tickSpec(start, stop, count)[2];\n}\n\nexport function tickStep(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  const reverse = stop < start, inc = reverse ? tickIncrement(stop, start, count) : tickIncrement(start, stop, count);\n  return (reverse ? -1 : 1) * (inc < 0 ? 1 / -inc : inc);\n}\n","export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n","export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n","import {ascendingDefined, compareDefined} from \"./sort.js\";\n\n// Based on https://github.com/mourner/quickselect\n// ISC license, Copyright 2018 Vladimir Agafonkin.\nexport default function quickselect(array, k, left = 0, right = Infinity, compare) {\n  k = Math.floor(k);\n  left = Math.floor(Math.max(0, left));\n  right = Math.floor(Math.min(array.length - 1, right));\n\n  if (!(left <= k && k <= right)) return array;\n\n  compare = compare === undefined ? ascendingDefined : compareDefined(compare);\n\n  while (right > left) {\n    if (right - left > 600) {\n      const n = right - left + 1;\n      const m = k - left + 1;\n      const z = Math.log(n);\n      const s = 0.5 * Math.exp(2 * z / 3);\n      const sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n      const newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n      const newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n      quickselect(array, k, newLeft, newRight, compare);\n    }\n\n    const t = array[k];\n    let i = left;\n    let j = right;\n\n    swap(array, left, k);\n    if (compare(array[right], t) > 0) swap(array, left, right);\n\n    while (i < j) {\n      swap(array, i, j), ++i, --j;\n      while (compare(array[i], t) < 0) ++i;\n      while (compare(array[j], t) > 0) --j;\n    }\n\n    if (compare(array[left], t) === 0) swap(array, left, j);\n    else ++j, swap(array, j, right);\n\n    if (j <= k) left = j + 1;\n    if (k <= j) right = j - 1;\n  }\n\n  return array;\n}\n\nfunction swap(array, i, j) {\n  const t = array[i];\n  array[i] = array[j];\n  array[j] = t;\n}\n","import max from \"./max.js\";\nimport maxIndex from \"./maxIndex.js\";\nimport min from \"./min.js\";\nimport minIndex from \"./minIndex.js\";\nimport quickselect from \"./quickselect.js\";\nimport number, {numbers} from \"./number.js\";\nimport {ascendingDefined} from \"./sort.js\";\nimport greatest from \"./greatest.js\";\n\nexport default function quantile(values, p, valueof) {\n  values = Float64Array.from(numbers(values, valueof));\n  if (!(n = values.length) || isNaN(p = +p)) return;\n  if (p <= 0 || n < 2) return min(values);\n  if (p >= 1) return max(values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = max(quickselect(values, i0).subarray(0, i0 + 1)),\n      value1 = min(values.subarray(i0 + 1));\n  return value0 + (value1 - value0) * (i - i0);\n}\n\nexport function quantileSorted(values, p, valueof = number) {\n  if (!(n = values.length) || isNaN(p = +p)) return;\n  if (p <= 0 || n < 2) return +valueof(values[0], 0, values);\n  if (p >= 1) return +valueof(values[n - 1], n - 1, values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = +valueof(values[i0], i0, values),\n      value1 = +valueof(values[i0 + 1], i0 + 1, values);\n  return value0 + (value1 - value0) * (i - i0);\n}\n\nexport function quantileIndex(values, p, valueof = number) {\n  if (isNaN(p = +p)) return;\n  numbers = Float64Array.from(values, (_, i) => number(valueof(values[i], i, values)));\n  if (p <= 0) return minIndex(numbers);\n  if (p >= 1) return maxIndex(numbers);\n  var numbers,\n      index = Uint32Array.from(values, (_, i) => i),\n      j = numbers.length - 1,\n      i = Math.floor(j * p);\n  quickselect(index, i, 0, j, (i, j) => ascendingDefined(numbers[i], numbers[j]));\n  i = greatest(index.subarray(0, i + 1), (i) => numbers[i]);\n  return i >= 0 ? i : -1;\n}\n","function* flatten(arrays) {\n  for (const array of arrays) {\n    yield* array;\n  }\n}\n\nexport default function merge(arrays) {\n  return Array.from(flatten(arrays));\n}\n","export default function range(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","import {InternMap} from \"d3-array\";\nimport {initRange} from \"./init.js\";\n\nexport const implicit = Symbol(\"implicit\");\n\nexport default function ordinal() {\n  var index = new InternMap(),\n      domain = [],\n      range = [],\n      unknown = implicit;\n\n  function scale(d) {\n    let i = index.get(d);\n    if (i === undefined) {\n      if (unknown !== implicit) return unknown;\n      index.set(d, i = domain.push(d) - 1);\n    }\n    return range[i % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = new InternMap();\n    for (const value of _) {\n      if (index.has(value)) continue;\n      index.set(value, domain.push(value) - 1);\n    }\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal(domain, range).unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n","import {range as sequence} from \"d3-array\";\nimport {initRange} from \"./init.js\";\nimport ordinal from \"./ordinal.js\";\n\nexport default function band() {\n  var scale = ordinal().unknown(undefined),\n      domain = scale.domain,\n      ordinalRange = scale.range,\n      r0 = 0,\n      r1 = 1,\n      step,\n      bandwidth,\n      round = false,\n      paddingInner = 0,\n      paddingOuter = 0,\n      align = 0.5;\n\n  delete scale.unknown;\n\n  function rescale() {\n    var n = domain().length,\n        reverse = r1 < r0,\n        start = reverse ? r1 : r0,\n        stop = reverse ? r0 : r1;\n    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n    if (round) step = Math.floor(step);\n    start += (stop - start - step * (n - paddingInner)) * align;\n    bandwidth = step * (1 - paddingInner);\n    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n    var values = sequence(n).map(function(i) { return start + step * i; });\n    return ordinalRange(reverse ? values.reverse() : values);\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? ([r0, r1] = _, r0 = +r0, r1 = +r1, rescale()) : [r0, r1];\n  };\n\n  scale.rangeRound = function(_) {\n    return [r0, r1] = _, r0 = +r0, r1 = +r1, round = true, rescale();\n  };\n\n  scale.bandwidth = function() {\n    return bandwidth;\n  };\n\n  scale.step = function() {\n    return step;\n  };\n\n  scale.round = function(_) {\n    return arguments.length ? (round = !!_, rescale()) : round;\n  };\n\n  scale.padding = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, paddingOuter = +_), rescale()) : paddingInner;\n  };\n\n  scale.paddingInner = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, _), rescale()) : paddingInner;\n  };\n\n  scale.paddingOuter = function(_) {\n    return arguments.length ? (paddingOuter = +_, rescale()) : paddingOuter;\n  };\n\n  scale.align = function(_) {\n    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n  };\n\n  scale.copy = function() {\n    return band(domain(), [r0, r1])\n        .round(round)\n        .paddingInner(paddingInner)\n        .paddingOuter(paddingOuter)\n        .align(align);\n  };\n\n  return initRange.apply(rescale(), arguments);\n}\n\nfunction pointish(scale) {\n  var copy = scale.copy;\n\n  scale.padding = scale.paddingOuter;\n  delete scale.paddingInner;\n  delete scale.paddingOuter;\n\n  scale.copy = function() {\n    return pointish(copy());\n  };\n\n  return scale;\n}\n\nexport function point() {\n  return pointish(band.apply(null, arguments).paddingInner(1));\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"−\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","import {interpolate, interpolateRound} from \"d3-interpolate\";\nimport {identity} from \"./continuous.js\";\nimport {initInterpolator} from \"./init.js\";\nimport {linearish} from \"./linear.js\";\nimport {loggish} from \"./log.js\";\nimport {symlogish} from \"./symlog.js\";\nimport {powish} from \"./pow.js\";\n\nfunction transformer() {\n  var x0 = 0,\n      x1 = 1,\n      t0,\n      t1,\n      k10,\n      transform,\n      interpolator = identity,\n      clamp = false,\n      unknown;\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : interpolator(k10 === 0 ? 0.5 : (x = (transform(x) - t0) * k10, clamp ? Math.max(0, Math.min(1, x)) : x));\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? ([x0, x1] = _, t0 = transform(x0 = +x0), t1 = transform(x1 = +x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0), scale) : [x0, x1];\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, scale) : clamp;\n  };\n\n  scale.interpolator = function(_) {\n    return arguments.length ? (interpolator = _, scale) : interpolator;\n  };\n\n  function range(interpolate) {\n    return function(_) {\n      var r0, r1;\n      return arguments.length ? ([r0, r1] = _, interpolator = interpolate(r0, r1), scale) : [interpolator(0), interpolator(1)];\n    };\n  }\n\n  scale.range = range(interpolate);\n\n  scale.rangeRound = range(interpolateRound);\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t) {\n    transform = t, t0 = t(x0), t1 = t(x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0);\n    return scale;\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .interpolator(source.interpolator())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport default function sequential() {\n  var scale = linearish(transformer()(identity));\n\n  scale.copy = function() {\n    return copy(scale, sequential());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialLog() {\n  var scale = loggish(transformer()).domain([1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, sequentialLog()).base(scale.base());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSymlog() {\n  var scale = symlogish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialSymlog()).constant(scale.constant());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialPow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialPow()).exponent(scale.exponent());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSqrt() {\n  return sequentialPow.apply(null, arguments).exponent(0.5);\n}\n","import {interpolate, interpolateRound, piecewise} from \"d3-interpolate\";\nimport {identity} from \"./continuous.js\";\nimport {initInterpolator} from \"./init.js\";\nimport {linearish} from \"./linear.js\";\nimport {loggish} from \"./log.js\";\nimport {copy} from \"./sequential.js\";\nimport {symlogish} from \"./symlog.js\";\nimport {powish} from \"./pow.js\";\n\nfunction transformer() {\n  var x0 = 0,\n      x1 = 0.5,\n      x2 = 1,\n      s = 1,\n      t0,\n      t1,\n      t2,\n      k10,\n      k21,\n      interpolator = identity,\n      transform,\n      clamp = false,\n      unknown;\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : (x = 0.5 + ((x = +transform(x)) - t1) * (s * x < s * t1 ? k10 : k21), interpolator(clamp ? Math.max(0, Math.min(1, x)) : x));\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? ([x0, x1, x2] = _, t0 = transform(x0 = +x0), t1 = transform(x1 = +x1), t2 = transform(x2 = +x2), k10 = t0 === t1 ? 0 : 0.5 / (t1 - t0), k21 = t1 === t2 ? 0 : 0.5 / (t2 - t1), s = t1 < t0 ? -1 : 1, scale) : [x0, x1, x2];\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, scale) : clamp;\n  };\n\n  scale.interpolator = function(_) {\n    return arguments.length ? (interpolator = _, scale) : interpolator;\n  };\n\n  function range(interpolate) {\n    return function(_) {\n      var r0, r1, r2;\n      return arguments.length ? ([r0, r1, r2] = _, interpolator = piecewise(interpolate, [r0, r1, r2]), scale) : [interpolator(0), interpolator(0.5), interpolator(1)];\n    };\n  }\n\n  scale.range = range(interpolate);\n\n  scale.rangeRound = range(interpolateRound);\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t) {\n    transform = t, t0 = t(x0), t1 = t(x1), t2 = t(x2), k10 = t0 === t1 ? 0 : 0.5 / (t1 - t0), k21 = t1 === t2 ? 0 : 0.5 / (t2 - t1), s = t1 < t0 ? -1 : 1;\n    return scale;\n  };\n}\n\nexport default function diverging() {\n  var scale = linearish(transformer()(identity));\n\n  scale.copy = function() {\n    return copy(scale, diverging());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function divergingLog() {\n  var scale = loggish(transformer()).domain([0.1, 1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, divergingLog()).base(scale.base());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function divergingSymlog() {\n  var scale = symlogish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, divergingSymlog()).constant(scale.constant());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function divergingPow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, divergingPow()).exponent(scale.exponent());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function divergingSqrt() {\n  return divergingPow.apply(null, arguments).exponent(0.5);\n}\n","\n//\n// TEXTURE SHADER FRAGMENT\n//\n\nlet textureFragmentShader = /*glsl*/`precision highp float; \n\nuniform sampler2D input_tex;\nuniform sampler2D lut_tex;  \nuniform float diverging;  \nvarying vec2 tex_coord;     \nvoid main(){\n\tfloat val = texture2D( input_tex, tex_coord ).r+0.5*diverging;\n\tvec4 color = texture2D( lut_tex, vec2(val, 0.5) );\n\tgl_FragColor = vec4(color.rgb,1.0);\n}\n`;\n\n\n// TERRAIN SHADER\nlet topographicFragmentShader = /*glsl*/`#extension GL_OES_standard_derivatives : enable\nprecision highp float;\n\n\nuniform sampler2D input_tex; // Elevation data\nuniform sampler2D lut_tex;   // Color map\nuniform float diverging;     // If diverging\nvarying vec2 tex_coord;      // Texture coordinate\n\n// Simple directional light properties\nvec3 lightDir = normalize(vec3(-0.5, 0.77777, 0.88888)); // Light direction\n// use the time of the day to calculate the light direction\n\nvec3 ambientColor = vec3(0.6, 0.6, 0.6); // Ambient light color\nvec3 lightColor = vec3(0.6, 0.6, 0.6); // Diffuse light color\n\nvoid main() {\n    float val = texture2D(input_tex, tex_coord).r + 0.5 * diverging;\n\n    // Approximate the gradient (slope) of the elevation\n    float dx = dFdx(val*1000.0); // Change in x direction\n    float dy = dFdy(val*1000.0); // Change in y direction\n\n    // Compute normal vector from gradient\n    vec3 normal = normalize(vec3(-dx, -dy, 1.0));\n\n    // Compute lighting\n    float diff = max(dot(normal, lightDir), 0.0); // Diffuse lighting\n    vec3 lighting = ambientColor + (lightColor * diff); // Total lighting\n\n    // Lookup the color from the LUT based on elevation\n    vec4 baseColor = texture2D(lut_tex, vec2(val, 0.5));\n\n    // Apply lighting to the base color\n    vec3 finalColor = baseColor.rgb * lighting;\n\n    gl_FragColor = vec4(finalColor, 1.0);\n}\n`;\n\n//\n// TEXTURE SHADER VERTEX\n//\n\nlet textureVertexShader = /*glsl*/`\n\nattribute vec2 vertex;   \nattribute vec2 texCoord; \nuniform mat4 uMVMatrix;  \nuniform mat4 uPMatrix;   \nvarying vec2 tex_coord;  \nvoid main(){\n\ttex_coord = texCoord; \n\tgl_Position = uPMatrix * uMVMatrix * vec4( vertex, 0.0, 1.0 ); \n}\n\n`;\n\n//\n// FRAGMENT SHADER\n//\n\n\nlet fragmentShader = /*glsl*/`precision highp float;\n\nvarying vec2 quad_coord; \nvarying float v_kernel_weight; \nuniform float kernel_weightScale; \nvoid main(void) { \n\tfloat len = length( quad_coord ); \n\tfloat nrm = v_kernel_weight * kernel_weightScale * 0.3989422804014327 * exp( -0.5*25.0*len*len ); \n\t// gl_FragColor = vec4(1,1,1,1.0);//vec4(nrm,nrm,nrm, nrm );\t\n\tgl_FragColor = vec4(nrm,nrm,nrm, nrm );\n\t// gl_FragColor = vec4(1,1,1, 1.0 ); \n}\n\n`;\n\n//\n// VERTEX SHADER\n//\n\n\nlet vertexShader = /*glsl*/`\n\nattribute vec3 position;\nattribute float kernel_weight;\n\nattribute vec2 offset;\n// attribute vec3 normal;\n\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\n\nuniform mat4 uMVMatrix; \nuniform mat4 uPMatrix; \nuniform float bandwidthScale; \nuniform vec2 bandwidth; \nvarying vec2 quad_coord; \nvarying float v_kernel_weight; \n\nvoid main(void) { \n\t// vec4 viewCenters = viewMatrix*vec4(position,1.0);\n\t// vec2 pos = (viewCenters).xy; \n\t// quad_coord = offset.xy;  \n\t// pos += bandwidthScale * bandwidth * quad_coord; \n\t// gl_Position = uPMatrix * uMVMatrix * vec4( pos, 0.0, 1.0); \n\t\n\n\n\tfloat BoxCorrection = 1.5;\n\tfloat fullSize = bandwidthScale * 5.5;\n\tvec3 cameraRight = normalize(vec3(viewMatrix[0][0], viewMatrix[1][0], viewMatrix[2][0]));\n\tvec3 cameraUp = normalize(vec3(viewMatrix[0][1], viewMatrix[1][1], viewMatrix[2][1]));\n\t// vec4 viewCenters = viewMatrix*vec4(position+BoxCorrection*fullSize*(cameraRight*offset.x + cameraUp*offset.y),1.0);\n\tvec4 viewCenters = viewMatrix*vec4(position,1.0);\n\tviewCenters.xy += bandwidthScale * bandwidth * offset.xy;\n\tquad_coord = offset.xy; \n\tv_kernel_weight = kernel_weight;\n\tgl_Position = projectionMatrix * viewCenters;\n} \n`;\n\nexport { fragmentShader, vertexShader, textureFragmentShader, textureVertexShader,topographicFragmentShader};\n\n","\nimport * as glm from \"gl-matrix\"\nimport {makeOrtho, Matrix} from \"sylvester-es6\"\nimport * as d3Chromatic from \"d3-scale-chromatic\"\nimport { rgb as d3rgb } from \"d3-color\"\nimport { scaleOrdinal as d3ScaleOrdinal, scaleSequential as d3ScaleSequential } from \"d3-scale\"\nimport * as glUtils from \"./webgl.js\"\nimport * as densityShaders from \"../shaders/density.js\"\n\n\n\n\n\nexport class DensityGL {\n\tconstructor(gl,width,height,qualityScale=0.10, topographic=false) {\n\t\tthis.gl = gl;\n\t\tthis.FBO;\n\t\tthis.lutShader;\n\t\tthis.shaderProgram;\n\t\tthis.mvMatrix;\n\t\tthis.pMatrix;\n\t\tthis.qualityScale=qualityScale;\n\t\tthis._divergingColormap = false;\n\t\tthis._topographic = false;\n\t\tif(topographic){\n\t\t\t// FOR TERRAIN SHADER\n\t\t\tlet ext = this.gl.getExtension('OES_standard_derivatives');\n\t\t\tif (!ext) {\n\t\t\t\t// The extension is not supported\n\t\t\t\tconsole.warning(\"OES_standard_derivatives extension not supported on this browser/device. Unable to use topographic mode.\");\n\t\t\t\tthis._topographic = false;\n\t\t\t}else{\n\t\t\t\tthis._topographic = true;\n\t\t\t}\n\t\t}\n\t\tthis.bandwidth = [5.5, 5.5];\n\t\tthis.bandwidthScale = 5.0;\n\t\tthis.kernel_weightScale = 0.5;\n\n\t\tthis.triangleVertexPositionBuffer;\n\t\tthis.squareVertexPositionBuffer;\n\n\t\tthis.PANEL_TEX_COORDS = [0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0];\n\t\tthis.PANEL_TEX_POS = [0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0];\n\t\tthis.QUAD_POS_BUFFER;\n\t\tthis.QUAD_COORD_BUFFER;\n\t\tthis.LUT_TEX;\n\n\t\t// DATASET Related:\n\t\tthis.DATA = null;\n\t\tthis.kernel_weights = null;\n\n\t\tthis.resize(width,height)\n\n\t\tthis.shaderProgram = this.createShader();\n\t\tthis.lutShader = this.createShader2Dlut();\n\t\tthis.initBuffers();\n\n\t\t// this.gl.clearColor(0.0, 0.0, 0.0, 1.0);\n\t\t// this.gl.clearDepth(1.0)\n\t\t// this.gl.disable(this.gl.DEPTH_TEST);\n\n\t\tthis.setColormap();\n\t}\n\n\n\n\tloadIdentity() {\n\t\tthis.mvMatrix = Matrix.I(4);\n\t}\n\n\tmultMatrix(m) {\n\t\tthis.mvMatrix = this.mvMatrix.x(m);\n\t}\n\n\tmvScale(s) {\n\t\tthis.mvMatrix.elements[0][0] *= s[0];\n\t\tthis.mvMatrix.elements[0][1] *= s[0];\n\t\tthis.mvMatrix.elements[0][2] *= s[0];\n\t\tthis.mvMatrix.elements[0][3] *= s[0];\n\n\t\tthis.mvMatrix.elements[1][0] *= s[1];\n\t\tthis.mvMatrix.elements[1][1] *= s[1];\n\t\tthis.mvMatrix.elements[1][2] *= s[1];\n\t\tthis.mvMatrix.elements[1][3] *= s[1];\n\n\t\tthis.mvMatrix.elements[2][0] *= s[2];\n\t\tthis.mvMatrix.elements[2][1] *= s[2];\n\t\tthis.mvMatrix.elements[2][2] *= s[2];\n\t\tthis.mvMatrix.elements[2][3] *= s[2];\n\t}\n\n\tmvTranslate(v) {\n\t\tvar m = Matrix.Translation($V([v[0], v[1], v[2]])).ensure4x4();\n\t\tthis.multMatrix(m);\n\t}\n\n\tperspective(fovy, aspect, znear, zfar) {\n\t\tthis.pMatrix = makePerspective(fovy, aspect, znear, zfar);\n\t}\n\n\tortho(xmin, xmax, ymin, ymax) {\n\t\tthis.pMatrix = makeOrtho(xmin, xmax, ymin, ymax, -1, 1);\n\t}\n\n\tsetMatrixUniforms(program) {\n\t\tthis.gl.uniformMatrix4fv(program.pMatrixUniform, false, new Float32Array(this.pMatrix.flatten()));\n\t\tthis.gl.uniformMatrix4fv(program.mvMatrixUniform, false, new Float32Array(this.mvMatrix.flatten()));\n\t}\n\n\tinitBuffers() {\n\t\tlet gl = this.gl;\n\t\tthis.triangleVertexPositionBuffer = gl.createBuffer();\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.triangleVertexPositionBuffer);\n\t\tvar vertices = [\n\t\t\t0.0, 1.0, 0.0, -1.0, -1.0, 0.0,\n\t\t\t1.0, -1.0, 0.0\n\t\t];\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\n\t\tthis.triangleVertexPositionBuffer.itemSize = 3;\n\t\tthis.triangleVertexPositionBuffer.numItems = 3;\n\n\t\tthis.squareVertexPositionBuffer = gl.createBuffer();\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.squareVertexPositionBuffer);\n\t\tvertices = [\n\t\t\t1.0, 1.0, 0.0, -1.0, 1.0, 0.0,\n\t\t\t1.0, -1.0, 0.0, -1.0, -1.0, 0.0\n\t\t];\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\n\t\tthis.squareVertexPositionBuffer.itemSize = 3;\n\t\tthis.squareVertexPositionBuffer.numItems = 4;\n\n\t\tthis.QUAD_POS_BUFFER = gl.createBuffer();\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.QUAD_POS_BUFFER);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.PANEL_TEX_POS), gl.STATIC_DRAW);\n\t\tthis.QUAD_POS_BUFFER.itemSize = 2;\n\t\tthis.QUAD_POS_BUFFER.numItems = 6;\n\n\t\tthis.QUAD_COORD_BUFFER = gl.createBuffer();\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.QUAD_COORD_BUFFER);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.PANEL_TEX_COORDS), gl.STATIC_DRAW);\n\t\tthis.QUAD_COORD_BUFFER.itemSize = 2;\n\t\tthis.QUAD_COORD_BUFFER.numItems = 6;\n\n\t\tthis.nodesGeometry = glUtils.makePlane(gl, false, false);\n\t\t\n\t}\n\n\n\tdrawScene(projectionMatrix,viewMatrix) {\n\t\tlet w = this.width;\n\t\tlet h = this.height;\n\n\t\tlet gl = this.gl;\n\n\t\tlet ext = gl.getExtension(\"ANGLE_instanced_arrays\");\n\t\t//current framebuffer\n\t\tlet currentFBO = gl.getParameter(gl.FRAMEBUFFER_BINDING);\n\n\t\t//currentViewport\n\t\tlet currentViewport = gl.getParameter(gl.VIEWPORT);\n\n\t\tgl.viewport(0, 0, w*this.qualityScale, h*this.qualityScale);\n\t\tthis.ortho(0, w, h, 0);\n\t\tthis.loadIdentity();\n\n\t\tthis.projectionMatrix = projectionMatrix;\n\t\tthis.viewMatrix = viewMatrix;\n\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this.FBO.id);\n\t\tgl.clearColor(0.0, 0.0, 0.0, 1.0);\n\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\t\tgl.enable(gl.BLEND);\n\t\tgl.blendFunc(gl.ONE, gl.ONE);\n\n\t\tgl.useProgram(this.shaderProgram);\n\t\tthis.setMatrixUniforms(this.shaderProgram);\n\t\t\n\t\t//gl.uniform2f(shaderProgram.bandwidthUniform, bandwidth );\n\t\tgl.uniform1f(this.shaderProgram.bandwidthScaleUniform, this.bandwidthScale);\n\t\t\n\t\t// console.log(this.projectionMatrix)\n\t\tgl.uniformMatrix4fv(this.shaderProgram.viewMatrixUniform,false, this.viewMatrix);\n\t\tgl.uniformMatrix4fv(this.shaderProgram.projectionMatrixUniform, false, this.projectionMatrix)\n\t\tgl.uniform2f(this.shaderProgram.bandwidthUniform, this.bandwidth[0], this.bandwidth[1]);\n\t\tgl.uniform1f(this.shaderProgram.kernel_weightScaleUniform, this.kernel_weightScale);\n\n\t\tgl.enableVertexAttribArray(this.shaderProgram.vertexPositionAttribute);\n\t\tgl.enableVertexAttribArray(this.shaderProgram.vertexKernelWeightAttribute);\n\t\tgl.enableVertexAttribArray(this.shaderProgram.vertexOffsetAttribute);\n\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesGeometry.vertexObject);\n\t\tgl.vertexAttribPointer(this.shaderProgram.vertexOffsetAttribute, 3, gl.FLOAT, false, 0, 0);\n\t\text.vertexAttribDivisorANGLE(this.shaderProgram.vertexOffsetAttribute, 0);\n\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.kernelWeightsBuffer);\n\t\tgl.vertexAttribPointer(this.shaderProgram.vertexKernelWeightAttribute, 1, gl.FLOAT, false, 0, 0);\n\t\text.vertexAttribDivisorANGLE(this.shaderProgram.vertexKernelWeightAttribute, 1);\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.positionsBuffer);\n\t\tgl.vertexAttribPointer(this.shaderProgram.vertexPositionAttribute, this.positionsBuffer.itemSize, gl.FLOAT, false, 0, 0);\n\t\text.vertexAttribDivisorANGLE(this.shaderProgram.vertexPositionAttribute, 1);\n\n\t\t// for (let i = 0; i < this.BUFFER_LIST.length; i += 1) {\n\t\t\t// let buffer = this.BUFFER_LIST[i];\n\n\n\t\t\t\n\t\t\t// gl.drawArrays(gl.TRIANGLES, 0, buffers[0].numItems);\n\t\t\t\n\t\t\t// gl.bindBuffer(gl.ARRAY_BUFFER, buffers[1]);\n\t\t\t// gl.vertexAttribPointer(this.shaderProgram.vertexOffsetAttribute, buffers[1].itemSize, gl.FLOAT, false, 0, 0);\n\t\t\t// gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\t\t\tif (this.nodesGeometry.indexObject) {\n\t\t\t\text.drawElementsInstancedANGLE(gl.TRIANGLES, this.nodesGeometry.numIndices, this.nodesGeometry.indexType, 0, this.positionsBuffer.numItems);\n\t\t\t} else {\n\t\t\t\text.drawArraysInstancedANGLE(gl.TRIANGLE_STRIP, 0, this.nodesGeometry.numIndices, this.positionsBuffer.numItems);\n\t\t\t}\n\t\t\text.vertexAttribDivisorANGLE(this.shaderProgram.vertexPositionAttribute, 0);\n\t\t\text.vertexAttribDivisorANGLE(this.shaderProgram.vertexKernelWeightAttribute, 0);\n\t\t\t\n\t\t// }\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, currentFBO);\n\t\tgl.disableVertexAttribArray(this.shaderProgram.vertexPositionAttribute);\n\t\tgl.disableVertexAttribArray(this.shaderProgram.vertexKernelWeightAttribute);\n\t\tgl.disableVertexAttribArray(this.shaderProgram.vertexOffsetAttribute);\n\t\tgl.disable(gl.BLEND);\n\t\t\n\t\tgl.viewport(currentViewport[0], currentViewport[1], currentViewport[2], currentViewport[3]);\n\t\t//*\n\t\tgl.activeTexture(gl.TEXTURE0);\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.FBO.tex);\n\t\tgl.activeTexture(gl.TEXTURE1);\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.LUT_TEX);\n\n\t\tgl.useProgram(this.lutShader);\n\t\tgl.enableVertexAttribArray(this.lutShader.vertexAttribute);\n\t\tgl.enableVertexAttribArray(this.lutShader.texCoordAttribute);\n\t\tgl.uniform1i(this.lutShader.input_texUniform, 0);\n\t\tgl.uniform1i(this.lutShader.lut_texUniform, 1);\n\t\tgl.uniform1f(this.lutShader.divergingUniform, +this._divergingColormap);\n\t\tthis.ortho(0, 1, 0, 1);\n\t\tthis.loadIdentity();\n\t\tthis.setMatrixUniforms(this.lutShader);\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.QUAD_POS_BUFFER);\n\t\tgl.vertexAttribPointer(this.lutShader.vertexAttribute, this.QUAD_POS_BUFFER.itemSize, gl.FLOAT, false, 0, 0);\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.QUAD_COORD_BUFFER);\n\t\tgl.vertexAttribPointer(this.lutShader.texCoordAttribute, this.QUAD_COORD_BUFFER.itemSize, gl.FLOAT, false, 0, 0);\n\t\t\n\t\tgl.drawArrays(gl.TRIANGLES, 0, this.QUAD_POS_BUFFER.numItems);\n\t\tgl.disableVertexAttribArray(this.lutShader.vertexAttribute);\n\t\tgl.disableVertexAttribArray(this.lutShader.texCoordAttribute);\n\t\t//*/\n\t}\n\n\tresize(width, height, force = false){\n\t\t// if properties are not the same, resize the canvas\n\t\tif (this.width !== width || this.height !== height || force) {\n\t\t\tif(width>0){\n\t\t\t\tthis.width = width;\n\t\t\t}\n\t\t\tif(height>0){\n\t\t\t\tthis.height = height;\n\t\t\t}\n\t\t\tthis.deleteFBO();\n\t\t\tthis.create_FBO();\n\t\t}\n\t}\n\n\tcreate_FBO() {\n\t\tlet fboWidth = this.width*this.qualityScale;\n\t\tlet fboHeight = this.height*this.qualityScale;\n\t\tlet gl = this.gl;\n\n\t\ttry {\n\t\t\tvar FloatingPointTextureExtensionSupported = gl.getExtension(\"OES_texture_float\");\n\t\t\tvar FloatingPointTextureExtensionSupportedLinear = gl.getExtension(\"OES_texture_float_linear\");\n\t\t} catch (err) {\n\t\t\tvar FloatingPointTextureExtensionSupported = false;\n\t\t\tvar FloatingPointTextureExtensionSupportedLinear = false;\n\t\t}\n\n\t\tlet FBO = {};\n\t\tFBO.id = gl.createFramebuffer();\n\t\tFBO.tex = gl.createTexture();\n\t\tgl.bindTexture(gl.TEXTURE_2D, FBO.tex);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n\t\t//FloatingPointTextureExtensionSupported = false;\n\t\tif (FloatingPointTextureExtensionSupported && FloatingPointTextureExtensionSupportedLinear) {\n\t\t\tthis.log_it(\"[ OK ] Floating point textures (OES_texture_float) is supported\");\n\t\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, fboWidth, fboHeight, 0, gl.RGBA, gl.FLOAT, null);\n\t\t} else {\n\t\t\tthis.log_it(\"[FAIL] Floating point textures (OES_texture_float) is <B>NOT</B> supported, falling back to 8 bit blending. OES_texture_float is supported in Chrome dev version.\");\n\t\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, fboWidth, fboHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\t\t}\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, FBO.id);\n\t\tgl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, FBO.tex, 0);\n\n\t\tlet res = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n\t\tif (res == gl.FRAMEBUFFER_COMPLETE)\n\t\t\tthis.log_it(\"[ OK ] Framebuffer Initialization\");\n\t\telse if (res == gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT)\n\t\t\tthis.log_it(\"[FAIL] Framebuffer Creation FAIL GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT <br/> \\\n              Not all framebuffer attachment points are framebuffer attachment complete.\");\n\t\telse if (res == gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS)\n\t\t\tthis.log_it(\"[FAIL] Framebuffer Creation FAIL GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS <br/> \\\n              Not all attached images have the same width and height. \");\n\t\telse if (res == gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT)\n\t\t\tthis.log_it(\"[FAIL] Framebuffer Creation FAIL GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT <br/> No images are attached to the framebuffer. \");\n\t\telse if (res == gl.FRAMEBUFFER_INCOMPLETE_UNSUPPORTED)\n\t\t\tthis.log_it(\"[FAIL] Framebuffer Creation FAIL GL_FRAMEBUFFER_INCOMPLETE_UNSUPPORTED <br/> The combination of internal formats of the attached images violates an implementation-dependent set of restrictions.\");\n\t\telse if (res == gl.FRAMEBUFFER_UNSUPPORTED)\n\t\t\tthis.log_it(\"[FAIL] Framebuffer Creation FAIL GL_FRAMEBUFFER_UNSUPPORTED <br/> \\\n            The combination of internal formats of the attached images violates an implementation-dependent set of restrictions.\");\n\t\telse this.log_it(\"[FAIL] Framebuffer Creation FAIL Unknown Error\");\n\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\tthis.FBO = FBO;\n\t}\n\n\tdeleteFBO() {\n\t\tif(this.FBO){\n\t\t\tlet gl = this.gl;\n\t\t\tgl.deleteFramebuffer(this.FBO.id);\n\t\t\tgl.deleteTexture(this.FBO.tex);\n\t\t}\n\t}\n\n\tsetBandwidth(value) {\n\t\tthis.bandwidthScale = value;\n\t}\n\n\tsetKernelWeightScale(value) {\n\t\tthis.kernel_weightScale = value;\n\t}\n\n\n\tsetColormap(interpolateFunction, colorCount = 0) {\n\t\tself = this;\n\t\tlet gl = this.gl;\n\t\tlet colormapTexture = gl.createTexture();\n\t\tgl.bindTexture(gl.TEXTURE_2D, colormapTexture);\n\t\tif (colorCount <= 0) {\n\t\t\tcolorCount = 1024;\n\t\t}\n\t\tif (!interpolateFunction) {\n\t\t\tinterpolateFunction = d3Chromatic.interpolateInferno;\n\t\t\t// interpolateFunction = d3Chromatic.interpolateCividis;\n\t\t\t// interpolateFunction = d3Chromatic.interpolateGreys;\n\t\t\t// interpolateFunction = d3Chromatic.interpolateGreens;\n\t\t\t\n\t\t}\n\t\tvar colormapValues = new Uint8Array(colorCount * 4);\n\t\tfor (let i = 0; i < colorCount; i++) {\n\t\t\tlet scale = i / (colorCount - 1);\n\t\t\tlet rgbColor = d3rgb(interpolateFunction(scale));\n\n\t\t\tcolormapValues[i * 4 + 0] = rgbColor.r;\n\t\t\tcolormapValues[i * 4 + 1] = rgbColor.g;\n\t\t\tcolormapValues[i * 4 + 2] = rgbColor.b;\n\t\t\tcolormapValues[i * 4 + 3] = 0.1;\n\t\t}\n\n\t\t//gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, colorCount, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, colormapValues);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t\tthis.LUT_TEX = colormapTexture;\n\t}\n\n\n\n\tsetData(newData) {\n\t\tthis.DATA = newData;\n\t\tthis.updateTheDatabuffer();\n\n\t}\n\n\tsetWeights(newWeights){\n\t\tthis.kernel_weights = newWeights;\n\t\tthis.updateTheKernelWeightsBuffer();\n\t\t// console.log(newWeights);\n\t}\n\n\n\tupdate_span() {\n\t\tlet xmin,ymin;\n\t\tlet xmax,ymax;\n\t\txmin = ymin = 9999999999999;\n\t\txmax = ymax = -9999999999999;\n\t\tfor (let i = 0; i < this.DATA.length; i += 1) {\n\t\t\tlet x = this.DATA[i][0];\n\t\t\tlet y = this.DATA[i][1];\n\t\t\txmin = Math.min(xmin, x);\n\t\t\txmax = Math.max(xmax, x);\n\t\t\tymin = Math.min(ymin, y);\n\t\t\tymax = Math.max(ymax, y);\n\t\t}\n\t\t//this.bandwidth[0] = (xmax - xmin) * 0.075;\n\t\t//this.bandwidth[1] = (ymax - ymin) * 0.075;\n\t\t// Please excuse this magic 100\n\t\t//this.kernel_weightScale = 100.0 / this.DATA.length;\n\t}\n\n\n\n\tupdateTheDatabuffer() {\n\t\tlet gl = this.gl;\n\n\t\t// var flat_array = [];\n\t\t// for (let i = 0; i < this.DATA.length; i += 1) {\n\t\t// \tlet offset = i * 3;\n\t\t// \tlet offset_offsets = i * 12;\n\t\t// \tflat_array[offset + 0] = this.DATA[i][0];\n\t\t// \tflat_array[offset + 1] = this.DATA[i][1];\n\t\t// \tflat_array[offset + 2] = 0.0;\n\t\t// }\n\n\t\tif(!this.positionsBuffer){\n\t\t\tthis.positionsBuffer = gl.createBuffer();\n\t\t\tthis.positionsBuffer.itemSize = 3;\n\t\t}\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.positionsBuffer);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, this.DATA, gl.DYNAMIC_DRAW);\n\t\tthis.positionsBuffer.numItems = this.DATA.length / 3;\n\n\t\t// this.BUFFER_LIST.pop();\n\t\t// this.BUFFER_LIST.push(scatter_vertices);\n\t\tthis.update_span();\n\t}\n\n\n\tupdateTheKernelWeightsBuffer() {\n\t\tlet gl = this.gl;\n\t\t\n\t\tif(!this.kernelWeightsBuffer){\n\t\t\tthis.kernelWeightsBuffer = gl.createBuffer();\n\t\t\tthis.kernelWeightsBuffer.itemSize = 1;\n\t\t}\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.kernelWeightsBuffer);\n\t\t// if\n\t\tgl.bufferData(gl.ARRAY_BUFFER, this.kernel_weights, gl.DYNAMIC_DRAW);\n\t\tthis.kernelWeightsBuffer.numItems = this.kernel_weights.length;\n\n\t\t// this.BUFFER_LIST.pop();\n\t\t// this.BUFFER_LIST.push(scatter_vertices);\n\t\t// this.update_span();\n\t}\n\t\n\tqualityScale(value) {\n\t\t// return quality scale if value is not provided otherwise set the quality scale\n\t\tif (value === undefined) {\n\t\t\treturn this.quality_scale;\n\t\t}\n\t\tif(this.quality_scale!=value){\n\t\t\tthis.quality_scale = value;\n\t\t\tthis.resize(0,0,true);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tdivergingColormap(value) {\n\t\t// return quality scale if value is not provided otherwise set the quality scale\n\t\tif (value === undefined) {\n\t\t\treturn this._divergingColormap;\n\t\t}\n\t\tif(this._divergingColormap!=value){\n\t\t\tthis._divergingColormap = value;\n\t\t\tconsole.log(\"DIVERGING COLORMAP\",value);\n\t\t}\n\t\treturn this;\n\t}\n\n\tcleanup() {\n\t\tlet gl = this.gl;\n\t\tgl.deleteBuffer(this.positionsBuffer);\n\t\tgl.deleteBuffer(this.kernelWeightsBuffer);\n\t\tgl.deleteTexture(this.LUT_TEX);\n\t\tgl.deleteProgram(this.program);\n\t\tgl.deleteFramebuffer(this.framebuffer);\n\t\tgl.deleteRenderbuffer(this.renderbuffer);\n\t\tgl.deleteTexture(this.texture);\n\t\t// gl.deleteVertexArray(this.vao);\n\n\t\tthis.positionsBuffer = null;\n\t\tthis.kernelWeightsBuffer = null;\n\t\tthis.LUT_TEX = null;\n\t\tthis.program = null;\n\t\tthis.framebuffer = null;\n\t\tthis.renderbuffer = null;\n\t\tthis.texture = null;\n\t\t// this.vao = null;\n\n\t\tthis.DATA = null;\n\t\tthis.kernel_weights = null;\n\t\tthis.BUFFER_LIST = null;\n\n\t\tthis.gl = null;\n\t}\n\n\n\tgetShader(code, type) {\n\t\tlet gl = this.gl;\n\t\tlet shader = gl.createShader(type);\n\t\tgl.shaderSource(shader, code);\n\t\tgl.compileShader(shader);\n\t\n\t\tif (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n\t\t\tconsole.log(gl.getShaderInfoLog(shader));\n\t\t\treturn null;\n\t\t}\n\t\treturn shader;\n\t}\n\t\n\t\n\tcreateShader() {\n\t\tlet gl = this.gl;\n\t\t//let fragmentShader = getShader(gl, \"shader-fs\");\n\t\t//let vertexShader =   getShader(gl,   \"shader-vs\");\n\t\tlet fragmentShader = this.getShader(densityShaders.fragmentShader, gl.FRAGMENT_SHADER);\n\t\tlet vertexShader = this.getShader(densityShaders.vertexShader, gl.VERTEX_SHADER);\n\t\n\t\tlet program = gl.createProgram();\n\t\tgl.attachShader(program, vertexShader);\n\t\tgl.attachShader(program, fragmentShader);\n\t\tgl.linkProgram(program);\n\t\n\t\tif (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n\t\t\talert(\"Could not initialise shaders\");\n\t\t}\n\t\tgl.useProgram(program);\n\t\tprogram.vertexPositionAttribute = gl.getAttribLocation(program, \"position\");\n\t\tprogram.vertexKernelWeightAttribute = gl.getAttribLocation(program, \"kernel_weight\");\n\t\tprogram.vertexOffsetAttribute = gl.getAttribLocation(program, \"offset\");\n\t\n\t\tprogram.pMatrixUniform = gl.getUniformLocation(program, \"uPMatrix\");\n\t\tprogram.mvMatrixUniform = gl.getUniformLocation(program, \"uMVMatrix\");\n\t\tprogram.projectionMatrixUniform = gl.getUniformLocation(program, \"projectionMatrix\");\n\t\tprogram.viewMatrixUniform = gl.getUniformLocation(program, \"viewMatrix\");\n\t\t\n\t\tprogram.bandwidthUniform = gl.getUniformLocation(program, \"bandwidth\");\n\t\tprogram.bandwidthScaleUniform = gl.getUniformLocation(program, \"bandwidthScale\");\n\t\tprogram.kernel_weightScaleUniform = gl.getUniformLocation(program, \"kernel_weightScale\");\n\t\n\t\treturn program;\n\t}\n\t\n\tcreateShader2Dlut() {\n\t\tlet gl = this.gl;\n\t\t//    let frags = getShader(gl, \"shader-tex-lut-frag\");\n\t\t//    let verts = getShader(gl, \"shader-tex-lut-vert\");\n\t\tlet frags;\n\t\tif(this._topographic){\n\t\t\tfrags = this.getShader(densityShaders.topographicFragmentShader, gl.FRAGMENT_SHADER);\n\t\t}else{\n\t\t\tfrags = this.getShader(densityShaders.textureFragmentShader, gl.FRAGMENT_SHADER);\n\t\t}\n\t\t\n\t\tlet verts = this.getShader(densityShaders.textureVertexShader, gl.VERTEX_SHADER);\n\t\n\t\tlet program = gl.createProgram();\n\t\tgl.attachShader(program, verts);\n\t\tgl.attachShader(program, frags);\n\t\tgl.linkProgram(program);\n\t\n\t\tif (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n\t\t\talert(\"Could not initialise shaders\");\n\t\t}\n\t\tgl.useProgram(program);\n\t\tprogram.vertexAttribute = gl.getAttribLocation(program, \"vertex\");\n\t\tprogram.texCoordAttribute = gl.getAttribLocation(program, \"texCoord\");\n\t\t//gl.enableVertexAttribArray(program.vertexAttribute);\n\t\t//gl.enableVertexAttribArray(program.texCoordAttribute);\n\t\n\t\tprogram.pMatrixUniform = gl.getUniformLocation(program, \"uPMatrix\");\n\t\tprogram.mvMatrixUniform = gl.getUniformLocation(program, \"uMVMatrix\");\n\t\tprogram.input_texUniform = gl.getUniformLocation(program, \"input_tex\");\n\t\tprogram.lut_texUniform = gl.getUniformLocation(program, \"lut_tex\");\n\t\tprogram.divergingUniform = gl.getUniformLocation(program, \"diverging\");\n\t\treturn program;\n\t}\n\t\n\t\n\tlog_it(what) {\n\t\tconsole.log(what);\n\t}\n\t\n}","/**\n * Prints tree horizontally\n * @param  {Node}                       root\n * @param  {Function(node:Node):String} [printNode]\n * @return {String}\n */\nexport function print (root, printNode = (n) => n.key) {\n  var out = [];\n  row(root, '', true, (v) => out.push(v), printNode);\n  return out.join('');\n}\n\n/**\n * Prints level of the tree\n * @param  {Node}                        root\n * @param  {String}                      prefix\n * @param  {Boolean}                     isTail\n * @param  {Function(in:string):void}    out\n * @param  {Function(node:Node):String}  printNode\n */\nfunction row (root, prefix, isTail, out, printNode) {\n  if (root) {\n    out(`${ prefix }${ isTail ? '└── ' : '├── ' }${ printNode(root) }\\n`);\n    const indent = prefix + (isTail ? '    ' : '│   ');\n    if (root.left)  row(root.left,  indent, false, out, printNode);\n    if (root.right) row(root.right, indent, true,  out, printNode);\n  }\n}\n\n/**\n * Is the tree balanced (none of the subtrees differ in height by more than 1)\n * @param  {Node}    root\n * @return {Boolean}\n */\nexport function isBalanced(root) {\n  if (root === null) return true; // If node is empty then return true\n\n  // Get the height of left and right sub trees\n  var lh = height(root.left);\n  var rh = height(root.right);\n\n  if (Math.abs(lh - rh) <= 1 &&\n      isBalanced(root.left)  &&\n      isBalanced(root.right)) return true;\n\n  // If we reach here then tree is not height-balanced\n  return false;\n}\n\n/**\n * The function Compute the 'height' of a tree.\n * Height is the number of nodes along the longest path\n * from the root node down to the farthest leaf node.\n *\n * @param  {Node} node\n * @return {Number}\n */\nfunction height(node) {\n  return node ? (1 + Math.max(height(node.left), height(node.right))) : 0;\n}\n\nexport function loadRecursive (parent, keys, values, start, end) {\n  const size = end - start;\n  if (size > 0) {\n    const middle = start + Math.floor(size / 2);\n    const key    = keys[middle];\n    const data   = values[middle];\n    const node   = { key, data, parent };\n    node.left    = loadRecursive(node, keys, values, start, middle);\n    node.right   = loadRecursive(node, keys, values, middle + 1, end);\n    return node;\n  }\n  return null;\n}\n\nexport function markBalance(node) {\n  if (node === null) return 0;\n  const lh = markBalance(node.left);\n  const rh = markBalance(node.right);\n\n  node.balanceFactor = lh - rh;\n  return Math.max(lh, rh) + 1;\n}\n\nexport function sort(keys, values, left, right, compare) {\n  if (left >= right) return;\n\n  // eslint-disable-next-line no-bitwise\n  const pivot = keys[(left + right) >> 1];\n  let i = left - 1;\n  let j = right + 1;\n\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    do i++; while (compare(keys[i], pivot) < 0);\n    do j--; while (compare(keys[j], pivot) > 0);\n    if (i >= j) break;\n\n    let tmp = keys[i];\n    keys[i] = keys[j];\n    keys[j] = tmp;\n\n    tmp = values[i];\n    values[i] = values[j];\n    values[j] = tmp;\n  }\n\n  sort(keys, values,  left,     j, compare);\n  sort(keys, values, j + 1, right, compare);\n}\n","import { print, isBalanced, loadRecursive, markBalance, sort } from './utils';\n\n// function createNode (parent, left, right, height, key, data) {\n//   return { parent, left, right, balanceFactor: height, key, data };\n// }\n\n/**\n * @typedef {{\n *   parent:        ?Node,\n *   left:          ?Node,\n *   right:         ?Node,\n *   balanceFactor: number,\n *   key:           Key,\n *   data:          Value\n * }} Node\n */\n\n/**\n * @typedef {*} Key\n */\n\n/**\n * @typedef {*} Value\n */\n\n/**\n * Default comparison function\n * @param {Key} a\n * @param {Key} b\n * @returns {number}\n */\nfunction DEFAULT_COMPARE (a, b) { return a > b ? 1 : a < b ? -1 : 0; }\n\n/**\n * Single left rotation\n * @param  {Node} node\n * @return {Node}\n */\nfunction rotateLeft (node) {\n  var rightNode = node.right;\n  node.right    = rightNode.left;\n\n  if (rightNode.left) rightNode.left.parent = node;\n\n  rightNode.parent = node.parent;\n  if (rightNode.parent) {\n    if (rightNode.parent.left === node) {\n      rightNode.parent.left = rightNode;\n    } else {\n      rightNode.parent.right = rightNode;\n    }\n  }\n\n  node.parent    = rightNode;\n  rightNode.left = node;\n\n  node.balanceFactor += 1;\n  if (rightNode.balanceFactor < 0) {\n    node.balanceFactor -= rightNode.balanceFactor;\n  }\n\n  rightNode.balanceFactor += 1;\n  if (node.balanceFactor > 0) {\n    rightNode.balanceFactor += node.balanceFactor;\n  }\n  return rightNode;\n}\n\nfunction rotateRight (node) {\n  var leftNode = node.left;\n  node.left = leftNode.right;\n  if (node.left) node.left.parent = node;\n\n  leftNode.parent = node.parent;\n  if (leftNode.parent) {\n    if (leftNode.parent.left === node) {\n      leftNode.parent.left = leftNode;\n    } else {\n      leftNode.parent.right = leftNode;\n    }\n  }\n\n  node.parent    = leftNode;\n  leftNode.right = node;\n\n  node.balanceFactor -= 1;\n  if (leftNode.balanceFactor > 0) {\n    node.balanceFactor -= leftNode.balanceFactor;\n  }\n\n  leftNode.balanceFactor -= 1;\n  if (node.balanceFactor < 0) {\n    leftNode.balanceFactor += node.balanceFactor;\n  }\n\n  return leftNode;\n}\n\n// function leftBalance (node) {\n//   if (node.left.balanceFactor === -1) rotateLeft(node.left);\n//   return rotateRight(node);\n// }\n\n// function rightBalance (node) {\n//   if (node.right.balanceFactor === 1) rotateRight(node.right);\n//   return rotateLeft(node);\n// }\n\nexport default class AVLTree {\n  /**\n   * Callback for comparator\n   * @callback comparatorCallback\n   * @param {Key} a\n   * @param {Key} b\n   * @returns {number}\n   */\n\n  /**\n   * @class AVLTree\n   * @constructor\n   * @param  {comparatorCallback} [comparator]\n   * @param  {boolean}            [noDuplicates=false] Disallow duplicates\n   */\n  constructor (comparator, noDuplicates = false) {\n    this._comparator = comparator || DEFAULT_COMPARE;\n    this._root = null;\n    this._size = 0;\n    this._noDuplicates = !!noDuplicates;\n  }\n\n  /**\n   * Clear the tree\n   * @return {AVLTree}\n   */\n  destroy() {\n    return this.clear();\n  }\n\n  /**\n   * Clear the tree\n   * @return {AVLTree}\n   */\n  clear() {\n    this._root = null;\n    this._size = 0;\n    return this;\n  }\n\n  /**\n   * Number of nodes\n   * @return {number}\n   */\n  get size () {\n    return this._size;\n  }\n\n  /**\n   * Whether the tree contains a node with the given key\n   * @param  {Key} key\n   * @return {boolean} true/false\n   */\n  contains (key) {\n    if (this._root)  {\n      var node       = this._root;\n      var comparator = this._comparator;\n      while (node)  {\n        var cmp = comparator(key, node.key);\n        if      (cmp === 0) return true;\n        else if (cmp < 0)   node = node.left;\n        else                node = node.right;\n      }\n    }\n    return false;\n  }\n\n  /* eslint-disable class-methods-use-this */\n\n  /**\n   * Successor node\n   * @param  {Node} node\n   * @return {?Node}\n   */\n  next (node) {\n    var successor = node;\n    if (successor) {\n      if (successor.right) {\n        successor = successor.right;\n        while (successor.left) successor = successor.left;\n      } else {\n        successor = node.parent;\n        while (successor && successor.right === node) {\n          node = successor; successor = successor.parent;\n        }\n      }\n    }\n    return successor;\n  }\n\n  /**\n   * Predecessor node\n   * @param  {Node} node\n   * @return {?Node}\n   */\n  prev (node) {\n    var predecessor = node;\n    if (predecessor) {\n      if (predecessor.left) {\n        predecessor = predecessor.left;\n        while (predecessor.right) predecessor = predecessor.right;\n      } else {\n        predecessor = node.parent;\n        while (predecessor && predecessor.left === node) {\n          node = predecessor;\n          predecessor = predecessor.parent;\n        }\n      }\n    }\n    return predecessor;\n  }\n  /* eslint-enable class-methods-use-this */\n\n  /**\n   * Callback for forEach\n   * @callback forEachCallback\n   * @param {Node} node\n   * @param {number} index\n   */\n\n  /**\n   * @param  {forEachCallback} callback\n   * @return {AVLTree}\n   */\n  forEach(callback) {\n    var current = this._root;\n    var s = [], done = false, i = 0;\n\n    while (!done) {\n      // Reach the left most Node of the current Node\n      if (current) {\n        // Place pointer to a tree node on the stack\n        // before traversing the node's left subtree\n        s.push(current);\n        current = current.left;\n      } else {\n        // BackTrack from the empty subtree and visit the Node\n        // at the top of the stack; however, if the stack is\n        // empty you are done\n        if (s.length > 0) {\n          current = s.pop();\n          callback(current, i++);\n\n          // We have visited the node and its left\n          // subtree. Now, it's right subtree's turn\n          current = current.right;\n        } else done = true;\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Walk key range from `low` to `high`. Stops if `fn` returns a value.\n   * @param  {Key}      low\n   * @param  {Key}      high\n   * @param  {Function} fn\n   * @param  {*?}       ctx\n   * @return {SplayTree}\n   */\n  range(low, high, fn, ctx) {\n    const Q = [];\n    const compare = this._comparator;\n    let node = this._root, cmp;\n\n    while (Q.length !== 0 || node) {\n      if (node) {\n        Q.push(node);\n        node = node.left;\n      } else {\n        node = Q.pop();\n        cmp = compare(node.key, high);\n        if (cmp > 0) {\n          break;\n        } else if (compare(node.key, low) >= 0) {\n          if (fn.call(ctx, node)) return this; // stop if smth is returned\n        }\n        node = node.right;\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Returns all keys in order\n   * @return {Array<Key>}\n   */\n  keys () {\n    var current = this._root;\n    var s = [], r = [], done = false;\n\n    while (!done) {\n      if (current) {\n        s.push(current);\n        current = current.left;\n      } else {\n        if (s.length > 0) {\n          current = s.pop();\n          r.push(current.key);\n          current = current.right;\n        } else done = true;\n      }\n    }\n    return r;\n  }\n\n  /**\n   * Returns `data` fields of all nodes in order.\n   * @return {Array<Value>}\n   */\n  values () {\n    var current = this._root;\n    var s = [], r = [], done = false;\n\n    while (!done) {\n      if (current) {\n        s.push(current);\n        current = current.left;\n      } else {\n        if (s.length > 0) {\n          current = s.pop();\n          r.push(current.data);\n          current = current.right;\n        } else done = true;\n      }\n    }\n    return r;\n  }\n\n  /**\n   * Returns node at given index\n   * @param  {number} index\n   * @return {?Node}\n   */\n  at (index) {\n    // removed after a consideration, more misleading than useful\n    // index = index % this.size;\n    // if (index < 0) index = this.size - index;\n\n    var current = this._root;\n    var s = [], done = false, i = 0;\n\n    while (!done) {\n      if (current) {\n        s.push(current);\n        current = current.left;\n      } else {\n        if (s.length > 0) {\n          current = s.pop();\n          if (i === index) return current;\n          i++;\n          current = current.right;\n        } else done = true;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Returns node with the minimum key\n   * @return {?Node}\n   */\n  minNode () {\n    var node = this._root;\n    if (!node) return null;\n    while (node.left) node = node.left;\n    return node;\n  }\n\n  /**\n   * Returns node with the max key\n   * @return {?Node}\n   */\n  maxNode () {\n    var node = this._root;\n    if (!node) return null;\n    while (node.right) node = node.right;\n    return node;\n  }\n\n  /**\n   * Min key\n   * @return {?Key}\n   */\n  min () {\n    var node = this._root;\n    if (!node) return null;\n    while (node.left) node = node.left;\n    return node.key;\n  }\n\n  /**\n   * Max key\n   * @return {?Key}\n   */\n  max () {\n    var node = this._root;\n    if (!node) return null;\n    while (node.right) node = node.right;\n    return node.key;\n  }\n\n  /**\n   * @return {boolean} true/false\n   */\n  isEmpty() {\n    return !this._root;\n  }\n\n  /**\n   * Removes and returns the node with smallest key\n   * @return {?Node}\n   */\n  pop () {\n    var node = this._root, returnValue = null;\n    if (node) {\n      while (node.left) node = node.left;\n      returnValue = { key: node.key, data: node.data };\n      this.remove(node.key);\n    }\n    return returnValue;\n  }\n\n  /**\n   * Removes and returns the node with highest key\n   * @return {?Node}\n   */\n  popMax () {\n    var node = this._root, returnValue = null;\n    if (node) {\n      while (node.right) node = node.right;\n      returnValue = { key: node.key, data: node.data };\n      this.remove(node.key);\n    }\n    return returnValue;\n  }\n\n  /**\n   * Find node by key\n   * @param  {Key} key\n   * @return {?Node}\n   */\n  find (key) {\n    var root = this._root;\n    // if (root === null)    return null;\n    // if (key === root.key) return root;\n\n    var subtree = root, cmp;\n    var compare = this._comparator;\n    while (subtree) {\n      cmp = compare(key, subtree.key);\n      if      (cmp === 0) return subtree;\n      else if (cmp < 0)   subtree = subtree.left;\n      else                subtree = subtree.right;\n    }\n\n    return null;\n  }\n\n  /**\n   * Insert a node into the tree\n   * @param  {Key} key\n   * @param  {Value} [data]\n   * @return {?Node}\n   */\n  insert (key, data) {\n    if (!this._root) {\n      this._root = {\n        parent: null, left: null, right: null, balanceFactor: 0,\n        key, data\n      };\n      this._size++;\n      return this._root;\n    }\n\n    var compare = this._comparator;\n    var node    = this._root;\n    var parent  = null;\n    var cmp     = 0;\n\n    if (this._noDuplicates) {\n      while (node) {\n        cmp = compare(key, node.key);\n        parent = node;\n        if      (cmp === 0) return null;\n        else if (cmp < 0)   node = node.left;\n        else                node = node.right;\n      }\n    } else {\n      while (node) {\n        cmp = compare(key, node.key);\n        parent = node;\n        if      (cmp <= 0)  node = node.left; //return null;\n        else                node = node.right;\n      }\n    }\n\n    var newNode = {\n      left: null,\n      right: null,\n      balanceFactor: 0,\n      parent, key, data\n    };\n    var newRoot;\n    if (cmp <= 0) parent.left  = newNode;\n    else         parent.right = newNode;\n\n    while (parent) {\n      cmp = compare(parent.key, key);\n      if (cmp < 0) parent.balanceFactor -= 1;\n      else         parent.balanceFactor += 1;\n\n      if        (parent.balanceFactor === 0) break;\n      else if   (parent.balanceFactor < -1) {\n        // inlined\n        //var newRoot = rightBalance(parent);\n        if (parent.right.balanceFactor === 1) rotateRight(parent.right);\n        newRoot = rotateLeft(parent);\n\n        if (parent === this._root) this._root = newRoot;\n        break;\n      } else if (parent.balanceFactor > 1) {\n        // inlined\n        // var newRoot = leftBalance(parent);\n        if (parent.left.balanceFactor === -1) rotateLeft(parent.left);\n        newRoot = rotateRight(parent);\n\n        if (parent === this._root) this._root = newRoot;\n        break;\n      }\n      parent = parent.parent;\n    }\n\n    this._size++;\n    return newNode;\n  }\n\n  /**\n   * Removes the node from the tree. If not found, returns null.\n   * @param  {Key} key\n   * @return {?Node}\n   */\n  remove (key) {\n    if (!this._root) return null;\n\n    var node = this._root;\n    var compare = this._comparator;\n    var cmp = 0;\n\n    while (node) {\n      cmp = compare(key, node.key);\n      if      (cmp === 0) break;\n      else if (cmp < 0)   node = node.left;\n      else                node = node.right;\n    }\n    if (!node) return null;\n\n    var returnValue = node.key;\n    var max, min;\n\n    if (node.left) {\n      max = node.left;\n\n      while (max.left || max.right) {\n        while (max.right) max = max.right;\n\n        node.key = max.key;\n        node.data = max.data;\n        if (max.left) {\n          node = max;\n          max = max.left;\n        }\n      }\n\n      node.key  = max.key;\n      node.data = max.data;\n      node = max;\n    }\n\n    if (node.right) {\n      min = node.right;\n\n      while (min.left || min.right) {\n        while (min.left) min = min.left;\n\n        node.key  = min.key;\n        node.data = min.data;\n        if (min.right) {\n          node = min;\n          min = min.right;\n        }\n      }\n\n      node.key  = min.key;\n      node.data = min.data;\n      node = min;\n    }\n\n    var parent = node.parent;\n    var pp     = node;\n    var newRoot;\n\n    while (parent) {\n      if (parent.left === pp) parent.balanceFactor -= 1;\n      else                    parent.balanceFactor += 1;\n\n      if        (parent.balanceFactor < -1) {\n        // inlined\n        //var newRoot = rightBalance(parent);\n        if (parent.right.balanceFactor === 1) rotateRight(parent.right);\n        newRoot = rotateLeft(parent);\n\n        if (parent === this._root) this._root = newRoot;\n        parent = newRoot;\n      } else if (parent.balanceFactor > 1) {\n        // inlined\n        // var newRoot = leftBalance(parent);\n        if (parent.left.balanceFactor === -1) rotateLeft(parent.left);\n        newRoot = rotateRight(parent);\n\n        if (parent === this._root) this._root = newRoot;\n        parent = newRoot;\n      }\n\n      if (parent.balanceFactor === -1 || parent.balanceFactor === 1) break;\n\n      pp     = parent;\n      parent = parent.parent;\n    }\n\n    if (node.parent) {\n      if (node.parent.left === node) node.parent.left  = null;\n      else                           node.parent.right = null;\n    }\n\n    if (node === this._root) this._root = null;\n\n    this._size--;\n    return returnValue;\n  }\n\n  /**\n   * Bulk-load items\n   * @param  {Array<Key>}  keys\n   * @param  {Array<Value>}  [values]\n   * @return {AVLTree}\n   */\n  load(keys = [], values = [], presort) {\n    if (this._size !== 0) throw new Error('bulk-load: tree is not empty');\n    const size = keys.length;\n    if (presort) sort(keys, values, 0, size - 1, this._comparator);\n    this._root = loadRecursive(null, keys, values, 0, size);\n    markBalance(this._root);\n    this._size = size;\n    return this;\n  }\n\n  /**\n   * Returns true if the tree is balanced\n   * @return {boolean}\n   */\n  isBalanced() {\n    return isBalanced(this._root);\n  }\n\n  /**\n   * String representation of the tree - primitive horizontal print-out\n   * @param  {Function(Node):string} [printNode]\n   * @return {string}\n   */\n  toString (printNode) {\n    return print(this._root, printNode);\n  }\n}\n\nAVLTree.default = AVLTree;\n","\nimport {default as AVLTree} from \"avl\";\n\n\nexport class SortedValueMap {\n\n\tconstructor(ascending = true) {\n\n\t\tthis.map = new Map();\n\t\tthis.ascending = ascending;\n\n\n\t\tif (this.ascending) {\n\t\t\tthis.tree = new AVLTree((a, b) => {\n\t\t\t\tif (a.key === b.key) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\tif (a.value === b.value) {\n\t\t\t\t\treturn a.key < b.key ? -1 : 1;\n\t\t\t\t}\n\t\t\t\treturn a.value - b.value;\n\t\t\t});\n\t\t}else{\n\t\t\tthis.tree = new AVLTree((a, b) => {\n\t\t\t\tif (a.key === b.key) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\tif (a.value === b.value) {\n\t\t\t\t\treturn a.key < b.key ? -1 : 1;\n\t\t\t\t}\n\t\t\t\treturn b.value - a.value;\n\t\t\t});\n\t\t}\n\t}\n\n\n\tset(key, value) {\n\t\tif (this.map.has(key)) {\n\t\t\tconst oldValue = this.map.get(key);\n\t\t\tthis.tree.remove({ key, value: oldValue });\n\t\t}\n\t\tthis.map.set(key, value);\n\t\tthis.tree.insert({ key, value });\n\t}\n\n\n\tdelete(key) {\n\t\tif(this.map.has(key)){\n\t\t\tconst value = this.map.get(key);\n\t\t\tthis.map.delete(key);\n\t\t\tthis.tree.remove({ key, value });\n\t\t}\n\t}\n\n\n\tget(key) {\n\t\treturn this.map.get(key);\n\t}\n\n\n\tgetSortedKeys() {\n\t\treturn this.tree.keys().map(node => node.key);\n\t}\n\n\tgetSortedPairs() {\n\t\treturn this.tree.keys().map(node => [node.key, node.value]);\n\t}\n}\n\n","\nimport * as d3Ease from \"d3-ease\";\nimport { select as d3Select } from \"d3-selection\";\nimport { zoom as d3Zoom, zoomIdentity as d3ZoomIdentity } from \"d3-zoom\";\nimport * as glm from \"gl-matrix\";\nimport * as glUtils from \"../utilities/webgl.js\";\nimport { Network } from \"./Network.js\";\nimport { HeliosScheduler } from \"./Scheduler.js\";\n// import { drag as d3Drag } from \"d3-drag\";\n// import { default as createGraph } from \"ngraph.graph\"\n// import { default as createLayout } from \"ngraph.forcelayout\"\nimport { default as Pica } from \"pica\";\nimport { layoutWorker as d3ForceLayoutWorker } from \"../layouts/d3force3dLayoutWorker.js\";\nimport * as edgesShaders from \"../shaders/edges.js\";\nimport * as nodesShaders from \"../shaders/nodes.js\";\nimport { DensityGL } from \"../utilities/DensityGL.js\";\nimport { SortedValueMap } from \"../utilities/SortedMap.js\";\n\nlet isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n\n// throttle function\nfunction _throttle(cb, delay = 250) {\n\tlet shouldWait = false\n\n\treturn (...args) => {\n\t\tif (shouldWait) return\n\n\t\tcb(...args)\n\t\tshouldWait = true\n\t\tsetTimeout(() => {\n\t\t\tshouldWait = false\n\t\t}, delay)\n\t}\n}\n\n/**\n * Helios object controls the network visualization visual parameters and layout\n */\nexport class Helios {\n\t// the class constructor\n\t/**\n\t * constructor description\n\t * @param {Object} config - The configuration object\n\t * @param {string} [config.elementID=\"helios\"] - The ID of the element to attach the canvas to\n\t * @param {boolean} [config.density=false] - Whether to display the density\n\t * @param {Object} [config.nodes={}] - The nodes object. should be a dictionary of node IDs and node attributes.\n\t * \t\t@see {@link Network#addNodes}\n\t * @param {Object[]} [config.edges=[]] - The edges array of objects. Each object should have source and target attributes.\n\t * \t\t@see {@link Network#addEdges}\n\t * @param {Network} [network=null] - Alternavely, a network object can be passed directly. If this is the case, the nodes and edges parameters are ignored.\n\t * \t\t@see {@link Network}\n\t * @param {boolean} [config.use2D=false] - Whether to use 2D mode\n\t * @param {boolean} [config.orthographic=false] - Whether to use orthographic projection instead of perspective\n\t * @param {boolean} [config.hyperbolic=false] - Whether to use hyperbolic mode\n\t * @param {boolean} [config.fastEdges=false] - Whether to use fast edges (edges have always 1 pixel width)\n\t * @param {boolean} [config.forceSupersample=false] - Whether to force supersampling (improves quality of the render even for high density displays)\n\t * @param {boolean} [config.autoStartLayout=true] - Whether to start the layout automatically\n\t * @param {boolean} [config.autoCleanup=true] - Whether to automatically cleanup helios if canvas or element is removed (useful for react and vue)\n\t * @param {Object} [config.webglOptions=defaults] - The webgl options object. See {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/getContext|getContext} for more information.\n\t * Defaults to \n\t * \n\t * \t{\n\t * \t\tantialias: true,\n\t * \t\tpowerPreference: \"high-performance\",\n\t * \t\tdesynchronized: true,\n\t * \t}\n\t * \n\t * \n\t * @example <caption>Example usage of the constructor.</caption>\n\t * // create a new helios object\n\t * let helios = new Helios({\n\t * \telementID: \"helios\",\n\t * \tnodes: {\n\t * \t\t\"0\": {label: \"Node 0\"},\n\t * \t\t\"1\": {label: \"Node 1\"},\n\t * \t\t\"2\": {label: \"Node 2\"},\n\t * \t\t\"3\": {label: \"Node 3\"},\n\t * \t},\n\t * \tedges: [\n\t * \t\t{source: \"0\", target: \"1\"},\n\t * \t\t{source: \"1\", target: \"2\"},\n\t * \t\t{source: \"2\", target: \"3\"},\n\t * \t\t{source: \"3\", target: \"0\"},\n\t * \t],\n\t * });\n\t * \n\t*/\n\tconstructor({\n\t\telement = null,\n\t\telementID = null,\n\t\tdensity = false,\n\t\tdensityScale = 0.1,\n\t\ttopographic = false,\n\t\tnodes = {},\n\t\tedges = [],\n\t\tnetwork = null,\n\t\tuse2D = false,\n\t\torthographic = false,\n\t\thyperbolic = false,\n\t\tfastEdges = false,\n\t\ttracking = true,\n\t\tfieldOfView = 70,\n\t\tforceSupersample = false,\n\t\tautoStartLayout = true,\n\t\tautoCleanup = true, // cleanup helios if canvas or element is removed\n\t\tbackgroundLayer = false,\n\t\twebglOptions = {},\n\t\tbehaviors = {},\n\t}) {\n\n\t\t/** @readonly */\n\t\tthis._element = null\n\t\tif (element == null) {\n\t\t\tthis._element = document.getElementById(elementID);\n\t\t} else {\n\t\t\tthis._element = element;\n\t\t}\n\t\tthis._element.innerHTML = '';\n\t\tconst containerPosition = getComputedStyle(this._element).position;\n\n\t\tif (containerPosition === 'static') {\n\t\t\tthis._element.style.position = 'relative';\n\t\t}\n\t\t// Setup the default layers [canvas, overlay and svgLayer]\n\n\t\tthis._createBackgroundLayer = backgroundLayer;\n\n\t\tthis._setupLayers();\n\n\t\t/**\n\t\t * @public \n\t\t * @readonly\n\t\t * @type {Network}\n\t\t * @description The network object\n\t\t * @example<caption>Example usage of the network object.</caption>\n\t\t * // get the network object\n\t\t * let network = helios.network;\n\t\t * \n\t\t */\n\t\tif (network == null) {\n\t\t\tthis.network = new Network(nodes, edges);\n\t\t} else {\n\t\t\tthis.network = network;\n\t\t}\n\n\t\tthis._settings = {}\n\n\t\tthis._camera = {}\n\n\t\tthis._status = {}\n\n\t\tthis._tracking = {}\n\n\t\tthis._behaviors = behaviors;\n\n\t\tthis._settings.autoCleanup = autoCleanup;\n\t\tthis._status.hasCleanup = false;\n\n\t\tthis._camera.rotationMatrix = glm.mat4.create();\n\t\tthis._camera.translatePosition = glm.vec3.create();\n\t\tthis._camera.lastTranslatePosition = glm.vec3.create();\n\t\tthis._camera.targetTranslatePosition = glm.vec3.create();\n\t\tthis._camera.lastPanX = 0;\n\t\tthis._camera.lastPanY = 0;\n\t\tthis._camera.panX = 0;\n\t\tthis._camera.panY = 0;\n\t\tthis._camera.transformX = 0;\n\t\tthis._camera.transformY = 0;\n\t\tthis._camera.transformZoom = 0;\n\t\tthis._camera.fieldOfView = fieldOfView;\n\t\tthis._camera.targetPanX = 0;\n\t\tthis._camera.targetPanY = 0;\n\t\tthis._camera.translateTime = 0;\n\t\tthis._camera.translateDuration = 0;\n\t\tthis._camera.cameraDistance = 500;\n\t\tthis._camera.zoomFactor = 1;\n\n\t\t// Mouse statuses\n\t\tthis._status.mouseDown = false;\n\t\tthis._status.lastMouseX = null;\n\t\tthis._status.lastMouseY = null;\n\t\tthis._status.redrawingFromMouseWheelEvent = false;\n\t\tthis._status.interacting = false;\n\n\n\t\tthis._settings.fastEdges = fastEdges;\n\t\tthis._settings.shadedNodes = false;\n\t\tthis._settings.forceSupersample = forceSupersample;\n\t\tthis._settings.pickingResolutionRatio = 0.25;\n\n\n\t\tthis._tracking.maxPixels = 20000;\n\t\tthis._tracking.bufferEnabled = tracking;\n\t\tthis._tracking.buffer = null;\n\t\tthis._tracking.bufferTexture = null;\n\t\tthis._tracking.bufferPixels = null;\n\t\tthis._tracking.nodeDataMinimumUpdateInterval = 200;\n\t\tthis._tracking.nodeMinimumUpdateInterval = 1000 / 30;\n\t\tthis._tracking.trackers = {};\n\n\n\n\t\tthis._updateTrackerNodesDataThrottle = _throttle(() => {\n\t\t\tthis._updateTrackerNodesData();\n\t\t}, this._tracking.nodeDataMinimumUpdateInterval);\n\n\t\tthis._lastCanvasDimensions = [this._canvasElement.clientWidth, this._canvasElement.clientHeight];\n\n\t\tthis._settings.semanticZoomExponent = 0.25;\n\n\n\t\t\n\t\tthis._settings.nodesGlobalOpacityScale = 1.0;\n\t\tthis._settings.nodesGlobalOpacityBase = 0.0;\n\n\t\tthis._settings.nodesGlobalSizeScale = 1.0;\n\t\tthis._settings.nodesGlobalSizeBase = 0.0;\n\n\t\tthis._settings.edgesGlobalOpacityScale = 1.0;\n\t\tthis._settings.edgesGlobalOpacityBase = 0.0;\n\n\t\tthis._settings.edgesGlobalWidthScale = 0.25;\n\t\tthis._settings.edgesGlobalWidthBase = 0.0;\n\n\t\tthis._settings.nodesGlobalOutlineWidthScale = 1.0;\n\t\tthis._settings.nodesGlobalOutlineWidthBase = 0.0;\n\n\t\t\n\t\tthis._settings.edgesColorsFromNodes = true;\n\t\tthis._settings.edgesWidthFromNodes = !this.network.weighted;\n\n\t\tthis._settings.backgroundColor = [0.5, 0.5, 0.5, 1.0];\n\t\tthis._settings.use2D = use2D || hyperbolic;\n\t\tthis._settings.orthographic = orthographic || use2D;\n\t\tthis._settings.hyperbolic = hyperbolic;\n\t\tthis._settings.autoStartLayout = autoStartLayout;\n\t\tthis._settings.useAdditiveBlending = false;\n\t\tthis._settings.pickeableEdges = new Set();\n\t\tthis._settings.webglOptions = webglOptions;\n\n\t\tthis._scheduler = new HeliosScheduler(this, { throttle: false });\n\n\t\tif (this._settings.use2D) {\n\t\t\tfor (let vertexIndex = 0; vertexIndex < this.network.positions.length; vertexIndex++) {\n\t\t\t\tthis.network.positions[vertexIndex * 3 + 2] = 0;\n\t\t\t}\n\t\t}\n\n\t\tthis._status.edgeIndicesUpdate = true;\n\n\t\tglm.mat4.identity(this._camera.rotationMatrix);\n\t\tthis.gl = glUtils.createWebGLContext(this._canvasElement, this._settings.webglOptions);\n\n\t\t\n\t\tif (density) {\n\t\t\tthis.densityMap = new DensityGL(this.gl, this._canvasElement.clientWidth, this._canvasElement.clientHeight, densityScale, topographic);\n\t\t\tthis.densityMap.setBandwidth(10);\n\t\t\tthis.densityMap.setKernelWeightScale(0.01);\n\t\t\tthis.densityPlot = true;\n\t\t}\n\n\t\tthis._centerNodes = [];\n\t\tthis._centerNodesTransition = null;\n\n\n\t\tthis.onNodeClickCallback = null;\n\t\tthis.onNodeDoubleClickCallback = null;\n\t\tthis.onNodeHoverStartCallback = null;\n\t\tthis.onNodeHoverMoveCallback = null;\n\t\tthis.onNodeHoverEndCallback = null;\n\n\t\tthis.onEdgeClickCallback = null;\n\t\tthis.onEdgeDoubleClickCallback = null;\n\t\tthis.onEdgeHoverStartCallback = null;\n\t\tthis.onEdgeHoverMoveCallback = null;\n\t\tthis.onEdgeHoverEndCallback = null;\n\n\n\t\tthis.onZoomCallback = null;\n\t\tthis.onRotationCallback = null;\n\t\tthis.onResizeCallback = null;\n\t\tthis.onLayoutStartCallback = null;\n\t\tthis.onLayoutStopCallback = null;\n\t\tthis.onDrawCallback = null;\n\t\tthis.onReadyCallback = null;\n\t\tthis.onCleanupCallback = null;\n\t\tthis._isReady = false;\n\n\n\n\t\tthis._onresizeEvent = (entries) => {\n\t\t\tif (this._canvasElement) {\n\t\t\t\tfor (let entry of entries) {\n\t\t\t\t\tthis._willResizeEvent(entry);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.resizeObserver = new ResizeObserver(this._onresizeEvent);\n\t\tthis.resizeObserver.observe(this._canvasElement);\n\n\n\t\tthis._initialize();\n\t}\n\n\trotateCamera(axes, angle) {\n\t\tlet rotationMatrix = glm.mat4.create();\n\t\tglm.mat4.fromRotation(rotationMatrix, angle, axes);\n\t\tglm.mat4.multiply(this._camera.rotationMatrix, rotationMatrix, this._camera.rotationMatrix);\n\t\t// this._updateCameraInterpolation(true);\n\t}\n\n\tstartOrbitCamera(axes, angleSpeed) {\n\t\tif(this._scheduler.hasTask(\"orbitCamera\")){\n\t\t\tthis.stopOrbitCamera();\n\t\t}\n\t\tthis._scheduler.schedule({\n\t\t\tname: \"orbitCamera\",\n\t\t\tcallback: (elapsedTime, task) => {\n\t\t\t\tthis.rotateCamera(axes, angleSpeed * elapsedTime);\n\t\t\t},\n\t\t\tdelay: 0,\n\t\t\trepeat: true,\n\t\t\tsynchronized: true,\n\t\t\timmediateUpdates: false,\n\t\t\tredraw: true,\n\t\t\tupdateNodesGeometry: false,\n\t\t\tupdateEdgesGeometry: false,\n\t\t});\n\t}\n\n\tstopOrbitCamera() {\n\t\tthis._scheduler.unschedule(\"orbitCamera\");\n\t}\n\t\t\n\n\n\t_setupLayers() {\n\t\tthis._canvasElement = document.createElement(\"canvas\");\n\t\t// make the canvas element fill the parent element\n\t\tthis._canvasElement.style.position = 'absolute';\n\t\tthis._canvasElement.style.width = '100%';\n\t\tthis._canvasElement.style.height = '100%';\n\t\tthis._canvasElement.style.display = 'block';\n\t\tthis._canvasElement.style.boxSizing = 'border-box';\n\t\tthis._element.appendChild(this._canvasElement);\n\n\t\tthis._svgLayer = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\t\t//SVG that takes the entire space of the canvas\n\t\tthis._svgLayer.style.position = 'absolute';\n\t\tthis._svgLayer.style.width = '100%';\n\t\tthis._svgLayer.style.height = '100%';\n\t\tthis._svgLayer.style.display = 'block';\n\t\tthis._svgLayer.style.boxSizing = 'border-box';\n\t\tthis._svgLayer.style.pointerEvents = 'none';\n\n\t\tif(this._createBackgroundLayer) {\n\t\t\tthis._backgroundSVGLayer = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\t\t\t//SVG that takes the entire space of the canvas\n\t\t\tthis._backgroundSVGLayer.style.position = 'absolute';\n\t\t\tthis._backgroundSVGLayer.style.width = '100%';\n\t\t\tthis._backgroundSVGLayer.style.height = '100%';\n\t\t\tthis._backgroundSVGLayer.style.display = 'block';\n\t\t\tthis._backgroundSVGLayer.style.boxSizing = 'border-box';\n\t\t\tthis._backgroundSVGLayer.style.pointerEvents = 'none';\n\t\t\t// this._backgroundSVGLayer.style.zIndex = '-1'; // make sure the background layer is behind everything\n\t\t\t// set background color to yellow\n\t\t\t// this._backgroundSVGLayer.style.backgroundColor = 'yellow'; // or any other color you want\n\t\t\t// add behind the canvas layer\n\t\t\tthis._element.insertBefore(this._backgroundSVGLayer, this._canvasElement);\n\t\t}\n\n\t\t// Do I need to setup the svg bounds?\n\t\tthis._element.appendChild(this._svgLayer);\n\n\t\tthis._canvasMargins = {\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t\tleft: 0,\n\t\t\tright: 0,\n\t\t};\n\n\t\tthis._overlay = document.createElement(\"div\");\n\t\tthis._overlay.style.position = 'absolute';\n\t\tthis._overlay.style.width = '100%';\n\t\tthis._overlay.style.height = '100%';\n\t\tthis._overlay.style.display = 'block';\n\t\tthis._overlay.style.boxSizing = 'border-box';\n\t\tthis._overlay.style.pointerEvents = 'none';\n\t\tthis._element.appendChild(this._overlay);\n\t}\n\t\n\n\t/**\n\t * Get the Helios scheduler.\n\t * @readonly\n\t * @type {HeliosScheduler}\n\t * @memberof HeliosCore\n\t * @instance\n\t */\n\tget scheduler() {\n\t\treturn this._scheduler;\n\t}\n\n\t/**\n\t * Get the SVG layer element.\n\t * @readonly\n\t * @type {Element}\n\t * @memberof HeliosCore\n\t * @instance\n\t */\n\tget svgLayer() {\n\t\treturn this._svgLayer;\n\t}\n\t/**\n\t * Get the background SVG layer element.\n\t * @readonly\n\t * @type {Element}\n\t * @memberof HeliosCore\n\t * @instance\n\t */\n\tget backgroundLayer() {\n\t\treturn this._backgroundSVGLayer;\n\t}\n\t/**\n\t * Get the overlay element.\n\t * @readonly\n\t * @type {Element}\n\t * @memberof HeliosCore\n\t * @instance\n\t */\n\tget overlay() {\n\t\treturn this._overlay;\n\t}\n\n\t/**\n\t * Get the main element.\n\t * @readonly\n\t * @type {Element}\n\t * @memberof HeliosCore\n\t * @instance\n\t */\n\tget element() {\n\t\treturn this._element;\n\t}\n\n\t/**\n\t * Get the canvas element.\n\t * @readonly\n\t * @type {HTMLCanvasElement}\n\t * @memberof HeliosCore\n\t * @instance\n\t */\n\tget canvasElement() {\n\t\treturn this._canvasElement;\n\t}\n\n\t// d3-like function Set/Get\n\t//zoom()\n\t//rotate()\n\t//pan()\n\t//highlightNodes()\n\t//centerNode()\n\n\n\t/** Initialize the webgl context \n\t * @private\n\t * @method _initialize\n\t * @memberof Helios\n\t * @instance\n\t * \n\t*/\n\t_initialize() {\n\t\tthis._setupDensity();\n\t\tthis._setupShaders();\n\t\tthis._buildNodesGeometry();\n\t\tthis._buildPickingBuffers();\n\t\tthis._buildTrackingBuffers();\n\t\tthis._buildEdgesGeometry();\n\t\tthis._willResizeEvent(0);\n\n\t\tthis._setupCamera();\n\t\tthis._setupEvents();\n\t\tthis._setupLayout();\n\n\t\tthis._setupBehaviors();\n\n\t\tthis._scheduler.start();\n\t\tthis.onReadyCallback?.(this);\n\t\t// this.redraw();\n\t\tthis.onReadyCallback = null;\n\n\t\tthis._isReady = true;\n\t}\n\n\t/** Setup the layout worker\n\t * @private\n\t * @method _setupLayout\n\t * @memberof Helios\n\t * @instance\n\t */\n\t_setupLayout() {\n\t\tthis._layoutLastUpdate = null;\n\t\tthis._alpha = 0.001;\n\t\t// this.layoutWorker = new Worker(new URL('../layouts/ngraphLayoutWorker.js', import.meta.url));\n\t\t// this.layoutWorker = new Worker(new URL('../layouts/d3force3dLayoutWorker.js', import.meta.url));\n\t\tthis.newPositions = this.network.positions.slice(0);\n\t\tlet onlayoutUpdate = (data) => {\n\t\t\tthis.newPositions = data.positions;\n\t\t\tif (!this._layoutLastUpdate) {\n\t\t\t\tthis._layoutLastUpdate = performance.now();\n\t\t\t}\n\t\t\tlet layoutElapsedTime = performance.now() - this._layoutLastUpdate;\n\t\t\tif (layoutElapsedTime < 20) {\n\t\t\t\tlayoutElapsedTime = 10;\n\t\t\t} else if (layoutElapsedTime > 2500) {\n\t\t\t\tlayoutElapsedTime = 2500;\n\t\t\t}\n\t\t\tthis._layoutLastUpdate = performance.now();\n\n\t\t\tthis._alpha = 1.0 / layoutElapsedTime;\n\n\t\t\tlet interpolatorTask = {\n\t\t\t\tname: \"1.1.positionInterpolator\",\n\t\t\t\tcallback: (elapsedTime, task) => {\n\t\t\t\t\tlet maxDisplacement = 0;\n\t\t\t\t\tlet maxBoundaries = 0;\n\t\t\t\t\tconst alpha = this._alpha;\n\t\t\t\t\tconst positionsLength = this.network.positions.length;\n\t\t\t\t\tconst newPositions = this.newPositions;\n\t\t\t\t\tconst previousPositions = this.network.positions;\n\t\t\t\t\tconst minDisplacementRatio = 0.0005;\n\t\t\t\t\t\n\t\t\t\t\t// console.log(layoutElapsedTime,elapsedTime,alpha)\n\t\t\t\t\tfor (let index = 0; index < positionsLength; index++) {\n\t\t\t\t\t\tconst displacement = newPositions[index] - previousPositions[index];\n\n\t\t\t\t\t\tpreviousPositions[index] += alpha * (displacement) * elapsedTime;\n\n\t\t\t\t\t\tmaxDisplacement = Math.max(Math.abs(displacement), maxDisplacement);\n\t\t\t\t\t\tmaxBoundaries = Math.max(Math.abs(newPositions[index]), maxBoundaries);\n\t\t\t\t\t};\n\n\t\t\t\t\tthis._updateCenterNodesPosition();\n\t\t\t\t\tthis._updateCameraInterpolation(true);\n\t\t\t\t\t// console.log(this.scheduler._averageFPS);\n\t\t\t\t\tif (maxDisplacement / maxBoundaries < minDisplacementRatio) {\n\t\t\t\t\t\t// console.log(maxDisplacement, maxBoundaries, maxDisplacement / maxBoundaries);\n\t\t\t\t\t\t// console.log(\"Interpolator stopped\");\n\t\t\t\t\t\tthis._scheduler.unschedule(\"1.1.positionInterpolator\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdelay: 0,\n\t\t\t\trepeat: true,\n\t\t\t\tsynchronized: true,\n\t\t\t\timmediateUpdates: false,\n\t\t\t\tredraw: true,\n\t\t\t\tupdateNodesGeometry: true,\n\t\t\t\tupdateEdgesGeometry: true,\n\t\t\t}\n\t\t\tthis._scheduler.schedule({\n\t\t\t\tname: \"1.0.positionChange\",\n\t\t\t\tcallback: (elapsedTime, task) => {\n\t\t\t\t\t// let maxDisplacement = 0;\n\t\t\t\t\t// for (let index = 0; index < this.network.positions.length; index++) {\n\t\t\t\t\t// \tlet displacement = this.newPositions[index] - this.network.positions[index];\n\t\t\t\t\t// \tmaxDisplacement = Math.max(Math.abs(displacement), maxDisplacement);\n\t\t\t\t\t// };\n\t\t\t\t\tthis._scheduler.schedule(interpolatorTask);\n\t\t\t\t\t// console.log(this.scheduler._averageFPS);\n\t\t\t\t},\n\t\t\t\tdelay: 0,\n\t\t\t\trepeat: false,\n\t\t\t\tsynchronized: true,\n\t\t\t\timmediateUpdates: false,\n\t\t\t\tredraw: false,\n\t\t\t\tupdateNodesGeometry: false,\n\t\t\t\tupdateEdgesGeometry: false,\n\t\t\t});\n\t\t};\n\n\t\tlet onLayoutStop = () => {\n\t\t\tthis.onLayoutStopCallback?.();\n\t\t}\n\n\t\tlet onLayoutStart = () => {\n\t\t\tthis._layoutLastUpdate = null;\n\t\t\tthis.onLayoutStartCallback?.();\n\t\t}\n\n\n\t\tthis.layoutWorker = new d3ForceLayoutWorker({\n\t\t\tnetwork: this.network,\n\t\t\tonUpdate: onlayoutUpdate,\n\t\t\tonStop: onLayoutStop,\n\t\t\tonStart: onLayoutStart,\n\t\t\tuse2D: this._settings.use2D\n\t\t});\n\t\tconsole.log(\"Set layout worker\", this.layoutWorker)\n\n\t\tif (this._settings.autoStartLayout) {\n\t\t\tthis.layoutWorker.start();\n\t\t\tconsole.log(\"Start\", this.layoutWorker)\n\t\t}\n\n\n\n\t}\n\n\t/** Setup the density map\n\t * @private\n\t * @method _setupDensity\n\t * @memberof Helios\n\t * @instance\n\t * \n\t */\n\t_setupDensity() {\n\n\t\tif (this.densityMap) {\n\t\t\tthis.densityWeights = new Float32Array(this.network.nodeCount);\n\t\t\tlet maxDegree = 1\n\t\t\tfor (let i = 0; i < this.network.nodeCount; i++) {\n\t\t\t\tlet degree = this.network.nodes[i].edges.length\n\t\t\t\tthis.densityWeights[i] = degree;\n\t\t\t\tmaxDegree = Math.max(maxDegree, degree);\n\t\t\t}\n\t\t\tfor (let i = 0; i < this.network.nodeCount; i++) {\n\t\t\t\tthis.densityWeights[i] /= maxDegree;\n\t\t\t}\n\t\t}\n\t}\n\n\t/** Setup behaviors\n\t * @private\n\t * @method _setupBehaviors\n\t * @memberof Helios\n\t * @instance\n\t */\n\t_setupBehaviors() {\n\t\tfor (let behaviorName in this.behaviors) {\n            const behaviorObj = this.behaviors[behaviorName];\n            if (typeof behaviorObj === 'function') {\n                behaviorObj(this); // Execute the callable function\n            } else {\n                behaviorObj.setup?.(this);\n            }\n        }\n\t}\n\n\n\t/**\n\t * Pauses the layout computation of the network visualization.\n\t * @public\n\t * @method pauseLayout\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @returns {this} Returns the current Helios instance for chaining\n\t * \n\t */\n\tpauseLayout() {\n\t\tthis.layoutWorker.pause();\n\t\tconsole.log(\"Pause\", this.layoutWorker)\n\t\treturn this;\n\t}\n\n\t/**\n\t * Resumes the layout computation of the network visualization after it has been paused.\n\t * @public\n\t * @method resumeLayout\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @returns {this} Returns the current Helios instance for chaining\n\t * \n\t */\n\tresumeLayout() {\n\t\tthis.layoutWorker.resume();\n\t\tconsole.log(\"Resume\", this.layoutWorker)\n\t\treturn this;\n\t}\n\n\t/**\n\t * Calls the appropriate event callback based on the given pickID, eventType, and event.\n\t * @private\n\t * @method _callEventFromPickID\n\t * @memberof Helios\n\t * @instance\n\t * @param {number} pickID - The unique identifier for the picked node or edge.\n\t * @param {string} eventType - The type of event to be triggered (e.g., click, doubleClick, hoverStart, hoverMove, hoverEnd).\n\t * @param {Event} event - The original DOM event associated with the interaction.\n\t * \n\t */\n\t_callEventFromPickID(pickID, eventType, event) {\n\t\tlet pickObject = null;\n\t\tlet isNode = true;\n\t\tif (pickID >= 0) {\n\t\t\tif (pickID < this.network.nodeCount) {\n\t\t\t\tisNode = true;\n\t\t\t\tpickObject = this.network.indexedNodes[pickID];\n\t\t\t} else if (pickID >= this.network.nodeCount) {\n\t\t\t\tlet edgeIndex = pickID - this.network.nodeCount;\n\t\t\t\tif (edgeIndex < this.network.indexedEdges.length / 2) {\n\t\t\t\t\tlet edge = {\n\t\t\t\t\t\t\"source\": this.network.indexedNodes[this.network.indexedEdges[2 * edgeIndex]],\n\t\t\t\t\t\t\"target\": this.network.indexedNodes[this.network.indexedEdges[2 * edgeIndex + 1]],\n\t\t\t\t\t\t\"index\": edgeIndex\n\t\t\t\t\t}\n\t\t\t\t\tisNode = false;\n\t\t\t\t\tpickObject = edge;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// if(eventType!=\"hoverMove\"){\n\t\t// \tconsole.log({\n\t\t// \t\tisNode: isNode,\n\t\t// \t\teventType: eventType,\n\t\t// \t\tpickObject: pickObject,\n\t\t// \t})\n\t\t// }\n\t\tif (pickObject) {\n\t\t\tswitch (eventType) {\n\t\t\t\tcase \"click\": {\n\t\t\t\t\tif (isNode) {\n\t\t\t\t\t\tthis.onNodeClickCallback?.(pickObject, event);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.onEdgeClickCallback?.(pickObject, event);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"doubleClick\": {\n\t\t\t\t\tif (isNode) {\n\t\t\t\t\t\tthis.onNodeDoubleClickCallback?.(pickObject, event);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.onEdgeDoubleClickCallback?.(pickObject, event);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"hoverStart\": {\n\t\t\t\t\tif (isNode) {\n\t\t\t\t\t\tthis.onNodeHoverStartCallback?.(pickObject, event);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.onEdgeHoverStartCallback?.(pickObject, event);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"hoverMove\": {\n\t\t\t\t\tif (isNode) {\n\t\t\t\t\t\tthis.onNodeHoverMoveCallback?.(pickObject, event);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.onEdgeHoverMoveCallback?.(pickObject, event);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"hoverEnd\": {\n\t\t\t\t\tif (isNode) {\n\t\t\t\t\t\tthis.onNodeHoverEndCallback?.(pickObject, event);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.onEdgeHoverEndCallback?.(pickObject, event);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Sets up event listeners for user interactions such as click, double-click, and hover events.\n\t * @private\n\t * @method _setupEvents\n\t * @memberof Helios\n\t * @instance\n\t * \n\t */\n\t_setupEvents() {\n\t\tthis._status.lastMouseX = -1;\n\t\tthis._status.lastMouseY = -1;\n\n\t\tthis.currentHoverIndex = -1;\n\n\t\tif (this._settings.autoCleanup) {\n\t\t\tthis._mutationObserver = new MutationObserver((events) => {\n\t\t\t\tfor (let index = 0; index < events.length; index++) {\n\t\t\t\t\tlet event = events[index];\n\t\t\t\t\tif (event.type == \"childList\") {\n\t\t\t\t\t\tif (event.removedNodes.length > 0) {\n\t\t\t\t\t\t\tfor (let index = 0; index < event.removedNodes.length; index++) {\n\t\t\t\t\t\t\t\tlet element = event.removedNodes[index];\n\t\t\t\t\t\t\t\tif (element == this._canvasElement || element == this._element) {\n\t\t\t\t\t\t\t\t\tthis._mutationObserver.disconnect();\n\t\t\t\t\t\t\t\t\tthis.cleanup();\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// if (element.removedNodes.length > 0) {\n\t\t\t\t// \tconsole.log(\"Element removed\");\n\t\t\t\t// \tthis._mutationObserver.disconnect();\n\t\t\t\t// \tthis.cleanup();\n\t\t\t\t// }\n\t\t\t});\n\n\t\t\tthis._mutationObserver.observe(this._element, { childList: true });\n\t\t\tthis._mutationObserver.observe(this._element.parentNode, { childList: true });\n\t\t}\n\n\t\t//Event listeners\n\t\tthis._clickEventListener = (event) => {\n\t\t\tconst rect = this._canvasElement.getBoundingClientRect();\n\n\t\t\tthis._status.lastMouseX = event.clientX;\n\t\t\tthis._status.lastMouseY = event.clientY;\n\t\t\tconst pickID = this.pickPoint(this._status.lastMouseX - rect.left, this._status.lastMouseY - rect.top);\n\t\t\tif (pickID >= 0) {\n\t\t\t\tthis._callEventFromPickID(pickID, \"click\", event);\n\t\t\t} else {\n\t\t\t\tthis.onNodeClickCallback?.(null, event);\n\t\t\t\tthis.onEdgeClickCallback?.(null, event);\n\t\t\t}\n\t\t};\n\n\t\tthis._doubleClickEventListener = (event) => {\n\t\t\tconst rect = this._canvasElement.getBoundingClientRect();\n\n\t\t\tthis._status.lastMouseX = event.clientX;\n\t\t\tthis._status.lastMouseY = event.clientY;\n\t\t\tconst pickID = this.pickPoint(this._status.lastMouseX - rect.left, this._status.lastMouseY - rect.top);\n\t\t\tif (pickID >= 0) {\n\t\t\t\tthis._callEventFromPickID(pickID, \"doubleClick\", event);\n\t\t\t} else {\n\t\t\t\tthis.onNodeDoubleClickCallback?.(null, event);\n\t\t\t\tthis.onEdgeDoubleClickCallback?.(null, event);\n\t\t\t}\n\t\t};\n\n\t\tthis._hoverMoveEventListener = (event) => {\n\t\t\tthis._status.lastMouseX = event.clientX;\n\t\t\tthis._status.lastMouseY = event.clientY;\n\t\t\tthis.triggerHoverEvents(event);\n\t\t};\n\n\t\tthis._hoverLeaveEventListener = (event) => {\n\t\t\tif (this.currentHoverIndex >= 0) {\n\t\t\t\tthis._callEventFromPickID(this.currentHoverIndex, \"hoverEnd\", event);\n\t\t\t\tthis.currentHoverIndex = -1;\n\t\t\t\tthis._status.lastMouseX = -1;\n\t\t\t\tthis._status.lastMouseY = -1;\n\t\t\t}\n\t\t};\n\n\t\tthis._hoverLeaveWindowEventListener = (event) => {\n\t\t\tif (!event.relatedTarget && !event.toElement) {\n\t\t\t\tif (this.currentHoverIndex >= 0) {\n\t\t\t\t\tthis._callEventFromPickID(this.currentHoverIndex, \"hoverEnd\", event);\n\t\t\t\t\tthis.currentHoverIndex = -1;\n\t\t\t\t\tthis._status.lastMouseX = -1;\n\t\t\t\t\tthis._status.lastMouseY = -1;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// this.canvasElement.onclick = this._clickEventListener;\n\t\t// this.canvasElement.ondblclick = this._doubleClickEventListener;\n\n\t\tthis._canvasElement.addEventListener(\"click\", this._clickEventListener);\n\t\tthis._canvasElement.addEventListener(\"dblclick\", this._doubleClickEventListener);\n\n\t\tthis._canvasElement.addEventListener(\"mousemove\", this._hoverMoveEventListener);\n\t\tthis._canvasElement.addEventListener(\"mouseleave\", this._hoverLeaveEventListener);\n\t\tdocument.body.addEventListener(\"mouseout\", this._hoverLeaveWindowEventListener);\n\t}\n\n\t/**\n\t * Downloads the image data as a file with the specified filename, supersampling factor, and file format.\n\t * @private\n\t * @method _downloadImageData\n\t * @memberof Helios\n\t * @instance\n\t * @param {ImageData} imageData - The image data to be downloaded.\n\t * @param {string} filename - The name of the file to be downloaded.\n\t * @param {number} supersampleFactor - The supersampling factor for resizing the image.\n\t * @returns {Promise<void>} A Promise that resolves when the download is complete.\n\t */\n\tasync _downloadImageData(imageData, filename, supersampleFactor, scale = 1.0) {\n\t\t// let canvas = document.getElementById('SUPERCANVAS');\n\t\tlet pica = new Pica({\n\t\t\t// features:[\"all\"],\n\t\t})\n\t\tlet canvas = document.createElement('canvas');\n\t\tlet canvasFullSize = document.createElement('canvas');\n\t\tlet ctx = canvas.getContext('2d');\n\t\tlet ctxFullSize = canvasFullSize.getContext('2d');\n\t\tcanvasFullSize.width = imageData.width;\n\t\tcanvasFullSize.height = imageData.height;\n\t\tconsole.log(imageData.width, imageData.height, supersampleFactor, scale);\n\t\tcanvas.width = imageData.width / supersampleFactor;\n\t\tcanvas.height = imageData.height / supersampleFactor;\n\t\tctx.imageSmoothingEnabled = true;\n\t\tctxFullSize.imageSmoothingEnabled = true;\n\t\tif (typeof ctx.imageSmoothingQuality !== 'undefined') {\n\t\t\tctx.imageSmoothingQuality = 'high';\n\t\t}\n\t\tif (typeof ctxFullSize.imageSmoothingQuality !== 'undefined') {\n\t\t\tctxFullSize.imageSmoothingQuality = 'high';\n\t\t}\n\n\t\t// let dpr = window.devicePixelRatio || 1;\n\t\t// canvas.style.width =  canvas.width/dpr/10 + \"px\";\n\t\t// canvas.style.height = canvas.height/dpr/10 + \"px\";\n\n\n\t\tctxFullSize.putImageData(imageData, 0, 0);\n\t\tctxFullSize.transform(1, 0, 0, -1, 0, canvasFullSize.height)\n\t\tctxFullSize.globalCompositeOperation = \"copy\"; // if you have transparent pixels\n\t\tctxFullSize.drawImage(ctxFullSize.canvas, 0, 0);\n\t\tctxFullSize.globalCompositeOperation = \"source-over\"; // reset to default\n\n\t\tawait pica.resize(canvasFullSize, canvas, {\n\t\t\talpha: true,\n\t\t});\n\n\t\t// ctxFullSize.drawImage(canvasFullSize, 0, 0,canvasFullSize.width*0.5,canvasFullSize.height*0.5,0,0,\n\t\t// \timagedata.width/supersampleFactor,\n\t\t// \timagedata.height/supersampleFactor);\n\t\t// ctx.drawImage(canvasFullSize, 0, 0,canvasFullSize.width,canvasFullSize.height,0,0,\n\t\t// \timagedata.width/supersampleFactor,\n\t\t// \timagedata.height/supersampleFactor);\n\n\n\t\t// let image = new Image();\n\t\t// let imageSRC = canvas.toDataURL()\n\t\t// image.src = imageSRC;\n\t\tlet downloadLink = document.createElement('a');\n\t\t// console.log([\"CANVAS\",imageSRC]);\n\n\n\t\tif (isSafari) {\n\t\t\t// BUG in Safari\n\t\t\t// console.log(\"Workaround safari bug...\");\n\t\t\tcanvas.toDataURL();\n\t\t}\n\n\t\tdownloadLink.setAttribute('download', filename);\n\t\tlet blob = await pica.toBlob(canvas, \"image/png\");\n\t\tif (blob) {\n\t\t\tif (filename.endsWith(\"svg\")) {\n\t\t\t\t//Create offscreen\n\t\t\t\t// let svgText = `\n\t\t\t\t// <svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n\t\t\t\t// width=\"${canvas.width/scale}\" height=\"${canvas.height/scale}\"\n\t\t\t\t// >\n\t\t\t\t// <image\n\t\t\t\t// \t\twidth=\"${canvas.width/scale}\" height=\"${canvas.height/scale}\"\n\t\t\t\t// \t\txlink:href=\"${canvas.toDataURL()}\"\n\t\t\t\t// \t\t/>\n\t\t\t\t// `;\n\t\t\t\t// generate this svg using code\n\t\t\t\tlet svgText =\n\t\t\t\t\t`<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" ` +\n\t\t\t\t\t` width=\"${canvas.width / scale}\" height=\"${canvas.height / scale}\"` +\n\t\t\t\t\t` viewBox=\"0 0 ${canvas.width / scale} ${canvas.height / scale}\"` +\n\t\t\t\t\t` >` +\n\t\t\t\t\t`<image width=\"${canvas.width / scale}\" height=\"${canvas.height / scale}\" xlink:href=\"${canvas.toDataURL()}\" />`;\n\n\t\t\t\tlet svgLayerContent = this._svgLayer.innerHTML;\n\t\t\t\tsvgText += svgLayerContent;\n\n\t\t\t\tsvgText += `</svg>`;\n\t\t\t\tdownloadLink.setAttribute('download', filename);\n\t\t\t\tlet blobSVG = new Blob([svgText], { type: 'image/svg+xml' });\n\t\t\t\tlet url = URL.createObjectURL(blobSVG);\n\t\t\t\tdownloadLink.setAttribute('href', url);\n\t\t\t\tdownloadLink.click();\n\n\t\t\t} else {\n\t\t\t\tlet url = URL.createObjectURL(blob);\n\t\t\t\tdownloadLink.setAttribute('href', url);\n\t\t\t\tdownloadLink.click();\n\t\t\t}\n\t\t} else {\n\t\t\twindow.alert(`An error occured while trying to download the image. Please try again. (Error: blob is null.)`);\n\t\t\t// console.log(\"BLOB IS NULL\");\n\t\t}\n\n\t\t// if (filename.endsWith(\"svg\")) {\n\t\t// \tlet svgText = `\n\t\t// \t<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n\t\t// \twidth=\"${canvas.width}\" height=\"${canvas.width}\"\n\t\t// \t>\n\t\t// \t<image\n\t\t// \t\t\twidth=\"${canvas.width}\" height=\"${canvas.width}\"\n\t\t// \t\t\txlink:href=\"${canvas.toDataURL()}\"\n\t\t// \t\t\t/>\n\n\t\t// \t`;\n\t\t// \t// add contents of svgLayer to svgText without the svg tag\n\t\t// \tlet svgLayerContent = this.svgLayer.innerHTML;\n\t\t// \tsvgLayerContent = svgLayerContent.replace(/<svg[^>]*>/, \"\");\n\t\t// \tsvgLayerContent = svgLayerContent.replace(/<\\/svg>/, \"\");\n\t\t// \tsvgText += svgLayerContent;\n\n\t\t// \tsvgText+=`</svg>`;\n\t\t// \tdownloadLink.setAttribute('download', filename);\n\t\t// \tlet blob = new Blob([svgText], { type: 'image/svg+xml' });\n\t\t// \tlet url = URL.createObjectURL(blob);\n\t\t// \tdownloadLink.setAttribute('href', url);\n\t\t// \tdownloadLink.click();\n\t\t// } else if (false) {\n\t\t// \tdownloadLink.setAttribute('download', filename);\n\t\t// \tdownloadLink.setAttribute('href', canvas.toDataURL(\"image/png\").replace(\"image/png\", \"image/octet-stream\"));\n\t\t// \tdownloadLink.click();\n\t\t// } else {\n\n\t\t// \t// canvas.toBlob(function(blob) {\n\t\t// \t// \tconsole.log([\"CANVAS\",blob]);\n\t\t// \t// \tlet trials = 3;\n\t\t// \t// \tlet success = false;\n\t\t// \t// \tlet lastError = null;\n\t\t// \t// \twhile(trials>0 && !success){\n\t\t// \t// \t\t// FIXME: Safari BUG\n\t\t// \t// \t\ttry {\n\t\t// \t// \t\t\tlet url = URL.createObjectURL(blob);\n\t\t// \t// \t\t\tdownloadLink.setAttribute('href', url);\n\t\t// \t// \t\t\tdownloadLink.click();\n\t\t// \t// \t\t\tsuccess=true;\n\t\t// \t// \t\t} catch (error) {\n\t\t// \t// \t\t\tlastError = error;\n\t\t// \t// \t\t}\n\t\t// \t// \t\ttrials--;\n\t\t// \t// \t}\n\t\t// \t// \tif(!success){\n\t\t// \t// \t\twindow.alert(`An error occured while trying to download the image. Please try again. (Error: ${lastError})`)\n\t\t// \t// \t}\n\t\t// \t// });\n\t\t// }\n\t}\n\n\n\t/**\n\t * Returns the image data from the specified framebuffer.\n\t * @private\n\t * @method _framebufferImage\n\t * @memberof Helios\n\t * @instance\n\t * @param {WebGLFramebuffer} framebuffer - The WebGLFramebuffer from which to read the image data.\n\t * @returns {ImageData} An ImageData object containing the image data from the framebuffer.\n\t */\n\t_framebufferImage(framebuffer) {\n\t\tconst fbWidth = framebuffer.size.width;\n\t\tconst fbHeight = framebuffer.size.height;\n\t\tconst data = new Uint8ClampedArray(4 * fbWidth * fbHeight);\n\t\tconst gl = this.gl;\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n\t\tgl.readPixels(\n\t\t\t0,            // x\n\t\t\t0,            // y\n\t\t\tfbWidth,                 // width\n\t\t\tfbHeight,                 // height\n\t\t\tgl.RGBA,           // format\n\t\t\tgl.UNSIGNED_BYTE,  // type\n\t\t\tdata);             // typed array to hold result\n\n\t\treturn new ImageData(data, fbWidth, fbHeight);\n\t}\n\n\t/**\n\t * Exports the current figure to an image file.\n\t * @method exportFigure\n\t * @memberof Helios\n\t * @instance\n\t * @param {string} filename - The filename for the exported image, including the extension (e.g., \"image.png\").\n\t * @param {Object} options - An object containing export options.\n\t * @param {number} [options.scale=1.0] - The scale factor for the exported image.\n\t * @param {number} [options.supersampleFactor=4.0] - The supersampling factor for the exported image.\n\t * @param {number|null} [options.width=null] - The width of the exported image. If null, the current canvas width is used.\n\t * @param {number|null} [options.height=null] - The height of the exported image. If null, the current canvas height is used.\n\t * @param {string|null} [options.backgroundColor=null] - The background color of the exported image. If null, the current background color is used.\n\t * @example\n\t * helios.exportFigure(\"figure.png\", {\n\t *   scale: 1.0,\n\t *   supersampleFactor: 4.0,\n\t *   width: 800,\n\t *   height: 600,\n\t *   backgroundColor: \"#FFFFFF\",\n\t * });\n\t */\n\texportFigure(filename, {\n\t\tscale,\n\t\tsupersampleFactor,\n\t\twidth = null,\n\t\theight = null,\n\t\tbackgroundColor = null,\n\t}) {\n\t\tif (typeof (scale) === 'undefined') {\n\t\t\tscale = 1.0;\n\t\t}\n\t\tif (typeof (supersampleFactor) === 'undefined') {\n\t\t\tsupersampleFactor = 2.0;\n\t\t}\n\t\tlet framebuffer = this._createOffscreenFramebuffer();\n\t\tif (width == null && height == null) {\n\t\t\twidth = this._canvasElement.clientWidth;\n\t\t\theight = this._canvasElement.clientHeight;\n\t\t} else if (!width) {\n\t\t\twidth = Math.round(height * this._canvasElement.width / this._canvasElement.height);\n\t\t} else if (!height) {\n\t\t\theight = Math.round(width * this._canvasElement.height / this._canvasElement.width);\n\t\t}\n\t\tif (!backgroundColor) {\n\t\t\tbackgroundColor = this.backgroundColor;\n\t\t}\n\t\tframebuffer.setSize(Math.round(width * scale * supersampleFactor), Math.round(height * scale * supersampleFactor));\n\t\tframebuffer.backgroundColor = backgroundColor;\n\t\tthis._redrawAll(framebuffer);\n\t\tlet image = this._framebufferImage(framebuffer);\n\t\tthis._downloadImageData(image, filename, supersampleFactor, scale);\n\n\t\tframebuffer.discard();\n\t}\n\n\t/**\n\t * Forces triggering hover events based on the current mouse position.\n\t * @method triggerHoverEvents\n\t * @memberof Helios\n\t * @instance\n\t * @param {Event} event - The MouseEvent object associated with the triggering event (e.g., mousemove, touchmove).\n\t * @param {boolean} shallCancel - If true, the method returns immediately without triggering any events.\n\t * @example\n\t * helios.triggerHoverEvents(event, false);\n\t */\n\ttriggerHoverEvents(event, shallCancel) {\n\t\tif (!this._isReady) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._status.lastMouseX == -1 || this._status.lastMouseY == -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet pickID = -1;\n\t\tif (!this._status.interacting) {\n\t\t\tconst rect = this._canvasElement.getBoundingClientRect();\n\t\t\tpickID = this.pickPoint(this._status.lastMouseX - rect.left, this._status.lastMouseY - rect.top);\n\t\t}\n\t\t// let nodesCount = \n\t\tif (pickID >= 0 && this.currentHoverIndex == -1) {\n\t\t\tthis.currentHoverIndex = pickID;\n\t\t\tthis._callEventFromPickID(pickID, \"hoverStart\", event);\n\t\t} else if (pickID >= 0 && this.currentHoverIndex == pickID) {\n\t\t\t// console.log(\"mouse: \",this.lastMouseX,this.lastMouseY)\n\t\t\tthis._callEventFromPickID(pickID, \"hoverMove\", event);\n\t\t} else if (pickID >= 0 && this.currentHoverIndex != pickID) {\n\t\t\tthis._callEventFromPickID(this.currentHoverIndex, \"hoverEnd\", event);\n\t\t\tthis.currentHoverIndex = pickID;\n\t\t\tthis._callEventFromPickID(pickID, \"hoverStart\", event);\n\t\t} else if (pickID == -1 && this.currentHoverIndex != pickID) {\n\t\t\tthis._callEventFromPickID(this.currentHoverIndex, \"hoverEnd\", event);\n\t\t\tthis.currentHoverIndex = -1;\n\t\t}\n\t}\n\n\n\t/**\n\t * Initializes the shader programs used for rendering nodes and edges.\n\t * @method _setupShaders\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_setupShaders() {\n\t\tconst gl = this.gl;\n\n\t\tthis.edgesShaderProgram = new glUtils.ShaderProgram(\n\t\t\tglUtils.getShaderFromString(gl, this._settings.hyperbolic ? edgesShaders.vertexHyperbolicShader : edgesShaders.vertexShader, gl.VERTEX_SHADER),\n\t\t\tglUtils.getShaderFromString(gl, edgesShaders.fragmentShader, gl.FRAGMENT_SHADER),\n\t\t\t[\"viewMatrix\", \"projectionMatrix\", \"nearFar\",\n\t\t\t\t\"globalOpacityScale\", \"globalWidthScale\", \"globalSizeScale\", \"globalOpacityBase\", \"globalWidthBase\", \"globalSizeBase\"],\n\t\t\t[\"fromVertex\", \"toVertex\", \"vertexType\", \"fromColor\", \"toColor\", \"fromSize\", \"toSize\", \"encodedIndex\"],\n\t\t\tthis.gl);\n\n\t\tthis.edgesFastShaderProgram = new glUtils.ShaderProgram(\n\t\t\tglUtils.getShaderFromString(gl, this._settings.hyperbolic ? edgesShaders.fastVertexHyperbolicShader : edgesShaders.fastVertexShader, gl.VERTEX_SHADER),\n\t\t\tglUtils.getShaderFromString(gl, edgesShaders.fastFragmentShader, gl.FRAGMENT_SHADER),\n\t\t\t[\"projectionViewMatrix\", \"nearFar\", \"globalOpacityScale\", \"globalOpacityBase\"],\n\t\t\t[\"vertex\", \"color\"],\n\t\t\tthis.gl);\n\n\t\tthis.edgesPickingShaderProgram = new glUtils.ShaderProgram(\n\t\t\tglUtils.getShaderFromString(gl, this._settings.hyperbolic ? edgesShaders.vertexHyperbolicShader : edgesShaders.vertexShader, gl.VERTEX_SHADER),\n\t\t\tglUtils.getShaderFromString(gl, edgesShaders.pickingShader, gl.FRAGMENT_SHADER),\n\t\t\t[\"viewMatrix\", \"projectionMatrix\", \"nearFar\",\n\t\t\t\t\"globalOpacityScale\", \"globalWidthScale\", \"globalSizeScale\", \"globalOpacityBase\", \"globalWidthBase\", \"globalSizeBase\"],\n\t\t\t[\"fromVertex\", \"toVertex\", \"vertexType\", \"fromColor\", \"toColor\", \"fromSize\", \"toSize\", \"encodedIndex\"],\n\t\t\tthis.gl);\n\n\n\t\tthis.nodesShaderProgram = new glUtils.ShaderProgram(\n\t\t\tglUtils.getShaderFromString(gl, this._settings.hyperbolic ? nodesShaders.vertexHyperbolicShader : nodesShaders.vertexShader, gl.VERTEX_SHADER),\n\t\t\tglUtils.getShaderFromString(gl, nodesShaders.fragmentShader, gl.FRAGMENT_SHADER),\n\t\t\t[\"viewMatrix\", \"projectionMatrix\", \"normalMatrix\",\n\t\t\t\t\"globalOpacityScale\", \"globalSizeScale\", \"globalOutlineWidthScale\", \"globalOpacityBase\", \"globalSizeBase\", \"globalOutlineWidthBase\"],\n\t\t\t[\"vertex\", \"position\", \"color\", \"size\", \"outlineWidth\", \"outlineColor\", \"encodedIndex\"], this.gl);\n\n\t\tthis.nodesFastShaderProgram = new glUtils.ShaderProgram(\n\t\t\tglUtils.getShaderFromString(gl, this._settings.hyperbolic ? nodesShaders.vertexHyperbolicShader : nodesShaders.vertexShader, gl.VERTEX_SHADER),\n\t\t\tglUtils.getShaderFromString(gl, nodesShaders.fastFragmentShader, gl.FRAGMENT_SHADER),\n\t\t\t[\"viewMatrix\", \"projectionMatrix\", \"normalMatrix\",\n\t\t\t\t\"globalOpacityScale\", \"globalSizeScale\", \"globalOutlineWidthScale\", \"globalOpacityBase\", \"globalSizeBase\", \"globalOutlineWidthBase\"],\n\t\t\t[\"vertex\", \"position\", \"color\", \"size\", \"outlineWidth\", \"outlineColor\", \"encodedIndex\"], this.gl);\n\n\t\tthis.nodesPickingShaderProgram = new glUtils.ShaderProgram(\n\t\t\tglUtils.getShaderFromString(gl, this._settings.hyperbolic ? nodesShaders.vertexHyperbolicShader : nodesShaders.vertexShader, gl.VERTEX_SHADER),\n\t\t\tglUtils.getShaderFromString(gl, nodesShaders.pickingShader, gl.FRAGMENT_SHADER),\n\t\t\t[\"viewMatrix\", \"projectionMatrix\", \"normalMatrix\",\n\t\t\t\t\"globalOpacityScale\", \"globalSizeScale\", \"globalOutlineWidthScale\", \"globalOpacityBase\", \"globalSizeBase\", \"globalOutlineWidthBase\"],\n\t\t\t[\"vertex\", \"position\", \"color\", \"size\", \"outlineWidth\", \"outlineColor\", \"encodedIndex\"], this.gl);\n\t}\n\n\n\t/**\n\t * Initializes the picking framebuffer used for object selection.\n\t * @method _buildPickingBuffers\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_buildPickingBuffers() {\n\t\tconst gl = this.gl;\n\t\tthis.pickingFramebuffer = this._createOffscreenFramebuffer();\n\t}\n\n\t/**\n\t * Initializes the tracking framebuffer used for getting the displayed objects.\n\t * @method _buildTrackingBuffers\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_buildTrackingBuffers() {\n\t\tconst gl = this.gl;\n\t\tif (this._tracking.bufferEnabled) {\n\t\t\tthis._trackingFramebuffer = this._createOffscreenFramebuffer();\n\t\t}\n\t}\n\n\n\t/**\n\t * Creates and initializes an offscreen framebuffer for rendering operations.\n\t * @method createOffscreenFramebuffer\n\t * @memberof Helios\n\t * @instance\n\t * @returns {WebGLFramebuffer} An offscreen framebuffer with associated texture and depth buffer.\n\t * @private\n\t */\n\t_createOffscreenFramebuffer() {\n\t\tconst gl = this.gl;\n\t\tlet framebuffer = gl.createFramebuffer();\n\t\tframebuffer.texture = gl.createTexture();\n\t\tgl.bindTexture(gl.TEXTURE_2D, framebuffer.texture);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n\t\tframebuffer.depthBuffer = gl.createRenderbuffer();\n\t\tgl.bindRenderbuffer(gl.RENDERBUFFER, framebuffer.depthBuffer);\n\n\t\t// Create and bind the framebuffer\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n\t\tframebuffer.size = {\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t};\n\n\t\tframebuffer.setSize = (width, height) => {\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, framebuffer.texture);\n\t\t\t// define size and format of level 0\n\t\t\tconst level = 0;\n\t\t\tconst internalFormat = gl.RGBA;\n\t\t\tconst border = 0;\n\t\t\tconst format = gl.RGBA;\n\t\t\tconst type = gl.UNSIGNED_BYTE;\n\t\t\tconst data = null;\n\t\t\tconst fbWidth = width;\n\t\t\tconst fbHeight = height;\n\t\t\tgl.texImage2D(gl.TEXTURE_2D, level, internalFormat,\n\t\t\t\tfbWidth, fbHeight, border, format, type, data);\n\t\t\tgl.bindRenderbuffer(gl.RENDERBUFFER, framebuffer.depthBuffer);\n\t\t\tgl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, fbWidth, fbHeight);\n\t\t\tframebuffer.size.width = width;\n\t\t\tframebuffer.size.height = height;\n\t\t};\n\n\t\tframebuffer.discard = () => {\n\t\t\tgl.deleteRenderbuffer(framebuffer.depthBuffer);\n\t\t\tgl.deleteTexture(framebuffer.texture);\n\t\t\tgl.deleteFramebuffer(framebuffer);\n\t\t}\n\t\t// attach the texture as the first color attachment\n\t\tconst attachmentPoint = gl.COLOR_ATTACHMENT0;\n\t\tconst level = 0;\n\t\tgl.framebufferTexture2D(gl.FRAMEBUFFER, attachmentPoint, gl.TEXTURE_2D, framebuffer.texture, level);\n\n\t\t// make a depth buffer and the same size as the targetTexture\n\t\tgl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, framebuffer.depthBuffer);\n\t\treturn framebuffer;\n\t}\n\n\t/**\n\t * Builds the nodes geometry and creates related WebGL buffers.\n\t * @method _buildNodesGeometry\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_buildNodesGeometry() {\n\t\tconst gl = this.gl;\n\t\tlet sphereQuality = 20;\n\t\t// this.nodesGeometry = glUtils.makeSphere(gl, 1.0, sphereQuality, sphereQuality);\n\t\tthis.nodesGeometry = glUtils.makePlane(gl, false, false);\n\t\t// //vertexShape = makeBox(gl);\n\n\n\n\t\tthis.nodesPositionBuffer = gl.createBuffer();\n\t\tthis.nodesColorBuffer = gl.createBuffer();\n\t\tthis.nodesSizeBuffer = gl.createBuffer();\n\t\tthis.nodesOutlineWidthBuffer = gl.createBuffer();\n\t\tthis.nodesOutlineColorBuffer = gl.createBuffer();\n\t\tthis.nodesIndexBuffer = gl.createBuffer();\n\n\t\t//encodedIndex\n\t\tthis.nodesIndexArray = new Float32Array(this.network.indexedNodes.length * 4);\n\t\tfor (let ID = 0; ID < this.network.indexedNodes.length; ID++) {\n\t\t\tthis.nodesIndexArray[4 * ID] = (((ID + 1) >> 0) & 0xFF) / 0xFF;\n\t\t\tthis.nodesIndexArray[4 * ID + 1] = (((ID + 1) >> 8) & 0xFF) / 0xFF;\n\t\t\tthis.nodesIndexArray[4 * ID + 2] = (((ID + 1) >> 16) & 0xFF) / 0xFF;\n\t\t\tthis.nodesIndexArray[4 * ID + 3] = (((ID + 1) >> 24) & 0xFF) / 0xFF;\n\t\t}\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesIndexBuffer);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, this.nodesIndexArray, gl.STATIC_DRAW);\n\t\t// console.log(this.nodesIndexArray)\n\n\t\tthis.updateNodesGeometry();\n\t}\n\n\t/** Updates the density map with the current node positions.\n\t * @method updateDensityMap\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @example<caption>Update the density map</caption>\n\t * helios.updateDensityMap();\n\t * @example<caption>Update the density map and render the scene</caption>\n\t * helios.updateDensityMap().render();\n\t * @returns {this} Returns the current Helios instance for chaining.\n\t */\n\tupdateDensityMap() {\n\t\tlet positions = this.network.positions;\n\t\tthis.densityMap?.setData(positions);\n\t\tthis.densityMap?.setWeights(this.densityWeights);\n\t\treturn this;\n\t}\n\n\n\t/** Force update of Nodes Geometry.\n\t * @method updateNodesGeometry\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @example<caption>Update the nodes geometry</caption>\n\t * helios.updateNodesGeometry();\n\t * @example<caption>Update the nodes geometry and render the scene</caption>\n\t * helios.updateNodesGeometry().render();\n\t * @returns {this} Returns the current Helios instance for chaining.\n\t */\n\tupdateNodesGeometry() {\n\n\t\tconst gl = this.gl;\n\n\t\tlet positions = this.network.positions;\n\n\t\tthis.updateDensityMap();\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesPositionBuffer);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, positions, gl.DYNAMIC_DRAW);\n\n\t\tlet colors = this.network.colors;\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesColorBuffer);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, colors, gl.STATIC_DRAW);\n\n\t\tlet sizes = this.network.sizes;\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesSizeBuffer);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, sizes, gl.STATIC_DRAW);\n\n\t\tlet outlineWidths = this.network.outlineWidths;\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesOutlineWidthBuffer);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, outlineWidths, gl.STATIC_DRAW);\n\n\t\tlet outlineColors = this.network.outlineColors;\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesOutlineColorBuffer);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, outlineColors, gl.STATIC_DRAW);\n\n\n\t\t// //Depth test is essential for the desired effects\n\n\t\t// gl.disable(gl.CULL_FACE);\n\t\t// gl.frontFace(gl.CCW);\n\t\treturn this;\n\t}\n\n\n\t/** Initializes the geometry and buffers used for rendering edges.\n\t * @method _buildFastEdgesGeometry\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_buildFastEdgesGeometry() {\n\t\tconst gl = this.gl;\n\t\tlet edges = this.network.indexedEdges;\n\t\tlet positions = this.network.positions;\n\t\tlet colors = this.network.colors;\n\n\t\tlet indicesArray;\n\t\tthis.fastEdgesGeometry = null;\n\t\tthis.fastEdgesIndicesArray = null;\n\t\tlet newGeometry = new Object();\n\t\t//FIXME: If num of vertices > 65k, we need to store the geometry in two different indices objects\n\t\tif (positions.length < 65535) {\n\t\t\tindicesArray = new Uint16Array(edges);\n\t\t\tnewGeometry.indexType = gl.UNSIGNED_SHORT;\n\t\t} else {\n\t\t\tvar uints_for_indices = gl.getExtension(\"OES_element_index_uint\");\n\t\t\tif (uints_for_indices == null) {\n\t\t\t\tindicesArray = new Uint16Array(edges);\n\t\t\t\tnewGeometry.indexType = gl.UNSIGNED_SHORT;\n\t\t\t} else {\n\t\t\t\tindicesArray = new Uint32Array(edges);\n\t\t\t\tnewGeometry.indexType = gl.UNSIGNED_INT;\n\t\t\t}\n\t\t}\n\n\t\t// create the lines buffer 2 vertices per geometry.\n\t\tnewGeometry.vertexObject = gl.createBuffer();\n\t\tnewGeometry.colorObject = gl.createBuffer();\n\t\tnewGeometry.numIndices = indicesArray.length;\n\t\tnewGeometry.indexObject = gl.createBuffer();\n\n\t\tthis.fastEdgesGeometry = newGeometry;\n\t\tthis.fastEdgesIndicesArray = indicesArray;\n\n\t}\n\n\t/** Initializes the geometry and buffers used for advanced rendering edges.\n\t * @method _buildAdvancedEdgesGeometry\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_buildAdvancedEdgesGeometry() {\n\t\tconst gl = this.gl;\n\t\tlet edgeVertexTypeArray = [\n\t\t\t0, 1,\n\t\t\t0, 0,\n\t\t\t1, 1,\n\t\t\t1, 0,\n\t\t];\n\t\tlet newGeometry = new Object();\n\t\tnewGeometry.edgeVertexTypeBuffer = gl.createBuffer();\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, newGeometry.edgeVertexTypeBuffer);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array(edgeVertexTypeArray), gl.STATIC_DRAW);\n\n\t\tnewGeometry.verticesBuffer = gl.createBuffer();\n\t\tnewGeometry.colorBuffer = gl.createBuffer();\n\t\tnewGeometry.sizeBuffer = gl.createBuffer();\n\t\t// this.nodesOutlineWidthBuffer = gl.createBuffer();\n\t\t// this.nodesOutlineColorBuffer = gl.createBuffer();\n\t\tnewGeometry.indexBuffer = gl.createBuffer();\n\n\t\tthis.edgesGeometry = newGeometry;\n\t\tthis.edgesGeometry.count = this.network.indexedEdges.length / 2;\n\n\t\t//encodedIndex\n\t\tthis.edgesGeometry.edgesIndexArray = new Float32Array(this.network.indexedEdges.length * 4 / 2);\n\t\tthis._status.edgeIndicesUpdate = true;\n\t\t// console.log(this.nodesIndexArray)\n\t}\n\n\t/** Initializes the geometry and buffers used for rendering edges.\n\t * @method _buildEdgesGeometry\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_buildEdgesGeometry() {\n\t\tif (this._settings.fastEdges) {\n\t\t\tthis._buildFastEdgesGeometry();\n\t\t} else {\n\t\t\tthis._buildAdvancedEdgesGeometry();\n\t\t}\n\t\tthis.updateEdgesGeometry()\n\t}\n\n\n\t/** Updates the indices used for picking edges.\n\t * @method _updateEdgeIndices\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_updateEdgeIndices() {\n\t\tif (this._status.edgeIndicesUpdate) {\n\t\t\tconst gl = this.gl;\n\t\t\tfor (let ID = 0; ID < this.network.indexedEdges.length / 2; ID++) {\n\t\t\t\tlet edgeID = this.network.indexedNodes.length + ID;\n\t\t\t\tif (this._settings.pickeableEdges.has(ID)) {\n\t\t\t\t\tthis.edgesGeometry.edgesIndexArray[4 * ID] = (((edgeID + 1) >> 0) & 0xFF) / 0xFF;\n\t\t\t\t\tthis.edgesGeometry.edgesIndexArray[4 * ID + 1] = (((edgeID + 1) >> 8) & 0xFF) / 0xFF;\n\t\t\t\t\tthis.edgesGeometry.edgesIndexArray[4 * ID + 2] = (((edgeID + 1) >> 16) & 0xFF) / 0xFF;\n\t\t\t\t\tthis.edgesGeometry.edgesIndexArray[4 * ID + 3] = (((edgeID + 1) >> 24) & 0xFF) / 0xFF;\n\t\t\t\t} else {\n\t\t\t\t\tthis.edgesGeometry.edgesIndexArray[4 * ID] = 0;\n\t\t\t\t\tthis.edgesGeometry.edgesIndexArray[4 * ID + 1] = 0;\n\t\t\t\t\tthis.edgesGeometry.edgesIndexArray[4 * ID + 2] = 0;\n\t\t\t\t\tthis.edgesGeometry.edgesIndexArray[4 * ID + 3] = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.edgesGeometry.indexBuffer);\n\t\t\tgl.bufferData(gl.ARRAY_BUFFER, this.edgesGeometry.edgesIndexArray, gl.DYNAMIC_DRAW);\n\t\t\tthis._status.edgeIndicesUpdate = false;\n\t\t}\n\t}\n\n\n\t/** Updates the geometry and buffers used for rendering edges.\n\t * @method updateEdgesGeometry\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {boolean} [force=false] - Forces the update of the geometry and buffers.\n\t * @returns {this} Returns the current Helios instance for chaining.\n\t */\n\tupdateEdgesGeometry() {\n\t\tconst gl = this.gl;\n\t\tlet edges = this.network.indexedEdges;\n\t\tlet positions = this.network.positions;\n\t\tlet colors = this.network.colors;\n\t\tif (this._settings.fastEdges) {\n\t\t\tif (!this.fastEdgesGeometry) {\n\t\t\t\tthis._buildEdgesGeometry();\n\t\t\t}\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.fastEdgesGeometry.vertexObject);\n\t\t\tgl.bufferData(gl.ARRAY_BUFFER, positions, gl.STREAM_DRAW);\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.fastEdgesGeometry.colorObject);\n\t\t\tgl.bufferData(gl.ARRAY_BUFFER, colors, gl.STATIC_DRAW);\n\t\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.fastEdgesGeometry.indexObject);\n\t\t\tgl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.fastEdgesIndicesArray, gl.STREAM_DRAW);\n\t\t} else {\n\n\t\t\tconst gl = this.gl;\n\t\t\tthis.network.updateEdgePositions();\n\t\t\tif (this._settings.edgesColorsFromNodes) {\n\t\t\t\tthis.network.updateEdgeColors();\n\t\t\t}\n\t\t\tif (this._settings.edgesWidthFromNodes) {\n\t\t\t\tthis.network.updateEdgeSizes();\n\t\t\t}\n\t\t\tthis._updateEdgeIndices();\n\n\t\t\tlet edgePositions = this.network.positions;\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.edgesGeometry.verticesBuffer);\n\t\t\tgl.bufferData(gl.ARRAY_BUFFER, this.network.edgePositions, gl.DYNAMIC_DRAW);\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.edgesGeometry.colorBuffer);\n\t\t\tgl.bufferData(gl.ARRAY_BUFFER, this.network.edgeColors, gl.DYNAMIC_DRAW);\n\n\t\t\t// gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.edgesGeometry.indexBuffer);\n\t\t\t// gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.edgesGeometry.edgesIndexArray, gl.DYNAMIC_DRAW);\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.edgesGeometry.sizeBuffer);\n\t\t\tgl.bufferData(gl.ARRAY_BUFFER, this.network.edgeSizes, gl.DYNAMIC_DRAW);\n\t\t}\n\t\treturn this;\n\t}\n\n\n\t/** Updates the all the framebuffers\n\t * @method _updatePickingFramebufferSize\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t * @param {number} newWidth - The new width of the framebuffers.\n\t * @param {number} newHeight - The new height of the framebuffers.\n\t * @returns {this} Returns the current Helios instance for chaining.\n\t */\n\t_resizeGL(newWidth, newHeight) {\n\t\tthis._canvasElement.width = newWidth;\n\t\tthis._canvasElement.height = newHeight;\n\t\tthis.pickingFramebuffer.setSize(Math.round(newWidth * this._settings.pickingResolutionRatio), Math.round(newHeight * this._settings.pickingResolutionRatio));\n\t\tthis._lastCanvasDimensions = [this._canvasElement.clientWidth, this._canvasElement.clientHeight];\n\t\t// distribute at most this.trackingMaxPixels across the screen (width * height), keeping the aspect ratio\n\t\tlet aspectRatio = newWidth / newHeight;\n\t\tif (this._tracking.bufferEnabled) {\n\t\t\tlet trackingWidth, trackingHeight;\n\n\t\t\tif (aspectRatio > 1) {\n\t\t\t\ttrackingWidth = Math.sqrt(this._tracking.maxPixels * aspectRatio);\n\t\t\t\ttrackingHeight = this._tracking.maxPixels / trackingWidth;\n\t\t\t} else {\n\t\t\t\ttrackingHeight = Math.sqrt(this._tracking.maxPixels / aspectRatio);\n\t\t\t\ttrackingWidth = this._tracking.maxPixels / trackingHeight;\n\t\t\t}\n\t\t\tthis._trackingFramebuffer.setSize(Math.round(trackingWidth), Math.round(trackingHeight));\n\t\t\tlet totalTrackingPixels = this._trackingFramebuffer.size.width * this._trackingFramebuffer.size.height;\n\t\t\tthis._pixelXYOnScreen = Array(totalTrackingPixels);\n\t\t\tthis._tracking.bufferPixels = new Uint8Array(4 * totalTrackingPixels);\n\t\t\tthis._nodesOnScreen = Array(totalTrackingPixels);\n\t\t\tthis._nodesOnScreen.fill(-1);\n\n\t\t\tfor (let i = 0; i < this._pixelXYOnScreen.length; i++) {\n\t\t\t\tlet x = (i % this._trackingFramebuffer.size.width) / this._trackingFramebuffer.size.width * this._canvasElement.clientWidth;\n\t\t\t\tlet y = (Math.floor(i / this._trackingFramebuffer.size.width)) / this._trackingFramebuffer.size.height * this._canvasElement.clientHeight;\n\t\t\t\tthis._pixelXYOnScreen[i] = [x, y];\n\t\t\t}\n\t\t}\n\n\t\tif (this.densityPlot) {\n\t\t\tthis.densityMap.resize(newWidth, newHeight);\n\t\t}\n\t\tthis.render(true);\n\t\treturn this;\n\t}\n\n\n\tcameraDisplacementFactor(){\n\t\tconst panelHeight = this._canvasElement.clientHeight;\n\t\tconst fovy = Math.PI * 2 / 360 * this._camera.fieldOfView;\n\t\t// FIXME: Maybe use the distance to the objects instead of the camera distance\n\t\t// For the 3D case. The 2D case is fine.\n\t\tconst finalCameraDistance = this._camera.cameraDistance / this._camera.zoomFactor;\n\t\tconst displacementFactor = 2 * finalCameraDistance * Math.tan(fovy / 2) / panelHeight;\n\t\treturn displacementFactor;\n\t}\n\n\t/** Setup the camera data.\n\t * @method _setupCamera\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_setupCamera() {\n\t\t// this.canvasElement.onmousedown = event=>this.handleMouseDown(event);\n\t\t// document.onmouseup = event=>this.handleMouseUp(event);\n\t\t// document.onmousemove = event=>this.handleMouseMove(event);\n\t\t// document.onclick = void(0);\n\n\n\t\tthis.zoom = d3Zoom()\n\t\t\t.on(\"zoom\", event => {\n\t\t\t\tthis._status.interacting = true;\n\t\t\t\tthis._camera.zoomFactor = event.transform.k;\n\t\t\t\tthis.triggerHoverEvents(event);\n\t\t\t\t// check if prevX is undefined\n\t\t\t\tif (this.prevK === undefined) {\n\t\t\t\t\tthis.prevK = event.transform.k;\n\t\t\t\t}\n\t\t\t\tlet dx = 0;\n\t\t\t\tlet dy = 0;\n\t\t\t\tif (this.prevK == event.transform.k || this._settings.use2D) {\n\t\t\t\t\tif (this.prevX === undefined || this._settings.use2D) {\n\t\t\t\t\t\tif (this._settings.use2D) {\n\t\t\t\t\t\t\tdx = event.transform.x - this._canvasElement.clientWidth / 2;\n\t\t\t\t\t\t\tdy = event.transform.y - this._canvasElement.clientHeight / 2;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdx = event.transform.x;\n\t\t\t\t\t\t\tdy = event.transform.y;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdx = event.transform.x - this.prevX * this._camera.zoomFactor;\n\t\t\t\t\t\tdy = event.transform.y - this.prevY * this._camera.zoomFactor;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t}\n\n\t\t\t\tif (!this._settings.use2D) {\n\t\t\t\t\tthis.prevX = event.transform.x / this._camera.zoomFactor;\n\t\t\t\t\tthis.prevY = event.transform.y / this._camera.zoomFactor;\n\t\t\t\t}\n\t\t\t\tthis.prevK = event.transform.k;\n\t\t\t\t// \tif (!this.positionInterpolator) {\n\t\t\t\t// \t\tthis.update();\n\t\t\t\t// \t\tthis.render();\n\t\t\t\t// \t}\n\t\t\t\t// \t// event => event.preventDefault();\n\t\t\t\t// })\n\t\t\t\t// // this.drag = d3Drag().on(\"drag\", event => {\n\t\t\t\t// // \tlet dx = event.dx;\n\t\t\t\t// // \tlet dy = event.dy;\n\n\t\t\t\t// this.zoom2 = d3Zoom().scaleExtent([1.0,1.0]).on(\"zoom\", event => {\n\t\t\t\t// \tconsole.log(\"ZOOM 2\")\n\t\t\t\t// \t// let dx = event.dx;\n\t\t\t\t// \t// let dy = event.dy;\n\t\t\t\t// let dx = 0;\n\t\t\t\t// let dy = 0;\n\t\t\t\t// if(this.prevX=== undefined){\n\t\t\t\t// \tdx = event.transform.x;\n\t\t\t\t// \tdy = event.transform.y;\n\t\t\t\t// }else{\n\t\t\t\t// \tdx = event.transform.x - this.prevX;\n\t\t\t\t// \tdy = event.transform.y - this.prevY;\n\t\t\t\t// }\n\n\t\t\t\tlet newRotationMatrix = glm.mat4.create();\n\t\t\t\t// console.log(event.sourceEvent.shiftKey)\n\t\t\t\tif (this._settings.use2D || event.sourceEvent?.shiftKey) {\n\t\t\t\t\tconst panelHeight = this._canvasElement.clientHeight;\n\t\t\t\t\tconst fovy = Math.PI * 2 / 360 * this._camera.fieldOfView;\n\t\t\t\t\t// FIXME: Maybe use the distance to the objects instead of the camera distance\n\t\t\t\t\t// For the 3D case. The 2D case is fine.\n\t\t\t\t\tconst finalCameraDistance = this._camera.cameraDistance / this._camera.zoomFactor;\n\t\t\t\t\tconst displacementFactor = 2 * finalCameraDistance * Math.tan(fovy / 2) / panelHeight;\n\t\t\t\t\t// const displacementFactor = 1.0;\n\t\t\t\t\tif (this._centerNodes.length == 0) {\n\t\t\t\t\t\tif (this._settings.use2D) {\n\n\t\t\t\t\t\t\tthis._camera.panX = dx * displacementFactor;\n\t\t\t\t\t\t\tthis._camera.panY = -dy * displacementFactor;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._camera.panX = this._camera.panX + dx * displacementFactor;\n\t\t\t\t\t\t\tthis._camera.panY = this._camera.panY - dy * displacementFactor;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {//pan\n\t\t\t\t\tglm.mat4.identity(newRotationMatrix);\n\t\t\t\t\tglm.mat4.rotate(newRotationMatrix, newRotationMatrix, glUtils.degToRad(dx / 2), [0, 1, 0]);\n\t\t\t\t\tglm.mat4.rotate(newRotationMatrix, newRotationMatrix, glUtils.degToRad(dy / 2), [1, 0, 0]);\n\n\t\t\t\t\tglm.mat4.multiply(this._camera.rotationMatrix, newRotationMatrix, this._camera.rotationMatrix);\n\t\t\t\t}\n\n\t\t\t\tthis.update();\n\t\t\t\tthis.render();\n\t\t\t\t// this.triggerHoverEvents(event);\n\t\t\t\tevent?.sourceEvent?.preventDefault();\n\t\t\t\tevent?.sourceEvent?.stopPropagation();\n\n\t\t\t\t// console.log(\"CLICK EVENT!\");\n\t\t\t})\n\t\t\t.on(\"end\", event => {\n\t\t\t\tthis._status.interacting = false;\n\t\t\t\t// event?.sourceEvent?.preventDefault();\n\t\t\t\tevent?.sourceEvent?.stopPropagation();\n\t\t\t});\n\n\t\td3Select(this._canvasElement)//\n\t\t\t// .call(d3ZoomTransform, d3ZoomIdentity.translate(0, 0).scale(this.cameraDistance))\n\t\t\t// .call(this.drag)\n\t\t\t.call(this.zoom)\n\t\t\t// .on(\"mousedown.drag\", null)\n\t\t\t// .on(\"touchstart.drag\", null)\n\t\t\t// .on(\"touchmove.drag\", null)\n\t\t\t// .on(\"touchend.drag\", null)\n\t\t\t.on(\"dblclick.zoom\", null);\n\n\n\t\t// this.zoomFactor(0.05)\n\t\t// this.zoomFactor(1.0,500);\n\t}\n\n\t/** Set the zoom factor.\n\t * @method zoomFactor\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} zoomFactor - The zoom factor.\n\t * @param {number} [duration] - The duration of the zoom animation in milliseconds.\n\t * @returns {this | number} Returns this for chaining if zoomFactor is defined, otherwise returns the current zoom factor.\n\t * @example\n\t * // Set the zoom factor to 0.5\n\t * helios.zoomFactor(0.5);\n\t * @example\n\t * // Set the zoom factor to 0.5 with an animation duration of 500 milliseconds\n\t * helios.zoomFactor(0.5, 500);\n\t * @example\n\t * // Get the current zoom factor\n\t * let zoomFactor = helios.zoomFactor();\n\t */\n\tzoomFactor(zoomFactor, duration) {\n\t\tif (zoomFactor !== undefined) {\n\t\t\tif (duration === undefined) {\n\t\t\t\tif (this._settings.use2D) {\n\t\t\t\t\td3Select(this._canvasElement).call(this.zoom.transform,\n\t\t\t\t\t\td3ZoomIdentity.translate(this._canvasElement.clientWidth / 2, this._canvasElement.clientHeight / 2).scale(zoomFactor))\n\t\t\t\t} else {\n\t\t\t\t\td3Select(this._canvasElement).call(this.zoom.transform, d3ZoomIdentity.translate(0, 0).scale(zoomFactor))\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this._settings.use2D) {\n\t\t\t\t\td3Select(this._canvasElement).transition().ease(d3Ease.easeLinear).duration(duration)\n\t\t\t\t\t\t.call(this.zoom.transform, d3ZoomIdentity.translate(this._canvasElement.clientWidth / 2, this._canvasElement.clientHeight / 2).scale(zoomFactor))\n\n\t\t\t\t} else {\n\t\t\t\t\td3Select(this._canvasElement).transition().ease(d3Ease.easeLinear).duration(duration).call(this.zoom.transform, d3ZoomIdentity.translate(0, 0).scale(zoomFactor))\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this._camera.zoomFactor;\n\t\t}\n\t}\n\n\t/** Set the semantic zoom exponent.\n\t * @method semanticZoomExponent\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} semanticZoomExponent - The semantic zoom exponent.\n\t * @returns {this | number} Returns this for chaining if semanticZoomExponent is defined, otherwise returns the current semantic zoom exponent.\n\t * @example\n\t * // Set the semantic zoom exponent to 0.5\n\t * helios.semanticZoomExponent(0.5);\n\t * @example\n\t * // Get the current semantic zoom exponent\n\t * let semanticZoomExponent = helios.semanticZoomExponent();\n\t */\n\tsemanticZoomExponent(semanticZoomExponent) {\n\t\tif (semanticZoomExponent !== undefined) {\n\t\t\tthis._settings.semanticZoomExponent = semanticZoomExponent;\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this._settings.semanticZoomExponent;\n\t\t}\n\t}\n\n\n\t/** Will resize event helper function\n\t * @method _willResizeEvent\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t * @param {Event} event - The resize event.\n\t */\n\t_willResizeEvent(event) {\n\t\t//requestAnimFrame(function(){\n\t\tlet dpr = window.devicePixelRatio || 1;\n\t\tif (dpr < 2.0 || this._settings.forceSupersample) {\n\t\t\tdpr = dpr * 2.0;\n\t\t}\n\t\t// dpr = 2.0;\n\n\t\t// this.canvasElement.style.width = this.element.clientWidth + \"px\";\n\t\t// this.canvasElement.style.height = this.element.clientHeight + \"px\";\n\t\t// Update margins:\n\n\t\tlet newFrameworkWidth = dpr * this._canvasElement.clientWidth;\n\t\tlet newFrameworkHeight = dpr * this._canvasElement.clientHeight;\n\n\t\tif (newFrameworkHeight == 0) {\n\t\t\tnewFrameworkHeight = 1;\n\t\t}\n\t\tif (newFrameworkWidth == 0) {\n\t\t\tnewFrameworkWidth = 1;\n\t\t}\n\n\n\t\trequestAnimationFrame(() => {\n\t\t\tthis._resizeGL(newFrameworkWidth, newFrameworkHeight);\n\t\t});\n\n\t\tthis._updateCameraInteraction();\n\n\t\tthis.onResizeCallback?.(event);\n\t\t//});\n\t}\n\n\t/** Update Camera Interaction.\n\t * @method _updateCameraInteraction\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t * @chainable\n\t * @returns {this} Returns this for chaining.\n\t */\n\t_updateCameraInteraction() {\n\t\tif (this.zoom && this._settings.use2D) {\n\t\t\tconst panelHeight = this._canvasElement.clientHeight;\n\t\t\tconst fovy = Math.PI * 2 / 360 * this._camera.fieldOfView;\n\t\t\t// FIXME: Maybe use the distance to the objects instead of the camera distance\n\t\t\t// For the 3D case. The 2D case is fine.\n\t\t\tconst finalCameraDistance = this._camera.cameraDistance / this._camera.zoomFactor;\n\t\t\tconst displacementFactor = 2 * finalCameraDistance * Math.tan(fovy / 2) / panelHeight;\n\t\t\t// const displacementFactor = 1.0;\n\t\t\tthis._camera.transformX = this._camera.panX / displacementFactor + this._lastCanvasDimensions[0] / 2\n\t\t\tthis._camera.transformY = -this._camera.panY / displacementFactor + this._lastCanvasDimensions[1] / 2;\n\n\n\t\t\t\n\t\t\td3Select(this._canvasElement).property(\"__zoom\",\n\t\t\t\td3ZoomIdentity.translate(\n\t\t\t\t\tthis._camera.transformX,\n\t\t\t\t\tthis._camera.transformY\n\t\t\t\t).scale(this._camera.zoomFactor));\n\t\t}\n\t\treturn this;\n\t}\n\n\t/** Will hint force Helios to redraw the network.\n\t * @method redraw\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @returns {this} Returns this for chaining.\n\t * @fires Helios#redraw\n\t * @fires Helios#draw\n\t * @fires Helios#HoverEvent\n\t * @example\n\t * // Redraw the network\n\t * helios.redraw();\n\t * @example\n\t * // Update geometry and redraw the network\n\t * helios.update().redraw();\n\t */\n\tredraw() {\n\t\tthis._redrawAll(null, \"normal\"); // Normal\n\t\tthis._redrawAll(this.pickingFramebuffer, \"picking\"); // Picking\n\t\tif (this._tracking.bufferEnabled) {\n\t\t\tthis._redrawAll(this._trackingFramebuffer, \"tracking\"); // Labels buffer\n\t\t}\n\t\t// this.redrawDensityMap();\n\t\tthis.triggerHoverEvents(null);\n\t\tif(this._tracking.bufferEnabled){\n\t\t\tthis._updateTrackerNodesDataThrottle();\n\t\t}\n\t\tthis.onDrawCallback?.();\n\t\treturn this;\n\t}\n\n\n\t/** Will hint or force Helios to update the network geometry.\n\t * this method needs to be called after any changes to the network data\n\t * or visual properties.\n\t * @method update\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {boolean} [immediate=false] - If true, the update will be performed immediately, otherwise it will be scheduled.\n\t * @param {boolean} [nodes=true] - If true, the node geometry will be updated.\n\t * @param {boolean} [edges=true] - If true, the edge geometry will be updated.\n\t * @returns {this} Returns this for chaining.\n\t * @example\n\t * // Update the network geometry\n\t * helios.update();\n\t * @example\n\t * // Update the network geometry immediately\n\t * helios.update(true);\n\t */\n\tupdate(immediate = false, nodes = true, edges = true) {\n\t\tthis._scheduler.schedule({\n\t\t\tname: \"9.0.update\",\n\t\t\tcallback: null,\n\t\t\tdelay: 0,\n\t\t\trepeat: false,\n\t\t\tsynchronized: true,\n\t\t\timmediateUpdates: immediate,\n\t\t\t// redraw: true,\n\t\t\tupdateNodesGeometry: nodes,\n\t\t\tupdateEdgesGeometry: edges,\n\t\t});\n\t\treturn this;\n\t}\n\n\t/** Will hint or force Helios to render the network.\n\t * @method render\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {boolean} [immediate=false] - If true, the render will be performed immediately, otherwise it will be scheduled.\n\t * @returns {this} Returns this for chaining.\n\t * @example\n\t * // Render the network\n\t * helios.render();\n\t * @example\n\t * // Update geometry and render the network\n\t * helios.update().render();\n\t */\n\trender(immediate = false) {\n\t\t// if (!this.positionInterpolator) {\n\t\t// \twindow.requestAnimationFrame(() => this.redraw());\n\t\t// }\n\n\t\tthis._scheduler.schedule({\n\t\t\tname: \"9.1.render\",\n\t\t\tcallback: null,\n\t\t\tdelay: 0,\n\t\t\trepeat: false,\n\t\t\tsynchronized: true,\n\t\t\timmediateUpdates: immediate,\n\t\t\tredraw: true,\n\t\t\t// updateNodesGeometry: true,\n\t\t\t// updateEdgesGeometry: true,\n\t\t});\n\t\treturn this;\n\t}\n\n\t/** Helper method to prepare drawing framebuffers\n\t * @method _redrawPrepare\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t * @param {WebGLFramebuffer} destination - The destination framebuffer.\n\t * @param {boolean} isPicking - If true, the framebuffer is used for picking.\n\t * @param {Object} viewport - The viewport to use.\n\t */\n\t_redrawPrepare(destination, framebufferType, viewport) {\n\t\t// if framebufferType is undefined, set it to \"normal\"\n\t\tif (typeof framebufferType === \"undefined\") {\n\t\t\tframebufferType = \"normal\";\n\t\t}\n\t\tconst gl = this.gl;\n\n\t\tconst fbWidth = destination?.size.width || this._canvasElement.width;\n\t\tconst fbHeight = destination?.size.height || this._canvasElement.height;\n\t\t// let orthogonalScaleFactor = 1.0;\n\t\t// orthogonalScaleFactor = Math.max(this.canvasElement.clientWidth/this.canvasElement.width, this.canvasElement.clientHeight/this.canvasElement.height);\n\t\tif (destination == null) {\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\t\tgl.clearColor(...this._settings.backgroundColor);\n\t\t} else if (framebufferType != \"normal\") {\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, destination);\n\t\t\tgl.clearColor(0.0, 0.0, 0.0, 0.0);\n\t\t} else {\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, destination);\n\t\t\tif (typeof destination.backgroundColor === \"undefined\") {\n\t\t\t\tgl.clearColor(...this._settings.backgroundColor);\n\t\t\t} else {\n\t\t\t\tgl.clearColor(...destination.backgroundColor);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof viewport === \"undefined\") {\n\t\t\tgl.viewport(0, 0, fbWidth, fbHeight);\n\t\t} else {\n\t\t\tgl.viewport(viewport);\n\t\t}\n\n\t\tgl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\t\tgl.depthFunc(gl.LEQUAL);\n\n\t\tthis.projectionMatrix = glm.mat4.create();\n\t\tthis.viewMatrix = glm.mat4.create();\n\t\tthis.projectionViewMatrix = glm.mat4.create();\n\n\t\t// \n\t\tlet fovy = Math.PI * 2 / 360 * this._camera.fieldOfView;\n\t\tlet aspectRatio = fbWidth / fbHeight;\n\t\tif (this._settings.use2D || this._settings.orthographic) {\n\t\t\tconst finalCameraDistance = this._camera.cameraDistance / this._camera.zoomFactor;\n\t\t\tconst orthoHeight = 2 * finalCameraDistance * Math.tan(fovy / 2);\n\t\t\tconst orthoWidth = orthoHeight * aspectRatio;\n\t\t\tconst left = -orthoWidth / 2;\n\t\t\tconst right = orthoWidth / 2;\n\t\t\tconst bottom = -orthoHeight / 2;\n\t\t\tconst top = orthoHeight / 2;\n\t\t\t// orthogonalScaleFactor = 1.0;\n\t\t\t// console.log(\"Scale Factor:\",orthogonalScaleFactor);\n\n\t\t\tglm.mat4.ortho(this.projectionMatrix,\n\t\t\t\tleft,\n\t\t\t\tright,\n\t\t\t\tbottom,\n\t\t\t\ttop,\n\t\t\t\t-100 + finalCameraDistance, 10000.0 + finalCameraDistance);\n\n\t\t\t// glm.mat4.ortho(this.projectionMatrix,\n\t\t\t// \t-fbWidth / this._zoomFactor / orthoRescaleFactor * scaleFactor*orthogonalScaleFactor/ scaleHeight,\n\t\t\t// \tfbWidth / this._zoomFactor / orthoRescaleFactor * scaleFactor*orthogonalScaleFactor / scaleHeight,\n\t\t\t// \t-fbHeight / this._zoomFactor / orthoRescaleFactor * scaleFactor*orthogonalScaleFactor / scaleHeight,\n\t\t\t// \tfbHeight / this._zoomFactor / orthoRescaleFactor * scaleFactor*orthogonalScaleFactor / scaleHeight,\n\t\t\t// \t-10000.0, 100000.0);\n\t\t\t// glm.mat4.perspective(this.projectionMatrix, Math.PI * 2 / 360 * 70, fbWidth / fbHeight, 1.0, 10000.0);\n\n\t\t} else {\n\t\t\tglm.mat4.perspective(this.projectionMatrix, fovy, aspectRatio, 1.0, null);\n\t\t}\n\n\t\tglm.mat4.identity(this.viewMatrix);\n\t\tglm.mat4.translate(this.viewMatrix, this.viewMatrix, [this._camera.panX, this._camera.panY, -this._camera.cameraDistance / this._camera.zoomFactor]);\n\n\n\t\tglm.mat4.multiply(this.viewMatrix, this.viewMatrix, this._camera.rotationMatrix);\n\t\t// glm.mat4.scale(this.viewMatrix, this.viewMatrix, [this._zoomFactor, this._zoomFactor, this._zoomFactor]);\n\t\tglm.mat4.translate(this.viewMatrix, this.viewMatrix, this._camera.translatePosition);\n\n\t\tglm.mat4.multiply(this.projectionViewMatrix, this.projectionMatrix, this.viewMatrix);\n\t}\n\n\t/** Helper method to draw nodes\n\t * @method _redrawNodes\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t * @param {WebGLFramebuffer} destination - The destination framebuffer.\n\t * @param {boolean} isPicking - If true, the framebuffer is used for picking.\n\t */\n\t_redrawNodes(destination, framebufferType) {\n\t\tif (typeof framebufferType === \"undefined\") {\n\t\t\tframebufferType = \"normal\";\n\t\t}\n\t\tconst gl = this.gl;\n\t\tlet ext = gl.getExtension(\"ANGLE_instanced_arrays\");\n\n\t\tlet adjustedScaleFactor = 1.0 / Math.pow(this._camera.zoomFactor, this._settings.semanticZoomExponent);\n\n\t\tif (framebufferType != \"normal\") {\n\t\t\tadjustedScaleFactor = 1.0 / Math.pow(this._camera.zoomFactor, 0.75 * this._settings.semanticZoomExponent);\n\t\t}\n\n\t\tlet currentShaderProgram;\n\t\tif (framebufferType == \"normal\") {\n\t\t\t// console.log(this.nodesShaderProgram);\n\t\t\tgl.enable(gl.BLEND);\n\t\t\t// if(this.useAdditiveBLending){\n\t\t\t// gl.blendFunc(gl.SRC_ALPHA, gl.ONE);\n\t\t\t// \t}else{\n\t\t\tgl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\t\t\t// gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA,\n\t\t\t// \tgl.ZERO, gl.ONE);\n\t\t\t// \t}\n\t\t\tif (this._settings.shadedNodes) {\n\t\t\t\tcurrentShaderProgram = this.nodesShaderProgram;\n\t\t\t} else {\n\t\t\t\tcurrentShaderProgram = this.nodesFastShaderProgram;\n\t\t\t}\n\t\t} else {\n\t\t\tgl.disable(gl.BLEND);\n\t\t\t// console.log(this.nodesShaderProgram);\n\t\t\tcurrentShaderProgram = this.nodesPickingShaderProgram;\n\t\t}\n\n\t\tcurrentShaderProgram.use(gl);\n\t\tcurrentShaderProgram.attributes.enable(\"vertex\");\n\t\t// currentShaderProgram.attributes.enable(\"normal\");\n\t\tcurrentShaderProgram.attributes.enable(\"position\");\n\t\tcurrentShaderProgram.attributes.enable(\"size\");\n\t\tcurrentShaderProgram.attributes.enable(\"outlineWidth\");\n\t\tcurrentShaderProgram.attributes.enable(\"outlineColor\");\n\t\tcurrentShaderProgram.attributes.enable(\"encodedIndex\");\n\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesGeometry.vertexObject);\n\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.vertex, 3, gl.FLOAT, false, 0, 0);\n\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.vertex, 0);\n\n\t\t// gl.bindBuffer(gl.ARRAY_BUFFER, this.nodesGeometry.normalObject);\n\t\t// gl.vertexAttribPointer(currentShaderProgram.attributes.normal, 3, gl.FLOAT, false, 0, 0);\n\t\t// ext.vertexAttribDivisorANGLE(currentShaderProgram.attributes.normal, 0); \n\n\t\tif (this.nodesGeometry.indexObject) {\n\t\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.nodesGeometry.indexObject);\n\t\t}\n\n\t\tgl.uniformMatrix4fv(currentShaderProgram.uniforms.projectionMatrix, false, this.projectionMatrix);\n\t\tgl.uniformMatrix4fv(currentShaderProgram.uniforms.viewMatrix, false, this.viewMatrix);\n\n\t\tgl.uniform1f(currentShaderProgram.uniforms.globalOpacityScale, this._settings.nodesGlobalOpacityScale);\n\t\tgl.uniform1f(currentShaderProgram.uniforms.globalOpacityBase, this._settings.nodesGlobalOpacityBase);\n\n\t\tgl.uniform1f(currentShaderProgram.uniforms.globalSizeScale, this._settings.nodesGlobalSizeScale * adjustedScaleFactor);\n\t\tgl.uniform1f(currentShaderProgram.uniforms.globalSizeBase, this._settings.nodesGlobalSizeBase * adjustedScaleFactor);\n\n\t\tgl.uniform1f(currentShaderProgram.uniforms.globalOutlineWidthScale, this._settings.nodesGlobalOutlineWidthScale * adjustedScaleFactor);\n\t\tgl.uniform1f(currentShaderProgram.uniforms.globalOutlineWidthBase, this._settings.nodesGlobalOutlineWidthBase * adjustedScaleFactor);\n\n\t\tlet normalMatrix = glm.mat3.create();\n\t\tglm.mat3.normalFromMat4(normalMatrix, this.viewMatrix);\n\t\tgl.uniformMatrix3fv(currentShaderProgram.uniforms.normalMatrix, false, normalMatrix);\n\n\t\t// Geometry Mutators and colors obtained from the network properties\n\t\tlet colorsArray = this.network.colors;\n\t\tlet positionsArray = this.network.positions;\n\t\tlet sizeValue = this.network.sizes;\n\t\tlet outlineWidthValue = this.network.outlineWidths;\n\n\t\t// Bind the instance position data\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesPositionBuffer);\n\t\tgl.enableVertexAttribArray(currentShaderProgram.attributes.position);\n\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.position, 3, gl.FLOAT, false, 0, 0);\n\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.position, 1); // This makes it instanced!\n\n\t\t// Bind the instance color data\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesColorBuffer);\n\t\tgl.enableVertexAttribArray(currentShaderProgram.attributes.color);\n\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.color, 4, gl.FLOAT, false, 0, 0);\n\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.color, 1); // This makes it instanced!\n\n\t\t// Bind the instance color data\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesSizeBuffer);\n\t\tgl.enableVertexAttribArray(currentShaderProgram.attributes.size);\n\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.size, 1, gl.FLOAT, false, 0, 0);\n\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.size, 1); // This makes it instanced!\n\n\t\t// Bind the instance color data\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesOutlineColorBuffer);\n\t\tgl.enableVertexAttribArray(currentShaderProgram.attributes.outlineColor);\n\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.outlineColor, 4, gl.FLOAT, false, 0, 0);\n\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.outlineColor, 1); // This makes it instanced!\n\n\t\t// Bind the instance color data\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesOutlineWidthBuffer);\n\t\tgl.enableVertexAttribArray(currentShaderProgram.attributes.outlineWidth);\n\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.outlineWidth, 1, gl.FLOAT, false, 0, 0);\n\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.outlineWidth, 1); // This makes it instanced!\n\n\t\t// Bind the instance color data\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesIndexBuffer);\n\t\tgl.enableVertexAttribArray(currentShaderProgram.attributes.encodedIndex);\n\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.encodedIndex, 4, gl.FLOAT, false, 0, 0);\n\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.encodedIndex, 1); // This makes it instanced!\n\n\t\t// console.log(this.network.positions.length/3)\n\t\t// Draw the instanced meshes\n\t\tif (this.nodesGeometry.indexObject) {\n\t\t\text.drawElementsInstancedANGLE(gl.TRIANGLES, this.nodesGeometry.numIndices, this.nodesGeometry.indexType, 0, this.network.positions.length / 3);\n\t\t} else {\n\t\t\text.drawArraysInstancedANGLE(gl.TRIANGLE_STRIP, 0, this.nodesGeometry.numIndices, this.network.positions.length / 3);\n\t\t}\n\n\t\t// Disable attributes\n\t\tcurrentShaderProgram.attributes.disable(\"vertex\");\n\t\t// this.nodesShaderProgram.attributes.disable(\"normal\");\n\t\tcurrentShaderProgram.attributes.disable(\"position\");\n\t\tcurrentShaderProgram.attributes.disable(\"size\");\n\t\tcurrentShaderProgram.attributes.disable(\"outlineWidth\");\n\t\tcurrentShaderProgram.attributes.disable(\"outlineColor\");\n\t\tcurrentShaderProgram.attributes.disable(\"encodedIndex\");\n\t}\n\n\n\t/** Helper function to redraw the edges\n\t * @method _redrawEdges\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t * @param {WebGLFramebuffer} destination - The destination framebuffer.\n\t * @param {String} framebufferType - The type of framebuffer to render to (normal, picking, or tracking).\n\t */\n\t_redrawEdges(destination, framebufferType) {\n\n\t\tif (typeof framebufferType === \"undefined\") {\n\t\t\tframebufferType = \"normal\";\n\t\t}\n\t\tlet hasEdgeCallbacks = this.onEdgeClickCallback\n\t\t\t|| this.onEdgeHoverMoveCallback\n\t\t\t|| this.onEdgeHoverStartCallback\n\t\t\t|| this.onEdgeHoverEndCallback\n\t\t\t|| this.onEdgeDoubleClickCallback\n\t\t\t|| this.onEdgeClickCallback;\n\n\t\tif (framebufferType != \"normal\" && (this._settings.fastEdges || !hasEdgeCallbacks)) {\n\t\t\treturn // no picking for fast edges or no callbacks\n\t\t}\n\n\t\tlet adjustedScaleFactor = 1.0 / Math.pow(this._camera.zoomFactor, this._settings.semanticZoomExponent);\n\n\t\tif (framebufferType != \"normal\") {\n\t\t\tadjustedScaleFactor = 1.0 / Math.pow(this._camera.zoomFactor, 0.5 * this._settings.semanticZoomExponent);\n\t\t}\n\t\tconst gl = this.gl;\n\t\tlet ext = gl.getExtension(\"ANGLE_instanced_arrays\");\n\n\t\tlet currentShaderProgram;\n\t\tif (framebufferType == \"normal\") {\n\t\t\tgl.enable(gl.BLEND);\n\t\t\t// \t//Edges are rendered with additive blending.\n\t\t\t// \tgl.enable(gl.BLEND);\n\t\t\tif (this._settings.useAdditiveBlending) {\n\t\t\t\tgl.blendFunc(gl.SRC_ALPHA, gl.ONE);\n\t\t\t} else {\n\t\t\t\t// gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\t\t\t\t// gl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\t\t\t\t// gl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ZERO, gl.ONE ); //Original from Networks 3D\n\t\t\t\tgl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE); // New (works for transparent background)\n\t\t\t}\n\t\t\tif (this._settings.fastEdges) {\n\t\t\t\tcurrentShaderProgram = this.edgesFastShaderProgram;\n\t\t\t} else {\n\t\t\t\tcurrentShaderProgram = this.edgesShaderProgram;\n\t\t\t}\n\t\t} else {\n\t\t\tgl.disable(gl.BLEND);\n\t\t\t// console.log(\"PICKING EDGESSSS\");\n\t\t\tcurrentShaderProgram = this.edgesPickingShaderProgram;\n\t\t}\n\n\t\tif (this._settings.fastEdges) {\n\t\t\t// console.log(this.edgesShaderProgram)\n\n\t\t\tcurrentShaderProgram.use(gl);\n\t\t\tcurrentShaderProgram.attributes.enable(\"vertex\");\n\t\t\tcurrentShaderProgram.attributes.enable(\"color\");\n\t\t\t// currentShaderProgram.attributes.enable(\"encodedIndex\");\n\n\n\n\t\t\t//bind attributes and unions\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.fastEdgesGeometry.vertexObject);\n\t\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.vertex, 3, gl.FLOAT, false, 0, 0);\n\t\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.vertex, 0); // This makes it instanced!\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.fastEdgesGeometry.colorObject);\n\t\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.color, 4, gl.FLOAT, false, 0, 0);\n\t\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.color, 0); // This makes it instanced!\n\n\t\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.fastEdgesGeometry.indexObject);\n\n\t\t\tgl.uniformMatrix4fv(currentShaderProgram.uniforms.projectionViewMatrix, false, this.projectionViewMatrix);\n\n\t\t\t//gl.uniform2fv(edgesShaderProgram.uniforms.nearFar,[0.1,10.0]);\n\t\t\tgl.uniform1f(currentShaderProgram.uniforms.globalOpacityScale, this._settings.edgesGlobalOpacityScale);\n\t\t\tgl.uniform1f(currentShaderProgram.uniforms.globalOpacityBase, this._settings.edgesGlobalOpacityBase);\n\n\n\t\t\t//drawElements is called only 1 time. no overhead from javascript\n\t\t\tgl.drawElements(gl.LINES, this.fastEdgesGeometry.numIndices, this.fastEdgesGeometry.indexType, 0);\n\n\t\t\t//disabling attributes\n\t\t\tcurrentShaderProgram.attributes.disable(\"vertex\");\n\t\t\tcurrentShaderProgram.attributes.disable(\"color\");\n\t\t\t// currentShaderProgram.attributes.disable(\"encodedIndex\");\n\t\t} else {\n\t\t\tcurrentShaderProgram.use(gl);\n\t\t\tcurrentShaderProgram.attributes.enable(\"fromVertex\");\n\t\t\tcurrentShaderProgram.attributes.enable(\"toVertex\");\n\t\t\tcurrentShaderProgram.attributes.enable(\"vertexType\");\n\t\t\tcurrentShaderProgram.attributes.enable(\"fromColor\");\n\t\t\tcurrentShaderProgram.attributes.enable(\"toColor\");\n\t\t\tcurrentShaderProgram.attributes.enable(\"fromSize\");\n\t\t\tcurrentShaderProgram.attributes.enable(\"toSize\");\n\t\t\tcurrentShaderProgram.attributes.enable(\"encodedIndex\");\n\n\t\t\t// newGeometry.edgeVertexTypeBuffer = gl.createBuffer();\n\t\t\t// newGeometry.verticesBuffer = gl.createBuffer();\n\t\t\t// newGeometry.colorBuffer = gl.createBuffer();\n\t\t\t// newGeometry.sizeBuffer = gl.createBuffer();\n\t\t\t// newGeometry.indexBuffer = gl.createBuffer();\n\t\t\t// console.log(currentShaderProgram.attributes);\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.edgesGeometry.edgeVertexTypeBuffer);\n\t\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.vertexType, 2, gl.FLOAT, false, 0, 0);\n\t\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.vertexType, 0);\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.edgesGeometry.verticesBuffer);\n\t\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.fromVertex, 3, gl.FLOAT, false, 4 * 3 * 2, 0);\n\t\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.fromVertex, 1);\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.edgesGeometry.verticesBuffer);\n\t\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.toVertex, 3, gl.FLOAT, false, 4 * 3 * 2, 4 * 3);\n\t\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.toVertex, 1);\n\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.edgesGeometry.colorBuffer);\n\t\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.fromColor, 4, gl.FLOAT, false, 4 * 4 * 2, 0);\n\t\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.fromColor, 1);\n\t\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.toColor, 4, gl.FLOAT, false, 4 * 4 * 2, 4 * 4);\n\t\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.toColor, 1);\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.edgesGeometry.sizeBuffer);\n\t\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.fromSize, 1, gl.FLOAT, false, 4 * 2, 0);\n\t\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.fromSize, 1);\n\t\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.toSize, 1, gl.FLOAT, false, 4 * 2, 4);\n\t\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.toSize, 1);\n\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.edgesGeometry.indexBuffer);\n\t\t\tgl.enableVertexAttribArray(currentShaderProgram.attributes.encodedIndex);\n\t\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.encodedIndex, 4, gl.FLOAT, false, 0, 0);\n\t\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.encodedIndex, 1); // This makes it instanced!\n\n\t\t\t// gl.bindBuffer(gl.ARRAY_BUFFER, this.nodesGeometry.normalObject);\n\t\t\t// gl.vertexAttribPointer(currentShaderProgram.attributes.normal, 3, gl.FLOAT, false, 0, 0);\n\t\t\t// ext.vertexAttribDivisorANGLE(currentShaderProgram.attributes.normal, 0); \n\n\t\t\tgl.uniformMatrix4fv(currentShaderProgram.uniforms.projectionMatrix, false, this.projectionMatrix);\n\t\t\tgl.uniformMatrix4fv(currentShaderProgram.uniforms.viewMatrix, false, this.viewMatrix);\n\n\t\t\t//gl.uniform2fv(edgesShaderProgram.uniforms.nearFar,[0.1,10.0]);\n\t\t\tgl.uniform1f(currentShaderProgram.uniforms.globalOpacityScale, this._settings.edgesGlobalOpacityScale);\n\t\t\tgl.uniform1f(currentShaderProgram.uniforms.globalOpacityBase, this._settings.edgesGlobalOpacityBase);\n\n\t\t\tgl.uniform1f(currentShaderProgram.uniforms.globalWidthScale, this._settings.edgesGlobalWidthScale);\n\t\t\tgl.uniform1f(currentShaderProgram.uniforms.globalWidthBase, this._settings.edgesGlobalWidthBase);\n\n\t\t\tgl.uniform1f(currentShaderProgram.uniforms.globalSizeScale, this._settings.nodesGlobalSizeScale * adjustedScaleFactor);\n\t\t\tgl.uniform1f(currentShaderProgram.uniforms.globalSizeBase, this._settings.nodesGlobalSizeBase * adjustedScaleFactor);\n\n\t\t\t// 01,11,21\n\t\t\t// let cameraUp = glm.vec3.fromValues(this.viewMatrix[1], this.viewMatrix[5], this.viewMatrix[9]);\n\t\t\t// // let cameraUp = glm.vec3.fromValues(0, 1.0, 0);\n\t\t\t// // 00,10,20\n\t\t\t// let cameraRight = glm.vec3.fromValues(this.viewMatrix[0], this.viewMatrix[4], this.viewMatrix[8]);\n\t\t\t// let cameraForward = glm.vec3.fromValues(this.viewMatrix[2], this.viewMatrix[6], this.viewMatrix[10]);\n\n\t\t\t// console.log(cameraUp);\n\t\t\t// glm.vec3.normalize(cameraUp, cameraUp);\n\t\t\t// glm.vec3.normalize(cameraRight, cameraRight);\n\t\t\t// glm.vec3.cross(cameraForward,cameraUp,cameraRight);\n\t\t\t// glm.vec3.normalize(cameraForward, cameraForward);\n\t\t\t// gl.uniform3fv(currentShaderProgram.uniforms.cameraUp, cameraUp);\n\t\t\t// gl.uniform3fv(currentShaderProgram.uniforms.cameraRight, cameraRight);\n\t\t\t// gl.uniform3fv(currentShaderProgram.uniforms.cameraForward, cameraForward);\n\t\t\t// cameraRight;// = normalize(vec3(viewMatrix[0][0], viewMatrix[1][0], viewMatrix[2][0]));\n\t\t\t// cameraUp;// = normalize(vec3(viewMatrix[0][1], viewMatrix[1][1], viewMatrix[2][1]));\n\t\t\t// cameraForward;// = normalize(vec3(viewMatrix[0][2], viewMatrix[1][2], viewMatrix[2][2]));\n\n\t\t\text.drawArraysInstancedANGLE(gl.TRIANGLE_STRIP, 0, 4, this.edgesGeometry.count);\n\n\t\t\tcurrentShaderProgram.attributes.disable(\"fromVertex\");\n\t\t\tcurrentShaderProgram.attributes.disable(\"toVertex\");\n\t\t\tcurrentShaderProgram.attributes.disable(\"vertexType\");\n\t\t\tcurrentShaderProgram.attributes.disable(\"fromColor\");\n\t\t\tcurrentShaderProgram.attributes.disable(\"toColor\");\n\t\t\tcurrentShaderProgram.attributes.disable(\"fromSize\");\n\t\t\tcurrentShaderProgram.attributes.disable(\"toSize\");\n\t\t\tcurrentShaderProgram.attributes.disable(\"encodedIndex\");\n\t\t\t// console.log(\"PICKING? \" + isPicking)\n\t\t}\n\t}\n\n\t/** Helper function to redraw the scene.\n\t * @method _redrawAll\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t * @param {Object} destination - The destination to draw to. If undefined, the canvas will be used.\n\t * @param {String} framebufferType - Type of the framebuffer to draw \"normal\", \"picking\", \"tracking\" . Default is \"normal\"\n\t */\n\t_redrawAll(destination, framebufferType) {\n\t\tif (typeof framebufferType === 'undefined') {\n\t\t\tframebufferType = \"normal\";\n\t\t}\n\t\tconst gl = this.gl;\n\n\t\tthis._redrawPrepare(destination, framebufferType);\n\t\tif (framebufferType == \"normal\" && this.densityPlot) {\n\n\t\t\t// gl.clearColor(0.0, 0.0, 0.0, 1.0);\n\t\t\t// gl.clearDepth(1.0)\n\t\t\tgl.disable(this.gl.DEPTH_TEST);\n\t\t\t// gl.depthMask(true);\n\n\t\t\tconst fbWidth = destination?.size.width || this._canvasElement.width;\n\t\t\tconst fbHeight = destination?.size.height || this._canvasElement.height;\n\t\t\t// this.densityMap.resize(fbWidth,fbHeight);\n\t\t\tthis.densityMap.drawScene(this.projectionMatrix, this.viewMatrix);\n\t\t}\n\n\t\tgl.depthMask(true);\n\t\tif (this._settings.use2D) {\n\t\t\tgl.disable(gl.DEPTH_TEST);\n\t\t\tgl.depthMask(false);\n\t\t\t// if(edge)\n\t\t\tif (framebufferType != \"tracking\") {\n\t\t\t\tif (this._settings.edgesGlobalOpacityScale > 0.0) {\n\t\t\t\t\tthis._redrawEdges(destination, framebufferType);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._redrawNodes(destination, framebufferType);\n\t\t} else {\n\t\t\tgl.enable(gl.DEPTH_TEST);\n\t\t\tthis._redrawNodes(destination, framebufferType);\n\t\t\tgl.depthMask(false);\n\n\t\t\tif (framebufferType != \"tracking\") {\n\t\t\t\tif (this._settings.edgesGlobalOpacityScale > 0.0) {\n\t\t\t\t\tthis._redrawEdges(destination, framebufferType);\n\t\t\t\t}\n\t\t\t}\n\t\t\tgl.depthMask(true);\n\t\t}\n\t}\n\n\t// onResizeCallback\n\t// onNodeClickCallback\n\t// onNodeHoverStartCallback \n\t// onNodeHoverEndCallback\n\t// onNodeHoverMoveCallback\n\t// onZoomCallback\n\t// onRotationCallback\n\t// onLayoutStartCallback\n\t// onLayoutFinishCallback\n\t// onDrawCallback\n\n\t/** Helper function to update the center nodes position.\n\t * @method _updateCenterNodesPosition\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_updateCenterNodesPosition() {\n\t\tthis._camera.targetTranslatePosition[0] = 0;\n\t\tthis._camera.targetTranslatePosition[1] = 0;\n\t\tthis._camera.targetTranslatePosition[2] = 0;\n\n\t\tif (this._centerNodes && this._centerNodes.length > 0) {\n\t\t\tfor (let i = 0; i < this._centerNodes.length; i++) {\n\t\t\t\tlet node = this._centerNodes[i];\n\t\t\t\t// if node is not of type node, get node by id\n\t\t\t\tlet pos = node.position;\n\t\t\t\tthis._camera.targetTranslatePosition[0] -= pos[0];\n\t\t\t\tthis._camera.targetTranslatePosition[1] -= pos[1];\n\t\t\t\tthis._camera.targetTranslatePosition[2] -= pos[2];\n\t\t\t}\n\t\t\tlet lengthSize = this._centerNodes.length;\n\t\t\tthis._camera.targetTranslatePosition[0] /= lengthSize;\n\t\t\tthis._camera.targetTranslatePosition[1] /= lengthSize;\n\t\t\tthis._camera.targetTranslatePosition[2] /= lengthSize;\n\t\t}\n\t}\n\n\t/** Center view on nodes with animation.\n\t * @method centerOnNodes\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number[]|Node} nodes - The nodes to center on.\n\t * @param {number} duration - The duration of the animation in milliseconds.\n\t * @example\n\t * // Center on node with id 1\n\t * helios.centerOnNodes([1], 1000);\n\t * @example\n\t * // Center on node with id 1 and 2\n\t * helios.centerOnNodes([1, 2], 1000);\n\t * @example\n\t * // Center on node with id 1 and node object\n\t * helios.centerOnNodes([1, helios.network.nodes[2]], 1000);\n\t * return {this} The current instance of Helios for chaining.\n\t */\n\tcenterOnNodes(nodes, duration) {\n\t\t//\n\t\tthis._centerNodes = [];\n\t\tfor (let i = 0; i < nodes.length; i++) {\n\t\t\tlet node = nodes[i];\n\t\t\tif (node.ID === undefined) {\n\t\t\t\tnode = this.network.nodes[node];\n\t\t\t}\n\t\t\tthis._centerNodes.push(node);\n\t\t}\n\n\t\tthis._updateCameraInteraction();\n\n\t\tthis._camera.lastTranslatePosition[0] = this._camera.translatePosition[0];\n\t\tthis._camera.lastTranslatePosition[1] = this._camera.translatePosition[1];\n\t\tthis._camera.lastTranslatePosition[2] = this._camera.translatePosition[2];\n\t\tthis._camera.lastPanX = this._camera.panX;\n\t\tthis._camera.lastPanY = this._camera.panY;\n\t\tif (duration === undefined || duration <= 0) {\n\t\t\tthis._camera.translateDuration = 0;\n\t\t\tthis.translateStartTime = null;\n\t\t\t// this.update(); No need to update?\n\t\t\t// this.render();\n\t\t} else {\n\t\t\tthis._camera.translateDuration = duration;\n\t\t\tthis.translateStartTime = performance.now();\n\t\t}\n\t\tthis._scheduleCameraInterpolation();\n\t\treturn this;\n\t}\n\n\t/** Get the nodes being centered on.\n\t * @method getCenterNodes\n\t * @memberof Helios\n\t * @instance\n\t * @return {Array<Node>} The nodes being centered on.\n\t * @example\n\t * // Get the nodes being centered on\n\t * let nodes = helios.getCenterNodes();\n\t */\n\tcenteredNodes() {\n\t\treturn this._centerNodes;\n\t}\n\n\n\t/** Helper method to update the camera interpolation.\n\t * @method _updateCameraInterpolation\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t * @param {Boolean} ignoreInstantaneousUpdate - Ignore instantaneous update.\n\t * @return {Boolean} True if the camera interpolation needs to continue, false otherwise.\n\t */\n\t_updateCameraInterpolation(ignoreInstantaneousUpdate = false) {\n\t\tif (this._camera.translateDuration == 0) {\n\t\t\tif (!ignoreInstantaneousUpdate) {\n\t\t\t\tthis._camera.translatePosition[0] = this._camera.targetTranslatePosition[0];\n\t\t\t\tthis._camera.translatePosition[1] = this._camera.targetTranslatePosition[1];\n\t\t\t\tthis._camera.translatePosition[2] = this._camera.targetTranslatePosition[2];\n\t\t\t\tthis._camera.panX = 0;\n\t\t\t\tthis._camera.panY = 0;\n\t\t\t\tif (this._settings.use2D) {\n\t\t\t\t\t// this.zoom.translateTo(d3Select(this.canvasElement),this.panX+this.canvasElement.clientWidth/2,this.panY+this.canvasElement.clientHeight/2);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false; //no need to continue\n\t\t} else {\n\t\t\tlet elapsedTime = performance.now() - this.translateStartTime;\n\t\t\tlet alpha = elapsedTime / this._camera.translateDuration;\n\t\t\tif (alpha > 1) {\n\t\t\t\talpha = 1.0;\n\t\t\t}\n\t\t\t// console.log(elapsedTime);\n\t\t\tthis._camera.translatePosition[0] = (1.0 - alpha) * this._camera.lastTranslatePosition[0];\n\t\t\tthis._camera.translatePosition[1] = (1.0 - alpha) * this._camera.lastTranslatePosition[1];\n\t\t\tthis._camera.translatePosition[2] = (1.0 - alpha) * this._camera.lastTranslatePosition[2];\n\n\t\t\tthis._camera.translatePosition[0] += alpha * this._camera.targetTranslatePosition[0];\n\t\t\tthis._camera.translatePosition[1] += alpha * this._camera.targetTranslatePosition[1];\n\t\t\tthis._camera.translatePosition[2] += alpha * this._camera.targetTranslatePosition[2];\n\n\t\t\tthis._camera.panX = (1.0 - alpha) * this._camera.lastPanX;\n\t\t\tthis._camera.panY = (1.0 - alpha) * this._camera.lastPanY;\n\t\t\tthis._camera.panX += alpha * this._camera.targetPanX;\n\t\t\tthis._camera.panY += alpha * this._camera.targetPanY;\n\t\t\tif (this._settings.use2D) {\n\t\t\t\t// this.zoom.translateTo(d3Select(this.canvasElement),this.panX+this.canvasElement.clientWidth/2,this.panY+this.canvasElement.clientHeight/2);\n\t\t\t}\n\t\t\tif (alpha >= 1.0) {\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\n\t/** Helper method to schedule the camera interpolation.\n\t * @method _scheduleCameraInterpolation\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_scheduleCameraInterpolation() {\n\t\tlet cameraInterpolatorTask = {\n\t\t\tname: \"1.1.cameraInterpolator\",\n\t\t\tcallback: (elapsedTime, task) => {\n\t\t\t\tthis._updateCenterNodesPosition();\n\t\t\t\tif (!this._updateCameraInterpolation()) {\n\n\t\t\t\t\tthis._scheduler.unschedule(\"1.1.cameraInterpolator\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelay: 0,\n\t\t\trepeat: true,\n\t\t\tsynchronized: true,\n\t\t\timmediateUpdates: false,\n\t\t\tredraw: true,\n\t\t\tupdateNodesGeometry: false,\n\t\t\tupdateEdgesGeometry: false,\n\t\t}\n\t\tthis._scheduler.schedule({\n\t\t\tname: \"1.0.cameraInterpolator\",\n\t\t\tcallback: (elapsedTime, task) => {\n\t\t\t\tthis._scheduler.schedule(cameraInterpolatorTask);\n\t\t\t},\n\t\t\tdelay: 0,\n\t\t\trepeat: false,\n\t\t\tsynchronized: true,\n\t\t\timmediateUpdates: false,\n\t\t\tredraw: false,\n\t\t\tupdateNodesGeometry: false,\n\t\t\tupdateEdgesGeometry: false,\n\t\t});\n\t}\n\n\t//#region Events\n\n\t/** Set the callback for the resize event.\n\t * @method onResize\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the resize event\n\t * helios.onResize((width, height) => {\n\t * \tconsole.log(\"The canvas was resized to \" + width + \"x\" + height);\n\t * });\n\t */\n\tonResize(callback) {\n\t\tthis.onResizeCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the node click event.\n\t * @method onNodeClick\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the node click event\n\t * helios.onNodeClick((node) => {\n\t * \tconsole.log(\"The node \" + node.id + \" was clicked\");\n\t * });\n\t */\n\tonNodeClick(callback) {\n\t\tthis.onNodeClickCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the node double click event.\n\t * @method onNodeDoubleClick\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the node double click event\n\t * helios.onNodeDoubleClick((node) => {\n\t * \tconsole.log(\"The node \" + node.id + \" was double clicked\");\n\t * });\n\t * @see {@link Helios#onNodeClick}\n\t */\n\tonNodeDoubleClick(callback) {\n\t\tthis.onNodeDoubleClickCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the node hover start event.\n\t * @method onNodeHoverStart\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the node hover start event\n\t * helios.onNodeHoverStart((node) => {\n\t * \tconsole.log(\"The node \" + node.id + \" was hovered\");\n\t * });\n\t * @see {@link Helios#onNodeHoverEnd}\n\t * @see {@link Helios#onNodeHoverMove}\n\t */\n\tonNodeHoverStart(callback) {\n\t\tthis.onNodeHoverStartCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the node hover end event.\n\t * @method onNodeHoverEnd\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the node hover end event\n\t * helios.onNodeHoverEnd((node) => {\n\t * \tconsole.log(\"The node \" + node.id + \" was no longer hovered\");\n\t * });\n\t * @see {@link Helios#onNodeHoverStart}\n\t * @see {@link Helios#onNodeHoverMove}\n\t */\n\tonNodeHoverEnd(callback) {\n\t\tthis.onNodeHoverEndCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the node hover move event.\n\t * @method onNodeHoverMove\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @category Events\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the node hover move event\n\t * helios.onNodeHoverMove((node) => {\n\t * \tconsole.log(\"The node \" + node.id + \" was hovered\");\n\t * });\n\t * @see {@link Helios#onNodeHoverStart}\n\t * @see {@link Helios#onNodeHoverEnd}\n\t */\n\tonNodeHoverMove(callback) {\n\t\tthis.onNodeHoverMoveCallback = callback;\n\t\treturn this;\n\t}\n\n\n\n\t/** Set the callback for the edge click event.\n\t * @method onEdgeClick\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the edge click event\n\t * helios.onEdgeClick((edge) => {\n\t * \tconsole.log(\"The edge \" + edge.id + \" was clicked\");\n\t * });\n\t * @see {@link Helios#onEdgeDoubleClick}\n\t * @see {@link Helios#onEdgeHoverStart}\n\t * @see {@link Helios#onEdgeHoverEnd}\n\t * @see {@link Helios#onEdgeHoverMove}\n\t */\n\tonEdgeClick(callback) {\n\t\tthis.onEdgeClickCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the edge double click event.\n\t * @method onEdgeDoubleClick\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the edge double click event\n\t * helios.onEdgeDoubleClick((edge) => {\n\t * \tconsole.log(\"The edge \" + edge.id + \" was double clicked\");\n\t * });\n\t * @see {@link Helios#onEdgeClick}\n\t * @see {@link Helios#onEdgeHoverStart}\n\t * @see {@link Helios#onEdgeHoverEnd}\n\t * @see {@link Helios#onEdgeHoverMove}\n\t */\n\tonEdgeDoubleClick(callback) {\n\t\tthis.onEdgeDoubleClickCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the edge hover start event.\n\t * @method onEdgeHoverStart\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the edge hover start event\n\t * helios.onEdgeHoverStart((edge) => {\n\t * \tconsole.log(\"The edge \" + edge.id + \" was hovered\");\n\t * });\n\t * @see {@link Helios#onEdgeClick}\n\t * @see {@link Helios#onEdgeDoubleClick}\n\t * @see {@link Helios#onEdgeHoverEnd}\n\t * @see {@link Helios#onEdgeHoverMove}\n\t */\n\tonEdgeHoverStart(callback) {\n\t\tthis.onEdgeHoverStartCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the edge hover end event.\n\t * @method onEdgeHoverEnd\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the edge hover end event\n\t * helios.onEdgeHoverEnd((edge) => {\n\t * \tconsole.log(\"The edge \" + edge.id + \" was no longer hovered\");\n\t * });\n\t * @see {@link Helios#onEdgeClick}\n\t * @see {@link Helios#onEdgeDoubleClick}\n\t * @see {@link Helios#onEdgeHoverStart}\n\t * @see {@link Helios#onEdgeHoverMove}\n\t */\n\tonEdgeHoverEnd(callback) {\n\t\tthis.onEdgeHoverEndCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the edge hover move event.\n\t * @method onEdgeHoverMove\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the edge hover move event\n\t * helios.onEdgeHoverMove((edge) => {\n\t * \tconsole.log(\"The edge \" + edge.id + \" was hovered\");\n\t * });\n\t * @see {@link Helios#onEdgeClick}\n\t * @see {@link Helios#onEdgeDoubleClick}\n\t * @see {@link Helios#onEdgeHoverStart}\n\t * @see {@link Helios#onEdgeHoverEnd}\n\t */\n\tonEdgeHoverMove(callback) {\n\t\tthis.onEdgeHoverMoveCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the zoom event.\n\t * @method onZoom\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the zoom event\n\t * helios.onZoom((zoom) => {\n\t * \tconsole.log(\"The zoom is now \" + zoom);\n\t * });\n\t * @see {@link Helios#onRotation}\n\t */\n\tonZoom(callback) {\n\t\tthis.onZoomCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the rotation event.\n\t * @method onRotation\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the rotation event\n\t * helios.onRotation((rotation) => {\n\t * \tconsole.log(\"The rotation is now \" + rotation);\n\t * });\n\t * @see {@link Helios#onZoom}\n\t */\n\tonRotation(callback) {\n\t\tthis.onRotationCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the layout start event.\n\t * @method onLayoutStart\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the layout start event\n\t * helios.onLayoutStart(() => {\n\t * \tconsole.log(\"The layout has started\");\n\t * });\n\t * @see {@link Helios#onLayoutStop}\n\t * @see {@link Helios#onLayoutTick}\n\t * @see {@link Helios#onLayoutEnd}\n\t */\n\tonLayoutStart(callback) {\n\t\tconsole.log(\"On start\", this.layoutWorker)\n\t\tthis.onLayoutStartCallback = callback;\n\t\tthis?.layoutWorker.onStart(() => {\n\t\t\tthis.onLayoutStartCallback?.();\n\t\t});\n\t\treturn this;\n\t}\n\n\n\t/** Set the callback for the layout stop event.\n\t * @method onLayoutStop\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the layout stop event\n\t * helios.onLayoutStop(() => {\n\t * \tconsole.log(\"The layout has stopped\");\n\t * });\n\t * @see {@link Helios#onLayoutStart}\n\t * @see {@link Helios#onLayoutTick}\n\t */\n\tonLayoutStop(callback) {\n\t\tconsole.log(\"Stop\", this.layoutWorker)\n\t\tthis.onLayoutStopCallback = callback;\n\t\tthis?.layoutWorker.onStop(() => {\n\t\t\tthis.onLayoutStopCallback?.();\n\t\t});\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the draw event.\n\t * @method onDraw\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the draw event\n\t * helios.onDraw(() => {\n\t * \tconsole.log(\"The graph was drawn\");\n\t * });\n\t * @see {@link Helios#onReady}\n\t */\n\tonDraw(callback) {\n\t\tthis.onDrawCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for when Helios is ready and properly initialized.\n\t * @method onReady\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for when Helios is ready\n\t * let helios = Helios(\"elementID\",networkData);\n\t * helios.onReady(() => {\n\t * \tconsole.log(\"Helios is ready\");\n\t * });\n\t */\n\tonReady(callback) {\n\t\tif (this._isReady) {\n\t\t\tcallback?.(this);\n\t\t} else {\n\t\t\tthis.onReadyCallback = callback;\n\t\t}\n\t}\n\n\n\t/** Set the callback for when Helios is cleaned up and properly disposed.\n\t * @method onCleanup\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for when Helios is cleaned up\n\t * let helios = Helios(\"elementID\",networkData);\n\t * helios.onCleanup(() => {\n\t * \tconsole.log(\"Helios is cleaned up\");\n\t * });\n\t */\n\tonCleanup(callback) {\n\t\tif (this.isCleanedUp) {\n\t\t\tcallback?.(this);\n\t\t} else {\n\t\t\tthis.onCleanupCallback = callback;\n\t\t}\n\t}\n\n\n\t//#endregion\n\n\n\t//#region Style attributes\n\n\t/** Set the background color of the graph.\n\t * @method backgroundColor\n\t * @memberof Helios\n\t * @instance\n\t * @param {Array<number>} color - The background color of the graph in RGB or RGBA formats as 3 or 4 float entries from 0.0 to 1.0.\n\t * @chainable\n\t * @return {Array<number>|this} The background color of the panel or the current Helios instance for chaining.\n\t * @example\n\t * // Set the background color of the graph to red\n\t * helios.backgroundColor([1.0,0,0,1.0]);\n\t * @example\n\t * // Get the background color of the graph\n\t * let backgroundColor = helios.backgroundColor();\n\t */\n\tbackgroundColor(color) {\n\t\t// check if color is defined\n\t\tif (typeof color === \"undefined\") {\n\t\t\treturn this._settings.backgroundColor;\n\t\t} else {\n\t\t\tthis._settings.backgroundColor = color;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\n\t/** Set the color of the nodes.\n\t * @method nodeColor\n\t * @memberof Helios\n\t * @instance\n\t * @param {Array<number>|Function} colorInput - The color of the nodes in RGB or RGBA formats as 3 or 4 float entries from 0.0 to 1.0 or a function that returns the color of the nodes.\n\t * @param {string} [nodeID] - The ID of the node to set the color of. If not specified, the color of all nodes will be set.\n\t * @chainable\n\t * @return {Array<number>|this} The color of the nodes or the current Helios instance for chaining.\n\t * @example\n\t * // Set the color of all nodes to red\n\t * helios.nodeColor([1.0,0,0,1.0]);\n\t * @example\n\t * // Set the color of a specific node to red\n\t * helios.nodeColor([1.0,0,0,1.0], \"nodeID\");\n\t * @example\n\t * // Set the color of all nodes to a random color\n\t * helios.nodeColor((node) => {\n\t * \treturn [Math.random(), Math.random(), Math.random(), 1.0];\n\t * });\n\t * @example\n\t * // Set the color of all nodes based on an node attribute called `altColor`\n\t * helios.nodeColor((node) => {\n\t * \treturn node.altColor;\n\t * });\n\t */\n\tnodeColor(colorInput, nodeID) {\n\t\tif (typeof nodeID === \"undefined\") {\n\t\t\tif (typeof colorInput === \"undefined\") {\n\t\t\t\treturn this.network.colors;\n\t\t\t} else if (typeof colorInput === \"function\") {\n\t\t\t\t// This may be used in future if we want to have a dynamic nodes\n\t\t\t\t// for (const [nodeID, node] of Object.entries(this.network.nodes)) {\n\t\t\t\t// \tlet nodeIndex = this.network.ID2index[nodeID];\n\n\t\t\t\tlet allNodes = this.network.indexedNodes;\n\t\t\t\tfor (let nodeIndex = 0; nodeIndex < allNodes.length; nodeIndex++) {\n\t\t\t\t\tlet node = allNodes[nodeIndex];\n\t\t\t\t\tlet aColor = colorInput(node, nodeIndex, this.network);\n\t\t\t\t\tthis.network.colors[nodeIndex * 4 + 0] = aColor[0];\n\t\t\t\t\tthis.network.colors[nodeIndex * 4 + 1] = aColor[1];\n\t\t\t\t\tthis.network.colors[nodeIndex * 4 + 2] = aColor[2];\n\t\t\t\t\tif (aColor.length > 3) {\n\t\t\t\t\t\tthis.network.colors[nodeIndex * 4 + 3] = aColor[3];\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t} else if (typeof colorInput === \"number\") {\n\t\t\t\t//index\n\t\t\t\treturn this.network.colors[this.network.ID2index[colorInput]];\n\t\t\t} else {\n\t\t\t\tlet allNodes = this.network.indexedNodes;\n\t\t\t\tfor (let nodeIndex = 0; nodeIndex < allNodes.length; nodeIndex++) {\n\t\t\t\t\tthis.network.colors[nodeIndex * 4 + 0] = colorInput[0];\n\t\t\t\t\tthis.network.colors[nodeIndex * 4 + 1] = colorInput[1];\n\t\t\t\t\tthis.network.colors[nodeIndex * 4 + 2] = colorInput[2];\n\t\t\t\t\tif (colorInput.length > 3) {\n\t\t\t\t\t\tthis.network.colors[nodeIndex * 4 + 3] = colorInput[3];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (typeof colorInput === \"function\") {\n\t\t\t\tlet nodeIndex = this.network.ID2index[nodeID];\n\t\t\t\tlet aColor = colorInput(nodeID, nodeIndex, this.network);\n\t\t\t\tthis.network.colors[nodeIndex * 4 + 0] = aColor[0];\n\t\t\t\tthis.network.colors[nodeIndex * 4 + 1] = aColor[1];\n\t\t\t\tthis.network.colors[nodeIndex * 4 + 2] = aColor[2];\n\t\t\t\tif (aColor.length > 3) {\n\t\t\t\t\tthis.network.colors[nodeIndex * 4 + 3] = aColor[3];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet nodeIndex = this.network.ID2index[nodeID];\n\t\t\t\tthis.network.colors[nodeIndex * 4 + 0] = colorInput[0];\n\t\t\t\tthis.network.colors[nodeIndex * 4 + 1] = colorInput[1];\n\t\t\t\tthis.network.colors[nodeIndex * 4 + 2] = colorInput[2];\n\t\t\t\tif (colorInput.length > 3) {\n\t\t\t\t\tthis.network.colors[nodeIndex * 4 + 3] = colorInput[3];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\t/** Set the size of the nodes.\n\t * @method nodeSize\n\t * @memberof Helios\n\t * @instance\n\t * @param {number|Function} sizeInput - The size of the nodes or a function that returns the size of the nodes.\n\t * @param {string} [nodeID] - The ID of the node to set the size of. If not specified, the size of all nodes will be set.\n\t * @chainable\n\t * @return {number|this} The size of the nodes or the current Helios instance for chaining.\n\t * @example\n\t * // Set the size of all nodes to 10\n\t * helios.nodeSize(10);\n\t * @example\n\t * // Set the size of a specific node to 10\n\t * helios.nodeSize(10, \"nodeID\");\n\t * @example\n\t * // Set the size of all nodes to a random size\n\t * helios.nodeSize(() => {\n\t * \treturn Math.random() * 10;\n\t * });\n\t * @example\n\t * // Set the size of all nodes based on an node attribute called `altSize`\n\t * helios.nodeSize((node) => {\n\t * \treturn node.altSize;\n\t * });\n\t */\n\tnodeSize(sizeInput, nodeID) {\n\t\tif (typeof nodeID === \"undefined\") {\n\t\t\tif (typeof sizeInput === \"undefined\") {\n\t\t\t\treturn this.network.sizes;\n\t\t\t} else if (typeof sizeInput === \"function\") {\n\t\t\t\tlet allNodes = this.network.indexedNodes;\n\t\t\t\tfor (let nodeIndex = 0; nodeIndex < allNodes.length; nodeIndex++) {\n\t\t\t\t\tlet node = allNodes[nodeIndex];\n\t\t\t\t\tlet aSize = sizeInput(node, this.network);\n\t\t\t\t\tthis.network.sizes[nodeIndex] = aSize;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet allNodes = this.network.indexedNodes;\n\t\t\t\tfor (let nodeIndex = 0; nodeIndex < allNodes.length; nodeIndex++) {\n\t\t\t\t\tthis.network.sizes[nodeIndex] = sizeInput;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (typeof sizeInput === \"function\") {\n\t\t\t\tlet aSize = sizeInput(nodeID, this.network);\n\t\t\t\tlet nodeIndex = this.network.ID2index[nodeID];\n\t\t\t\tthis.network.sizes[nodeIndex] = aSize;\n\t\t\t} else {\n\t\t\t\tlet nodeIndex = this.network.ID2index[nodeID];\n\t\t\t\tthis.network.sizes[nodeIndex] = sizeInput;\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\n\t/** Set the color of the node outlines.\n\t * @method nodeOutlineColor\n\t * @memberof Helios\n\t * @instance\n\t * @param {number[]|Function} colorInput - The color of the node outlines or a function that returns the color of the node outlines. Uses RGBA or RGBA formatted array.\n\t * @param {string} [nodeID] - The ID of the node to set the color of. If not specified, the color of all nodes will be set.\n\t * @chainable\n\t * @return {number[]|this} The color of the node outlines or the current Helios instance for chaining.\n\t * @example\n\t * // Set the color of all node outlines to red\n\t * helios.nodeOutlineColor([1, 0, 0, 1]);\n\t * @example\n\t * // Set the color of a specific node outline to red\n\t * helios.nodeOutlineColor([1, 0, 0, 1], \"nodeID\");\n\t * @example\n\t * // Set the color of all node outlines to a random color\n\t * helios.nodeOutlineColor(() => {\n\t * \treturn [Math.random(), Math.random(), Math.random(), 1];\n\t * });\n\t * @example\n\t * // Set the color of all node outlines based on an node attribute called `altColor`\n\t * helios.nodeOutlineColor((node) => {\n\t * \treturn node.altColor;\n\t * });\n\t */\n\tnodeOutlineColor(colorInput, nodeID) {\n\t\tif (typeof nodeID === \"undefined\") {\n\t\t\tif (typeof colorInput === \"undefined\") {\n\t\t\t\treturn this.network.outlineColors;\n\t\t\t} else if (typeof colorInput === \"function\") {\n\t\t\t\tlet allNodes = this.network.indexedNodes;\n\t\t\t\tfor (let nodeIndex = 0; nodeIndex < allNodes.length; nodeIndex++) {\n\t\t\t\t\tlet node = allNodes[nodeIndex];\n\t\t\t\t\tlet aColor = colorInput(node, nodeIndex, this.network);\n\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 0] = aColor[0];\n\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 1] = aColor[1];\n\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 2] = aColor[2];\n\t\t\t\t\tif (aColor.length > 3) {\n\t\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 3] = aColor[3];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (typeof colorInput === \"number\") {\n\t\t\t\t//index\n\t\t\t\tlet nodeIndex = this.network.ID2index[colorInput];\n\t\t\t\t\n\t\t\t\treturn [this.network.outlineColors[nodeIndex * 4 + 0],\n\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 1],\n\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 2],\n\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 3]];\n\t\t\t} else {\n\t\t\t\tlet allNodes = this.network.indexedNodes;\n\t\t\t\tfor (let nodeIndex = 0; nodeIndex < allNodes.length; nodeIndex++) {\n\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 0] = colorInput[0];\n\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 1] = colorInput[1];\n\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 2] = colorInput[2];\n\t\t\t\t\tif (colorInput.length > 3) {\n\t\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 3] = colorInput[3];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (typeof colorInput === \"function\") {\n\t\t\t\tlet nodeIndex = this.network.ID2index[nodeID];\n\t\t\t\tlet aColor = colorInput(nodeID, nodeIndex, this.network);\n\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 0] = aColor[0];\n\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 1] = aColor[1];\n\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 2] = aColor[2];\n\t\t\t\tif (aColor.length > 3) {\n\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 3] = aColor[3];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet nodeIndex = this.network.ID2index[nodeID];\n\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 0] = colorInput[0];\n\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 1] = colorInput[1];\n\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 2] = colorInput[2];\n\t\t\t\tif (colorInput.length > 3) {\n\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 3] = colorInput[3];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\t/** Set the width of the node outlines.\n\t * @method nodeOutlineWidth\n\t * @memberof Helios\n\t * @instance\n\t * @param {number|Function} widthInput - The width of the node outlines or a function that returns the width of the node outlines.\n\t * @param {string} [nodeID] - The ID of the node to set the width of. If not specified, the width of all nodes will be set.\n\t * @chainable\n\t * @return {number|this} The width of the node outlines or the current Helios instance for chaining.\n\t * @example\n\t * // Set the width of all node outlines to 5\n\t * helios.nodeOutlineWidth(5);\n\t * @example\n\t * // Set the width of a specific node outline to 5\n\t * helios.nodeOutlineWidth(5, \"nodeID\");\n\t * @example\n\t * // Set the width of all node outlines to a random width\n\t * helios.nodeOutlineWidth(() => {\n\t * \treturn Math.random() * 10;\n\t * });\n\t * @example\n\t * // Set the width of all node outlines based on an node attribute called `altWidth`\n\t * helios.nodeOutlineWidth((node) => {\n\t * \treturn node.altWidth;\n\t * });\n\t * @example\n\t * // Set the width of all node outlines based on an node attribute called `altWidth`\n\t * helios.nodeOutlineWidth((node) => {\n\t * \treturn node.altWidth;\n\t * });\n\t */\n\tnodeOutlineWidth(widthInput, nodeID) {\n\t\tif (typeof nodeID === \"undefined\") {\n\t\t\tif (typeof widthInput === \"undefined\") {\n\t\t\t\treturn this.network.outlineWidths;\n\t\t\t} else if (typeof widthInput === \"function\") {\n\t\t\t\tlet allNodes = this.network.indexedNodes;\n\t\t\t\tfor (let nodeIndex = 0; nodeIndex < allNodes.length; nodeIndex++) {\n\t\t\t\t\tlet node = allNodes[nodeIndex];\n\t\t\t\t\tlet aWidth = widthInput(node, this.network);\n\t\t\t\t\tthis.network.outlineWidths[node.index] = aWidth;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet allNodes = this.network.indexedNodes;\n\t\t\t\tfor (let nodeIndex = 0; nodeIndex < allNodes.length; nodeIndex++) {\n\t\t\t\t\tthis.network.outlineWidths[nodeIndex] = widthInput;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (typeof widthInput === \"function\") {\n\t\t\t\tlet aWidth = widthInput(nodeID, this.network);\n\t\t\t\tlet nodeIndex = this.network.ID2index[nodeID];\n\t\t\t\tthis.network.outlineWidths[nodeIndex] = aWidth;\n\t\t\t} else {\n\t\t\t\tlet nodeIndex = this.network.ID2index[nodeID];\n\t\t\t\tthis.network.outlineWidths[nodeIndex] = widthInput;\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\n\n\t/** Set the color of the edges.\n\t * @method edgeColor\n\t * @memberof Helios\n\t * @instance\n\t * @param {number|Function} colorInput - The color of the edges or a function that returns the color of the edges.\n\t * @param {string} [edgeID] - The ID of the edge to set the color of. If not specified, the color of all edges will be set.\n\t * @chainable\n\t * @return {number|this} The color of the edges or the current Helios instance for chaining.\n\t * @example\n\t * // Set the color of all edges to red\n\t * helios.edgeColor([1, 0, 0, 1]);\n\t * @example\n\t * // Set the color of a specific edge to red\n\t * helios.edgeColor([1, 0, 0, 1], \"edgeID\");\n\t * @example\n\t * // Set the color of all edges to a random color\n\t * helios.edgeColor(() => {\n\t * \treturn [Math.random(), Math.random(), Math.random(), 1];\n\t * });\n\t * @example\n\t * // Set the color of all edges based on an edge attribute called `altColor`\n\t * helios.edgeColor((edge) => {\n\t * \treturn edge.altColor;\n\t * });\n\t */\n\tedgeColor(colorInput, edgeID) {\n\t\tif (typeof edgeID === \"undefined\") {\n\t\t\tif (typeof colorInput === \"undefined\") {\n\t\t\t\treturn this.network.edgeColors;\n\t\t\t} else if (typeof colorInput === \"function\") {\n\t\t\t\t// This may be used in future if we want to have a dynamic nodes\n\t\t\t\t// for (const [nodeID, node] of Object.entries(this.network.nodes)) {\n\t\t\t\t// \tlet nodeIndex = this.network.ID2index[nodeID];\n\n\t\t\t\tlet allNodes = this.network.indexedNodes;\n\t\t\t\tlet allEdges = this.network.indexedEdges;\n\t\t\t\tfor (let edgeIndex = 0; edgeIndex < allEdges.length / 2; edgeIndex++) {\n\t\t\t\t\tlet sourceNode = allNodes[allEdges[edgeIndex * 2]];\n\t\t\t\t\tlet targetNode = allNodes[allEdges[edgeIndex * 2 + 1]];\n\t\t\t\t\tlet aColor = colorInput(edgeIndex, sourceNode, targetNode, this.network);\n\t\t\t\t\tif (aColor.length == 2) {// two colors\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 0] = aColor[0][0];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 1] = aColor[0][1];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 2] = aColor[0][2];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 0] = aColor[1][0];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 1] = aColor[1][1];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 2] = aColor[1][2];\n\t\t\t\t\t\tif (aColor[0].length > 3) {\n\t\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 3] = aColor[0][3];\n\t\t\t\t\t\t\t// this.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 3] = aColor[0][3];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (aColor[1].length > 3) {\n\t\t\t\t\t\t\t// this.network.edgeColors[(edgeIndex * 2) * 4 + 3] = aColor[1][3];\n\t\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 3] = aColor[1][3];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {// one color\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 0] = aColor[0];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 1] = aColor[1];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 2] = aColor[2];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 0] = aColor[0];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 1] = aColor[1];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 2] = aColor[2];\n\t\t\t\t\t\tif (aColor.length > 3) {\n\t\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 3] = aColor[3];\n\t\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 3] = aColor[3];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (typeof colorInput === \"number\") {\n\t\t\t\t//index\n\t\t\t\treturn [this.network.edgeColors[colorInput * 2 + 0], this.network.edgeColors[colorInput * 2 + 1]];\n\t\t\t} else {\n\t\t\t\tlet allEdges = this.network.indexedEdges;\n\t\t\t\tfor (let edgeIndex = 0; edgeIndex < allEdges.length / 2; edgeIndex++) {\n\t\t\t\t\tlet aColor = colorInput;\n\t\t\t\t\tif (colorInput.length == 2) {// two colors\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 0] = aColor[0][0];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 1] = aColor[0][1];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 2] = aColor[0][2];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 0] = aColor[1][0];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 1] = aColor[1][1];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 2] = aColor[1][2];\n\t\t\t\t\t\tif (aColor[0].length > 3) {\n\t\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 3] = aColor[0][3];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (aColor[1].length > 3) {\n\t\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 3] = aColor[1][3];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {// two colors\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 0] = aColor[0];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 1] = aColor[1];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 2] = aColor[2];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 0] = aColor[0];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 1] = aColor[1];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 2] = aColor[2];\n\t\t\t\t\t\tif (aColor.length > 3) {\n\t\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 3] = aColor[3];\n\t\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 3] = aColor[3];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tlet aColor = colorInput;\n\t\t\tif (typeof colorInput === \"function\") {\n\t\t\t\taColor = colorInput(nodeID, nodeIndex, this.network);\n\t\t\t}\n\t\t\t// TODO: When the edge ids system is implemented, this will be changed\n\t\t\t// and edgeIDs may need to be transformed to indices\n\t\t\t// convert edgeID to int\n\t\t\tlet edgeIndex = +edgeID;\n\t\t\tif (colorInput.length == 2) {// two colors\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 0] = aColor[0][0];\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 1] = aColor[0][1];\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 2] = aColor[0][2];\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 0] = aColor[1][0];\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 1] = aColor[1][1];\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 2] = aColor[1][2];\n\t\t\t\tif (aColor[0].length > 3) {\n\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 3] = aColor[0][3];\n\t\t\t\t}\n\t\t\t\tif (aColor[1].length > 3) {\n\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 3] = aColor[1][3];\n\t\t\t\t}\n\t\t\t} else {// one colors\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 0] = aColor[0];\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 1] = aColor[1];\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 2] = aColor[2];\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 0] = aColor[0];\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 1] = aColor[1];\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 2] = aColor[2];\n\t\t\t\tif (aColor.length > 3) {\n\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 3] = aColor[3];\n\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 3] = aColor[3];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\n\t/** Set the width of the edges. \n\t * @method edgeWidth\n\t * @memberof Helios\n\t * @instance\n\t * @param {number|function} widthInput - The width of the edges. If a function is provided, it will be called for each edge. The function should return a number or an array of two numbers, the width at the source and target.\n\t * @param {number} [edgeIndex] - The index of the edge. If not provided, the width will be set for all edges.\n\t * @return {number|this} - The width of the edge if no arguments are provided, otherwise the Helios instance for chaining.\n\t * @example\n\t * // Set the width of all edges to 5.\n\t * helios.edgeWidth(5);\n\t * @example\n\t * // Set the width of the edge with index 0 to 5.\n\t * helios.edgeWidth(5, 0);\n\t * @example\n\t * // Set the width of all edges to a random number between 1 and 10.\n\t * helios.edgeWidth(sourceNode, targetNode, edgeIndex) => {\n\t *    return Math.random() * 9 + 1;\n\t * });\n\t * @example\n\t * // Set the width of all edges to 5 at source and 2 at target.\n\t * helios.edgeWidth(sourceNode, targetNode, edgeIndex) => {\n\t *   return [5, 2];\n\t * });\n\t * @example\n\t * // Set the width of the edge with altSizes properties from source and target.\n\t * helios.edgeWidth(sourceNode, targetNode, edgeIndex) => {\n\t *  return [sourceNode.altSizes, targetNode.altSizes];\n\t * });\n\t */\n\tedgeWidth(widthInput, edgeIndex) {\n\t\tif (typeof edgeIndex === \"undefined\") {\n\t\t\tif (typeof widthInput === \"undefined\") {\n\t\t\t\treturn this.network.edgeColors;\n\t\t\t} else if (typeof widthInput === \"function\") {\n\t\t\t\tlet allNodes = this.network.indexedNodes;\n\t\t\t\tlet allEdges = this.network.indexedEdges;\n\t\t\t\tfor (let edgeIndex = 0; edgeIndex < allEdges.length / 2; edgeIndex++) {\n\t\t\t\t\tlet sourceNode = allNodes[allEdges[edgeIndex * 2]];\n\t\t\t\t\tlet targetNode = allNodes[allEdges[edgeIndex * 2 + 1]];\n\t\t\t\t\tlet aWidth = widthInput(sourceNode, targetNode, edgeIndex, this.network);\n\n\t\t\t\t\tif (typeof aWidth === \"number\") {\n\t\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2] = aWidth;\n\t\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2 + 1] = aWidth;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2] = aWidth[0];\n\t\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2 + 1] = aWidth[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet allEdges = this.network.indexedEdges;\n\t\t\t\tfor (let edgeIndex = 0; edgeIndex < allEdges.length / 2; edgeIndex++) {\n\t\t\t\t\tif (typeof widthInput === \"number\") {\n\t\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2] = widthInput;\n\t\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2 + 1] = widthInput;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2] = widthInput[0];\n\t\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2 + 1] = widthInput[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (typeof widthInput === \"function\") {\n\t\t\t\tlet allNodes = this.network.indexedNodes;\n\t\t\t\tlet allEdges = this.network.indexedEdges;\n\t\t\t\tlet sourceNode = allNodes[allEdges[edgeIndex * 2]];\n\t\t\t\tlet targetNode = allNodes[allEdges[edgeIndex * 2 + 1]];\n\t\t\t\tlet aWidth = widthInput(sourceNode, targetNode, edgeIndex, this.network);\n\t\t\t\tif (typeof aWidth === \"number\") {\n\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2] = aWidth;\n\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2 + 1] = aWidth;\n\t\t\t\t} else {\n\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2] = aWidth[0];\n\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2 + 1] = aWidth[1];\n\t\t\t\t}\n\t\t\t} else if (typeof widthInput === \"number\") {\n\t\t\t\tthis.network.edgeSizes[edgeIndex * 2] = widthInput;\n\t\t\t\tthis.network.edgeSizes[edgeIndex * 2 + 1] = widthInput;\n\t\t\t} else {\n\t\t\t\tthis.network.edgeSizes[edgeIndex * 2] = widthInput[0];\n\t\t\t\tthis.network.edgeSizes[edgeIndex * 2 + 1] = widthInput[1];\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\n\t/** Project the positions of the nodes provided to the screen (using the projection matrix).\n\t * @method getProjectedPositions\n\t * @memberof Helios\n\t * @instance\n\t * @param {Node[]|number} nodes - The nodes or indices of nodes to project.\n\t * @return {Float32Array} - The projected positions of the nodes.\n\t * @example\n\t * // Get the projected positions of all nodes.\n\t * let projectedPositions = helios.getProjectedPositions(helios.network.nodes);\n\t */\n\tgetProjectedPositions(nodes) {\n\t\t// Use the CPU to project the positions\n\t\t// if nodes are provided, use them, otherwise use all nodes\n\t\tif (nodes === undefined) {\n\t\t\tnodes = this.network.nodes;\n\t\t}\n\t\t// if nodes is not empty\n\t\tif (nodes.length > 0) {\n\t\t\tconst gl = this.gl;\n\t\t\tlet nodeIndices = new Uint32Array(nodes.length);\n\t\t\tif (typeof nodes[0] === \"number\") {\n\t\t\t\tfor (let i = 0; i < nodes.length; i++) {\n\t\t\t\t\tnodeIndices[i] = nodes[i];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnodeIndices = new Uint32Array(nodes.length);\n\t\t\t\tfor (let i = 0; i < nodes.length; i++) {\n\t\t\t\t\tnodeIndices[i] = nodes[i].index;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet nodePositions = this.network.positions;\n\t\t\tlet projectedPositions = new Float32Array(nodes.length * 4);\n\t\t\t\n\t\t\tlet [w2d, h2d] = this._lastCanvasDimensions;\n\n\t\t\tfor (let i = 0; i < nodes.length; i++) {\n\t\t\t\tlet nodeIndex = nodeIndices[i];\n\t\t\t\tlet nodePosition = [nodePositions[nodeIndex * 3], nodePositions[nodeIndex * 3 + 1], nodePositions[nodeIndex * 3 + 2], 1.0];\n\n\t\t\t\t// let xoffset=this._camera.translatePosition[0];\n\t\t\t\t// let yoffset=this._camera.translatePosition[1];\n\t\t\t\t// let zoffset=this._camera.translatePosition[2];\n\t\t\t\t// nodePosition[0] -= xoffset;\n\t\t\t\t// nodePosition[1] -= yoffset;\n\t\t\t\t// nodePosition[2] -= zoffset;\n\n\t\t\t\t// translate by camera position\n\n\t\t\t\tlet projectedPosition = glm.vec4.create();\n\t\t\t\tglm.vec4.transformMat4(projectedPosition, nodePosition, this.projectionViewMatrix);\n\t\t\t\t// console.log(projectedPosition)\n\t\t\t\t// mat4.multiplyVec4(projectionViewMatrix, position, dest);\n\t\t\t\t// if (projectedPosition[2] < 0) {//behind the camera\n\t\t\t\t// \t// continue;\n\t\t\t\t// }\n\n\t\t\t\tlet perspectiveFactor = 1.0 / projectedPosition[3];\n\n\t\t\t\t// if(!this._orthographic){\n\t\t\t\t// \tperspectiveFactor = 1.0 / (projectedPosition[3]);\n\t\t\t\t// }\n\t\t\t\tlet x = w2d / 2 + projectedPosition[0] * w2d * 0.5 * perspectiveFactor;\n\t\t\t\tlet y = h2d / 2 - projectedPosition[1] * h2d * 0.5 * perspectiveFactor;\n\t\t\t\t//perspective divide\n\t\t\t\tprojectedPositions[i * 4] = x;\n\t\t\t\tprojectedPositions[i * 4 + 1] = y;\n\t\t\t\tprojectedPositions[i * 4 + 2] = projectedPosition[2];\n\t\t\t\tprojectedPositions[i * 4 + 3] = projectedPosition[3];\n\t\t\t}\n\t\t\treturn projectedPositions;\n\t\t} else {\n\t\t\treturn Float32Array(0);\n\t\t}\n\t}\n\n\n\n\t/** Pick a node at the given screen coordinates.\n\t * @method pickNode\n\t * @memberof Helios\n\t * @instance\n\t * @param {number} x - The x coordinate of the point to pick.\n\t * @param {number} y - The y coordinate of the point to pick.\n\t * @return {Node} - The node at the given point, or null if no node was picked.\n\t * @example\n\t * // Pick a node at the center of the canvas.\n\t * let node = helios.pickNode(helios.canvasElement.width / 2, helios.canvasElement.height / 2);\n\t * if(node !== null) {\n\t *    console.log(\"Picked node \" + node.index);\n\t * }\n\t * @example\n\t * // Pick a node at the center of the canvas, and highlight it.\n\t * let node = helios.pickNode(helios.canvasElement.width / 2, helios.canvasElement.height / 2);\n\t * if(node !== null) {\n\t *   console.log(\"Picked node \" + node.index);\n\t *  helios.highlightNode(node);\n\t * }\n\t */\n\tpickPoint(x, y) {\n\t\tconst fbWidth = this._canvasElement.width * this._settings.pickingResolutionRatio;\n\t\tconst fbHeight = this._canvasElement.height * this._settings.pickingResolutionRatio;\n\t\tconst pixelX = Math.round(x * fbWidth / this._canvasElement.clientWidth - 0.5);\n\t\tconst pixelY = Math.round(fbHeight - y * fbHeight / this._canvasElement.clientHeight - 0.5);\n\t\tconst data = new Uint8Array(4);\n\t\tconst gl = this.gl;\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this.pickingFramebuffer);\n\t\tgl.readPixels(\n\t\t\tpixelX,            // x\n\t\t\tpixelY,            // y\n\t\t\t1,                 // width\n\t\t\t1,                 // height\n\t\t\tgl.RGBA,           // format\n\t\t\tgl.UNSIGNED_BYTE,  // type\n\t\t\tdata);             // typed array to hold result\n\t\tconst ID = (data[0] + (data[1] << 8) + (data[2] << 16) + (data[3] << 24)) - 1;\n\t\treturn ID;\n\t}\n\n\n\t_consolidateCentroids(centroids, counts) {\n\t\tfor (const [nodeAttribute, centroid] of centroids) {\n\t\t\tconst count = counts.get(nodeAttribute);\n\t\t\tcentroid[0] /= count;\n\t\t\tcentroid[1] /= count;\n\t\t}\n\t}\n\n\t_calculateCentroidForAttribute(nodeAttribute, xy, centroids, counts) {\n\t\t// const xy = this._pixelXYOnScreen[i];\n\t\tif (!centroids.has(nodeAttribute)) {\n\t\t\tcentroids.set(nodeAttribute, [0, 0]);\n\t\t\tcounts.set(nodeAttribute, 0);\n\t\t}\n\t\tconst centroid = centroids.get(nodeAttribute);\n\t\tcentroid[0] += xy[0];\n\t\tcentroid[1] += xy[1];\n\n\t\tconst count = counts.get(nodeAttribute);\n\t\tcounts.set(nodeAttribute, count + 1);\n\t}\n\n\n\t_updateTrackerNodesData() {\n\t\tconst gl = this.gl;\n\t\tconst data = this._tracking.bufferPixels;\n\t\tconst nodesOnScreen = this._nodesOnScreen;\n\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this._trackingFramebuffer);\n\t\tgl.readPixels(\n\t\t\t0,            // x\n\t\t\t0,            // y\n\t\t\tthis._trackingFramebuffer.size.width,                 // width\n\t\t\tthis._trackingFramebuffer.size.height,                 // height\n\t\t\tgl.RGBA,           // format\n\t\t\tgl.UNSIGNED_BYTE,  // type\n\t\t\tdata);             // typed array to hold result\n\t\t//  if this.pixelCountsByIndex is not defined\n\n\t\tfor (let i = 0; i < data.length; i += 4) {\n\t\t\tconst nodeIndex = (data[i] + (data[i + 1] << 8) + (data[i + 2] << 16) + (data[i + 3] << 24)) - 1;\n\t\t\tnodesOnScreen[i / 4] = nodeIndex;\n\t\t}\n\n\t}\n\n\t/** Pick a node at the given screen coordinates.\n\t * @method updateAttributeTrackers\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @return {Helios|this} - The Helios instance (for chaining).\n\t */\n\tupdateAttributeTrackers(avoidPixelBufferUpdate = false) {\n\t\tif (!this._tracking.bufferEnabled || Object.keys(this._tracking.trackers).length === 0) {\n\t\t\treturn this;\n\t\t}\n\t\tconst attributeTrackers = this._tracking.trackers;\n\t\tconst totalPixels = this._trackingFramebuffer.size.width * this._trackingFramebuffer.size.height;\n\n\n\t\tconst nodesOnScreen = this._nodesOnScreen;\n\t\tconst XYPositions = this._pixelXYOnScreen;\n\n\t\tif (!avoidPixelBufferUpdate) {\n\t\t\tthis._updateTrackerNodesData();\n\t\t}\n\n\t\tconst now = performance.now();\n\t\tlet elapsedTime = now - this._trackingLastTime || now;\n\t\tif (elapsedTime > 1000) {\n\t\t\telapsedTime = 1000;\n\t\t}\n\t\tthis._trackingLastTime = now;\n\n\t\tfor (let trackedAttributeEntryKey in attributeTrackers) {\n\t\t\tconst trackedAttributeEntry = attributeTrackers[trackedAttributeEntryKey];\n\t\t\tconst pixelCounter = trackedAttributeEntry.pixelCounter;\n\t\t\tconst currentKeys = pixelCounter.getSortedKeys();\n\t\t\tconst smoothness = trackedAttributeEntry.smoothness;\n\t\t\tconst minProportion = trackedAttributeEntry.minProportion;\n\t\t\tconst calculateCentroid = trackedAttributeEntry.calculateCentroid;\n\t\t\tconst centroidPositions = trackedAttributeEntry.centroidPositions;\n\t\t\tconst attribute = trackedAttributeEntry.attribute;\n\t\t\tconst maxLabels = trackedAttributeEntry.maxLabels;\n\t\t\tconst centroids = new Map();\n\t\t\tconst counts = new Map();\n\n\t\t\t// calculate coefficient based on elapsed time of the last update using performance\n\n\n\n\t\t\t// const coefficient = Math.exp(- (now - trackedAttributeEntry.lastUpdate) / smoothness);\n\t\t\tconst coefficient = Math.exp(-elapsedTime / (100 * smoothness));\n\t\t\t// const coefficient = smoothness;\n\t\t\t// console.log(coefficient);\n\n\t\t\t// smoothness = -30/log(0.8)\n\n\t\t\t// const attribute = trackedAttributeEntry.attribute;\n\t\t\t// console.log(currentKeys.length);\n\t\t\tfor (let i = 0; i < currentKeys.length; i++) {\n\t\t\t\tconst currentKey = currentKeys[i];\n\t\t\t\tconst newValue = pixelCounter.get(currentKeys[i]) * coefficient;\n\t\t\t\tif (newValue > minProportion) {\n\t\t\t\t\t// console.log(newValue);\n\t\t\t\t\tpixelCounter.set(currentKeys[i], newValue);\n\t\t\t\t\tif (calculateCentroid) {\n\t\t\t\t\t\tif (centroidPositions.has(currentKeys[i])) {\n\t\t\t\t\t\t\tconst centroidPosition = centroidPositions.get(currentKeys[i]);\n\t\t\t\t\t\t\tif (centroidPosition) {\n\t\t\t\t\t\t\t\tcentroidPosition[0] *= coefficient;\n\t\t\t\t\t\t\t\tcentroidPosition[1] *= coefficient;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// centroidPositions.set(currentKeys[i], centroidPosition);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tpixelCounter.delete(currentKeys[i]);\n\t\t\t\t\tif (calculateCentroid) {\n\t\t\t\t\t\tcentroidPositions.delete(currentKeys[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// const totalPixels\n\n\t\t\tif (attribute == \"index\") {\n\t\t\t\tfor (let i = 0; i < nodesOnScreen.length; i++) {\n\t\t\t\t\tconst nodeIndex = nodesOnScreen[i];\n\t\t\t\t\tif (nodeIndex >= 0) {\n\t\t\t\t\t\tconst newValue = (pixelCounter.get(nodeIndex) || 0) + 1.0 / totalPixels * (1.0 - coefficient);\n\t\t\t\t\t\tpixelCounter.set(nodeIndex, newValue);\n\t\t\t\t\t\tif (calculateCentroid) {\n\t\t\t\t\t\t\tthis._calculateCentroidForAttribute(nodeIndex, XYPositions[i], centroids, counts);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// is a function\n\t\t\t} else if (attribute == \"node\") {\n\t\t\t\tfor (let i = 0; i < nodesOnScreen.length; i++) {\n\t\t\t\t\tconst indexedNodes = this.network.indexedNodes;\n\t\t\t\t\tif (nodeIndex >= 0) {\n\t\t\t\t\t\tconst node = indexedNodes[nodeIndex];\n\t\t\t\t\t\tconst newValue = (pixelCounter.get(node) || 0) + 1.0 / totalPixels * (1.0 - coefficient);\n\t\t\t\t\t\tpixelCounter.set(node, newValue);\n\t\t\t\t\t\tif (calculateCentroid) {\n\t\t\t\t\t\t\tthis._calculateCentroidForAttribute(node, XYPositions[i], centroids, counts);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// is a function\n\t\t\t} else if (typeof attribute === 'function') {\n\t\t\t\tconst indexedNodes = this.network.indexedNodes;\n\t\t\t\tfor (let i = 0; i < nodesOnScreen.length; i++) {\n\t\t\t\t\tconst nodeIndex = nodesOnScreen[i];\n\t\t\t\t\tif (nodeIndex >= 0) {\n\t\t\t\t\t\tconst node = indexedNodes[nodeIndex];\n\t\t\t\t\t\tconst attributeEntry = attribute(node, nodeIndex);\n\t\t\t\t\t\tconst newValue = (pixelCounter.get(attributeEntry) || 0) + 1.0 / totalPixels * (1.0 - coefficient);\n\t\t\t\t\t\tpixelCounter.set(attributeEntry, newValue);\n\t\t\t\t\t\tif (calculateCentroid) {\n\t\t\t\t\t\t\tthis._calculateCentroidForAttribute(attributeEntry, XYPositions[i], centroids, counts);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// attribute is a string\n\t\t\t} else {\n\t\t\t\tconst indexedNodes = this.network.indexedNodes;\n\t\t\t\tfor (let i = 0; i < nodesOnScreen.length; i++) {\n\t\t\t\t\tconst nodeIndex = nodesOnScreen[i];\n\t\t\t\t\tif (nodeIndex >= 0) {\n\t\t\t\t\t\tconst node = indexedNodes[nodeIndex];\n\t\t\t\t\t\tconst attributeEntry = node[attribute];\n\t\t\t\t\t\tconst newValue = (pixelCounter.get(attributeEntry) || 0) + 1.0 / totalPixels * (1.0 - coefficient);\n\t\t\t\t\t\tpixelCounter.set(attributeEntry, newValue);\n\t\t\t\t\t\tif (calculateCentroid) {\n\t\t\t\t\t\t\tthis._calculateCentroidForAttribute(attributeEntry, XYPositions[i], centroids, counts);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (calculateCentroid) {\n\t\t\t\tthis._consolidateCentroids(centroids, counts);\n\t\t\t\tfor (let [key, value] of centroids) {\n\t\t\t\t\t// add to centroidPositions if not null, otherwise set it to the new centroids\n\t\t\t\t\tconst centroidPosition = centroidPositions.get(key);\n\t\t\t\t\tconst newCentroidPosition = value;\n\t\t\t\t\tif (centroidPosition) {\n\t\t\t\t\t\t// add new centroid (1.0 - coefficient)\n\t\t\t\t\t\tcentroidPosition[0] += newCentroidPosition[0] * (1.0 - coefficient);\n\t\t\t\t\t\tcentroidPosition[1] += newCentroidPosition[1] * (1.0 - coefficient);\n\n\t\t\t\t\t\t// centroidPosition[0] = newCentroidPosition[0];\n\t\t\t\t\t\t// centroidPosition[1] = newCentroidPosition[1];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcentroidPositions.set(key, newCentroidPosition);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tif (maxLabels >= 0) {\n\t\t\t\t// keeping only 10* maxLabels\n\t\t\t\tlet trackedKeys = pixelCounter.getSortedKeys();\n\t\t\t\tlet toRemove = trackedKeys.slice(maxLabels, trackedKeys.length);\n\t\t\t\tfor (let i = 0; i < toRemove.length; i++) {\n\t\t\t\t\tpixelCounter.delete(toRemove[i]);\n\t\t\t\t\tcentroidPositions.delete(toRemove[i]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t\treturn this;\n\t\t// let IDProportion = this.pixelCountsByIndex.getSortedPairs();\n\t\t// return IDProportion.slice(0,maxLabels);\n\t}\n\n\t/** Returns the attributes on screen\n\t * @method trackedAttributesOnScreen\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t * @param {string} trackerName - Name of the tracker to get the attributes from.\n\t * @return {Array} - Array of attributes on screen. Each entry is an array of two or four elements. \n\t * if the tracker saves the centroid, 4 elements are returned: [attribute,proportion, x, y], otherwise [attribute,proportion]\n\t */\n\ttrackedAttributesOnScreen(trackerName) {\n\t\tif (this._tracking.bufferEnabled && this._tracking.trackers[trackerName]) {\n\t\t\tconst attributeTracker = this._tracking.trackers[trackerName];\n\t\t\tconst pixelCounter = attributeTracker.pixelCounter;\n\t\t\t// const IDProportion = \n\t\t\tif (attributeTracker.calculateCentroid) {\n\t\t\t\tconst centroidPositions = attributeTracker.centroidPositions;\n\t\t\t\tconst IDProportion = pixelCounter.getSortedPairs();\n\t\t\t\t// add the centroid positions to the array [ID,proportion,x,y]\n\t\t\t\tfor (let i = 0; i < IDProportion.length; i++) {\n\t\t\t\t\tconst ID = IDProportion[i][0];\n\t\t\t\t\tconst proportion = IDProportion[i][1];\n\t\t\t\t\tconst centroidPosition = centroidPositions.get(ID);\n\t\t\t\t\tIDProportion[i] = [ID, proportion, centroidPosition[0], centroidPosition[1]];\n\t\t\t\t}\n\t\t\t\treturn IDProportion;\n\t\t\t} else {\n\t\t\t\treturn pixelCounter.getSortedPairs();\n\t\t\t}\n\t\t}\n\t}\n\n\n\t/** Returns tracked attributes centroids\n\t * @method trackedAttributesCentroids\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t * @param {string} trackerName - Name of the tracker to get the attributes from.\n\t * \n\t * @return {Array} - Centroid of trackerName.\n\t * \n\t */\n\ttrackedAttributesCentroids(trackerName) {\n\t\tif (this._tracking.bufferEnabled && this._tracking.trackers[trackerName]) {\n\t\t\tconst attributeTracker = this._tracking.trackers[trackerName];\n\t\t\treturn attributeTracker.centroidPositions;\n\t\t}\n\t}\n\n\t/** Update the attribute trackers Schedule.\n\t * @method _updateTrackerScheduleTask\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_updateTrackerScheduleTask() {\n\t\tconst trackerTaskName = \"9.5.tracker_update\";\n\t\tif (!this._tracking.bufferEnabled || Object.keys(this._tracking.trackers).length === 0) {\n\t\t\tif (this._scheduler.hasTask(trackerTaskName)) {\n\t\t\t\tthis._scheduler.unschedule(trackerTaskName);\n\t\t\t\t// this.scheduler.unschedule(trackerNodeUpdateTaskName);\n\t\t\t}\n\t\t} else if (!this._scheduler.hasTask(trackerTaskName)) {\n\t\t\tthis._scheduler.schedule({\n\t\t\t\tname: trackerTaskName,\n\t\t\t\tcallback: (elapsedTime, task) => {\n\t\t\t\t\tthis.updateAttributeTrackers(true);\n\t\t\t\t\tfor (let trackerName in this._tracking.trackers) {\n\t\t\t\t\t\tconst tracker = this._tracking.trackers[trackerName];\n\t\t\t\t\t\tif (tracker.onTrack) {\n\t\t\t\t\t\t\ttracker.onTrack(this.trackedAttributesOnScreen(trackerName), tracker);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdelay: 0,\n\t\t\t\trepeatInterval: this._tracking.nodeMinimumUpdateInterval,\n\t\t\t\trepeat: true,\n\t\t\t\tsynchronized: true,\n\t\t\t\tafterRedraw: true,\n\t\t\t\timmediateUpdates: false,\n\t\t\t\tredraw: false,\n\t\t\t\tupdateNodesGeometry: false,\n\t\t\t\tupdateEdgesGeometry: false,\n\t\t\t});\n\n\t\t}\n\t}\n\n\t/** Set the attribute to track.\n\t * @method trackAttribute\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {string} trackerName - A tracker name so that it can be untracked later.\n\t * @param {string|function} attribute - The attribute to track. If a string, it is the name of the attribute of the node to track (use \"index\" for index and \"node\" for the node itself). If a function, it is a function that takes a node and its index as arguments and returns the attribute to track.\n\t * \t * @param {Object} options - The configuration object\n\t * @param {string} [options.minProportion=0.001] - The minimum proportion of the screen that a node must occupy to be tracked.\n\t * @param {string} [options.smoothness=0.8] - The smoothness of the tracking. The higher the value, the more the tracking is smoothed.\n\t * @param {string} [options.maxLabels=20] - The maximum number of labels to display. If -1, all labels are displayed.\n\t * @param {string} [options.calculateCentroid=false] - If true, the centroid of the tracked nodes is calculated and expored as the 3rd and 4th (x and y) elements of the tracker results.\n\t * @param {function} [options.onTrack=null] - A callback function that is called when a node is tracked. It takes the attribute entries and relative proportions as argument and the tracker (attributeProportions,tracker)=>{} \n\t * @return {Helios|this} - The Helios instance for chaining.\n\t * @example\n\t * // Track the index of the nodes, with a minimum proportion of 0.001, a smoothness of 0.8 and a maximum of 10 labels.\n\t * helios.trackAttribute(\"indexTracker\",\"index\",{minProportion:0.001,smoothness:0.8,maxLabels:20});\n\t * @example\n\t * // Track the community attribute of the nodes, with a minimum proportion of 0.001, a smoothness of 0.8 and a maximum of 20 labels.\n\t * helios.trackAttribute(\"communityTracker\",\"community\",{minProportion:0.001,smoothness:0.8,maxLabels:20});\n\t */\n\ttrackAttribute(trackerName, attribute, { minProportion = 0.001, smoothness = 0.8, maxLabels = 20, calculateCentroid = false, onTrack = null } = {}) {\n\t\tif (trackerName in this._tracking.trackers) {\n\t\t\tthis.untrackAttribute(trackerName);\n\t\t}\n\t\tthis._tracking.trackers[trackerName] = {\n\t\t\tattribute: attribute,\n\t\t\tpixelCounter: new SortedValueMap(false),\n\t\t\tminProportion: minProportion,\n\t\t\tsmoothness: smoothness,\n\t\t\tmaxLabels: maxLabels,\n\t\t\tcalculateCentroid: calculateCentroid,\n\t\t\tcentroidPositions: new Map(),\n\t\t\tonTrack: onTrack,\n\t\t};\n\n\t\tthis._updateTrackerScheduleTask();\n\t\treturn this;\n\t}\n\n\t/** Untrack the attribute.\n\t * @method untrackAttribute\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {string|function} attribute - The attribute to untrack. If a string, it is the name of the attribute of the node to untrack (use \"index\" for index and \"node\" for the node itself). If a function, it is a function that takes a node and its index as arguments and returns the attribute to untrack.\n\t * @return {Helios|this} - The Helios instance for chaining.\n\t * @example\n\t * // Untrack the index of the nodes.\n\t * helios.untrackAttribute(\"indexTracker\");\n\t */\n\tuntrackAttribute(attribute) {\n\t\t// remove trackedAttribute from this._tracking.trackers if it exists\n\t\tif (this._tracking.trackers[attribute]) {\n\t\t\tdelete this._tracking.trackers[attribute];\n\t\t}\n\t\t// this._tracking.trackers = this._tracking.trackers.filter((trackedAttribute) => {\n\t\t// \treturn trackedAttribute.attribute !== attribute;\n\t\t// });\n\t\tthis._updateTrackerScheduleTask();\n\t\treturn this;\n\t}\n\n\t/** attributesTrackers getter.\n\t * @method attributesTrackers\n\t * @memberof Helios\n\t * @instance\n\t * @return {Object} - The tracked attributes.\n\t * @example\n\t * // Get the tracked attributes.\n\t * let attributesTrackers = helios.attributesTrackers();\n\t */\n\tattributesTrackers() {\n\t\t// copy the _attributeTrackers object\n\t\treturn Object.assign({}, this._tracking.trackers);\n\t}\n\n\t/** Set/get tracker node update interval.\n\t * @method trackingNodeUpdateInterval\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} interval - The interval in milliseconds.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current interval if no argument is provided.\n\t * @example\n\t * // Set the tracker node update interval to 200ms.\n\t * helios._trackingBufferUpdateInterval(200);\n\t * @example\n\t * // Get the tracker node update interval.\n\t * let interval = helios._trackingBufferUpdateInterval();\n\t * console.log(interval);\n\t */\n\ttrackingBufferUpdateInterval(interval) {\n\t\t// check if interval is defined\n\t\tif (typeof interval === \"undefined\") {\n\t\t\treturn this._trackingBufferUpdateInterval;\n\t\t} else {\n\t\t\tthis._trackingBufferUpdateInterval = interval;\n\t\t\tthis._updateTrackerScheduleTask();\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Set/get tracker update interval\n\t * @method trackingUpdateInterval\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} interval - The interval in milliseconds.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current interval if no argument is provided.\n\t * @example\n\t * // Set the tracker update interval to 33ms.\n\t * helios._trackingUpdateInterval(33);\n\t * @example\n\t * // Get the tracker update interval.\n\t * let interval = helios._trackingUpdateInterval();\n\t * console.log(interval);\n\t */\n\ttrackingUpdateInterval(interval) {\n\t\t// check if interval is defined\n\t\tif (typeof interval === \"undefined\") {\n\t\t\treturn this._trackingUpdateInterval;\n\t\t} else {\n\t\t\tthis._trackingUpdateInterval = interval;\n\t\t\tthis._updateTrackerScheduleTask();\n\t\t\treturn this;\n\t\t}\n\t}\n\n\n\t/** Set/get edge global opacity scale. The opacity of each edge is calculated as: opacity = globalBase + globalScale * edgeOpacity\n\t * @method edgesGlobalOpacityScale\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} opacity - The global opacity scale of the edges.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current global opacity if no argument is provided.\n\t * @example\n\t * // Set the global opacity of the edges to 0.5.\n\t * helios.edgesGlobalOpacityScale(0.5);\n\t */\n\tedgesGlobalOpacityScale(opacity) {\n\t\t// check if color is defined\n\t\tif (typeof opacity === \"undefined\") {\n\t\t\treturn this._settings.edgesGlobalOpacityScale;\n\t\t} else {\n\t\t\tthis._settings.edgesGlobalOpacityScale = opacity;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Set/get edge global opacity base. The opacity of each edge is calculated as: opacity = globalBase + globalScale * edgeOpacity\n\t * @method edgesGlobalOpacityBase\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} opacity - The global opacity base of the edges.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current global opacity if no argument is provided.\n\t * @example\n\t * // Set the global opacity base of the edges to 0.5.\n\t * helios.edgesGlobalOpacityBase(0.5);\n\t */\n\tedgesGlobalOpacityBase(opacity) {\n\t\t// check if color is defined\n\t\tif (typeof opacity === \"undefined\") {\n\t\t\treturn this._settings.edgesGlobalOpacityBase;\n\t\t} else {\n\t\t\tthis._settings.edgesGlobalOpacityBase = opacity;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Set/get edge global width scale. The width of each edge is calculated as: width = globalBase + globalScale * edgeWidth\n\t * @method edgesGlobalWidthScale\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} width - The global width scale of the edges.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current global width if no argument is provided.\n\t * @example\n\t * // Set the global width of the edges to 0.5.\n\t * helios.edgesGlobalWidthScale(0.5);\n\t */\n\tedgesGlobalWidthScale(width) {\n\t\t// check if color is defined\n\t\tif (typeof width === \"undefined\") {\n\t\t\treturn this._settings.edgesGlobalWidthScale;\n\t\t} else {\n\t\t\tthis._settings.edgesGlobalWidthScale = width;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Set/get edge global width base. The width of each edge is calculated as: width = globalBase + globalScale * edgeWidth\n\t * @method edgesGlobalWidthBase\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} width - The global width base of the edges.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current global width if no argument is provided.\n\t * @example\n\t * // Set the global width base of the edges to 0.5.\n\t * helios.edgesGlobalWidthBase(0.5);\n\t */\n\tedgesGlobalWidthBase(width) {\n\t\t// check if color is defined\n\t\tif (typeof width === \"undefined\") {\n\t\t\treturn this._settings.edgesGlobalWidthBase;\n\t\t} else {\n\t\t\tthis._settings.edgesGlobalWidthBase = width;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Set/get node global opacity scale. The opacity of each node is calculated as: opacity = globalBase + globalScale * nodeOpacity\n\t * @method nodesGlobalOpacityScale\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} opacity - The global opacity scale of the nodes.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current global opacity if no argument is provided.\n\t * @example\n\t * // Set the global opacity of the nodes to 0.5.\n\t * helios.nodesGlobalOpacityScale(0.5);\n\t * @example\n\t * // Get the global opacity of the nodes.\n\t * let scale = helios.nodesGlobalOpacityScale();\n\t */\n\tnodesGlobalOpacityScale(opacity) {\n\t\t// check if color is defined\n\t\tif (typeof opacity === \"undefined\") {\n\t\t\treturn this._settings.nodesGlobalOpacityScale;\n\t\t} else {\n\t\t\tthis._settings.nodesGlobalOpacityScale = opacity;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Set/get node global opacity base. The opacity of each node is calculated as: opacity = globalBase + globalScale * nodeOpacity\n\t * @method nodesGlobalOpacityBase\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} opacity - The global opacity base of the nodes.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current global opacity if no argument is provided.\n\t * @example\n\t * // Set the global opacity base of the nodes to 0.5.\n\t * helios.nodesGlobalOpacityBase(0.5);\n\t * @example\n\t * // Get the global opacity base of the nodes.\n\t * let base = helios.nodesGlobalOpacityBase();\n\t */\n\tnodesGlobalOpacityBase(opacity) {\n\t\t// check if color is defined\n\t\tif (typeof opacity === \"undefined\") {\n\t\t\treturn this._settings.nodesGlobalOpacityBase;\n\t\t} else {\n\t\t\tthis._settings.nodesGlobalOpacityBase = opacity;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Set/get node global size scale. The size of each node is calculated as: size = globalBase + globalScale * nodeSize\n\t * @method nodesGlobalSizeScale\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} size - The global size scale of the nodes.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current global size if no argument is provided.\n\t * @example\n\t * // Set the global size of the nodes to 0.5.\n\t * helios.nodesGlobalSizeScale(0.5);\n\t * @example\n\t * // Get the global size of the nodes.\n\t * let scale = helios.nodesGlobalSizeScale();\n\t */\n\tnodesGlobalSizeScale(size) {\n\t\t// check if color is defined\n\t\tif (typeof size === \"undefined\") {\n\t\t\treturn this._settings.nodesGlobalSizeScale;\n\t\t} else {\n\t\t\tthis._settings.nodesGlobalSizeScale = size;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Set/get node global size base. The size of each node is calculated as: size = globalBase + globalScale * nodeSize\n\t * @method nodesGlobalSizeBase\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} size - The global size base of the nodes.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current global size if no argument is provided.\n\t * @example\n\t * // Set the global size base of the nodes to 0.5.\n\t * helios.nodesGlobalSizeBase(0.5);\n\t * @example\n\t * // Get the global size base of the nodes.\n\t * let base = helios.nodesGlobalSizeBase();\n\t */\n\tnodesGlobalSizeBase(size) {\n\t\t// check if color is defined\n\t\tif (typeof size === \"undefined\") {\n\t\t\treturn this._settings.nodesGlobalSizeBase;\n\t\t} else {\n\t\t\tthis._settings.nodesGlobalSizeBase = size;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Set/get node global outline width scale. The outline width of each node is calculated as: width = globalBase + globalScale * nodeOutlineWidth\n\t * @method nodesGlobalOutlineWidthScale\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} width - The global outline width scale of the nodes.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current global outline width if no argument is provided.\n\t * @example\n\t * // Set the global outline width of the nodes to 0.5.\n\t * helios.nodesGlobalOutlineWidthScale(0.5);\n\t * @example\n\t * // Get the global outline width of the nodes.\n\t * let scale = helios.nodesGlobalOutlineWidthScale();\n\t */\n\tnodesGlobalOutlineWidthScale(width) {\n\t\t// check if color is defined\n\t\tif (typeof width === \"undefined\") {\n\t\t\treturn this._settings.nodesGlobalOutlineWidthScale;\n\t\t} else {\n\t\t\tthis._settings.nodesGlobalOutlineWidthScale = width;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Set/get node global outline width base. The outline width of each node is calculated as: width = globalBase + globalScale * nodeOutlineWidth\n\t * @method nodesGlobalOutlineWidthBase\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} width - The global outline width base of the nodes.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current global outline width if no argument is provided.\n\t * @example\n\t * // Set the global outline width base of the nodes to 0.5.\n\t * helios.nodesGlobalOutlineWidthBase(0.5);\n\t * @example\n\t * // Get the global outline width base of the nodes.\n\t * let base = helios.nodesGlobalOutlineWidthBase();\n\t */\n\tnodesGlobalOutlineWidthBase(width) {\n\t\t// check if color is defined\n\t\tif (typeof width === \"undefined\") {\n\t\t\treturn this._settings.nodesGlobalOutlineWidthBase;\n\t\t} else {\n\t\t\tthis._settings.nodesGlobalOutlineWidthBase = width;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\n\t/** Set/get node global outline opacity scale. The outline opacity of each node is calculated as: opacity = globalBase + globalScale * nodeOutlineOpacity\n\t * @method nodesGlobalOutlineOpacityScale\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} opacity - The global outline opacity scale of the nodes.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current global outline opacity if no argument is provided.\n\t * @example\n\t * // Set the global outline opacity of the nodes to 0.5.\n\t * helios.nodesGlobalOutlineOpacityScale(0.5);\n\t * @example\n\t * // Get the global outline opacity of the nodes.\n\t * let scale = helios.nodesGlobalOutlineOpacityScale();\n\t */\n\tnodeOpacity(colorInput) {\n\t\tif (typeof colorInput === \"undefined\") {\n\t\t\treturn this.network.colors.map(color => color[3]);\n\t\t} else if (typeof colorInput === \"function\") {\n\t\t\tlet allNodes = this.network.indexedNodes;\n\t\t\tfor (let nodeIndex = 0; nodeIndex < allNodes.length; nodeIndex++) {\n\t\t\t\tlet node = allNodes[nodeIndex];\n\t\t\t\tlet anOpacity = colorInput(node, nodeIndex, this.network);\n\t\t\t\tthis.network.colors[nodeIndex * 4 + 3] = anOpacity;\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let nodeIndex = 0; nodeIndex < allNodes.length; nodeIndex++) {\n\t\t\t\tthis.network.colors[nodeIndex * 4 + 3] = colorInput;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\n\t/** Enables or disables updating the edge colors to match the node colors.\n\t * @method edgesColorsFromNodes\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {boolean} edgesColorsFromNodes - Whether to update the edge colors to match the node colors.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current value if no argument is provided.\n\t * @example\n\t * // Enable updating the edge colors to match the node colors.\n\t * helios.edgesColorsFromNodes(true);\n\t */\n\tedgesColorsFromNodes(edgesColorsFromNodes) {\n\t\t// check if shaded is defined\n\t\tif (typeof edgesColorsFromNodes === \"undefined\") {\n\t\t\treturn this._settings.edgesColorsFromNodes;\n\t\t} else {\n\t\t\tthis._settings.edgesColorsFromNodes = edgesColorsFromNodes;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Enables or disables updating the edge widths to match the node widths.\n\t * @method edgesWidthFromNodes\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {boolean} edgesWidthFromNodes - Whether to update the edge widths to match the node widths.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current value if no argument is provided.\n\t * @example\n\t * // Enable updating the edge widths to match the node widths.\n\t * helios.edgesWidthFromNodes(true);\n\t */\n\tedgesWidthFromNodes(edgesWidthFromNodes) {\n\t\t// check if shaded is defined\n\t\tif (typeof edgesWidthFromNodes === \"undefined\") {\n\t\t\treturn this._settings.edgesWidthFromNodes;\n\t\t} else {\n\t\t\tthis._settings.edgesWidthFromNodes = edgesWidthFromNodes;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t//#endregion\n\n\n\t/** Enables or disables additive blending (Useful for dark backgrounds).\n\t * @method additiveBlending\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {boolean} enableAdditiveBlending - Whether to enable additive blending.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current value if no argument is provided.\n\t * @example\n\t * // Enable additive blending.\n\t * helios.additiveBlending(true);\n\t * @example\n\t * // Disable additive blending.\n\t * helios.additiveBlending(false);\n\t */\n\tadditiveBlending(enableAdditiveBlending) {\n\t\t// check if color is defined\n\t\tif (typeof enableAdditiveBlending === \"undefined\") {\n\t\t\treturn this._settings.useAdditiveBlending;\n\t\t} else {\n\t\t\tthis._settings.useAdditiveBlending = enableAdditiveBlending;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Enables or disables shaded nodes.\n\t * @method shadedNodes\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {boolean} enableShadedNodes - Whether to enable shaded nodes.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current value if no argument is provided.\n\t * @example\n\t * // Enable shaded nodes.\n\t * helios.shadedNodes(true);\n\t */\n\tshadedNodes(enableShadedNodes) {\n\t\t// check if shaded is defined\n\t\tif (typeof enableShadedNodes === \"undefined\") {\n\t\t\treturn this._settings.shadedNodes;\n\t\t} else {\n\t\t\tthis._settings.shadedNodes = enableShadedNodes;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Enables or disables edges that can be pickeable\n\t * @method pickeableEdges\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number[]|\"all\"} pickables - The indices of the edges that can be pickeable, or \"all\" to make all edges pickeable.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current value if no argument is provided.\n\t * @example\n\t * // Enable pickeable edges for [0,1,2,3]\n\t * helios.pickeableEdges([0, 1, 2, 3]);\n\t * @example\n\t * // Enable pickeable edges for all edges\n\t * helios.pickeableEdges(\"all\");\n\t */\n\tpickeableEdges(pickables) {\n\t\t// check if pickables is defined\n\t\tif (typeof pickables === \"undefined\") {\n\t\t\treturn this._settings.pickeableEdges;\n\t\t} else {\n\t\t\tthis._settings.pickeableEdges = new Set(pickables);\n\t\t\tif (pickables == \"all\") {\n\t\t\t\t// console.log(\"all\");\n\t\t\t\tfor (let i = 0; i < this.network.indexedEdges.length/2; i++) {\n\t\t\t\t\tthis._settings.pickeableEdges.add(i);\n\t\t\t\t}\n\t\t\t\tthis._status.edgeIndicesUpdate = true;\n\t\t\t\tthis.update();\n\t\t\t} else {\n\t\t\t\t// console.log(this._pickeableEdges);\n\t\t\t\tthis._status.edgeIndicesUpdate = true;\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Get or set labels buffer size\n\t * @method labelsMaxPixels\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} labelsMaxPixels - The maximum number of pixels for the labels buffer.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current value if no argument is provided.\n\t * @example\n\t * // Set the maximum number of pixels for the labels buffer to 10000.\n\t * helios.labelsMaxPixels(10000);\n\t */\n\tlabelsMaxPixels(labelsMaxPixels) {\n\t\t// check if labelsMaxPixels is defined\n\t\tif (typeof labelsMaxPixels === \"undefined\") {\n\t\t\treturn this._tracking.maxPixels;\n\t\t} else {\n\t\t\tthis._tracking.maxPixels = labelsMaxPixels;\n\t\t\t_willResizeEvent(0);\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/**\n\t * Manages behaviors for Helios.\n\t * - If only name is provided, it acts as a getter.\n\t * - If both name and behaviorObj are provided, it sets (or replaces) the behavior.\n\t * - If behaviorObj is explicitly null, it removes the behavior.\n\t * \n\t * @param {string} name - The unique name for the behavior.\n\t * @param {Object|Function|null} [behaviorObject] - The behavior object containing setup and teardown methods, \n\t *                                              or a callable function for setup, or null to remove.\n\t * @returns {Helios|Object|undefined} - The Helios instance for chaining when setting/removing, \n\t *                                      or the behavior object/undefined when getting.\n\t * \n\t * @example\n\t * // Set a behavior\n\t * helios.behavior(\"hoverLabel\", new HoverLabelBehavior());\n\t * \n\t * @example\n\t * // Get a behavior\n\t * let hoverBehavior = helios.behavior(\"hoverLabel\");\n\t * \n\t * @example\n\t * // Remove a behavior\n\t * helios.behavior(\"hoverLabel\", null);\n\t */\n\tbehavior(name, behaviorObj) {\n\t\tif (arguments.length === 1) {\n\t\t\treturn this.behaviors[name]; // Getter mode\n\t\t}\n\n\t\tif (behaviorObj === null) {\n\t\t\tif (this._isReady) {\n\t\t\t\tthis.behaviors[name]?.teardown(this);\n\t\t\t}\n\t\t\tdelete this.behaviors[name];\n\t\t\treturn this;\n\t\t}\n\n\t\t// Store the behavior first\n\t\tthis.behaviors[name] = behaviorObj;\n\n\t\t// If Helios is ready, execute the setup right away\n\t\tif (this._isReady) {\n\t\t\tif (typeof behaviorObj === 'function') {\n\t\t\t\tbehaviorObj(this); // Execute the callable function\n\t\t\t} else {\n\t\t\t\tbehaviorObj.setup?.(this);\n\t\t\t}\n\t\t}\n\n\t\treturn this; // Setter mode for chaining\n\t}\n\t\n\n\n\t/** Manually cleanup the Helios instance.\n\t * @method cleanup\n\t * @memberof Helios\n\t * @instance\n\t * @param {boolean} keepGLContext - Whether to keep the WebGL context alive.\n\t * @example\n\t * // Cleanup the Helios instance.\n\t * helios.cleanup();\n\t * @example\n\t * // Cleanup the Helios instance and keep the WebGL context alive.\n\t * helios.cleanup(true);\n\t */\n\tcleanup(keepGLContext) {\n\t\t// console.log(\"Cleanup started\");\n\t\tthis._isReady = false;\n\n\t\tconsole.log(\"Cleanup\", this.layoutWorker)\n\t\tthis.layoutWorker?.cleanup();\n\t\tthis._scheduler?.stop();\n\t\tconsole.log(\"Null\", this.layoutWorker)\n\t\tthis.layoutWorker = null;\n\t\tconst gl = this.gl;\n\t\tthis.onReadyCallback = null;\n\n\t\tthis.onNodeClickCallback = null;\n\t\tthis.onNodeDoubleClickCallback = null;\n\t\tthis.onNodeHoverStartCallback = null;\n\t\tthis.onNodeHoverMoveCallback = null;\n\t\tthis.onNodeHoverEndCallback = null;\n\n\t\tthis.onEdgeClickCallback = null;\n\t\tthis.onEdgeDoubleClickCallback = null;\n\t\tthis.onEdgeHoverStartCallback = null;\n\t\tthis.onEdgeHoverMoveCallback = null;\n\t\tthis.onEdgeHoverEndCallback = null;\n\n\n\t\tthis.onZoomCallback = null;\n\t\tthis.onRotationCallback = null;\n\t\tthis.onResizeCallback = null;\n\t\tthis.onLayoutStartCallback = null;\n\t\tthis.onLayoutStopCallback = null;\n\t\tthis.onDrawCallback = null;\n\t\tthis.onReadyCallback = null;\n\t\tthis._isReady = false;\n\n\t\t// window.removeEventListener('resize', this._onresizeEvent);\n\t\tif (this._resizeObserver) {\n\t\t\tconsole.log(\"disconnecting resize observer\");\n\t\t\tthis._resizeObserver.disconnect();\n\t\t\tthis._resizeObserver = null;\n\t\t\tdelete this._resizeObserver;\n\t\t}\n\n\t\tif (this._canvasElement) {\n\t\t\tthis._canvasElement.removeEventListener(\"click\", this._clickEventListener);\n\t\t\tthis._canvasElement.removeEventListener(\"dblclick\", this._doubleClickEventListener);\n\n\t\t\tthis._canvasElement.removeEventListener(\"mousemove\", this._hoverMoveEventListener);\n\t\t\tthis._canvasElement.removeEventListener(\"mouseleave\", this._hoverLeaveEventListener);\n\t\t\tdocument.body.removeEventListener(\"mouseout\", this._hoverLeaveWindowEventListener);\n\t\t}\n\n\t\tif (!keepGLContext && gl) {\n\t\t\tlet numTextureUnits = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n\t\t\tthis.pickingFramebuffer?.discard();\n\t\t\tthis._trackingFramebuffer?.discard();\n\t\t\tfor (let unit = 0; unit < numTextureUnits; ++unit) {\n\t\t\t\tgl.activeTexture(gl.TEXTURE0 + unit);\n\t\t\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t\t\t\tgl.bindTexture(gl.TEXTURE_CUBE_MAP, null);\n\t\t\t}\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, null);\n\t\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n\t\t\tgl.bindRenderbuffer(gl.RENDERBUFFER, null);\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n\t\t\tgl.deleteBuffer(this.nodesPositionBuffer);\n\t\t\tgl.deleteBuffer(this.nodesColorBuffer);\n\t\t\tgl.deleteBuffer(this.nodesSizeBuffer);\n\t\t\tgl.deleteBuffer(this.nodesSizeBuffer);\n\t\t\tgl.deleteBuffer(this.nodesOutlineWidthBuffer);\n\t\t\tgl.deleteBuffer(this.nodesOutlineColorBuffer);\n\t\t\tgl.deleteBuffer(this.nodesIndexBuffer);\n\n\t\t\tif (this.edgesGeometry) {\n\t\t\t\tgl.deleteBuffer(this.edgesGeometry.edgeVertexTypeBuffer);\n\t\t\t\tgl.deleteBuffer(this.edgesGeometry.verticesBuffer);\n\t\t\t\tgl.deleteBuffer(this.edgesGeometry.colorBuffer);\n\t\t\t\tgl.deleteBuffer(this.edgesGeometry.sizeBuffer);\n\t\t\t}\n\n\t\t\tif (this.fastEdgesGeometry) {\n\t\t\t\tgl.deleteBuffer(this.fastEdgesGeometry.indexBuffer);\n\t\t\t\tgl.deleteBuffer(this.fastEdgesGeometry.vertexObject);\n\t\t\t\tgl.deleteBuffer(this.fastEdgesGeometry.colorObject);\n\t\t\t\tgl.deleteBuffer(this.fastEdgesGeometry.indexObject);\n\t\t\t}\n\t\t}\n\n\t\tif (this.densityMap) {\n\t\t\tthis.densityMap.cleanup();\n\t\t}\n\n\t\tif (this._settings.autoCleanup) {\n\t\t\tthis._mutationObserver.disconnect();\n\t\t\tthis._mutationObserver = null;\n\t\t}\n\t\tif (this._canvasElement) {\n\t\t\tthis._canvasElement.remove();\n\t\t\tthis._canvasElement = null;\n\t\t}\n\t\t// Remove this.svgLayer and this.overlay \n\t\tif (this._svgLayer) {\n\t\t\tthis._svgLayer.remove();\n\t\t\tthis._svgLayer = null;\n\t\t}\n\t\tif (this._overlay) {\n\t\t\tthis._overlay.remove();\n\t\t\tthis._overlay = null;\n\t\t}\n\n\t\tthis.onCleanupCallback?.();\n\n\t\tthis._status.hasCleanup = true;\n\t}\n\n\n\t/**\n\t * Returns whether the Helios instance is ready to be used.\n\t * @method isReady\n\t * @memberof Helios\n\t * @instance\n\t * @returns {boolean} - Whether the Helios instance is ready to be used.\n\t * @example\n\t * // Check if Helios is ready to be used.\n\t * if (helios.isReady()) {\n\t *   // Helios is ready, do something.\n\t * } else {\n\t *   // Helios is not ready yet, wait or handle the error.\n\t * }\n\t */\n\tisReady() {\n\t\treturn this._isReady;\n\t}\n\n\t/** Destroys the Helios instance.\n\t * @method destroy\n\t * @memberof Helios\n\t * @instance\n\t */\n\tdestroy() {\n\t\tif (!this._status.hasCleanup) {\n\t\t\tthis.cleanup();\n\t\t}\n\t}\n\n}\n\n// Helios.xnet = xnet;\n","\"use strict\";\n\nlet textSplit2 = (text) => {\n\tlet entries = text.split(/\\s/)\n\tif (entries.length < 2) {\n\t\treturn null;\n\t}\n\treturn [+entries[0], +entries[1]];\n};\n\nlet textSplit3 = (text) => {\n\tlet entries = text.split(/\\s/)\n\tif (entries.length < 3) {\n\t\treturn null;\n\t}\n\treturn [+entries[0], +entries[1], +entries[2]];\n};\n\nlet readNumberIgnoringNone = (text) => {\n\tif (isNaN(text)) {\n\t\treturn 0.0;\n\t} else {\n\t\treturn +text;\n\t}\n};\n\n\nlet propertyHeaderRegular = /#([ve]) \\\"(.+)\\\" ([sn]|v2|v3)/;\nlet propertyFunctions = {\n\t\"s\": String,\n\t\"n\": readNumberIgnoringNone,\n\t\"v2\": textSplit2,\n\t\"v3\": textSplit3\n};\n\n\n\nlet readXNETVerticesHeader = (status) => {\n\twhile (status.lineIndex + 1 < status.lines.length && status.lines[status.lineIndex].length == 0) {\n\t\tstatus.lineIndex++;\n\t}\n\n\tlet headerLine = status.lines[status.lineIndex];\n\tlet headerEntries = headerLine.split(/\\s/);\n\tlet nodeCount = 0;\n\t\n\tif (headerEntries.length == 0 || headerEntries[0].toLowerCase() != \"#vertices\" ||\n\t\tisNaN(headerEntries[1]) || !Number.isInteger(+headerEntries[1])) {\n\t\tthrow `Malformed xnet data (Reading Vertices Header)[line: ${status.lineIndex}]\\n\\t> ${status.lines[status.lineIndex]}`;\n\t}\n\tnodeCount = +headerEntries[1];\n\tstatus.lineIndex++;\n\treturn nodeCount;\n};\n\nlet readXNETLabels = (status) => {\n\tlet labels = [];\n\twhile (status.lineIndex < status.lines.length) {\n\t\tlet currentLine = status.lines[status.lineIndex];\n\t\tlet lineLength = currentLine.length;\n\t\tif (lineLength == 0) {\n\t\t\tstatus.lineIndex++;\n\t\t\tcontinue;\n\t\t}\n\t\tif (currentLine[0] == \"#\") {\n\t\t\tbreak;\n\t\t}\n\t\tvar label = currentLine;\n\t\tif (currentLine[0] == \"\\\"\" && currentLine[lineLength - 1] == \"\\\"\") {\n\t\t\tlabel = currentLine.slice(1, -1);\n\t\t}\n\t\tlabels.push(label);\n\t\tstatus.lineIndex++;\n\t}\n\treturn labels;\n};\n\nlet readXNETEdgesHeader = (status) => {\n\twhile (status.lineIndex + 1 < status.lines.length && status.lines[status.lineIndex].length == 0) {\n\t\tstatus.lineIndex++;\n\t}\n\n\tlet headerLine = status.lines[status.lineIndex];\n\tlet headerEntries = headerLine.split(/\\s/);\n\n\tlet weighted = false;\n\tlet directed = false;\n\n\tif (headerEntries.length == 0 || headerEntries[0].toLowerCase() != \"#edges\") {\n\t\tthrow `Malformed xnet data (Reading Edges Header)[line: ${status.lineIndex}]\\n\\t> ${status.lines[status.lineIndex]}`;\n\t}\n\n\theaderEntries.forEach(headerEntry => {\n\t\tif (headerEntry.toLowerCase() == \"weighted\") {\n\t\t\tweighted = true;\n\t\t}\n\t\tif (headerEntry.toLowerCase() == \"nonweighted\") {\n\t\t\tweighted = false;\n\t\t}\n\t\tif (headerEntry.toLowerCase() == \"directed\") {\n\t\t\tdirected = true;\n\t\t}\n\t\tif (headerEntry.toLowerCase() == \"undirected\") {\n\t\t\tdirected = false;\n\t\t}\n\t});\n\tstatus.lineIndex++;\n\treturn { weighted: weighted, directed: directed };\n};\n\n\nlet readXNETEdges = (status) => {\n\tlet edges = [];\n\tlet weights = [];\n\twhile (status.lineIndex < status.lines.length) {\n\t\tlet currentLine = status.lines[status.lineIndex];\n\t\tlet lineLength = currentLine.length;\n\t\tif (lineLength == 0) {\n\t\t\tstatus.lineIndex++;\n\t\t\tcontinue;\n\t\t}\n\t\tif (currentLine[0] == \"#\") {\n\t\t\tbreak;\n\t\t}\n\t\tlet entries = currentLine.split(/\\s/);\n\t\tlet weight = 1.0;\n\t\t\n\t\tif (entries.length < 2) {\n\t\t\tthrow `Malformed xnet data (Reading Edges)[line: ${status.lineIndex}]\\n\\t> ${status.lines[status.lineIndex]}`;\n\t\t}\n\t\tif (entries.length > 2) {\n\t\t\tweight = +entries[2];\n\t\t}\n\t\tedges.push([+entries[0], +entries[1]]);\n\t\tweights.push(weight);\n\t\tstatus.lineIndex++;\n\t}\n\treturn { edges: edges, weights: weights };\n};\n\n\nlet readXNETPropertyHeader = (status) => {\n\twhile (status.lineIndex + 1 < status.lines.length && status.lines[status.lineIndex].length == 0) {\n\t\tstatus.lineIndex++;\n\t}\n\n\tlet headerEntries = propertyHeaderRegular.exec(status.lines[status.lineIndex]);\n\n\tif (headerEntries.length != 4) {\n\t\tthrow `Malformed xnet data [line: ${status.lineIndex}]\\n\\t> ${status.lines[status.lineIndex]}`;\n\t}\n\tlet propertyType = headerEntries[1];\n\tlet propertyKey = headerEntries[2];\n\tlet propertyFormat = headerEntries[3];\n\n\tstatus.lineIndex++;\n\n\treturn { type: propertyType, key: propertyKey, format: propertyFormat };\n};\n\n\n\nlet readXNETProperty = (status, propertyHeader) => {\n\tlet properties = [];\n\tlet propertyFunction = propertyFunctions[propertyHeader.format];\n\twhile (status.lineIndex < status.lines.length) {\n\t\tlet currentLine = status.lines[status.lineIndex];\n\t\tlet lineLength = currentLine.length;\n\t\tif (lineLength == 0) {\n\t\t\tstatus.lineIndex++;\n\t\t\tcontinue;\n\t\t}\n\t\tif (currentLine[0] == \"#\") {\n\t\t\tbreak;\n\t\t}\n\t\tlet value = currentLine;\n\t\tif (value[0] == \"\\\"\" && value[lineLength - 1] == \"\\\"\") {\n\t\t\tvalue = value.slice(1, -1);\n\t\t}\n\t\tproperties.push(propertyFunction(value));\n\t\tstatus.lineIndex++;\n\t}\n\treturn properties;\n};\n\n\n\nlet loadXNET = (data) => {\n\tlet status = { lineIndex:0, lines: data.split(\"\\n\") };\n\tlet nodesCount = readXNETVerticesHeader(status);\n\tlet labels = readXNETLabels(status);\n\n\tlet network = { nodesCount: nodesCount, verticesProperties: {}, edgesProperties: {} }\n\n\tif (labels.length > 0) {\n\t\tif (labels.length < nodesCount) {\n\t\t\tthrow `Malformed xnet data [line: ${status.lineIndex}]\\n\\t> ${status.lines[status.lineIndex]}`;\n\t\t} else {\n\t\t\tnetwork.labels = labels;\n\t\t}\n\t}\n\tlet edgesHeader = readXNETEdgesHeader(status);\n\tnetwork.directed = edgesHeader.directed;\n\tnetwork.weighted = edgesHeader.weighted;\n\n\tlet edgesData = readXNETEdges(status);\n\tnetwork.edges = edgesData.edges;\n\tif (network.weighted) {\n\t\tnetwork.weights = edgesData.weights;\n\t}\n\t// console.log({\"weights\":network.weights});\n\n\tdo{\n\t\twhile (status.lineIndex < status.lines.length && status.lines[status.lineIndex].length == 0) {\n\t\t\tstatus.lineIndex++;\n\t\t}\n\t\tif(!(status.lineIndex < status.lines.length)){\n\t\t\tbreak;\n\t\t}\n\t\tlet propertyHeader = readXNETPropertyHeader(status);\n\t\tlet propertyData = readXNETProperty(status, propertyHeader);\n\t\t//console.log(propertyHeader);\n\t\tif (propertyHeader.type == \"e\") {\n\t\t\tnetwork.edgesProperties[propertyHeader.key] = propertyData;\n\t\t} else if (propertyHeader.type == \"v\") {\n\t\t\tnetwork.verticesProperties[propertyHeader.key] = propertyData;\n\t\t}\n\t\t// status.lineIndex++;\n\t}while (status.lineIndex < status.lines.length);\n\treturn network;\n};\n\n\nasync function loadXNETFile(networkFile){\n\tlet networkData = await fetch(networkFile)\n\t\t.then(response => response.text());\n\t\t// .then();\n\treturn loadXNET(networkData);\n}\n\nfunction convertXNET2JSON(network){\n\n\tlet nodeCount = network.nodesCount;\n\n\tlet nodes = {};\n\tlet edges = [];\n\tfor (let index = 0; index < nodeCount; index++) {\n\t\tnodes[\"\" + index] = {\n\t\t\tID: \"\" + index,\n\t\t\t// position: [0,0,0],//network.verticesProperties[\"Position\"][index],\n\t\t\t// color:[0.0,0.0,0.0]//[network.verticesProperties[\"Color\"][index]],\n\t\t\t// size:1\n\t\t};\n\t\tif (network.labels) {\n\t\t\tnodes[\"\" + index].Label = network.labels[index];\n\t\t}\n\t}\n\tfor (const [key, value] of Object.entries(network.verticesProperties)) {\n\t\tfor (let index = 0; index < nodeCount; index++) {\n\t\t\tnodes[\"\" + index][key] = value[index];\n\t\t}\n\t}\n\n\tfor (let index = 0; index < network.edges.length; index++) {\n\t\tlet fromIndex, toIndex;\n\n\t\tedges.push({\n\t\t\t\"source\": \"\" + network.edges[index][0],\n\t\t\t\"target\": \"\" + network.edges[index][1],\n\t\t\t// directed?\n\t\t});\n\t\t// transfer attributes\n\t\tfor (const [key, value] of Object.entries(network.edgesProperties)) {\n\t\t\tedges[index][key] = value[index];\n\t\t}\n\t\t// if weighted\n\t\tif (network.weighted && network.weights) {\n\t\t\tedges[index].weight_temp = network.weights[index];\n\t\t}\n\t}\n\tconsole.log({\"edges\":edges});\n\treturn {nodes:nodes,edges:edges};\n}\n\nexport {loadXNET,loadXNETFile,convertXNET2JSON}","import { rgb as d3rgb } from \"d3-color\"\n\n'use strict';\n\n/**\n * GEXF Parser\n * ============\n *\n * Author: PLIQUE Guillaume (Yomguithereal)\n * URL: https://github.com/Yomguithereal/gexf\n * Version: 0.2.5\n */\n\n/**\n * Helper Namespace\n * -----------------\n *\n * A useful batch of function dealing with DOM operations and types.\n */\nlet _helpers = {\n\tgetModelTags: function (xml) {\n\t\tlet attributesTags = xml.getElementsByTagName('attributes'),\n\t\t\tmodelTags = {},\n\t\t\tl = attributesTags.length,\n\t\t\ti;\n\n\t\tfor (i = 0; i < l; i++)\n\t\t\tmodelTags[attributesTags[i].getAttribute('class')] =\n\t\t\t\tattributesTags[i].childNodes;\n\n\t\treturn modelTags;\n\t},\n\tnodeListToArray: function (nodeList) {\n\n\t\t// Return array\n\t\tlet children = [];\n\n\t\t// Iterating\n\t\tfor (let i = 0, len = nodeList.length; i < len; ++i) {\n\t\t\tif (nodeList[i].nodeName !== '#text')\n\t\t\t\tchildren.push(nodeList[i]);\n\t\t}\n\n\t\treturn children;\n\t},\n\tnodeListEach: function (nodeList, func) {\n\n\t\t// Iterating\n\t\tfor (let i = 0, len = nodeList.length; i < len; ++i) {\n\t\t\tif (nodeList[i].nodeName !== '#text')\n\t\t\t\tfunc(nodeList[i]);\n\t\t}\n\t},\n\tnodeListToHash: function (nodeList, filter) {\n\n\t\t// Return object\n\t\tlet children = {};\n\n\t\t// Iterating\n\t\tfor (let i = 0; i < nodeList.length; i++) {\n\t\t\tif (nodeList[i].nodeName !== '#text') {\n\t\t\t\tlet prop = filter(nodeList[i]);\n\t\t\t\tchildren[prop.key] = prop.value;\n\t\t\t}\n\t\t}\n\n\t\treturn children;\n\t},\n\tnamedNodeMapToObject: function (nodeMap) {\n\n\t\t// Return object\n\t\tlet attributes = {};\n\n\t\t// Iterating\n\t\tfor (let i = 0; i < nodeMap.length; i++) {\n\t\t\tattributes[nodeMap[i].name] = nodeMap[i].value;\n\t\t}\n\n\t\treturn attributes;\n\t},\n\tgetFirstElementByTagNS: function (node, ns, tag) {\n\t\tlet el = node.getElementsByTagName(ns + ':' + tag)[0];\n\n\t\tif (!el)\n\t\t\tel = node.getElementsByTagNameNS(ns, tag)[0];\n\n\t\tif (!el)\n\t\t\tel = node.getElementsByTagName(tag)[0];\n\n\t\treturn el;\n\t},\n\tgetAttributeNS: function (node, ns, attribute) {\n\t\tlet attr_value = node.getAttribute(ns + ':' + attribute);\n\n\t\tif (attr_value === undefined)\n\t\t\tattr_value = node.getAttributeNS(ns, attribute);\n\n\t\tif (attr_value === undefined)\n\t\t\tattr_value = node.getAttribute(attribute);\n\n\t\treturn attr_value;\n\t},\n\tenforceType: function (type, value) {\n\n\t\tswitch (type) {\n\t\t\tcase 'boolean':\n\t\t\t\tvalue = (value === 'true');\n\t\t\t\tbreak;\n\n\t\t\tcase 'integer':\n\t\t\tcase 'long':\n\t\t\tcase 'float':\n\t\t\tcase 'double':\n\t\t\t\tvalue = +value;\n\t\t\t\tbreak;\n\n\t\t\tcase 'liststring':\n\t\t\t\tvalue = value ? value.split('|') : [];\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn value;\n\t},\n\tgetRGB: function (values) {\n\t\treturn (values[3]) ?\n\t\t\t'rgba(' + values.join(',') + ')' :\n\t\t\t'rgb(' + values.slice(0, -1).join(',') + ')';\n\t}\n};\n\n\n/**\n * Parser Core Functions\n * ----------------------\n *\n * The XML parser's functions themselves.\n */\n\n/**\n * Node structure.\n * A function returning an object guarded with default value.\n *\n * @param  {object} properties The node properties.\n * @return {object}            The guarded node object.\n */\nfunction Node(properties) {\n\n\t// Possible Properties\n\tlet node = {\n\t\tid: properties.id,\n\t\tlabel: properties.label\n\t};\n\n\tif (properties.viz)\n\t\tnode.viz = properties.viz;\n\n\tif (properties.attributes)\n\t\tnode.attributes = properties.attributes;\n\n\treturn node;\n}\n\n\n/**\n * Edge structure.\n * A function returning an object guarded with default value.\n *\n * @param  {object} properties The edge properties.\n * @return {object}            The guarded edge object.\n */\nfunction Edge(properties) {\n\n\t// Possible Properties\n\tlet edge = {\n\t\tid: properties.id,\n\t\ttype: properties.type || 'undirected',\n\t\tlabel: properties.label || '',\n\t\tsource: properties.source,\n\t\ttarget: properties.target,\n\t\tweight: +properties.weight || 1.0\n\t};\n\n\tif (properties.viz)\n\t\tedge.viz = properties.viz;\n\n\tif (properties.attributes)\n\t\tedge.attributes = properties.attributes;\n\n\treturn edge;\n}\n\n/**\n * Graph parser.\n * This structure parse a gexf string and return an object containing the\n * parsed graph.\n *\n * @param  {string} xmlString The xml string of the gexf file to parse.\n * @return {object}     The parsed graph.\n */\nfunction Graph(xmlString) {\n\tlet xmlParser = new DOMParser();\n  let xml = xmlParser.parseFromString(xmlString,\"text/xml\");\n\tlet _xml = {};\n\tconsole.log(xml);\n\t// Basic Properties\n\t//------------------\n\t_xml.els = {\n\t\troot: xml.getElementsByTagName('gexf')[0],\n\t\tgraph: xml.getElementsByTagName('graph')[0],\n\t\tmeta: xml.getElementsByTagName('meta')[0],\n\t\tnodes: xml.getElementsByTagName('node'),\n\t\tedges: xml.getElementsByTagName('edge'),\n\t\tmodel: _helpers.getModelTags(xml)\n\t};\n\n\t// Information\n\t_xml.hasViz = !!_helpers.getAttributeNS(_xml.els.root, 'xmlns', 'viz');\n\t_xml.version = _xml.els.root.getAttribute('version') || '1.0';\n\t_xml.mode = _xml.els.graph.getAttribute('mode') || 'static';\n\n\tlet edgeType = _xml.els.graph.getAttribute('defaultedgetype');\n\t_xml.defaultEdgetype = edgeType || 'undirected';\n\n\t// Parser Functions\n\t//------------------\n\n\t// Meta Data\n\tfunction _metaData() {\n\n\t\tlet metas = {};\n\t\tif (!_xml.els.meta)\n\t\t\treturn metas;\n\n\t\t// Last modified date\n\t\tmetas.lastmodifieddate = _xml.els.meta.getAttribute('lastmodifieddate');\n\n\t\t// Other information\n\t\t_helpers.nodeListEach(_xml.els.meta.childNodes, function (child) {\n\t\t\tmetas[child.tagName.toLowerCase()] = child.textContent;\n\t\t});\n\n\t\treturn metas;\n\t}\n\n\t// Model\n\tfunction _model(cls) {\n\t\tlet attributes = [];\n\n\t\t// Iterating through attributes\n\t\tif (_xml.els.model[cls])\n\t\t\t_helpers.nodeListEach(_xml.els.model[cls], function (attr) {\n\n\t\t\t\t// Properties\n\t\t\t\tlet properties = {\n\t\t\t\t\tid: attr.getAttribute('id') || attr.getAttribute('for'),\n\t\t\t\t\ttype: attr.getAttribute('type') || 'string',\n\t\t\t\t\ttitle: attr.getAttribute('title') || ''\n\t\t\t\t};\n\n\t\t\t\t// Defaults\n\t\t\t\tlet default_el = _helpers.nodeListToArray(attr.childNodes);\n\n\t\t\t\tif (default_el.length > 0)\n\t\t\t\t\tproperties.defaultValue = default_el[0].textContent;\n\n\t\t\t\t// Creating attribute\n\t\t\t\tattributes.push(properties);\n\t\t\t});\n\n\t\treturn attributes.length > 0 ? attributes : false;\n\t}\n\n\t// Data from nodes or edges\n\tfunction _data(model, node_or_edge) {\n\n\t\tlet data = {};\n\t\tlet attvalues_els = node_or_edge.getElementsByTagName('attvalue');\n\n\t\t// Getting Node Indicated Attributes\n\t\tlet ah = _helpers.nodeListToHash(attvalues_els, function (el) {\n\t\t\tlet attributes = _helpers.namedNodeMapToObject(el.attributes);\n\t\t\tlet key = attributes.id || attributes['for'];\n\n\t\t\t// Returning object\n\t\t\treturn { key: key, value: attributes.value };\n\t\t});\n\n\n\t\t// Iterating through model\n\t\tmodel.map(function (a) {\n\n\t\t\t// Default value?\n\t\t\tdata[a.id] = !(a.id in ah) && 'defaultValue' in a ?\n\t\t\t\t_helpers.enforceType(a.type, a.defaultValue) :\n\t\t\t\t_helpers.enforceType(a.type, ah[a.id]);\n\n\t\t});\n\n\t\treturn data;\n\t}\n\n\t// Nodes\n\tfunction _nodes(model) {\n\t\tlet nodes = [];\n\n\t\t// Iteration through nodes\n\t\t_helpers.nodeListEach(_xml.els.nodes, function (n) {\n\n\t\t\t// Basic properties\n\t\t\tlet properties = {\n\t\t\t\tid: n.getAttribute('id'),\n\t\t\t\tlabel: n.getAttribute('label') || ''\n\t\t\t};\n\n\t\t\t// Retrieving data from nodes if any\n\t\t\tif (model)\n\t\t\t\tproperties.attributes = _data(model, n);\n\n\t\t\t// Retrieving viz information\n\t\t\tif (_xml.hasViz)\n\t\t\t\tproperties.viz = _nodeViz(n);\n\n\t\t\t// Pushing node\n\t\t\tnodes.push(Node(properties));\n\t\t});\n\n\t\treturn nodes;\n\t}\n\n\t// Viz information from nodes\n\tfunction _nodeViz(node) {\n\t\tlet viz = {};\n\n\t\t// Color\n\t\tlet color_el = _helpers.getFirstElementByTagNS(node, 'viz', 'color');\n\n\t\tif (color_el) {\n\t\t\tlet color = ['r', 'g', 'b', 'a'].map(function (c) {\n\t\t\t\treturn color_el.getAttribute(c);\n\t\t\t});\n\n\t\t\tviz.color = _helpers.getRGB(color);\n\t\t}\n\n\t\t// Position\n\t\tlet pos_el = _helpers.getFirstElementByTagNS(node, 'viz', 'position');\n\n\t\tif (pos_el) {\n\t\t\tviz.position = {};\n\n\t\t\t['x', 'y', 'z'].map(function (p) {\n\t\t\t\tviz.position[p] = +pos_el.getAttribute(p);\n\t\t\t});\n\t\t}\n\n\t\t// Size\n\t\tlet size_el = _helpers.getFirstElementByTagNS(node, 'viz', 'size');\n\t\tif (size_el)\n\t\t\tviz.size = +size_el.getAttribute('value');\n\n\t\t// Shape\n\t\tlet shape_el = _helpers.getFirstElementByTagNS(node, 'viz', 'shape');\n\t\tif (shape_el)\n\t\t\tviz.shape = shape_el.getAttribute('value');\n\n\t\treturn viz;\n\t}\n\n\t// Edges\n\tfunction _edges(model, default_type) {\n\t\tlet edges = [];\n\n\t\t// Iteration through edges\n\t\t_helpers.nodeListEach(_xml.els.edges, function (e) {\n\n\t\t\t// Creating the edge\n\t\t\tlet properties = _helpers.namedNodeMapToObject(e.attributes);\n\t\t\tif (!('type' in properties)) {\n\t\t\t\tproperties.type = default_type;\n\t\t\t}\n\n\t\t\t// Retrieving edge data\n\t\t\tif (model)\n\t\t\t\tproperties.attributes = _data(model, e);\n\n\n\t\t\t// Retrieving viz information\n\t\t\tif (_xml.hasViz)\n\t\t\t\tproperties.viz = _edgeViz(e);\n\n\t\t\tedges.push(Edge(properties));\n\t\t});\n\n\t\treturn edges;\n\t}\n\n\t// Viz information from edges\n\tfunction _edgeViz(edge) {\n\t\tlet viz = {};\n\n\t\t// Color\n\t\tlet color_el = _helpers.getFirstElementByTagNS(edge, 'viz', 'color');\n\n\t\tif (color_el) {\n\t\t\tlet color = ['r', 'g', 'b', 'a'].map(function (c) {\n\t\t\t\treturn color_el.getAttribute(c);\n\t\t\t});\n\n\t\t\tviz.color = _helpers.getRGB(color);\n\t\t}\n\n\t\t// Shape\n\t\tlet shape_el = _helpers.getFirstElementByTagNS(edge, 'viz', 'shape');\n\t\tif (shape_el)\n\t\t\tviz.shape = shape_el.getAttribute('value');\n\n\t\t// Thickness\n\t\tlet thick_el = _helpers.getFirstElementByTagNS(edge, 'viz', 'thickness');\n\t\tif (thick_el)\n\t\t\tviz.thickness = +thick_el.getAttribute('value');\n\n\t\treturn viz;\n\t}\n\n\n\t// Returning the Graph\n\t//---------------------\n\tlet nodeModel = _model('node'),\n\t\tedgeModel = _model('edge');\n\n\tlet graph = {\n\t\tversion: _xml.version,\n\t\tmode: _xml.mode,\n\t\tdefaultEdgeType: _xml.defaultEdgetype,\n\t\tmeta: _metaData(),\n\t\tmodel: {},\n\t\tnodes: _nodes(nodeModel),\n\t\tedges: _edges(edgeModel, _xml.defaultEdgetype)\n\t};\n\n\tif (nodeModel)\n\t\tgraph.model.node = nodeModel;\n\tif (edgeModel)\n\t\tgraph.model.edge = edgeModel;\n\n\treturn graph;\n}\n\n\n// Parsing the GEXF File\nfunction parse(gexf) {\n\treturn Graph(gexf);\n}\n\n\n/**\n * Exporting\n * ----------\n */\nlet gexf = {\n\n\t// Functions\n\tparse: parse,\n\n\t// Version\n\tversion: '0.2.5'\n};\n\n\n\nfunction loadGEXF(networkData){\n  return gexf.parse(networkData);\n}\n\n\nasync function loadGEXFFile(networkFile){\n  let networkData = await fetch(networkFile)\n    .then(response => response.text());\n  return gexf.parse(networkData);\n}\n\n\n\nfunction convertGEXF2JSON(network){\n  /*\n  network = {\n    nodes: [\n      {id: \"n0\", attributes:{...}},\n      {id: \"n1\", attributes:{...}},\n      {id: \"n2\", attributes:{...}},\n\n    ],\n    edges: [\n      {id: \"e0\", source: \"n0\", target: \"n1\", attributes:{...}},\n      {id: \"e1\", source: \"n1\", target: \"n2\", attributes:{...}},\n  }\n  */\n\n\tlet nodes = {};\n\tlet edges = [];\n  for (let node of network.nodes) {\n    let nodeID = node.id;\n    nodes[nodeID] = {};\n    // update with attributes\n    if (node.attributes) {\n      for (const [key, value] of Object.entries(node.attributes||{})) {\n        nodes[nodeID][key] = value;\n      }\n    }\n    // update label if exists\n    if (node.label) {\n      nodes[nodeID].Label = node.label;\n    }else if (node?.attributes.name) {\n      nodes[nodeID].Label = node.attributes.name;\n    }else{\n      nodes[nodeID].Label = nodeID;\n    }\n    if (node.viz?.position) {\n      let pos = node.viz?.position;\n      nodes[nodeID].Position = [pos?.x||0, pos?.y||0, pos?.z||0];\n    }\n\n    if (node.viz?.color) {\n      let color = d3rgb(node.viz?.color);\n      nodes[nodeID].Color = [color.r/255, color.g/255, color.b/255];\n    }\n  }\n\n\n\tfor (let edge of network.edges||[]) {\n    let newEdge = {};\n    newEdge.source = edge.source;\n    newEdge.target = edge.target;\n    for (const [key, value] of Object.entries(edge.attributes||{})) {\n      newEdge[key] = value;\n    }\n    edges.push(newEdge);\n\t}\n\t\n\treturn {nodes:nodes,edges:edges};\n}\n\nexport {loadGEXFFile,loadGEXF,convertGEXF2JSON}\n","/*\n * The GML software is based on the code from https://github.com/mobenar/mobenga-gml\n *\n * MIT License\n *\n * Copyright (c) [year] [author]\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * Parses GML string.\n *\n * @param {String} gml\n * @returns {Object}\n * @throws {SyntaxError}\n */\n\nfunction GMLParse(gml) {\n\n\tvar json = ('{\\n' + gml + '\\n}')\n\t\t.replace(/^(\\s*)(\\w+)\\s*\\[/gm, '$1\"$2\": {')\n\t\t.replace(/^(\\s*)\\]/gm, '$1},')\n\t\t.replace(/^(\\s*)(\\w+)\\s+(.+)$/gm, '$1\"$2\": $3,')\n\t\t.replace(/,(\\s*)\\}/g, '$1}');\n\n\tvar graph = {};\n\tvar nodes = [];\n\tvar edges = [];\n\tvar i = 0;\n\tvar parsed;\n\n\tjson = json.replace(/^(\\s*)\"node\"/gm, function (all, indent) {\n\n\t\treturn (indent + '\"node[' + (i++) + ']\"');\n\t});\n\n\ti = 0;\n\n\tjson = json.replace(/^(\\s*)\"edge\"/gm, function (all, indent) {\n\n\t\treturn (indent + '\"edge[' + (i++) + ']\"');\n\t});\n\t//replace NaN with null\n\tjson = json.replace(/: NaN/g, ': null');\n\t\n\ttry {\n\t\tparsed = JSON.parse(json);\n\t}\n\tcatch (err) {\n\t\tthrow new SyntaxError('bad format');\n\t}\n\tif (!isObject(parsed.graph)) {\n\t\tthrow new SyntaxError('no graph tag');\n\t}\n\n\tforIn(parsed.graph, function (key, value) {\n\n\t\tvar matches = key.match(/^(\\w+)\\[(\\d+)\\]$/);\n\t\tvar name;\n\t\tvar i;\n\n\t\tif (matches) {\n\t\t\tname = matches[1];\n\t\t\ti = parseInt(matches[2], 10);\n\n\t\t\tif (name === 'node') {\n\t\t\t\tnodes[i] = value;\n\t\t\t}\n\t\t\telse if (name === 'edge') {\n\t\t\t\tedges[i] = value;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgraph[key] = value;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tgraph[key] = value;\n\t\t}\n\t});\n\tlet nodesDictionary = {};\n\tnodes.forEach(function (node) {\n\t\tnodesDictionary[node.id] = node;\n\t});\n\tgraph.nodes = nodesDictionary;\n\tgraph.edges = edges;\n\n\treturn graph;\n};\n\n/**\n * Stringifies GML object.\n *\n * @param {Object} graph\n * @param {Object} [options]\n * @returns {String}\n */\nfunction GMLStringify(graph, options) {\n\n\tif (typeof graph.toJSON === 'function') {\n\t\tgraph = graph.toJSON();\n\t}\n\n\toptions = options || {};\n\n\tvar nodes = graph.nodes || [];\n\tvar edges = graph.edges || [];\n\tvar indent1 = (typeof options.indent === 'string' ? options.indent : '  ');\n\tvar indent2 = indent1 + indent1;\n\tvar getGraphAttributes = options.graphAttributes || null;\n\tvar getNodeAttributes = options.nodeAttributes || null;\n\tvar getEdgeAttributes = options.edgeAttributes || null;\n\tvar lines = ['graph ['];\n\n\tfunction addAttribute(key, value, indent) {\n\n\t\tif (isObject(value)) {\n\t\t\tlines.push(indent + key + ' [');\n\n\t\t\tforIn(value, function (key, value) {\n\n\t\t\t\taddAttribute(key, value, indent + indent1);\n\t\t\t});\n\n\t\t\tlines.push(indent + ']');\n\t\t}\n\t\telse {\n\t\t\tlines.push(indent + attribute(key, value));\n\t\t}\n\t}\n\n\tforIn(graph, function (key, value) {\n\n\t\tif (key !== 'nodes' && key !== 'edges') {\n\t\t\taddAttribute(key, value, indent1);\n\t\t}\n\t});\n\n\tif (getGraphAttributes) {\n\t\tforIn(getGraphAttributes(graph), function (key, value) {\n\n\t\t\taddAttribute(key, value, indent1);\n\t\t});\n\t}\n\n\tnodes.forEach(function (node) {\n\n\t\tlines.push(indent1 + 'node [');\n\n\t\t// addAttribute('id', node.id, indent2);\n\t\t// addAttribute('label', node.label, indent2);\n\n\t\tif (getNodeAttributes) {\n\t\t\t// getNodeAttributes\n\t\t\tgetNodeAttributes.forEach(function (key) {\n\n\t\t\t\taddAttribute(key, node[key], indent2);\n\t\t\t});\n\t\t}\n\n\t\tlines.push(indent1 + ']');\n\t});\n\n\tedges.forEach(function (edge) {\n\n\t\tlines.push(indent1 + 'edge [');\n\n\t\taddAttribute('source', edge.source, indent2);\n\t\taddAttribute('target', edge.target, indent2);\n\t\t// addAttribute('label', edge.label, indent2);\n\n\t\tif (getEdgeAttributes) {\n\t\t\tgetEdgeAttributes.forEach(function (key) {\n\n\t\t\t\taddAttribute(key, edge[key], indent2);\n\t\t\t});\n\t\t}\n\n\t\tlines.push(indent1 + ']');\n\t});\n\n\tlines.push(']');\n\n\treturn lines.join('\\n');\n};\n\nfunction isObject(value) {\n\n\treturn (value && Object.prototype.toString.call(value) === '[object Object]');\n}\n\nfunction forIn(object, callback) {\n\n\tObject.keys(object).forEach(function (key) {\n\n\t\tcallback(key, object[key]);\n\t});\n}\n\nfunction attribute(key, value) {\n\n\tif (typeof value === 'boolean') {\n\t\tvalue = Number(value);\n\t}\n\telse {\n\t\tvalue = JSON.stringify(value);\n\t}\n\n\treturn (key + ' ' + value);\n}\n\n\n\nfunction loadGML(networkData) {\n\treturn GMLParse(networkData);\n}\n\n\nasync function loadGMLFile(networkFile) {\n\tlet networkData = await fetch(networkFile)\n\t\t.then(response => {\n\t\t\treturn response.text();\n\t\t});\n\treturn loadGML(networkData);\n}\n\nexport { loadGML, loadGMLFile, GMLStringify };","/**\n * A class representing a behavior filter for Helios.\n */\n\n\n\n\nexport class BehaviorFilter {\n\t/**\n\t * Creates a new instance of BehaviorFilter.\n\t * @param {Helios} helios - The Helios object to be attached to.\n\t */\n\tconstructor(helios) {\n\t\t/**\n\t\t * The filters to be applied.\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._filters = {};\n\t\tthis._updatedNodes = new Set();\n\n\t\t/**\n\t\t * The Helios object to be attached to.\n\t\t * @type {Helios}\n\t\t * @private\n\t\t */\n\t\tthis._helios = helios;\n\t}\n\n\t/**\n\t * Gets the filters.\n\t * @type {Object}\n\t */\n\tget filters() {\n\t\treturn this._filters;\n\t}\n\n\t/**\n\t * Sets a filter.\n\t * @param {string} name - The name of the filter.\n\t * @param {function} filter - The filter function.\n\t */\n\tsetFilter(name, filter) {\n\t\tthis._filters[name] = filter;\n\t}\n\n\t/**\n\t * Removes a filter.\n\t * @param {string} name - The name of the filter to remove.\n\t */\n\tremoveFilter(name) {\n\t\tdelete this._filters[name];\n\t}\n\n\t/**\n\t * Applies the filters.\n\t */\n\tapplyFilters() {\n\t\tfor (let node of this._helios.network.indexedNodes) {\n\t\t\tlet nodeState = false;\n\t\t\tfor (let filter in this._filters) {\n\t\t\t\tnodeState = nodeState || this._filters[filter](node);\n\t\t\t}\n\t\t\tif (nodeState != node._filtered) {\n\t\t\t\tthis._updatedNodes.add(node);\n\t\t\t}\n\t\t\tnode._filtered = nodeState;\n\t\t}\n\t}\n\n\t/**\n\t * Gets the updated nodes.\n\t * @type {Set}\n\t * @readonly\n\t */\n\tupdatedNodes(clear=true) {\n\t\t//Create copy of set\n\t\tlet nodes = new Set(this._updatedNodes);\n\t\tif (clear) {\n\t\t\tthis._updatedNodes.clear();\n\t\t}\n\t\treturn nodes;\n\t} \n}\n","function e(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{d(n.next(e))}catch(e){a(e)}}function c(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}d((n=n.apply(e,t||[])).next())}))}\"function\"==typeof SuppressedError&&SuppressedError;const t=[\"geforce 320m\",\"geforce 8600\",\"geforce 8600m gt\",\"geforce 8800 gs\",\"geforce 8800 gt\",\"geforce 9400\",\"geforce 9400m g\",\"geforce 9400m\",\"geforce 9600m gt\",\"geforce 9600m\",\"geforce fx go5200\",\"geforce gt 120\",\"geforce gt 130\",\"geforce gt 330m\",\"geforce gtx 285\",\"google swiftshader\",\"intel g41\",\"intel g45\",\"intel gma 4500mhd\",\"intel gma x3100\",\"intel hd 3000\",\"intel q45\",\"legacy\",\"mali-2\",\"mali-3\",\"mali-4\",\"quadro fx 1500\",\"quadro fx 4\",\"quadro fx 5\",\"radeon hd 2400\",\"radeon hd 2600\",\"radeon hd 4670\",\"radeon hd 4850\",\"radeon hd 4870\",\"radeon hd 5670\",\"radeon hd 5750\",\"radeon hd 6290\",\"radeon hd 6300\",\"radeon hd 6310\",\"radeon hd 6320\",\"radeon hd 6490m\",\"radeon hd 6630m\",\"radeon hd 6750m\",\"radeon hd 6770m\",\"radeon hd 6970m\",\"sgx 543\",\"sgx543\"];function r(e){return e=e.toLowerCase().replace(/.*angle ?\\((.+)\\)(?: on vulkan [0-9.]+)?$/i,\"$1\").replace(/\\s(\\d{1,2}gb|direct3d.+$)|\\(r\\)| \\([^)]+\\)$/g,\"\").replace(/(?:vulkan|opengl) \\d+\\.\\d+(?:\\.\\d+)?(?: \\((.*)\\))?/,\"$1\")}const n=\"undefined\"==typeof window,o=(()=>{if(n)return;const{userAgent:e,platform:t,maxTouchPoints:r}=window.navigator,o=/(iphone|ipod|ipad)/i.test(e),a=\"iPad\"===t||\"MacIntel\"===t&&r>0&&!window.MSStream;return{isIpad:a,isMobile:/android/i.test(e)||o||a,isSafari12:/Version\\/12.+Safari/.test(e),isFirefox:/Firefox/.test(e)}})();function a(e,t,r){if(!r)return[t];const n=function(e){const t=\"\\n    precision highp float;\\n    attribute vec3 aPosition;\\n    varying float vvv;\\n    void main() {\\n      vvv = 0.31622776601683794;\\n      gl_Position = vec4(aPosition, 1.0);\\n    }\\n  \",r=\"\\n    precision highp float;\\n    varying float vvv;\\n    void main() {\\n      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;\\n      enc = fract(enc);\\n      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);\\n      gl_FragColor = enc;\\n    }\\n  \",n=e.createShader(35633),o=e.createShader(35632),a=e.createProgram();if(!(o&&n&&a))return;e.shaderSource(n,t),e.shaderSource(o,r),e.compileShader(n),e.compileShader(o),e.attachShader(a,n),e.attachShader(a,o),e.linkProgram(a),e.detachShader(a,n),e.detachShader(a,o),e.deleteShader(n),e.deleteShader(o),e.useProgram(a);const i=e.createBuffer();e.bindBuffer(34962,i),e.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);const c=e.getAttribLocation(a,\"aPosition\");e.vertexAttribPointer(c,3,5126,!1,0,0),e.enableVertexAttribArray(c),e.clearColor(1,1,1,1),e.clear(16384),e.viewport(0,0,1,1),e.drawArrays(4,0,3);const d=new Uint8Array(4);return e.readPixels(0,0,1,1,6408,5121,d),e.deleteProgram(a),e.deleteBuffer(i),d.join(\"\")}(e),a=\"801621810\",i=\"8016218135\",c=\"80162181161\",d=(null==o?void 0:o.isIpad)?[[\"a7\",c,12],[\"a8\",i,15],[\"a8x\",i,15],[\"a9\",i,15],[\"a9x\",i,15],[\"a10\",i,15],[\"a10x\",i,15],[\"a12\",a,15],[\"a12x\",a,15],[\"a12z\",a,15],[\"a14\",a,15],[\"m1\",a,15]]:[[\"a7\",c,12],[\"a8\",i,12],[\"a9\",i,15],[\"a10\",i,15],[\"a11\",a,15],[\"a12\",a,15],[\"a13\",a,15],[\"a14\",a,15],[\"a15\",a,15],[\"a16\",a,15],[\"a17\",a,15]];let l;\"80162181255\"===n?l=d.filter((([,,e])=>e>=14)):(l=d.filter((([,e])=>e===n)),l.length||(l=d));return l.map((([e])=>`apple ${e} gpu`))}class i extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}const c=[],d=[];function l(e,t){if(e===t)return 0;const r=e;e.length>t.length&&(e=t,t=r);let n=e.length,o=t.length;for(;n>0&&e.charCodeAt(~-n)===t.charCodeAt(~-o);)n--,o--;let a,i=0;for(;i<n&&e.charCodeAt(i)===t.charCodeAt(i);)i++;if(n-=i,o-=i,0===n)return o;let l,s,f=0,u=0,g=0;for(;u<n;)d[u]=e.charCodeAt(i+u),c[u]=++u;for(;g<o;)for(a=t.charCodeAt(i+g),l=g++,f=g,u=0;u<n;u++)s=a===d[u]?l:l+1,l=c[u],f=c[u]=l>f?s>f?f+1:s:s>l?l+1:s;return f}function s(e){return null!=e}const f=({mobileTiers:c=[0,15,30,60],desktopTiers:d=[0,15,30,60],override:f={},glContext:u,failIfMajorPerformanceCaveat:g=!1,benchmarksURL:h=\"https://unpkg.com/detect-gpu@5.0.38/dist/benchmarks\"}={})=>e(void 0,void 0,void 0,(function*(){const p={};if(n)return{tier:0,type:\"SSR\"};const{isIpad:m=!!(null==o?void 0:o.isIpad),isMobile:v=!!(null==o?void 0:o.isMobile),screenSize:w=window.screen,loadBenchmarks:x=(t=>e(void 0,void 0,void 0,(function*(){const e=yield fetch(`${h}/${t}`).then((e=>e.json()));if(parseInt(e.shift().split(\".\")[0],10)<4)throw new i(\"Detect GPU benchmark data is out of date. Please update to version 4x\");return e})))}=f;let{renderer:A}=f;const P=(e,t,r,n,o)=>({device:o,fps:n,gpu:r,isMobile:v,tier:e,type:t});let S,b=\"\";if(A)A=r(A),S=[A];else{const e=u||function(e,t=!1){const r={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:t,powerPreference:\"high-performance\",stencil:!1};e&&delete r.powerPreference;const n=window.document.createElement(\"canvas\"),o=n.getContext(\"webgl\",r)||n.getContext(\"experimental-webgl\",r);return null!=o?o:void 0}(null==o?void 0:o.isSafari12,g);if(!e)return P(0,\"WEBGL_UNSUPPORTED\");const t=(null==o?void 0:o.isFirefox)?null:e.getExtension(\"WEBGL_debug_renderer_info\");if(A=t?e.getParameter(t.UNMASKED_RENDERER_WEBGL):e.getParameter(e.RENDERER),!A)return P(1,\"FALLBACK\");b=A,A=r(A),S=function(e,t,r){return\"apple gpu\"===t?a(e,t,r):[t]}(e,A,v)}const E=(yield Promise.all(S.map((function(t){var r;return e(this,void 0,void 0,(function*(){const e=(e=>{const t=v?[\"adreno\",\"apple\",\"mali-t\",\"mali\",\"nvidia\",\"powervr\",\"samsung\"]:[\"intel\",\"apple\",\"amd\",\"radeon\",\"nvidia\",\"geforce\",\"adreno\"];for(const r of t)if(e.includes(r))return r})(t);if(!e)return;const n=`${v?\"m\":\"d\"}-${e}${m?\"-ipad\":\"\"}.json`,o=p[n]=null!==(r=p[n])&&void 0!==r?r:x(n);let a;try{a=yield o}catch(e){if(e instanceof i)throw e;return}const c=function(e){var t;const r=(e=e.replace(/\\([^)]+\\)/,\"\")).match(/\\d+/)||e.match(/(\\W|^)([A-Za-z]{1,3})(\\W|$)/g);return null!==(t=null==r?void 0:r.join(\"\").replace(/\\W|amd/g,\"\"))&&void 0!==t?t:\"\"}(t);let d=a.filter((([,e])=>e===c));d.length||(d=a.filter((([e])=>e.includes(t))));const s=d.length;if(0===s)return;const f=t.split(/[.,()\\[\\]/\\s]/g).sort().filter(((e,t,r)=>0===t||e!==r[t-1])).join(\" \");let u,[g,,,,h]=s>1?d.map((e=>[e,l(f,e[2])])).sort((([,e],[,t])=>e-t))[0][0]:d[0],A=Number.MAX_VALUE;const{devicePixelRatio:P}=window,S=w.width*P*w.height*P;for(const e of h){const[t,r]=e,n=t*r,o=Math.abs(S-n);o<A&&(A=o,u=e)}if(!u)return;const[,,b,E]=u;return[A,b,g,E]}))})))).filter(s).sort((([e=Number.MAX_VALUE,t],[r=Number.MAX_VALUE,n])=>e===r?t-n:e-r));if(!E.length){const e=t.find((e=>A.includes(e)));return e?P(0,\"BLOCKLISTED\",e):P(1,\"FALLBACK\",`${A} (${b})`)}const[,y,C,L]=E[0];if(-1===y)return P(0,\"BLOCKLISTED\",C,y,L);const M=v?c:d;let $=0;for(let e=0;e<M.length;e++)y>=M[e]&&($=e);return P($,\"BENCHMARK\",C,y,L)}));export{f as getGPUTier};\n//# sourceMappingURL=detect-gpu.esm.js.map\n","export var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var quarterPi = pi / 4;\nexport var tau = pi * 2;\n\nexport var degrees = 180 / pi;\nexport var radians = pi / 180;\n\nexport var abs = Math.abs;\nexport var atan = Math.atan;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var ceil = Math.ceil;\nexport var exp = Math.exp;\nexport var floor = Math.floor;\nexport var hypot = Math.hypot;\nexport var log = Math.log;\nexport var pow = Math.pow;\nexport var sin = Math.sin;\nexport var sign = Math.sign || function(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; };\nexport var sqrt = Math.sqrt;\nexport var tan = Math.tan;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\n\nexport function haversin(x) {\n  return (x = sin(x / 2)) * x;\n}\n","export default function noop() {}\n","function streamGeometry(geometry, stream) {\n  if (geometry && streamGeometryType.hasOwnProperty(geometry.type)) {\n    streamGeometryType[geometry.type](geometry, stream);\n  }\n}\n\nvar streamObjectType = {\n  Feature: function(object, stream) {\n    streamGeometry(object.geometry, stream);\n  },\n  FeatureCollection: function(object, stream) {\n    var features = object.features, i = -1, n = features.length;\n    while (++i < n) streamGeometry(features[i].geometry, stream);\n  }\n};\n\nvar streamGeometryType = {\n  Sphere: function(object, stream) {\n    stream.sphere();\n  },\n  Point: function(object, stream) {\n    object = object.coordinates;\n    stream.point(object[0], object[1], object[2]);\n  },\n  MultiPoint: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) object = coordinates[i], stream.point(object[0], object[1], object[2]);\n  },\n  LineString: function(object, stream) {\n    streamLine(object.coordinates, stream, 0);\n  },\n  MultiLineString: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamLine(coordinates[i], stream, 0);\n  },\n  Polygon: function(object, stream) {\n    streamPolygon(object.coordinates, stream);\n  },\n  MultiPolygon: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamPolygon(coordinates[i], stream);\n  },\n  GeometryCollection: function(object, stream) {\n    var geometries = object.geometries, i = -1, n = geometries.length;\n    while (++i < n) streamGeometry(geometries[i], stream);\n  }\n};\n\nfunction streamLine(coordinates, stream, closed) {\n  var i = -1, n = coordinates.length - closed, coordinate;\n  stream.lineStart();\n  while (++i < n) coordinate = coordinates[i], stream.point(coordinate[0], coordinate[1], coordinate[2]);\n  stream.lineEnd();\n}\n\nfunction streamPolygon(coordinates, stream) {\n  var i = -1, n = coordinates.length;\n  stream.polygonStart();\n  while (++i < n) streamLine(coordinates[i], stream, 1);\n  stream.polygonEnd();\n}\n\nexport default function(object, stream) {\n  if (object && streamObjectType.hasOwnProperty(object.type)) {\n    streamObjectType[object.type](object, stream);\n  } else {\n    streamGeometry(object, stream);\n  }\n}\n","import {asin, atan2, cos, sin, sqrt} from \"./math.js\";\n\nexport function spherical(cartesian) {\n  return [atan2(cartesian[1], cartesian[0]), asin(cartesian[2])];\n}\n\nexport function cartesian(spherical) {\n  var lambda = spherical[0], phi = spherical[1], cosPhi = cos(phi);\n  return [cosPhi * cos(lambda), cosPhi * sin(lambda), sin(phi)];\n}\n\nexport function cartesianDot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\nexport function cartesianCross(a, b) {\n  return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]];\n}\n\n// TODO return a\nexport function cartesianAddInPlace(a, b) {\n  a[0] += b[0], a[1] += b[1], a[2] += b[2];\n}\n\nexport function cartesianScale(vector, k) {\n  return [vector[0] * k, vector[1] * k, vector[2] * k];\n}\n\n// TODO return d\nexport function cartesianNormalizeInPlace(d) {\n  var l = sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]);\n  d[0] /= l, d[1] /= l, d[2] /= l;\n}\n","export default function(a, b) {\n\n  function compose(x, y) {\n    return x = a(x, y), b(x[0], x[1]);\n  }\n\n  if (a.invert && b.invert) compose.invert = function(x, y) {\n    return x = b.invert(x, y), x && a.invert(x[0], x[1]);\n  };\n\n  return compose;\n}\n","import compose from \"./compose.js\";\nimport {abs, asin, atan2, cos, degrees, pi, radians, sin, tau} from \"./math.js\";\n\nfunction rotationIdentity(lambda, phi) {\n  if (abs(lambda) > pi) lambda -= Math.round(lambda / tau) * tau;\n  return [lambda, phi];\n}\n\nrotationIdentity.invert = rotationIdentity;\n\nexport function rotateRadians(deltaLambda, deltaPhi, deltaGamma) {\n  return (deltaLambda %= tau) ? (deltaPhi || deltaGamma ? compose(rotationLambda(deltaLambda), rotationPhiGamma(deltaPhi, deltaGamma))\n    : rotationLambda(deltaLambda))\n    : (deltaPhi || deltaGamma ? rotationPhiGamma(deltaPhi, deltaGamma)\n    : rotationIdentity);\n}\n\nfunction forwardRotationLambda(deltaLambda) {\n  return function(lambda, phi) {\n    lambda += deltaLambda;\n    if (abs(lambda) > pi) lambda -= Math.round(lambda / tau) * tau;\n    return [lambda, phi];\n  };\n}\n\nfunction rotationLambda(deltaLambda) {\n  var rotation = forwardRotationLambda(deltaLambda);\n  rotation.invert = forwardRotationLambda(-deltaLambda);\n  return rotation;\n}\n\nfunction rotationPhiGamma(deltaPhi, deltaGamma) {\n  var cosDeltaPhi = cos(deltaPhi),\n      sinDeltaPhi = sin(deltaPhi),\n      cosDeltaGamma = cos(deltaGamma),\n      sinDeltaGamma = sin(deltaGamma);\n\n  function rotation(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaPhi + x * sinDeltaPhi;\n    return [\n      atan2(y * cosDeltaGamma - k * sinDeltaGamma, x * cosDeltaPhi - z * sinDeltaPhi),\n      asin(k * cosDeltaGamma + y * sinDeltaGamma)\n    ];\n  }\n\n  rotation.invert = function(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaGamma - y * sinDeltaGamma;\n    return [\n      atan2(y * cosDeltaGamma + z * sinDeltaGamma, x * cosDeltaPhi + k * sinDeltaPhi),\n      asin(k * cosDeltaPhi - x * sinDeltaPhi)\n    ];\n  };\n\n  return rotation;\n}\n\nexport default function(rotate) {\n  rotate = rotateRadians(rotate[0] * radians, rotate[1] * radians, rotate.length > 2 ? rotate[2] * radians : 0);\n\n  function forward(coordinates) {\n    coordinates = rotate(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  }\n\n  forward.invert = function(coordinates) {\n    coordinates = rotate.invert(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  };\n\n  return forward;\n}\n","import {cartesian, cartesianNormalizeInPlace, spherical} from \"./cartesian.js\";\nimport constant from \"./constant.js\";\nimport {acos, cos, degrees, epsilon, radians, sin, tau} from \"./math.js\";\nimport {rotateRadians} from \"./rotation.js\";\n\n// Generates a circle centered at [0°, 0°], with a given radius and precision.\nexport function circleStream(stream, radius, delta, direction, t0, t1) {\n  if (!delta) return;\n  var cosRadius = cos(radius),\n      sinRadius = sin(radius),\n      step = direction * delta;\n  if (t0 == null) {\n    t0 = radius + direction * tau;\n    t1 = radius - step / 2;\n  } else {\n    t0 = circleRadius(cosRadius, t0);\n    t1 = circleRadius(cosRadius, t1);\n    if (direction > 0 ? t0 < t1 : t0 > t1) t0 += direction * tau;\n  }\n  for (var point, t = t0; direction > 0 ? t > t1 : t < t1; t -= step) {\n    point = spherical([cosRadius, -sinRadius * cos(t), -sinRadius * sin(t)]);\n    stream.point(point[0], point[1]);\n  }\n}\n\n// Returns the signed angle of a cartesian point relative to [cosRadius, 0, 0].\nfunction circleRadius(cosRadius, point) {\n  point = cartesian(point), point[0] -= cosRadius;\n  cartesianNormalizeInPlace(point);\n  var radius = acos(-point[1]);\n  return ((-point[2] < 0 ? -radius : radius) + tau - epsilon) % tau;\n}\n\nexport default function() {\n  var center = constant([0, 0]),\n      radius = constant(90),\n      precision = constant(2),\n      ring,\n      rotate,\n      stream = {point: point};\n\n  function point(x, y) {\n    ring.push(x = rotate(x, y));\n    x[0] *= degrees, x[1] *= degrees;\n  }\n\n  function circle() {\n    var c = center.apply(this, arguments),\n        r = radius.apply(this, arguments) * radians,\n        p = precision.apply(this, arguments) * radians;\n    ring = [];\n    rotate = rotateRadians(-c[0] * radians, -c[1] * radians, 0).invert;\n    circleStream(stream, r, p, 1);\n    c = {type: \"Polygon\", coordinates: [ring]};\n    ring = rotate = null;\n    return c;\n  }\n\n  circle.center = function(_) {\n    return arguments.length ? (center = typeof _ === \"function\" ? _ : constant([+_[0], +_[1]]), circle) : center;\n  };\n\n  circle.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), circle) : radius;\n  };\n\n  circle.precision = function(_) {\n    return arguments.length ? (precision = typeof _ === \"function\" ? _ : constant(+_), circle) : precision;\n  };\n\n  return circle;\n}\n","import noop from \"../noop.js\";\n\nexport default function() {\n  var lines = [],\n      line;\n  return {\n    point: function(x, y, m) {\n      line.push([x, y, m]);\n    },\n    lineStart: function() {\n      lines.push(line = []);\n    },\n    lineEnd: noop,\n    rejoin: function() {\n      if (lines.length > 1) lines.push(lines.pop().concat(lines.shift()));\n    },\n    result: function() {\n      var result = lines;\n      lines = [];\n      line = null;\n      return result;\n    }\n  };\n}\n","import {abs, epsilon} from \"./math.js\";\n\nexport default function(a, b) {\n  return abs(a[0] - b[0]) < epsilon && abs(a[1] - b[1]) < epsilon;\n}\n","import pointEqual from \"../pointEqual.js\";\nimport {epsilon} from \"../math.js\";\n\nfunction Intersection(point, points, other, entry) {\n  this.x = point;\n  this.z = points;\n  this.o = other; // another intersection\n  this.e = entry; // is an entry?\n  this.v = false; // visited\n  this.n = this.p = null; // next & previous\n}\n\n// A generalized polygon clipping algorithm: given a polygon that has been cut\n// into its visible line segments, and rejoins the segments by interpolating\n// along the clip edge.\nexport default function(segments, compareIntersection, startInside, interpolate, stream) {\n  var subject = [],\n      clip = [],\n      i,\n      n;\n\n  segments.forEach(function(segment) {\n    if ((n = segment.length - 1) <= 0) return;\n    var n, p0 = segment[0], p1 = segment[n], x;\n\n    if (pointEqual(p0, p1)) {\n      if (!p0[2] && !p1[2]) {\n        stream.lineStart();\n        for (i = 0; i < n; ++i) stream.point((p0 = segment[i])[0], p0[1]);\n        stream.lineEnd();\n        return;\n      }\n      // handle degenerate cases by moving the point\n      p1[0] += 2 * epsilon;\n    }\n\n    subject.push(x = new Intersection(p0, segment, null, true));\n    clip.push(x.o = new Intersection(p0, null, x, false));\n    subject.push(x = new Intersection(p1, segment, null, false));\n    clip.push(x.o = new Intersection(p1, null, x, true));\n  });\n\n  if (!subject.length) return;\n\n  clip.sort(compareIntersection);\n  link(subject);\n  link(clip);\n\n  for (i = 0, n = clip.length; i < n; ++i) {\n    clip[i].e = startInside = !startInside;\n  }\n\n  var start = subject[0],\n      points,\n      point;\n\n  while (1) {\n    // Find first unvisited intersection.\n    var current = start,\n        isSubject = true;\n    while (current.v) if ((current = current.n) === start) return;\n    points = current.z;\n    stream.lineStart();\n    do {\n      current.v = current.o.v = true;\n      if (current.e) {\n        if (isSubject) {\n          for (i = 0, n = points.length; i < n; ++i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.n.x, 1, stream);\n        }\n        current = current.n;\n      } else {\n        if (isSubject) {\n          points = current.p.z;\n          for (i = points.length - 1; i >= 0; --i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.p.x, -1, stream);\n        }\n        current = current.p;\n      }\n      current = current.o;\n      points = current.z;\n      isSubject = !isSubject;\n    } while (!current.v);\n    stream.lineEnd();\n  }\n}\n\nfunction link(array) {\n  if (!(n = array.length)) return;\n  var n,\n      i = 0,\n      a = array[0],\n      b;\n  while (++i < n) {\n    a.n = b = array[i];\n    b.p = a;\n    a = b;\n  }\n  a.n = b = array[0];\n  b.p = a;\n}\n","import {Adder} from \"d3-array\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace} from \"./cartesian.js\";\nimport {abs, asin, atan2, cos, epsilon, epsilon2, halfPi, pi, quarterPi, sign, sin, tau} from \"./math.js\";\n\nfunction longitude(point) {\n  return abs(point[0]) <= pi ? point[0] : sign(point[0]) * ((abs(point[0]) + pi) % tau - pi);\n}\n\nexport default function(polygon, point) {\n  var lambda = longitude(point),\n      phi = point[1],\n      sinPhi = sin(phi),\n      normal = [sin(lambda), -cos(lambda), 0],\n      angle = 0,\n      winding = 0;\n\n  var sum = new Adder();\n\n  if (sinPhi === 1) phi = halfPi + epsilon;\n  else if (sinPhi === -1) phi = -halfPi - epsilon;\n\n  for (var i = 0, n = polygon.length; i < n; ++i) {\n    if (!(m = (ring = polygon[i]).length)) continue;\n    var ring,\n        m,\n        point0 = ring[m - 1],\n        lambda0 = longitude(point0),\n        phi0 = point0[1] / 2 + quarterPi,\n        sinPhi0 = sin(phi0),\n        cosPhi0 = cos(phi0);\n\n    for (var j = 0; j < m; ++j, lambda0 = lambda1, sinPhi0 = sinPhi1, cosPhi0 = cosPhi1, point0 = point1) {\n      var point1 = ring[j],\n          lambda1 = longitude(point1),\n          phi1 = point1[1] / 2 + quarterPi,\n          sinPhi1 = sin(phi1),\n          cosPhi1 = cos(phi1),\n          delta = lambda1 - lambda0,\n          sign = delta >= 0 ? 1 : -1,\n          absDelta = sign * delta,\n          antimeridian = absDelta > pi,\n          k = sinPhi0 * sinPhi1;\n\n      sum.add(atan2(k * sign * sin(absDelta), cosPhi0 * cosPhi1 + k * cos(absDelta)));\n      angle += antimeridian ? delta + sign * tau : delta;\n\n      // Are the longitudes either side of the point’s meridian (lambda),\n      // and are the latitudes smaller than the parallel (phi)?\n      if (antimeridian ^ lambda0 >= lambda ^ lambda1 >= lambda) {\n        var arc = cartesianCross(cartesian(point0), cartesian(point1));\n        cartesianNormalizeInPlace(arc);\n        var intersection = cartesianCross(normal, arc);\n        cartesianNormalizeInPlace(intersection);\n        var phiArc = (antimeridian ^ delta >= 0 ? -1 : 1) * asin(intersection[2]);\n        if (phi > phiArc || phi === phiArc && (arc[0] || arc[1])) {\n          winding += antimeridian ^ delta >= 0 ? 1 : -1;\n        }\n      }\n    }\n  }\n\n  // First, determine whether the South pole is inside or outside:\n  //\n  // It is inside if:\n  // * the polygon winds around it in a clockwise direction.\n  // * the polygon does not (cumulatively) wind around it, but has a negative\n  //   (counter-clockwise) area.\n  //\n  // Second, count the (signed) number of times a segment crosses a lambda\n  // from the point to the South pole.  If it is zero, then the point is the\n  // same side as the South pole.\n\n  return (angle < -epsilon || angle < epsilon && sum < -epsilon2) ^ (winding & 1);\n}\n","import clipBuffer from \"./buffer.js\";\nimport clipRejoin from \"./rejoin.js\";\nimport {epsilon, halfPi} from \"../math.js\";\nimport polygonContains from \"../polygonContains.js\";\nimport {merge} from \"d3-array\";\n\nexport default function(pointVisible, clipLine, interpolate, start) {\n  return function(sink) {\n    var line = clipLine(sink),\n        ringBuffer = clipBuffer(),\n        ringSink = clipLine(ringBuffer),\n        polygonStarted = false,\n        polygon,\n        segments,\n        ring;\n\n    var clip = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() {\n        clip.point = pointRing;\n        clip.lineStart = ringStart;\n        clip.lineEnd = ringEnd;\n        segments = [];\n        polygon = [];\n      },\n      polygonEnd: function() {\n        clip.point = point;\n        clip.lineStart = lineStart;\n        clip.lineEnd = lineEnd;\n        segments = merge(segments);\n        var startInside = polygonContains(polygon, start);\n        if (segments.length) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          clipRejoin(segments, compareIntersection, startInside, interpolate, sink);\n        } else if (startInside) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          interpolate(null, null, 1, sink);\n          sink.lineEnd();\n        }\n        if (polygonStarted) sink.polygonEnd(), polygonStarted = false;\n        segments = polygon = null;\n      },\n      sphere: function() {\n        sink.polygonStart();\n        sink.lineStart();\n        interpolate(null, null, 1, sink);\n        sink.lineEnd();\n        sink.polygonEnd();\n      }\n    };\n\n    function point(lambda, phi) {\n      if (pointVisible(lambda, phi)) sink.point(lambda, phi);\n    }\n\n    function pointLine(lambda, phi) {\n      line.point(lambda, phi);\n    }\n\n    function lineStart() {\n      clip.point = pointLine;\n      line.lineStart();\n    }\n\n    function lineEnd() {\n      clip.point = point;\n      line.lineEnd();\n    }\n\n    function pointRing(lambda, phi) {\n      ring.push([lambda, phi]);\n      ringSink.point(lambda, phi);\n    }\n\n    function ringStart() {\n      ringSink.lineStart();\n      ring = [];\n    }\n\n    function ringEnd() {\n      pointRing(ring[0][0], ring[0][1]);\n      ringSink.lineEnd();\n\n      var clean = ringSink.clean(),\n          ringSegments = ringBuffer.result(),\n          i, n = ringSegments.length, m,\n          segment,\n          point;\n\n      ring.pop();\n      polygon.push(ring);\n      ring = null;\n\n      if (!n) return;\n\n      // No intersections.\n      if (clean & 1) {\n        segment = ringSegments[0];\n        if ((m = segment.length - 1) > 0) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          for (i = 0; i < m; ++i) sink.point((point = segment[i])[0], point[1]);\n          sink.lineEnd();\n        }\n        return;\n      }\n\n      // Rejoin connected segments.\n      // TODO reuse ringBuffer.rejoin()?\n      if (n > 1 && clean & 2) ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));\n\n      segments.push(ringSegments.filter(validSegment));\n    }\n\n    return clip;\n  };\n}\n\nfunction validSegment(segment) {\n  return segment.length > 1;\n}\n\n// Intersections are sorted along the clip edge. For both antimeridian cutting\n// and circle clipping, the same comparison is used.\nfunction compareIntersection(a, b) {\n  return ((a = a.x)[0] < 0 ? a[1] - halfPi - epsilon : halfPi - a[1])\n       - ((b = b.x)[0] < 0 ? b[1] - halfPi - epsilon : halfPi - b[1]);\n}\n","import clip from \"./index.js\";\nimport {abs, atan, cos, epsilon, halfPi, pi, sin} from \"../math.js\";\n\nexport default clip(\n  function() { return true; },\n  clipAntimeridianLine,\n  clipAntimeridianInterpolate,\n  [-pi, -halfPi]\n);\n\n// Takes a line and cuts into visible segments. Return values: 0 - there were\n// intersections or the line was empty; 1 - no intersections; 2 - there were\n// intersections, and the first and last segments should be rejoined.\nfunction clipAntimeridianLine(stream) {\n  var lambda0 = NaN,\n      phi0 = NaN,\n      sign0 = NaN,\n      clean; // no intersections\n\n  return {\n    lineStart: function() {\n      stream.lineStart();\n      clean = 1;\n    },\n    point: function(lambda1, phi1) {\n      var sign1 = lambda1 > 0 ? pi : -pi,\n          delta = abs(lambda1 - lambda0);\n      if (abs(delta - pi) < epsilon) { // line crosses a pole\n        stream.point(lambda0, phi0 = (phi0 + phi1) / 2 > 0 ? halfPi : -halfPi);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        stream.point(lambda1, phi0);\n        clean = 0;\n      } else if (sign0 !== sign1 && delta >= pi) { // line crosses antimeridian\n        if (abs(lambda0 - sign0) < epsilon) lambda0 -= sign0 * epsilon; // handle degeneracies\n        if (abs(lambda1 - sign1) < epsilon) lambda1 -= sign1 * epsilon;\n        phi0 = clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        clean = 0;\n      }\n      stream.point(lambda0 = lambda1, phi0 = phi1);\n      sign0 = sign1;\n    },\n    lineEnd: function() {\n      stream.lineEnd();\n      lambda0 = phi0 = NaN;\n    },\n    clean: function() {\n      return 2 - clean; // if intersections, rejoin first and last segments\n    }\n  };\n}\n\nfunction clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1) {\n  var cosPhi0,\n      cosPhi1,\n      sinLambda0Lambda1 = sin(lambda0 - lambda1);\n  return abs(sinLambda0Lambda1) > epsilon\n      ? atan((sin(phi0) * (cosPhi1 = cos(phi1)) * sin(lambda1)\n          - sin(phi1) * (cosPhi0 = cos(phi0)) * sin(lambda0))\n          / (cosPhi0 * cosPhi1 * sinLambda0Lambda1))\n      : (phi0 + phi1) / 2;\n}\n\nfunction clipAntimeridianInterpolate(from, to, direction, stream) {\n  var phi;\n  if (from == null) {\n    phi = direction * halfPi;\n    stream.point(-pi, phi);\n    stream.point(0, phi);\n    stream.point(pi, phi);\n    stream.point(pi, 0);\n    stream.point(pi, -phi);\n    stream.point(0, -phi);\n    stream.point(-pi, -phi);\n    stream.point(-pi, 0);\n    stream.point(-pi, phi);\n  } else if (abs(from[0] - to[0]) > epsilon) {\n    var lambda = from[0] < to[0] ? pi : -pi;\n    phi = direction * lambda / 2;\n    stream.point(-lambda, phi);\n    stream.point(0, phi);\n    stream.point(lambda, phi);\n  } else {\n    stream.point(to[0], to[1]);\n  }\n}\n","import {cartesian, cartesianAddInPlace, cartesianCross, cartesianDot, cartesianScale, spherical} from \"../cartesian.js\";\nimport {circleStream} from \"../circle.js\";\nimport {abs, cos, epsilon, pi, radians, sqrt} from \"../math.js\";\nimport pointEqual from \"../pointEqual.js\";\nimport clip from \"./index.js\";\n\nexport default function(radius) {\n  var cr = cos(radius),\n      delta = 2 * radians,\n      smallRadius = cr > 0,\n      notHemisphere = abs(cr) > epsilon; // TODO optimise for this common case\n\n  function interpolate(from, to, direction, stream) {\n    circleStream(stream, radius, delta, direction, from, to);\n  }\n\n  function visible(lambda, phi) {\n    return cos(lambda) * cos(phi) > cr;\n  }\n\n  // Takes a line and cuts into visible segments. Return values used for polygon\n  // clipping: 0 - there were intersections or the line was empty; 1 - no\n  // intersections 2 - there were intersections, and the first and last segments\n  // should be rejoined.\n  function clipLine(stream) {\n    var point0, // previous point\n        c0, // code for previous point\n        v0, // visibility of previous point\n        v00, // visibility of first point\n        clean; // no intersections\n    return {\n      lineStart: function() {\n        v00 = v0 = false;\n        clean = 1;\n      },\n      point: function(lambda, phi) {\n        var point1 = [lambda, phi],\n            point2,\n            v = visible(lambda, phi),\n            c = smallRadius\n              ? v ? 0 : code(lambda, phi)\n              : v ? code(lambda + (lambda < 0 ? pi : -pi), phi) : 0;\n        if (!point0 && (v00 = v0 = v)) stream.lineStart();\n        if (v !== v0) {\n          point2 = intersect(point0, point1);\n          if (!point2 || pointEqual(point0, point2) || pointEqual(point1, point2))\n            point1[2] = 1;\n        }\n        if (v !== v0) {\n          clean = 0;\n          if (v) {\n            // outside going in\n            stream.lineStart();\n            point2 = intersect(point1, point0);\n            stream.point(point2[0], point2[1]);\n          } else {\n            // inside going out\n            point2 = intersect(point0, point1);\n            stream.point(point2[0], point2[1], 2);\n            stream.lineEnd();\n          }\n          point0 = point2;\n        } else if (notHemisphere && point0 && smallRadius ^ v) {\n          var t;\n          // If the codes for two points are different, or are both zero,\n          // and there this segment intersects with the small circle.\n          if (!(c & c0) && (t = intersect(point1, point0, true))) {\n            clean = 0;\n            if (smallRadius) {\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1]);\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n            } else {\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1], 3);\n            }\n          }\n        }\n        if (v && (!point0 || !pointEqual(point0, point1))) {\n          stream.point(point1[0], point1[1]);\n        }\n        point0 = point1, v0 = v, c0 = c;\n      },\n      lineEnd: function() {\n        if (v0) stream.lineEnd();\n        point0 = null;\n      },\n      // Rejoin first and last segments if there were intersections and the first\n      // and last points were visible.\n      clean: function() {\n        return clean | ((v00 && v0) << 1);\n      }\n    };\n  }\n\n  // Intersects the great circle between a and b with the clip circle.\n  function intersect(a, b, two) {\n    var pa = cartesian(a),\n        pb = cartesian(b);\n\n    // We have two planes, n1.p = d1 and n2.p = d2.\n    // Find intersection line p(t) = c1 n1 + c2 n2 + t (n1 ⨯ n2).\n    var n1 = [1, 0, 0], // normal\n        n2 = cartesianCross(pa, pb),\n        n2n2 = cartesianDot(n2, n2),\n        n1n2 = n2[0], // cartesianDot(n1, n2),\n        determinant = n2n2 - n1n2 * n1n2;\n\n    // Two polar points.\n    if (!determinant) return !two && a;\n\n    var c1 =  cr * n2n2 / determinant,\n        c2 = -cr * n1n2 / determinant,\n        n1xn2 = cartesianCross(n1, n2),\n        A = cartesianScale(n1, c1),\n        B = cartesianScale(n2, c2);\n    cartesianAddInPlace(A, B);\n\n    // Solve |p(t)|^2 = 1.\n    var u = n1xn2,\n        w = cartesianDot(A, u),\n        uu = cartesianDot(u, u),\n        t2 = w * w - uu * (cartesianDot(A, A) - 1);\n\n    if (t2 < 0) return;\n\n    var t = sqrt(t2),\n        q = cartesianScale(u, (-w - t) / uu);\n    cartesianAddInPlace(q, A);\n    q = spherical(q);\n\n    if (!two) return q;\n\n    // Two intersection points.\n    var lambda0 = a[0],\n        lambda1 = b[0],\n        phi0 = a[1],\n        phi1 = b[1],\n        z;\n\n    if (lambda1 < lambda0) z = lambda0, lambda0 = lambda1, lambda1 = z;\n\n    var delta = lambda1 - lambda0,\n        polar = abs(delta - pi) < epsilon,\n        meridian = polar || delta < epsilon;\n\n    if (!polar && phi1 < phi0) z = phi0, phi0 = phi1, phi1 = z;\n\n    // Check that the first point is between a and b.\n    if (meridian\n        ? polar\n          ? phi0 + phi1 > 0 ^ q[1] < (abs(q[0] - lambda0) < epsilon ? phi0 : phi1)\n          : phi0 <= q[1] && q[1] <= phi1\n        : delta > pi ^ (lambda0 <= q[0] && q[0] <= lambda1)) {\n      var q1 = cartesianScale(u, (-w + t) / uu);\n      cartesianAddInPlace(q1, A);\n      return [q, spherical(q1)];\n    }\n  }\n\n  // Generates a 4-bit vector representing the location of a point relative to\n  // the small circle's bounding box.\n  function code(lambda, phi) {\n    var r = smallRadius ? radius : pi - radius,\n        code = 0;\n    if (lambda < -r) code |= 1; // left\n    else if (lambda > r) code |= 2; // right\n    if (phi < -r) code |= 4; // below\n    else if (phi > r) code |= 8; // above\n    return code;\n  }\n\n  return clip(visible, clipLine, interpolate, smallRadius ? [0, -radius] : [-pi, radius - pi]);\n}\n","export default function(a, b, x0, y0, x1, y1) {\n  var ax = a[0],\n      ay = a[1],\n      bx = b[0],\n      by = b[1],\n      t0 = 0,\n      t1 = 1,\n      dx = bx - ax,\n      dy = by - ay,\n      r;\n\n  r = x0 - ax;\n  if (!dx && r > 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dx > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = x1 - ax;\n  if (!dx && r < 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dx > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  r = y0 - ay;\n  if (!dy && r > 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dy > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = y1 - ay;\n  if (!dy && r < 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dy > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  if (t0 > 0) a[0] = ax + t0 * dx, a[1] = ay + t0 * dy;\n  if (t1 < 1) b[0] = ax + t1 * dx, b[1] = ay + t1 * dy;\n  return true;\n}\n","import {abs, epsilon} from \"../math.js\";\nimport clipBuffer from \"./buffer.js\";\nimport clipLine from \"./line.js\";\nimport clipRejoin from \"./rejoin.js\";\nimport {merge} from \"d3-array\";\n\nvar clipMax = 1e9, clipMin = -clipMax;\n\n// TODO Use d3-polygon’s polygonContains here for the ring check?\n// TODO Eliminate duplicate buffering in clipBuffer and polygon.push?\n\nexport default function clipRectangle(x0, y0, x1, y1) {\n\n  function visible(x, y) {\n    return x0 <= x && x <= x1 && y0 <= y && y <= y1;\n  }\n\n  function interpolate(from, to, direction, stream) {\n    var a = 0, a1 = 0;\n    if (from == null\n        || (a = corner(from, direction)) !== (a1 = corner(to, direction))\n        || comparePoint(from, to) < 0 ^ direction > 0) {\n      do stream.point(a === 0 || a === 3 ? x0 : x1, a > 1 ? y1 : y0);\n      while ((a = (a + direction + 4) % 4) !== a1);\n    } else {\n      stream.point(to[0], to[1]);\n    }\n  }\n\n  function corner(p, direction) {\n    return abs(p[0] - x0) < epsilon ? direction > 0 ? 0 : 3\n        : abs(p[0] - x1) < epsilon ? direction > 0 ? 2 : 1\n        : abs(p[1] - y0) < epsilon ? direction > 0 ? 1 : 0\n        : direction > 0 ? 3 : 2; // abs(p[1] - y1) < epsilon\n  }\n\n  function compareIntersection(a, b) {\n    return comparePoint(a.x, b.x);\n  }\n\n  function comparePoint(a, b) {\n    var ca = corner(a, 1),\n        cb = corner(b, 1);\n    return ca !== cb ? ca - cb\n        : ca === 0 ? b[1] - a[1]\n        : ca === 1 ? a[0] - b[0]\n        : ca === 2 ? a[1] - b[1]\n        : b[0] - a[0];\n  }\n\n  return function(stream) {\n    var activeStream = stream,\n        bufferStream = clipBuffer(),\n        segments,\n        polygon,\n        ring,\n        x__, y__, v__, // first point\n        x_, y_, v_, // previous point\n        first,\n        clean;\n\n    var clipStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: polygonStart,\n      polygonEnd: polygonEnd\n    };\n\n    function point(x, y) {\n      if (visible(x, y)) activeStream.point(x, y);\n    }\n\n    function polygonInside() {\n      var winding = 0;\n\n      for (var i = 0, n = polygon.length; i < n; ++i) {\n        for (var ring = polygon[i], j = 1, m = ring.length, point = ring[0], a0, a1, b0 = point[0], b1 = point[1]; j < m; ++j) {\n          a0 = b0, a1 = b1, point = ring[j], b0 = point[0], b1 = point[1];\n          if (a1 <= y1) { if (b1 > y1 && (b0 - a0) * (y1 - a1) > (b1 - a1) * (x0 - a0)) ++winding; }\n          else { if (b1 <= y1 && (b0 - a0) * (y1 - a1) < (b1 - a1) * (x0 - a0)) --winding; }\n        }\n      }\n\n      return winding;\n    }\n\n    // Buffer geometry within a polygon and then clip it en masse.\n    function polygonStart() {\n      activeStream = bufferStream, segments = [], polygon = [], clean = true;\n    }\n\n    function polygonEnd() {\n      var startInside = polygonInside(),\n          cleanInside = clean && startInside,\n          visible = (segments = merge(segments)).length;\n      if (cleanInside || visible) {\n        stream.polygonStart();\n        if (cleanInside) {\n          stream.lineStart();\n          interpolate(null, null, 1, stream);\n          stream.lineEnd();\n        }\n        if (visible) {\n          clipRejoin(segments, compareIntersection, startInside, interpolate, stream);\n        }\n        stream.polygonEnd();\n      }\n      activeStream = stream, segments = polygon = ring = null;\n    }\n\n    function lineStart() {\n      clipStream.point = linePoint;\n      if (polygon) polygon.push(ring = []);\n      first = true;\n      v_ = false;\n      x_ = y_ = NaN;\n    }\n\n    // TODO rather than special-case polygons, simply handle them separately.\n    // Ideally, coincident intersection points should be jittered to avoid\n    // clipping issues.\n    function lineEnd() {\n      if (segments) {\n        linePoint(x__, y__);\n        if (v__ && v_) bufferStream.rejoin();\n        segments.push(bufferStream.result());\n      }\n      clipStream.point = point;\n      if (v_) activeStream.lineEnd();\n    }\n\n    function linePoint(x, y) {\n      var v = visible(x, y);\n      if (polygon) ring.push([x, y]);\n      if (first) {\n        x__ = x, y__ = y, v__ = v;\n        first = false;\n        if (v) {\n          activeStream.lineStart();\n          activeStream.point(x, y);\n        }\n      } else {\n        if (v && v_) activeStream.point(x, y);\n        else {\n          var a = [x_ = Math.max(clipMin, Math.min(clipMax, x_)), y_ = Math.max(clipMin, Math.min(clipMax, y_))],\n              b = [x = Math.max(clipMin, Math.min(clipMax, x)), y = Math.max(clipMin, Math.min(clipMax, y))];\n          if (clipLine(a, b, x0, y0, x1, y1)) {\n            if (!v_) {\n              activeStream.lineStart();\n              activeStream.point(a[0], a[1]);\n            }\n            activeStream.point(b[0], b[1]);\n            if (!v) activeStream.lineEnd();\n            clean = false;\n          } else if (v) {\n            activeStream.lineStart();\n            activeStream.point(x, y);\n            clean = false;\n          }\n        }\n      }\n      x_ = x, y_ = y, v_ = v;\n    }\n\n    return clipStream;\n  };\n}\n","export default x => x;\n","import {Adder} from \"d3-array\";\nimport {abs} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar areaSum = new Adder(),\n    areaRingSum = new Adder(),\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    areaStream.lineStart = areaStream.lineEnd = areaStream.point = noop;\n    areaSum.add(abs(areaRingSum));\n    areaRingSum = new Adder();\n  },\n  result: function() {\n    var area = areaSum / 2;\n    areaSum = new Adder();\n    return area;\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaPointFirst(x, y) {\n  areaStream.point = areaPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction areaPoint(x, y) {\n  areaRingSum.add(y0 * x - x0 * y);\n  x0 = x, y0 = y;\n}\n\nfunction areaRingEnd() {\n  areaPoint(x00, y00);\n}\n\nexport default areaStream;\n","import noop from \"../noop.js\";\n\nvar x0 = Infinity,\n    y0 = x0,\n    x1 = -x0,\n    y1 = x1;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop,\n  result: function() {\n    var bounds = [[x0, y0], [x1, y1]];\n    x1 = y1 = -(y0 = x0 = Infinity);\n    return bounds;\n  }\n};\n\nfunction boundsPoint(x, y) {\n  if (x < x0) x0 = x;\n  if (x > x1) x1 = x;\n  if (y < y0) y0 = y;\n  if (y > y1) y1 = y;\n}\n\nexport default boundsStream;\n","import {sqrt} from \"../math.js\";\n\n// TODO Enforce positive area for exterior, negative area for interior?\n\nvar X0 = 0,\n    Y0 = 0,\n    Z0 = 0,\n    X1 = 0,\n    Y1 = 0,\n    Z1 = 0,\n    X2 = 0,\n    Y2 = 0,\n    Z2 = 0,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar centroidStream = {\n  point: centroidPoint,\n  lineStart: centroidLineStart,\n  lineEnd: centroidLineEnd,\n  polygonStart: function() {\n    centroidStream.lineStart = centroidRingStart;\n    centroidStream.lineEnd = centroidRingEnd;\n  },\n  polygonEnd: function() {\n    centroidStream.point = centroidPoint;\n    centroidStream.lineStart = centroidLineStart;\n    centroidStream.lineEnd = centroidLineEnd;\n  },\n  result: function() {\n    var centroid = Z2 ? [X2 / Z2, Y2 / Z2]\n        : Z1 ? [X1 / Z1, Y1 / Z1]\n        : Z0 ? [X0 / Z0, Y0 / Z0]\n        : [NaN, NaN];\n    X0 = Y0 = Z0 =\n    X1 = Y1 = Z1 =\n    X2 = Y2 = Z2 = 0;\n    return centroid;\n  }\n};\n\nfunction centroidPoint(x, y) {\n  X0 += x;\n  Y0 += y;\n  ++Z0;\n}\n\nfunction centroidLineStart() {\n  centroidStream.point = centroidPointFirstLine;\n}\n\nfunction centroidPointFirstLine(x, y) {\n  centroidStream.point = centroidPointLine;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidPointLine(x, y) {\n  var dx = x - x0, dy = y - y0, z = sqrt(dx * dx + dy * dy);\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidLineEnd() {\n  centroidStream.point = centroidPoint;\n}\n\nfunction centroidRingStart() {\n  centroidStream.point = centroidPointFirstRing;\n}\n\nfunction centroidRingEnd() {\n  centroidPointRing(x00, y00);\n}\n\nfunction centroidPointFirstRing(x, y) {\n  centroidStream.point = centroidPointRing;\n  centroidPoint(x00 = x0 = x, y00 = y0 = y);\n}\n\nfunction centroidPointRing(x, y) {\n  var dx = x - x0,\n      dy = y - y0,\n      z = sqrt(dx * dx + dy * dy);\n\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n\n  z = y0 * x - x0 * y;\n  X2 += z * (x0 + x);\n  Y2 += z * (y0 + y);\n  Z2 += z * 3;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nexport default centroidStream;\n","import {tau} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nexport default function PathContext(context) {\n  this._context = context;\n}\n\nPathContext.prototype = {\n  _radius: 4.5,\n  pointRadius: function(_) {\n    return this._radius = _, this;\n  },\n  polygonStart: function() {\n    this._line = 0;\n  },\n  polygonEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line === 0) this._context.closePath();\n    this._point = NaN;\n  },\n  point: function(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._context.moveTo(x, y);\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._context.lineTo(x, y);\n        break;\n      }\n      default: {\n        this._context.moveTo(x + this._radius, y);\n        this._context.arc(x, y, this._radius, 0, tau);\n        break;\n      }\n    }\n  },\n  result: noop\n};\n","import {Adder} from \"d3-array\";\nimport {sqrt} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar lengthSum = new Adder(),\n    lengthRing,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar lengthStream = {\n  point: noop,\n  lineStart: function() {\n    lengthStream.point = lengthPointFirst;\n  },\n  lineEnd: function() {\n    if (lengthRing) lengthPoint(x00, y00);\n    lengthStream.point = noop;\n  },\n  polygonStart: function() {\n    lengthRing = true;\n  },\n  polygonEnd: function() {\n    lengthRing = null;\n  },\n  result: function() {\n    var length = +lengthSum;\n    lengthSum = new Adder();\n    return length;\n  }\n};\n\nfunction lengthPointFirst(x, y) {\n  lengthStream.point = lengthPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction lengthPoint(x, y) {\n  x0 -= x, y0 -= y;\n  lengthSum.add(sqrt(x0 * x0 + y0 * y0));\n  x0 = x, y0 = y;\n}\n\nexport default lengthStream;\n","// Simple caching for constant-radius points.\nlet cacheDigits, cacheAppend, cacheRadius, cacheCircle;\n\nexport default class PathString {\n  constructor(digits) {\n    this._append = digits == null ? append : appendRound(digits);\n    this._radius = 4.5;\n    this._ = \"\";\n  }\n  pointRadius(_) {\n    this._radius = +_;\n    return this;\n  }\n  polygonStart() {\n    this._line = 0;\n  }\n  polygonEnd() {\n    this._line = NaN;\n  }\n  lineStart() {\n    this._point = 0;\n  }\n  lineEnd() {\n    if (this._line === 0) this._ += \"Z\";\n    this._point = NaN;\n  }\n  point(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._append`M${x},${y}`;\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._append`L${x},${y}`;\n        break;\n      }\n      default: {\n        this._append`M${x},${y}`;\n        if (this._radius !== cacheRadius || this._append !== cacheAppend) {\n          const r = this._radius;\n          const s = this._;\n          this._ = \"\"; // stash the old string so we can cache the circle path fragment\n          this._append`m0,${r}a${r},${r} 0 1,1 0,${-2 * r}a${r},${r} 0 1,1 0,${2 * r}z`;\n          cacheRadius = r;\n          cacheAppend = this._append;\n          cacheCircle = this._;\n          this._ = s;\n        }\n        this._ += cacheCircle;\n        break;\n      }\n    }\n  }\n  result() {\n    const result = this._;\n    this._ = \"\";\n    return result.length ? result : null;\n  }\n}\n\nfunction append(strings) {\n  let i = 1;\n  this._ += strings[0];\n  for (const j = strings.length; i < j; ++i) {\n    this._ += arguments[i] + strings[i];\n  }\n}\n\nfunction appendRound(digits) {\n  const d = Math.floor(digits);\n  if (!(d >= 0)) throw new RangeError(`invalid digits: ${digits}`);\n  if (d > 15) return append;\n  if (d !== cacheDigits) {\n    const k = 10 ** d;\n    cacheDigits = d;\n    cacheAppend = function append(strings) {\n      let i = 1;\n      this._ += strings[0];\n      for (const j = strings.length; i < j; ++i) {\n        this._ += Math.round(arguments[i] * k) / k + strings[i];\n      }\n    };\n  }\n  return cacheAppend;\n}\n","import identity from \"../identity.js\";\nimport stream from \"../stream.js\";\nimport pathArea from \"./area.js\";\nimport pathBounds from \"./bounds.js\";\nimport pathCentroid from \"./centroid.js\";\nimport PathContext from \"./context.js\";\nimport pathMeasure from \"./measure.js\";\nimport PathString from \"./string.js\";\n\nexport default function(projection, context) {\n  let digits = 3,\n      pointRadius = 4.5,\n      projectionStream,\n      contextStream;\n\n  function path(object) {\n    if (object) {\n      if (typeof pointRadius === \"function\") contextStream.pointRadius(+pointRadius.apply(this, arguments));\n      stream(object, projectionStream(contextStream));\n    }\n    return contextStream.result();\n  }\n\n  path.area = function(object) {\n    stream(object, projectionStream(pathArea));\n    return pathArea.result();\n  };\n\n  path.measure = function(object) {\n    stream(object, projectionStream(pathMeasure));\n    return pathMeasure.result();\n  };\n\n  path.bounds = function(object) {\n    stream(object, projectionStream(pathBounds));\n    return pathBounds.result();\n  };\n\n  path.centroid = function(object) {\n    stream(object, projectionStream(pathCentroid));\n    return pathCentroid.result();\n  };\n\n  path.projection = function(_) {\n    if (!arguments.length) return projection;\n    projectionStream = _ == null ? (projection = null, identity) : (projection = _).stream;\n    return path;\n  };\n\n  path.context = function(_) {\n    if (!arguments.length) return context;\n    contextStream = _ == null ? (context = null, new PathString(digits)) : new PathContext(context = _);\n    if (typeof pointRadius !== \"function\") contextStream.pointRadius(pointRadius);\n    return path;\n  };\n\n  path.pointRadius = function(_) {\n    if (!arguments.length) return pointRadius;\n    pointRadius = typeof _ === \"function\" ? _ : (contextStream.pointRadius(+_), +_);\n    return path;\n  };\n\n  path.digits = function(_) {\n    if (!arguments.length) return digits;\n    if (_ == null) digits = null;\n    else {\n      const d = Math.floor(_);\n      if (!(d >= 0)) throw new RangeError(`invalid digits: ${_}`);\n      digits = d;\n    }\n    if (context === null) contextStream = new PathString(digits);\n    return path;\n  };\n\n  return path.projection(projection).digits(digits).context(context);\n}\n","export default function(methods) {\n  return {\n    stream: transformer(methods)\n  };\n}\n\nexport function transformer(methods) {\n  return function(stream) {\n    var s = new TransformStream;\n    for (var key in methods) s[key] = methods[key];\n    s.stream = stream;\n    return s;\n  };\n}\n\nfunction TransformStream() {}\n\nTransformStream.prototype = {\n  constructor: TransformStream,\n  point: function(x, y) { this.stream.point(x, y); },\n  sphere: function() { this.stream.sphere(); },\n  lineStart: function() { this.stream.lineStart(); },\n  lineEnd: function() { this.stream.lineEnd(); },\n  polygonStart: function() { this.stream.polygonStart(); },\n  polygonEnd: function() { this.stream.polygonEnd(); }\n};\n","import {default as geoStream} from \"../stream.js\";\nimport boundsStream from \"../path/bounds.js\";\n\nfunction fit(projection, fitBounds, object) {\n  var clip = projection.clipExtent && projection.clipExtent();\n  projection.scale(150).translate([0, 0]);\n  if (clip != null) projection.clipExtent(null);\n  geoStream(object, projection.stream(boundsStream));\n  fitBounds(boundsStream.result());\n  if (clip != null) projection.clipExtent(clip);\n  return projection;\n}\n\nexport function fitExtent(projection, extent, object) {\n  return fit(projection, function(b) {\n    var w = extent[1][0] - extent[0][0],\n        h = extent[1][1] - extent[0][1],\n        k = Math.min(w / (b[1][0] - b[0][0]), h / (b[1][1] - b[0][1])),\n        x = +extent[0][0] + (w - k * (b[1][0] + b[0][0])) / 2,\n        y = +extent[0][1] + (h - k * (b[1][1] + b[0][1])) / 2;\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n\nexport function fitSize(projection, size, object) {\n  return fitExtent(projection, [[0, 0], size], object);\n}\n\nexport function fitWidth(projection, width, object) {\n  return fit(projection, function(b) {\n    var w = +width,\n        k = w / (b[1][0] - b[0][0]),\n        x = (w - k * (b[1][0] + b[0][0])) / 2,\n        y = -k * b[0][1];\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n\nexport function fitHeight(projection, height, object) {\n  return fit(projection, function(b) {\n    var h = +height,\n        k = h / (b[1][1] - b[0][1]),\n        x = -k * b[0][0],\n        y = (h - k * (b[1][1] + b[0][1])) / 2;\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n","import {cartesian} from \"../cartesian.js\";\nimport {abs, asin, atan2, cos, epsilon, radians, sqrt} from \"../math.js\";\nimport {transformer} from \"../transform.js\";\n\nvar maxDepth = 16, // maximum depth of subdivision\n    cosMinDistance = cos(30 * radians); // cos(minimum angular distance)\n\nexport default function(project, delta2) {\n  return +delta2 ? resample(project, delta2) : resampleNone(project);\n}\n\nfunction resampleNone(project) {\n  return transformer({\n    point: function(x, y) {\n      x = project(x, y);\n      this.stream.point(x[0], x[1]);\n    }\n  });\n}\n\nfunction resample(project, delta2) {\n\n  function resampleLineTo(x0, y0, lambda0, a0, b0, c0, x1, y1, lambda1, a1, b1, c1, depth, stream) {\n    var dx = x1 - x0,\n        dy = y1 - y0,\n        d2 = dx * dx + dy * dy;\n    if (d2 > 4 * delta2 && depth--) {\n      var a = a0 + a1,\n          b = b0 + b1,\n          c = c0 + c1,\n          m = sqrt(a * a + b * b + c * c),\n          phi2 = asin(c /= m),\n          lambda2 = abs(abs(c) - 1) < epsilon || abs(lambda0 - lambda1) < epsilon ? (lambda0 + lambda1) / 2 : atan2(b, a),\n          p = project(lambda2, phi2),\n          x2 = p[0],\n          y2 = p[1],\n          dx2 = x2 - x0,\n          dy2 = y2 - y0,\n          dz = dy * dx2 - dx * dy2;\n      if (dz * dz / d2 > delta2 // perpendicular projected distance\n          || abs((dx * dx2 + dy * dy2) / d2 - 0.5) > 0.3 // midpoint close to an end\n          || a0 * a1 + b0 * b1 + c0 * c1 < cosMinDistance) { // angular distance\n        resampleLineTo(x0, y0, lambda0, a0, b0, c0, x2, y2, lambda2, a /= m, b /= m, c, depth, stream);\n        stream.point(x2, y2);\n        resampleLineTo(x2, y2, lambda2, a, b, c, x1, y1, lambda1, a1, b1, c1, depth, stream);\n      }\n    }\n  }\n  return function(stream) {\n    var lambda00, x00, y00, a00, b00, c00, // first point\n        lambda0, x0, y0, a0, b0, c0; // previous point\n\n    var resampleStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() { stream.polygonStart(); resampleStream.lineStart = ringStart; },\n      polygonEnd: function() { stream.polygonEnd(); resampleStream.lineStart = lineStart; }\n    };\n\n    function point(x, y) {\n      x = project(x, y);\n      stream.point(x[0], x[1]);\n    }\n\n    function lineStart() {\n      x0 = NaN;\n      resampleStream.point = linePoint;\n      stream.lineStart();\n    }\n\n    function linePoint(lambda, phi) {\n      var c = cartesian([lambda, phi]), p = project(lambda, phi);\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x0 = p[0], y0 = p[1], lambda0 = lambda, a0 = c[0], b0 = c[1], c0 = c[2], maxDepth, stream);\n      stream.point(x0, y0);\n    }\n\n    function lineEnd() {\n      resampleStream.point = point;\n      stream.lineEnd();\n    }\n\n    function ringStart() {\n      lineStart();\n      resampleStream.point = ringPoint;\n      resampleStream.lineEnd = ringEnd;\n    }\n\n    function ringPoint(lambda, phi) {\n      linePoint(lambda00 = lambda, phi), x00 = x0, y00 = y0, a00 = a0, b00 = b0, c00 = c0;\n      resampleStream.point = linePoint;\n    }\n\n    function ringEnd() {\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x00, y00, lambda00, a00, b00, c00, maxDepth, stream);\n      resampleStream.lineEnd = lineEnd;\n      lineEnd();\n    }\n\n    return resampleStream;\n  };\n}\n","import clipAntimeridian from \"../clip/antimeridian.js\";\nimport clipCircle from \"../clip/circle.js\";\nimport clipRectangle from \"../clip/rectangle.js\";\nimport compose from \"../compose.js\";\nimport identity from \"../identity.js\";\nimport {cos, degrees, radians, sin, sqrt} from \"../math.js\";\nimport {rotateRadians} from \"../rotation.js\";\nimport {transformer} from \"../transform.js\";\nimport {fitExtent, fitSize, fitWidth, fitHeight} from \"./fit.js\";\nimport resample from \"./resample.js\";\n\nvar transformRadians = transformer({\n  point: function(x, y) {\n    this.stream.point(x * radians, y * radians);\n  }\n});\n\nfunction transformRotate(rotate) {\n  return transformer({\n    point: function(x, y) {\n      var r = rotate(x, y);\n      return this.stream.point(r[0], r[1]);\n    }\n  });\n}\n\nfunction scaleTranslate(k, dx, dy, sx, sy) {\n  function transform(x, y) {\n    x *= sx; y *= sy;\n    return [dx + k * x, dy - k * y];\n  }\n  transform.invert = function(x, y) {\n    return [(x - dx) / k * sx, (dy - y) / k * sy];\n  };\n  return transform;\n}\n\nfunction scaleTranslateRotate(k, dx, dy, sx, sy, alpha) {\n  if (!alpha) return scaleTranslate(k, dx, dy, sx, sy);\n  var cosAlpha = cos(alpha),\n      sinAlpha = sin(alpha),\n      a = cosAlpha * k,\n      b = sinAlpha * k,\n      ai = cosAlpha / k,\n      bi = sinAlpha / k,\n      ci = (sinAlpha * dy - cosAlpha * dx) / k,\n      fi = (sinAlpha * dx + cosAlpha * dy) / k;\n  function transform(x, y) {\n    x *= sx; y *= sy;\n    return [a * x - b * y + dx, dy - b * x - a * y];\n  }\n  transform.invert = function(x, y) {\n    return [sx * (ai * x - bi * y + ci), sy * (fi - bi * x - ai * y)];\n  };\n  return transform;\n}\n\nexport default function projection(project) {\n  return projectionMutator(function() { return project; })();\n}\n\nexport function projectionMutator(projectAt) {\n  var project,\n      k = 150, // scale\n      x = 480, y = 250, // translate\n      lambda = 0, phi = 0, // center\n      deltaLambda = 0, deltaPhi = 0, deltaGamma = 0, rotate, // pre-rotate\n      alpha = 0, // post-rotate angle\n      sx = 1, // reflectX\n      sy = 1, // reflectX\n      theta = null, preclip = clipAntimeridian, // pre-clip angle\n      x0 = null, y0, x1, y1, postclip = identity, // post-clip extent\n      delta2 = 0.5, // precision\n      projectResample,\n      projectTransform,\n      projectRotateTransform,\n      cache,\n      cacheStream;\n\n  function projection(point) {\n    return projectRotateTransform(point[0] * radians, point[1] * radians);\n  }\n\n  function invert(point) {\n    point = projectRotateTransform.invert(point[0], point[1]);\n    return point && [point[0] * degrees, point[1] * degrees];\n  }\n\n  projection.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = transformRadians(transformRotate(rotate)(preclip(projectResample(postclip(cacheStream = stream)))));\n  };\n\n  projection.preclip = function(_) {\n    return arguments.length ? (preclip = _, theta = undefined, reset()) : preclip;\n  };\n\n  projection.postclip = function(_) {\n    return arguments.length ? (postclip = _, x0 = y0 = x1 = y1 = null, reset()) : postclip;\n  };\n\n  projection.clipAngle = function(_) {\n    return arguments.length ? (preclip = +_ ? clipCircle(theta = _ * radians) : (theta = null, clipAntimeridian), reset()) : theta * degrees;\n  };\n\n  projection.clipExtent = function(_) {\n    return arguments.length ? (postclip = _ == null ? (x0 = y0 = x1 = y1 = null, identity) : clipRectangle(x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]), reset()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  projection.scale = function(_) {\n    return arguments.length ? (k = +_, recenter()) : k;\n  };\n\n  projection.translate = function(_) {\n    return arguments.length ? (x = +_[0], y = +_[1], recenter()) : [x, y];\n  };\n\n  projection.center = function(_) {\n    return arguments.length ? (lambda = _[0] % 360 * radians, phi = _[1] % 360 * radians, recenter()) : [lambda * degrees, phi * degrees];\n  };\n\n  projection.rotate = function(_) {\n    return arguments.length ? (deltaLambda = _[0] % 360 * radians, deltaPhi = _[1] % 360 * radians, deltaGamma = _.length > 2 ? _[2] % 360 * radians : 0, recenter()) : [deltaLambda * degrees, deltaPhi * degrees, deltaGamma * degrees];\n  };\n\n  projection.angle = function(_) {\n    return arguments.length ? (alpha = _ % 360 * radians, recenter()) : alpha * degrees;\n  };\n\n  projection.reflectX = function(_) {\n    return arguments.length ? (sx = _ ? -1 : 1, recenter()) : sx < 0;\n  };\n\n  projection.reflectY = function(_) {\n    return arguments.length ? (sy = _ ? -1 : 1, recenter()) : sy < 0;\n  };\n\n  projection.precision = function(_) {\n    return arguments.length ? (projectResample = resample(projectTransform, delta2 = _ * _), reset()) : sqrt(delta2);\n  };\n\n  projection.fitExtent = function(extent, object) {\n    return fitExtent(projection, extent, object);\n  };\n\n  projection.fitSize = function(size, object) {\n    return fitSize(projection, size, object);\n  };\n\n  projection.fitWidth = function(width, object) {\n    return fitWidth(projection, width, object);\n  };\n\n  projection.fitHeight = function(height, object) {\n    return fitHeight(projection, height, object);\n  };\n\n  function recenter() {\n    var center = scaleTranslateRotate(k, 0, 0, sx, sy, alpha).apply(null, project(lambda, phi)),\n        transform = scaleTranslateRotate(k, x - center[0], y - center[1], sx, sy, alpha);\n    rotate = rotateRadians(deltaLambda, deltaPhi, deltaGamma);\n    projectTransform = compose(project, transform);\n    projectRotateTransform = compose(rotate, projectTransform);\n    projectResample = resample(projectTransform, delta2);\n    return reset();\n  }\n\n  function reset() {\n    cache = cacheStream = null;\n    return projection;\n  }\n\n  return function() {\n    project = projectAt.apply(this, arguments);\n    projection.invert = project.invert && invert;\n    return recenter();\n  };\n}\n","import projection from \"./index.js\";\nimport {abs, epsilon} from \"../math.js\";\n\nexport function naturalEarth1Raw(lambda, phi) {\n  var phi2 = phi * phi, phi4 = phi2 * phi2;\n  return [\n    lambda * (0.8707 - 0.131979 * phi2 + phi4 * (-0.013791 + phi4 * (0.003971 * phi2 - 0.001529 * phi4))),\n    phi * (1.007226 + phi2 * (0.015085 + phi4 * (-0.044475 + 0.028874 * phi2 - 0.005916 * phi4)))\n  ];\n}\n\nnaturalEarth1Raw.invert = function(x, y) {\n  var phi = y, i = 25, delta;\n  do {\n    var phi2 = phi * phi, phi4 = phi2 * phi2;\n    phi -= delta = (phi * (1.007226 + phi2 * (0.015085 + phi4 * (-0.044475 + 0.028874 * phi2 - 0.005916 * phi4))) - y) /\n        (1.007226 + phi2 * (0.015085 * 3 + phi4 * (-0.044475 * 7 + 0.028874 * 9 * phi2 - 0.005916 * 11 * phi4)));\n  } while (abs(delta) > epsilon && --i > 0);\n  return [\n    x / (0.8707 + (phi2 = phi * phi) * (-0.131979 + phi2 * (-0.013791 + phi2 * phi2 * phi2 * (0.003971 - 0.001529 * phi2)))),\n    phi\n  ];\n};\n\nexport default function() {\n  return projection(naturalEarth1Raw)\n      .scale(175.295);\n}\n","export default function(x) {\n  return x;\n}\n","import identity from \"./identity.js\";\n\nvar top = 1,\n    right = 2,\n    bottom = 3,\n    left = 4,\n    epsilon = 1e-6;\n\nfunction translateX(x) {\n  return \"translate(\" + x + \",0)\";\n}\n\nfunction translateY(y) {\n  return \"translate(0,\" + y + \")\";\n}\n\nfunction number(scale) {\n  return d => +scale(d);\n}\n\nfunction center(scale, offset) {\n  offset = Math.max(0, scale.bandwidth() - offset * 2) / 2;\n  if (scale.round()) offset = Math.round(offset);\n  return d => +scale(d) + offset;\n}\n\nfunction entering() {\n  return !this.__axis;\n}\n\nfunction axis(orient, scale) {\n  var tickArguments = [],\n      tickValues = null,\n      tickFormat = null,\n      tickSizeInner = 6,\n      tickSizeOuter = 6,\n      tickPadding = 3,\n      offset = typeof window !== \"undefined\" && window.devicePixelRatio > 1 ? 0 : 0.5,\n      k = orient === top || orient === left ? -1 : 1,\n      x = orient === left || orient === right ? \"x\" : \"y\",\n      transform = orient === top || orient === bottom ? translateX : translateY;\n\n  function axis(context) {\n    var values = tickValues == null ? (scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain()) : tickValues,\n        format = tickFormat == null ? (scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity) : tickFormat,\n        spacing = Math.max(tickSizeInner, 0) + tickPadding,\n        range = scale.range(),\n        range0 = +range[0] + offset,\n        range1 = +range[range.length - 1] + offset,\n        position = (scale.bandwidth ? center : number)(scale.copy(), offset),\n        selection = context.selection ? context.selection() : context,\n        path = selection.selectAll(\".domain\").data([null]),\n        tick = selection.selectAll(\".tick\").data(values, scale).order(),\n        tickExit = tick.exit(),\n        tickEnter = tick.enter().append(\"g\").attr(\"class\", \"tick\"),\n        line = tick.select(\"line\"),\n        text = tick.select(\"text\");\n\n    path = path.merge(path.enter().insert(\"path\", \".tick\")\n        .attr(\"class\", \"domain\")\n        .attr(\"stroke\", \"currentColor\"));\n\n    tick = tick.merge(tickEnter);\n\n    line = line.merge(tickEnter.append(\"line\")\n        .attr(\"stroke\", \"currentColor\")\n        .attr(x + \"2\", k * tickSizeInner));\n\n    text = text.merge(tickEnter.append(\"text\")\n        .attr(\"fill\", \"currentColor\")\n        .attr(x, k * spacing)\n        .attr(\"dy\", orient === top ? \"0em\" : orient === bottom ? \"0.71em\" : \"0.32em\"));\n\n    if (context !== selection) {\n      path = path.transition(context);\n      tick = tick.transition(context);\n      line = line.transition(context);\n      text = text.transition(context);\n\n      tickExit = tickExit.transition(context)\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { return isFinite(d = position(d)) ? transform(d + offset) : this.getAttribute(\"transform\"); });\n\n      tickEnter\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { var p = this.parentNode.__axis; return transform((p && isFinite(p = p(d)) ? p : position(d)) + offset); });\n    }\n\n    tickExit.remove();\n\n    path\n        .attr(\"d\", orient === left || orient === right\n            ? (tickSizeOuter ? \"M\" + k * tickSizeOuter + \",\" + range0 + \"H\" + offset + \"V\" + range1 + \"H\" + k * tickSizeOuter : \"M\" + offset + \",\" + range0 + \"V\" + range1)\n            : (tickSizeOuter ? \"M\" + range0 + \",\" + k * tickSizeOuter + \"V\" + offset + \"H\" + range1 + \"V\" + k * tickSizeOuter : \"M\" + range0 + \",\" + offset + \"H\" + range1));\n\n    tick\n        .attr(\"opacity\", 1)\n        .attr(\"transform\", function(d) { return transform(position(d) + offset); });\n\n    line\n        .attr(x + \"2\", k * tickSizeInner);\n\n    text\n        .attr(x, k * spacing)\n        .text(format);\n\n    selection.filter(entering)\n        .attr(\"fill\", \"none\")\n        .attr(\"font-size\", 10)\n        .attr(\"font-family\", \"sans-serif\")\n        .attr(\"text-anchor\", orient === right ? \"start\" : orient === left ? \"end\" : \"middle\");\n\n    selection\n        .each(function() { this.__axis = position; });\n  }\n\n  axis.scale = function(_) {\n    return arguments.length ? (scale = _, axis) : scale;\n  };\n\n  axis.ticks = function() {\n    return tickArguments = Array.from(arguments), axis;\n  };\n\n  axis.tickArguments = function(_) {\n    return arguments.length ? (tickArguments = _ == null ? [] : Array.from(_), axis) : tickArguments.slice();\n  };\n\n  axis.tickValues = function(_) {\n    return arguments.length ? (tickValues = _ == null ? null : Array.from(_), axis) : tickValues && tickValues.slice();\n  };\n\n  axis.tickFormat = function(_) {\n    return arguments.length ? (tickFormat = _, axis) : tickFormat;\n  };\n\n  axis.tickSize = function(_) {\n    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeInner = function(_) {\n    return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeOuter = function(_) {\n    return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;\n  };\n\n  axis.tickPadding = function(_) {\n    return arguments.length ? (tickPadding = +_, axis) : tickPadding;\n  };\n\n  axis.offset = function(_) {\n    return arguments.length ? (offset = +_, axis) : offset;\n  };\n\n  return axis;\n}\n\nexport function axisTop(scale) {\n  return axis(top, scale);\n}\n\nexport function axisRight(scale) {\n  return axis(right, scale);\n}\n\nexport function axisBottom(scale) {\n  return axis(bottom, scale);\n}\n\nexport function axisLeft(scale) {\n  return axis(left, scale);\n}\n","var EOL = {},\n    EOF = {},\n    QUOTE = 34,\n    NEWLINE = 10,\n    RETURN = 13;\n\nfunction objectConverter(columns) {\n  return new Function(\"d\", \"return {\" + columns.map(function(name, i) {\n    return JSON.stringify(name) + \": d[\" + i + \"] || \\\"\\\"\";\n  }).join(\",\") + \"}\");\n}\n\nfunction customConverter(columns, f) {\n  var object = objectConverter(columns);\n  return function(row, i) {\n    return f(object(row), i, columns);\n  };\n}\n\n// Compute unique columns in order of discovery.\nfunction inferColumns(rows) {\n  var columnSet = Object.create(null),\n      columns = [];\n\n  rows.forEach(function(row) {\n    for (var column in row) {\n      if (!(column in columnSet)) {\n        columns.push(columnSet[column] = column);\n      }\n    }\n  });\n\n  return columns;\n}\n\nfunction pad(value, width) {\n  var s = value + \"\", length = s.length;\n  return length < width ? new Array(width - length + 1).join(0) + s : s;\n}\n\nfunction formatYear(year) {\n  return year < 0 ? \"-\" + pad(-year, 6)\n    : year > 9999 ? \"+\" + pad(year, 6)\n    : pad(year, 4);\n}\n\nfunction formatDate(date) {\n  var hours = date.getUTCHours(),\n      minutes = date.getUTCMinutes(),\n      seconds = date.getUTCSeconds(),\n      milliseconds = date.getUTCMilliseconds();\n  return isNaN(date) ? \"Invalid Date\"\n      : formatYear(date.getUTCFullYear(), 4) + \"-\" + pad(date.getUTCMonth() + 1, 2) + \"-\" + pad(date.getUTCDate(), 2)\n      + (milliseconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \".\" + pad(milliseconds, 3) + \"Z\"\n      : seconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \"Z\"\n      : minutes || hours ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \"Z\"\n      : \"\");\n}\n\nexport default function(delimiter) {\n  var reFormat = new RegExp(\"[\\\"\" + delimiter + \"\\n\\r]\"),\n      DELIMITER = delimiter.charCodeAt(0);\n\n  function parse(text, f) {\n    var convert, columns, rows = parseRows(text, function(row, i) {\n      if (convert) return convert(row, i - 1);\n      columns = row, convert = f ? customConverter(row, f) : objectConverter(row);\n    });\n    rows.columns = columns || [];\n    return rows;\n  }\n\n  function parseRows(text, f) {\n    var rows = [], // output rows\n        N = text.length,\n        I = 0, // current character index\n        n = 0, // current line number\n        t, // current token\n        eof = N <= 0, // current token followed by EOF?\n        eol = false; // current token followed by EOL?\n\n    // Strip the trailing newline.\n    if (text.charCodeAt(N - 1) === NEWLINE) --N;\n    if (text.charCodeAt(N - 1) === RETURN) --N;\n\n    function token() {\n      if (eof) return EOF;\n      if (eol) return eol = false, EOL;\n\n      // Unescape quotes.\n      var i, j = I, c;\n      if (text.charCodeAt(j) === QUOTE) {\n        while (I++ < N && text.charCodeAt(I) !== QUOTE || text.charCodeAt(++I) === QUOTE);\n        if ((i = I) >= N) eof = true;\n        else if ((c = text.charCodeAt(I++)) === NEWLINE) eol = true;\n        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }\n        return text.slice(j + 1, i - 1).replace(/\"\"/g, \"\\\"\");\n      }\n\n      // Find next delimiter or newline.\n      while (I < N) {\n        if ((c = text.charCodeAt(i = I++)) === NEWLINE) eol = true;\n        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }\n        else if (c !== DELIMITER) continue;\n        return text.slice(j, i);\n      }\n\n      // Return last token before EOF.\n      return eof = true, text.slice(j, N);\n    }\n\n    while ((t = token()) !== EOF) {\n      var row = [];\n      while (t !== EOL && t !== EOF) row.push(t), t = token();\n      if (f && (row = f(row, n++)) == null) continue;\n      rows.push(row);\n    }\n\n    return rows;\n  }\n\n  function preformatBody(rows, columns) {\n    return rows.map(function(row) {\n      return columns.map(function(column) {\n        return formatValue(row[column]);\n      }).join(delimiter);\n    });\n  }\n\n  function format(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return [columns.map(formatValue).join(delimiter)].concat(preformatBody(rows, columns)).join(\"\\n\");\n  }\n\n  function formatBody(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return preformatBody(rows, columns).join(\"\\n\");\n  }\n\n  function formatRows(rows) {\n    return rows.map(formatRow).join(\"\\n\");\n  }\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(value) {\n    return value == null ? \"\"\n        : value instanceof Date ? formatDate(value)\n        : reFormat.test(value += \"\") ? \"\\\"\" + value.replace(/\"/g, \"\\\"\\\"\") + \"\\\"\"\n        : value;\n  }\n\n  return {\n    parse: parse,\n    parseRows: parseRows,\n    format: format,\n    formatBody: formatBody,\n    formatRows: formatRows,\n    formatRow: formatRow,\n    formatValue: formatValue\n  };\n}\n","import * as d3 from \"d3\";\n\nlet schemeCategory18 = [\n    \"#1f77b4\",\n    \"#ff7f0e\",\n    \"#2ca02c\",\n    \"#d62728\",\n    \"#9467bd\",\n    \"#8c564b\",\n    \"#e377c2\",\n    \"#bcbd22\",\n    \"#17becf\",\n    \"#aec7e8\",\n    \"#ffbb78\",\n    \"#98df8a\",\n    \"#ff9896\",\n    \"#c5b0d5\",\n    \"#c49c94\",\n    \"#f7b6d2\",\n    \"#dbdb8d\",\n    \"#9edae5\"\n];\n\n\n\nlet schemeCells = [\n    \"#549E3E\",//Fibroblast\n    \"#F3C27B\",//Endothelial cell (vascular)\n    \"#EF8632\",//Myocyte (sk. muscle)\n    \"#AECDE1\",//Epithelial cell (luminal)\n    \"#549E3E\",//Myocyte (smooth muscle)\n    \"#AECDE1\",//Epithelial cell (basal)\n    \"#AECDE1\",//Epithelial cell (alveolar type II)\n    \"#3B76AF\",//Immune (DC/macrophage)\n    \"#AECDE1\",//Epithelial cell (alveolar type I)\n    \"#EF8632\",//Myocyte (cardiac)\n    \"#3B76AF\",//Immune (alveolar macrophage)\n    \"#549E3E\",//Pericyte/SMC\n    \"#F3C27B\",//Endothelial cell (lymphatic)\n    \"#AECDE1\",//Epithelial cell (club)\n    \"#3B76AF\",//Immune (T cell)\n    \"#AECDE1\",//Epithelial cell (squamous)\n    \"#EF8632\",//Myocyte (cardiac, cytoplasmic)\n    \"#AECDE1\",//Epithelial cell (suprabasal)\n];\n\nlet schemeCellsNew = [\n  \"#549E3E\", // Fibroblast (base green)\n  \"#F3C27B\", // Endothelial cell (vascular, base orange-beige)\n  \"#EF8632\", // Myocyte (sk. muscle, base orange)\n  \"#AECDE1\", // Epithelial cell (luminal, base light blue)\n  \"#4A8F38\", // Myocyte (smooth muscle, darker green variant)\n  \"#96C1DC\", // Epithelial cell (basal, medium blue variant)\n  \"#C3E2EF\", // Epithelial cell (alveolar type II, lightest blue variant)\n  \"#3B76AF\", // Immune (DC/macrophage, base medium blue)\n  \"#7CAECD\", // Epithelial cell (alveolar type I, steel blue variant)\n  \"#E6731D\", // Myocyte (cardiac, darker/richer orange variant)\n  \"#2E5E93\", // Immune (alveolar macrophage, darker navy variant)\n  \"#67B84F\", // Pericyte/SMC, brighter green variant\n  \"#DFA64F\", // Endothelial cell (lymphatic, darker beige-gold)\n  \"#82B4CF\", // Epithelial cell (club, muted teal-blue)\n  \"#4C85C4\", // Immune (T cell, stronger blue variant)\n  \"#5E9CBF\", // Epithelial cell (squamous, medium aqua variant)\n  \"#C95E15\", // Myocyte (cardiac, cytoplasmic, burnt orange variant)\n  \"#73A7BA\", // Epithelial cell (suprabasal, gray-blue variant)\n];\n\n\n\n\nlet schemeRugzo4 = [\n    '#ff800e',\n    '#006ba4',\n    '#FFC0CB',\n    '#8B0000',\n    \"#D3D3D3\"\n]\n\n\n\nimport {default as cmasherColorsJSONData} from './cmasherColorsData.json';\nimport {default as CETColorsData} from './CETColorsData.json';\n\nlet newColors = {}\nfunction processColors(colorsData) {\n    let processedColors = {};\n    for(let name of Object.keys(colorsData)) {\n        //capitalize first letter and add interpolate to name start\n        let newName = name.charAt(0).toUpperCase() + name.slice(1);\n        newName = \"interpolate\" + newName;\n        let textData = colorsData[name];\n        let process = (d) => d3.dsvFormat(\" \").parseRows(d, d => d3.rgb(d[0], d[1], d[2]));\n        let process2 = ((l) => (t) => l[Math.floor(t * (l.length - 1e-7))]);\n        let color = process2(process(textData));\n        processedColors[newName] = color;\n    }\n    return processedColors;\n}\n\nObject.assign(newColors, processColors(cmasherColorsJSONData));\nObject.assign(newColors, processColors(CETColorsData));\n\n// for each colormap also create the reverse\nfor (let name of Object.keys(newColors)) {\n    // only if interpolate type\n    if (!name.startsWith(\"interpolate\")) continue;\n    let color = newColors[name];\n    // append (r) to name\n    let reverseName = name + \"(r)\";\n    newColors[reverseName] = (t) => color(1 - t);\n}\n\n// let names = \"amber amethyst apple arctic bubblegum chroma copper cosmic dusk eclipse ember emerald emergency fall flamingo freeze fusion gem ghostlight gothic guppy holly horizon iceburn infinity jungle lavender lilac neon neutral nuclear ocean pepper pride prinsenvlag rainforest redshift sapphire savanna seasons seaweed sepia sunburst swamp torch toxic tree tropical viola voltage waterlily watermelon wildfire\".split(\n//     / /\n//   )\n\n// cmasherColorsData = {}\n\n// for(let name of names) {\n//     //capitalize first letter and add interpolate to name start\n//     let newName = name.charAt(0).toUpperCase() + name.slice(1)\n//     newName = \"interpolate\" + newName\n//     cmasherColorsData[newName] = await d3.text(\n//         `https://raw.githubusercontent.com/1313e/CMasher/master/cmasher/colormaps/${name}/${name}_8bit.txt`\n//       )\n// }\n// // Using nodejs save cmasherColorsData to file \"cmasherColorsData.js\"\n// const fs = require('fs');\n// fs.writeFile(\"cmasherColorsData.js\", JSON.stringify(cmasherColorsData), function(err) {\n//     if(err) {\n//         return console.log(err);\n//     }\n//     console.log(\"The file was saved!\");\n// });\n\n\nlet schemeOrangeGrayBlue3 = [\n    // Three matching and beautiful colors based on Blue, Gray and Red\n    // \n    \"#ff7f0e\",\n    \"#888888\",\n    \"#1f77b4\",\n];\n\n// lut = (name) =>d3.text(\n//       `https://raw.githubusercontent.com/1313e/CMasher/master/cmasher/colormaps/${name}/${name}_8bit.txt`\n//     ).then(d => d3.dsvFormat(\" \").parseRows(d, d => d3.rgb(d[0], d[1], d[2]))).then((l) => (t) => l[Math.floor(t * (l.length - 1e-7))])\nObject.assign(newColors, {\n    schemeCategory18,\n    schemeOrangeGrayBlue3,\n    schemeRugzo4,\n    schemeCells,\n    schemeCellsNew,\n    // lut,\n    // names\n})\nexport default newColors;\n","/*\n    JavaScript autoComplete v1.0.4\n    Copyright (c) 2014 Simon Steinberger / Pixabay\n    GitHub: https://github.com/Pixabay/JavaScript-autoComplete\n    License: http://www.opensource.org/licenses/mit-license.php\n*/\n\nvar autoComplete = (function(){\n    // \"use strict\";\n    function autoComplete(options){\n        if (!document.querySelector) return;\n\n        // helpers\n        function hasClass(el, className){ return el.classList ? el.classList.contains(className) : new RegExp('\\\\b'+ className+'\\\\b').test(el.className); }\n\n        function addEvent(el, type, handler){\n            if (el.attachEvent) el.attachEvent('on'+type, handler); else el.addEventListener(type, handler);\n        }\n        function removeEvent(el, type, handler){\n            // if (el.removeEventListener) not working in IE11\n            if (el.detachEvent) el.detachEvent('on'+type, handler); else el.removeEventListener(type, handler);\n        }\n        function live(elClass, event, cb, context){\n            addEvent(context || document, event, function(e){\n                var found, el = e.target || e.srcElement;\n                while (el && !(found = hasClass(el, elClass))) el = el.parentElement;\n                if (found) cb.call(el, e);\n            });\n        }\n\n        var o = {\n            selector: 0,\n            source: 0,\n            minChars: 3,\n            delay: 150,\n            offsetLeft: 0,\n            offsetTop: 1,\n            cache: 1,\n            menuClass: '',\n            renderItem: function (item, search){\n                // escape special characters\n                search = search.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n                var re = new RegExp(\"(\" + search.split(' ').join('|') + \")\", \"gi\");\n                return '<div class=\"autocomplete-suggestion\" data-val=\"' + item + '\">' + item.replace(re, \"<b>$1</b>\") + '</div>';\n            },\n            onSelect: function(e, term, item){}\n        };\n        for (var k in options) { if (options.hasOwnProperty(k)) o[k] = options[k]; }\n\n        // init\n        var elems = typeof o.selector == 'object' ? [o.selector] : document.querySelectorAll(o.selector);\n        for (var i=0; i<elems.length; i++) {\n            var that = elems[i];\n\n            // create suggestions container \"sc\"\n            that.sc = document.createElement('div');\n            that.sc.className = 'autocomplete-suggestions '+o.menuClass;\n\n            that.autocompleteAttr = that.getAttribute('autocomplete');\n            that.setAttribute('autocomplete', 'off');\n            that.cache = {};\n            that.last_val = '';\n\n            that.updateSC = function(resize, next){\n                var rect = that.getBoundingClientRect();\n                that.sc.style.left = Math.round(rect.left + (window.pageXOffset || document.documentElement.scrollLeft) + o.offsetLeft) + 'px';\n                that.sc.style.top = Math.round(rect.bottom + (window.pageYOffset || document.documentElement.scrollTop) + o.offsetTop) + 'px';\n                that.sc.style.width = Math.round(rect.right - rect.left) + 'px'; // outerWidth\n                if (!resize) {\n                    that.sc.style.display = 'block';\n                    if (!that.sc.maxHeight) { that.sc.maxHeight = parseInt((window.getComputedStyle ? getComputedStyle(that.sc, null) : that.sc.currentStyle).maxHeight); }\n                    if (!that.sc.suggestionHeight) that.sc.suggestionHeight = that.sc.querySelector('.autocomplete-suggestion').offsetHeight;\n                    if (that.sc.suggestionHeight)\n                        if (!next) that.sc.scrollTop = 0;\n                        else {\n                            var scrTop = that.sc.scrollTop, selTop = next.getBoundingClientRect().top - that.sc.getBoundingClientRect().top;\n                            if (selTop + that.sc.suggestionHeight - that.sc.maxHeight > 0)\n                                that.sc.scrollTop = selTop + that.sc.suggestionHeight + scrTop - that.sc.maxHeight;\n                            else if (selTop < 0)\n                                that.sc.scrollTop = selTop + scrTop;\n                        }\n                }\n            }\n            addEvent(window, 'resize', that.updateSC);\n            document.body.appendChild(that.sc);\n\n            live('autocomplete-suggestion', 'mouseleave', function(e){\n                var sel = that.sc.querySelector('.autocomplete-suggestion.selected');\n                if (sel) setTimeout(function(){ sel.className = sel.className.replace('selected', ''); }, 20);\n            }, that.sc);\n\n            live('autocomplete-suggestion', 'mouseover', function(e){\n                var sel = that.sc.querySelector('.autocomplete-suggestion.selected');\n                if (sel) sel.className = sel.className.replace('selected', '');\n                this.className += ' selected';\n            }, that.sc);\n\n            live('autocomplete-suggestion', 'mousedown', function(e){\n                if (hasClass(this, 'autocomplete-suggestion')) { // else outside click\n                    var v = this.getAttribute('data-val');\n                    that.value = v;\n                    o.onSelect(e, v, this);\n                    that.sc.style.display = 'none';\n                }\n            }, that.sc);\n\n            that.blurHandler = function(){\n                try { var over_sb = document.querySelector('.autocomplete-suggestions:hover'); } catch(e){ var over_sb = 0; }\n                if (!over_sb) {\n                    that.last_val = that.value;\n                    that.sc.style.display = 'none';\n                    setTimeout(function(){ that.sc.style.display = 'none'; }, 350); // hide suggestions on fast input\n                } else if (that !== document.activeElement) setTimeout(function(){ that.focus(); }, 20);\n            };\n            addEvent(that, 'blur', that.blurHandler);\n\n            var suggest = function(data,cached){\n                var val = that.value;\n                cached = typeof cached !== 'undefined' ? cached : true;\n                if(cached){\n                    that.cache[val] = data;\n                }\n                if (data.length && val.length >= o.minChars) {\n                    var s = '';\n                    for (var i=0;i<data.length;i++) s += o.renderItem(data[i], val);\n                    that.sc.innerHTML = s;\n                    that.updateSC(0);\n                }\n                else\n                    that.sc.style.display = 'none';\n            }\n\n            that.keydownHandler = function(e){\n                var key = window.event ? e.keyCode : e.which;\n                // down (40), up (38)\n                if ((key == 40 || key == 38) && that.sc.innerHTML) {\n                    var next, sel = that.sc.querySelector('.autocomplete-suggestion.selected');\n                    if (!sel) {\n                        next = (key == 40) ? that.sc.querySelector('.autocomplete-suggestion') : that.sc.childNodes[that.sc.childNodes.length - 1]; // first : last\n                        next.className += ' selected';\n                        that.value = next.getAttribute('data-val');\n                    } else {\n                        next = (key == 40) ? sel.nextSibling : sel.previousSibling;\n                        if (next) {\n                            sel.className = sel.className.replace('selected', '');\n                            next.className += ' selected';\n                            that.value = next.getAttribute('data-val');\n                        }\n                        else { sel.className = sel.className.replace('selected', ''); that.value = that.last_val; next = 0; }\n                    }\n                    that.updateSC(0, next);\n                    return false;\n                }\n                // esc\n                else if (key == 27) { that.value = that.last_val; that.sc.style.display = 'none'; }\n                // enter\n                else if (key == 13 || key == 9) {\n                    var sel = that.sc.querySelector('.autocomplete-suggestion.selected');\n                    if (sel && that.sc.style.display != 'none') { o.onSelect(e, sel.getAttribute('data-val'), sel); setTimeout(function(){ that.sc.style.display = 'none'; }, 20); }\n                }\n            };\n            addEvent(that, 'keydown', that.keydownHandler);\n\n            that.keyupHandler = function(e){\n                var key = window.event ? e.keyCode : e.which;\n                if (!key || (key < 35 || key > 40) && key != 13 && key != 27) {\n                    var val = that.value;\n                    if (val.length >= o.minChars) {\n                        if (val != that.last_val) {\n                            that.last_val = val;\n                            clearTimeout(that.timer);\n                            if (o.cache) {\n                                if (val in that.cache) { suggest(that.cache[val]); return; }\n                                // no requests if previous suggestions were empty\n                                for (var i=1; i<val.length-o.minChars; i++) {\n                                    var part = val.slice(0, val.length-i);\n                                    if (part in that.cache && !that.cache[part].length) { suggest([]); return; }\n                                }\n                            }\n                            that.timer = setTimeout(function(){ o.source(val, suggest) }, o.delay);\n                        }\n                    } else {\n                        that.last_val = val;\n                        that.sc.style.display = 'none';\n                    }\n                }\n            };\n            addEvent(that, 'keyup', that.keyupHandler);\n\n            that.focusHandler = function(e){\n                that.last_val = '\\n';\n                that.keyupHandler(e)\n            };\n            if (!o.minChars) addEvent(that, 'focus', that.focusHandler);\n        }\n\n        // public destroy method\n        this.destroy = function(){\n            for (var i=0; i<elems.length; i++) {\n                var that = elems[i];\n                removeEvent(window, 'resize', that.updateSC);\n                removeEvent(that, 'blur', that.blurHandler);\n                removeEvent(that, 'focus', that.focusHandler);\n                removeEvent(that, 'keydown', that.keydownHandler);\n                removeEvent(that, 'keyup', that.keyupHandler);\n                if (that.autocompleteAttr)\n                    that.setAttribute('autocomplete', that.autocompleteAttr);\n                else\n                    that.removeAttribute('autocomplete');\n                document.body.removeChild(that.sc);\n                that = null;\n            }\n        };\n    }\n    return autoComplete;\n})();\n\n(function(){\n    if (typeof define === 'function' && define.amd)\n        define('autoComplete', function () { return autoComplete; });\n    else if (typeof module !== 'undefined' && module.exports)\n        module.exports = autoComplete;\n    else\n        window.autoComplete = autoComplete;\n})();\n\n\nexport default autoComplete;\n","module.exports = State\n\nfunction State(options, params, handleQuery){\n\n  options = options || {}\n\n  //this.options = options\n  this.handleQuery = handleQuery\n  this.options = options\n  this.locals = this.options.locals || {}\n  this.globals = this.options.globals || {}\n  this.rootContext = firstNonNull(options.data, options.rootContext, options.context, options.source)\n  this.parent = options.parent\n  this.override = options.override\n  this.filters = options.filters || {}\n  this.params = params || options.params || []\n  this.context = firstNonNull(options.currentItem, options.context, options.source)\n  this.currentItem = firstNonNull(this.context, options.rootContext, options.data)\n  this.currentKey = null\n  this.currentReferences = []\n  this.currentParents = []\n}\n\nState.prototype = {\n\n  // current manipulation\n  setCurrent: function(key, value){\n    if (this.currentItem || this.currentKey || this.currentParents.length>0){\n      this.currentParents.push({key: this.currentKey, value: this.currentItem})\n    }\n    this.currentItem = value\n    this.currentKey = key\n  },\n\n  resetCurrent: function(){\n    this.currentItem = null\n    this.currentKey = null\n    this.currentParents = []\n  },\n\n  force: function(def){\n    var parent = this.currentParents[this.currentParents.length-1]\n    if (!this.currentItem && parent && (this.currentKey != null)){\n      this.currentItem = def || {}\n      parent.value[this.currentKey] = this.currentItem\n    }\n    return !!this.currentItem\n  },\n\n  getLocal: function(localName){\n    if (~localName.indexOf('/')){\n      var result = null\n      var parts = localName.split('/')\n\n      for (var i=0;i<parts.length;i++){\n        var part = parts[i]\n        if (i == 0){\n          result = this.locals[part]\n        } else if (result && result[part]){\n          result = result[part]\n        }\n      }\n\n      return result\n    } else {\n      return this.locals[localName]\n    }\n  },\n\n  getGlobal: function(globalName){\n    if (~globalName.indexOf('/')){\n      var result = null\n      var parts = globalName.split('/')\n\n      for (var i=0;i<parts.length;i++){\n        var part = parts[i]\n        if (i == 0){\n          result = this.globals[part]\n        } else if (result && result[part]){\n          result = result[part]\n        }\n      }\n\n      return result\n    } else {\n      return this.globals[globalName]\n    }\n  },\n\n  getFilter: function(filterName){\n    if (~filterName.indexOf('/')){\n      var result = null\n      var filterParts = filterName.split('/')\n\n      for (var i=0;i<filterParts.length;i++){\n        var part = filterParts[i]\n        if (i == 0){\n          result = this.filters[part]\n        } else if (result && result[part]){\n          result = result[part]\n        }\n      }\n\n      return result\n    } else {\n      return this.filters[filterName]\n    }\n  },\n\n  addReferences: function(references){\n    if (references){\n      references.forEach(this.addReference, this)\n    }\n  },\n\n  addReference: function(ref){\n    if (ref instanceof Object && !~this.currentReferences.indexOf(ref)){\n      this.currentReferences.push(ref)\n    }\n  },\n\n  // helper functions\n  getValues: function(values, callback){\n    return values.map(this.getValue, this)\n  },\n\n  getValue: function (value) {\n    return this.getValueFrom(value, null)\n  },\n\n  getValueFrom: function (value, item) {\n    if (value._param != null){\n      return this.params[value._param]\n    } else if (value._sub){\n\n      var options = copy(this.options)\n      options.force = null\n      options.currentItem = item\n\n      var result = this.handleQuery(value._sub, options, this.params)\n      this.addReferences(result.references)\n      return result.value\n\n    } else {\n      return value\n    }\n  },\n\n  deepQuery: function(source, tokens, options, callback){\n    var keys = Object.keys(source)\n\n    for (var key in source){\n      if (key in source){\n\n        var options = copy(this.options)\n        options.currentItem = source[key]\n\n        var result = this.handleQuery(tokens, options, this.params)\n\n        if (result.value){\n          return result\n        }\n      }\n    }\n\n    return null\n  }\n\n}\n\nfunction firstNonNull(args){\n  for (var i=0;i<arguments.length;i++){\n    if (arguments[i] != null){\n      return arguments[i]\n    }\n  }\n}\n\nfunction copy(obj){\n  var result = {}\n  if (obj){\n    for (var key in obj){\n      if (key in obj){\n        result[key] = obj[key]\n      }\n    }\n  }\n  return result\n}\n","module.exports = depthSplit\n\nfunction depthSplit (text, delimiter, opts) {\n  var max = opts && opts.max || Infinity\n  var includeDelimiters = opts && opts.includeDelimiters || false\n\n  var depth = 0\n  var start = 0\n  var result = []\n  var zones = []\n\n  text.replace(/([\\[\\(\\{])|([\\]\\)\\}])/g, function (current, open, close, offset) {\n    if (open) {\n      if (depth === 0) {\n        zones.push([start, offset])\n      }\n      depth += 1\n    } else if (close) {\n      depth -= 1\n      if (depth === 0) {\n        start = offset + current.length\n      }\n    }\n  })\n\n  if (depth === 0 && start < text.length) {\n    zones.push([start, text.length])\n  }\n\n  start = 0\n\n  for (var i = 0; i < zones.length && max > 0; i++) {\n    for (\n      var pos = zones[i][0], match = delimiter.exec(text.slice(pos, zones[i][1]));\n      match && max > 1;\n      pos += match.index + match[0].length, start = pos, match = delimiter.exec(text.slice(pos, zones[i][1]))\n    ) {\n      result.push(text.slice(start, match.index + pos))\n      if (includeDelimiters) {\n        result.push(match[0])\n      }\n      max -= 1\n    }\n  }\n\n  if (start < text.length) {\n    result.push(text.slice(start))\n  }\n\n  return result\n}\n","// todo: syntax checking\n// todo: test handle args\nvar depthSplit = require('./depth-split')\n\nmodule.exports = function(query, shouldAssignParamIds){\n  if (!query) return []\n\n  var result = []\n    , prevChar, char\n    , nextChar = query.charAt(0)\n    , bStart = 0\n    , bEnd = 0\n    , partOffset = 0\n    , pos = 0\n    , depth = 0\n    , mode = 'get'\n    , deepQuery = null\n\n  // if query contains params then number them\n  if (shouldAssignParamIds){\n    query = assignParamIds(query)\n  }\n\n  var tokens = {\n    '.': {mode: 'get'},\n    ':': {mode: 'filter'},\n    '|': {handle: 'or'},\n    '[': {open: 'select'},\n    ']': {close: 'select'},\n    '{': {open: 'meta'},\n    '}': {close: 'meta'},\n    '(': {open: 'args'},\n    ')': {close: 'args'}\n  }\n\n  function push(item){\n    if (deepQuery){\n      deepQuery.push(item)\n    } else {\n      result.push(item)\n    }\n  }\n\n  var handlers = {\n    get: function(buffer){\n      var trimmed = typeof buffer === 'string' ? buffer.trim() : null\n      if (trimmed){\n        push({get:trimmed})\n      }\n    },\n    select: function(buffer){\n      if (buffer){\n        push(tokenizeSelect(buffer))\n      } else {\n        // deep query override\n        var x = {deep: []}\n        result.push(x)\n        deepQuery = x.deep\n      }\n    },\n    filter: function(buffer){\n      if (buffer){\n        push({filter:buffer.trim()})\n      }\n    },\n    or: function(){\n      deepQuery = null\n      result.push({or:true})\n      partOffset = i + 1\n    },\n    args: function(buffer){\n      var args = tokenizeArgs(buffer)\n      result[result.length-1].args = args\n    }\n  }\n\n  function handleBuffer(){\n    var buffer = query.slice(bStart, bEnd)\n    if (handlers[mode]){\n      handlers[mode](buffer)\n    }\n    mode = 'get'\n    bStart = bEnd + 1\n  }\n\n  for (var i = 0;i < query.length;i++){\n\n    // update char values\n    prevChar = char; char = nextChar; nextChar = query.charAt(i + 1);\n    pos = i - partOffset\n\n    // root query check\n    if (pos === 0 && (char !== ':' && char !== '.')){\n      result.push({root:true})\n    }\n\n    // parent query check\n    if (pos === 0 && (char === '.' && nextChar === '.')){\n      result.push({parent:true})\n    }\n\n    var token = tokens[char]\n    if (token){\n\n      // set mode\n      if (depth === 0 && (token.mode || token.open)){\n        handleBuffer()\n        mode = token.mode || token.open\n      }\n\n      if (depth === 0 && token.handle){\n        handleBuffer()\n        handlers[token.handle]()\n      }\n\n      if (token.open){\n        depth += 1\n      } else if (token.close){\n        depth -= 1\n      }\n\n      // reset mode to get\n      if (depth === 0 && token.close){\n        handleBuffer()\n      }\n\n    }\n\n    bEnd = i + 1\n\n  }\n\n  handleBuffer()\n  return result\n}\n\nfunction tokenizeArgs(argsQuery){\n  if (argsQuery === ',') return [',']\n  return depthSplit(argsQuery, /,/).map(function(s){\n    return handleSelectPart(s.trim())\n  })\n}\n\nfunction tokenizeSelect (selectQuery) {\n  if (selectQuery === '*') {\n    return {\n      values: true\n    }\n  } else if (selectQuery === '**') {\n    return {\n      values: true,\n      deep: true\n    }\n  }\n\n  var multiple = false\n  if (selectQuery.charAt(0) === '*') {\n    multiple = true\n    selectQuery = selectQuery.slice(1)\n  }\n\n  var booleanParts = depthSplit(selectQuery, /&|\\|/, { includeDelimiters: true })\n  if (booleanParts.length > 1) {\n    var result = [\n      getSelectPart(booleanParts[0].trim())\n    ]\n    for (var i = 1; i < booleanParts.length; i += 2) {\n      var part = getSelectPart(booleanParts[i + 1].trim())\n      if (part) {\n        part.booleanOp = booleanParts[i]\n        result.push(part)\n      }\n    }\n    return {\n      multiple: multiple,\n      boolean: true,\n      select: result\n    }\n  } else {\n    var result = getSelectPart(selectQuery.trim())\n    if (!result) {\n      return {\n        get: handleSelectPart(selectQuery.trim())\n      }\n    } else {\n      if (multiple) {\n        result.multiple = true\n      }\n      return result\n    }\n  }\n}\n\nfunction getSelectPart (selectQuery) {\n  var parts = depthSplit(selectQuery, /(!)?(=|~|\\:|<=|>=|<|>)/, { max: 2, includeDelimiters: true })\n  if (parts.length === 3) {\n    var negate = parts[1].charAt(0) === '!'\n    var key = handleSelectPart(parts[0].trim())\n    var result = {\n      negate: negate,\n      op: negate ? parts[1].slice(1) : parts[1]\n    }\n    if (result.op === ':') {\n      result.select = [key, {_sub: module.exports(':' + parts[2].trim())}]\n    } else if (result.op === '~') {\n      var value = handleSelectPart(parts[2].trim())\n      if (typeof value === 'string') {\n        var reDef = parts[2].trim().match(/^\\/(.*)\\/([a-z]?)$/)\n        if (reDef) {\n          result.select = [key, new RegExp(reDef[1], reDef[2])]\n        } else {\n          result.select = [key, value]\n        }\n      } else {\n        result.select = [key, value]\n      }\n    } else {\n      result.select = [key, handleSelectPart(parts[2].trim())]\n    }\n    return result\n  }\n}\n\nfunction isInnerQuery (text) {\n  return text.charAt(0) === '{' && text.charAt(text.length-1) === '}'\n}\n\nfunction handleSelectPart(part){\n  if (isInnerQuery(part)){\n    var innerQuery = part.slice(1, -1)\n    return {_sub: module.exports(innerQuery)}\n  } else {\n    return paramToken(part)\n  }\n}\n\nfunction paramToken(text){\n  if (text.charAt(0) === '?'){\n    var num = parseInt(text.slice(1))\n    if (!isNaN(num)){\n      return {_param: num}\n    } else {\n      return text\n    }\n  } else {\n    return text\n  }\n}\n\n\n\nfunction assignParamIds(query){\n  var index = 0\n  return query.replace(/\\?/g, function(match){\n    return match + (index++)\n  })\n}\n\nfunction last (array) {\n  return array[array.length - 1]\n}\n","var State = require('./lib/state')\nvar tokenize = require('./lib/tokenize')\n\nvar tokenizedCache = {}\n\nmodule.exports = function jsonQuery (query, options) {\n\n  // extract params for ['test[param=?]', 'value'] type queries\n  var params = options && options.params || null\n  if (Array.isArray(query)) {\n    params = query.slice(1)\n    query = query[0]\n  }\n\n  if (!tokenizedCache[query]) {\n    tokenizedCache[query] = tokenize(query, true)\n  }\n\n  return handleQuery(tokenizedCache[query], options, params)\n}\n\n\nmodule.exports.lastParent = function (query) {\n  var last = query.parents[query.parents.length - 1]\n  if (last) {\n    return last.value\n  } else {\n    return null\n  }\n}\n\n\nfunction handleQuery (tokens, options, params) {\n  var state = new State(options, params, handleQuery)\n\n  for (var i = 0; i < tokens.length; i++) {\n    if (handleToken(tokens[i], state)) {\n      break\n    }\n  }\n\n  // flush\n  handleToken(null, state)\n\n  // set databind hooks\n  if (state.currentItem instanceof Object) {\n    state.addReference(state.currentItem)\n  } else {\n    var parentObject = getLastParentObject(state.currentParents)\n    if (parentObject) {\n      state.addReference(parentObject)\n    }\n  }\n\n  return {\n    value: state.currentItem,\n    key: state.currentKey,\n    references: state.currentReferences,\n    parents: state.currentParents\n  }\n}\n\nfunction handleToken (token, state) {\n  // state: setCurrent, getValue, getValues, resetCurrent, deepQuery, rootContext, currentItem, currentKey, options, filters\n\n  if (token == null) {\n    // process end of query\n    if (!state.currentItem && state.options.force) {\n      state.force(state.options.force)\n    }\n  } else if (token.values) {\n    if (state.currentItem) {\n      var keys = Object.keys(state.currentItem)\n      var values = []\n      keys.forEach(function (key) {\n        if (token.deep && Array.isArray(state.currentItem[key])) {\n          state.currentItem[key].forEach(function (item) {\n            values.push(item)\n          })\n        } else {\n          values.push(state.currentItem[key])\n        }\n      })\n      state.setCurrent(keys, values)\n    } else {\n      state.setCurrent(keys, [])\n    }\n  } else if (token.get) {\n    var key = state.getValue(token.get)\n    if (shouldOverride(state, key)) {\n      state.setCurrent(key, state.override[key])\n    } else {\n      if (state.currentItem || (state.options.force && state.force({}))) {\n        if (isDeepAccessor(state.currentItem, key) || token.multiple) {\n          var values = state.currentItem.map(function (item) {\n            return item[key]\n          }).filter(isDefined)\n\n          values = Array.prototype.concat.apply([], values) // flatten\n\n          state.setCurrent(key, values)\n        } else {\n          state.setCurrent(key, state.currentItem[key])\n        }\n      } else {\n        state.setCurrent(key, null)\n      }\n    }\n  } else if (token.select) {\n    if (Array.isArray(state.currentItem) || (state.options.force && state.force([]))) {\n      var match = (token.boolean ? token.select : [token]).map(function (part) {\n        if (part.op === ':') {\n          var key = state.getValue(part.select[0])\n          return {\n            func: function (item) {\n              if (key) {\n                item = item[key]\n              }\n              return state.getValueFrom(part.select[1], item)\n            },\n            negate: part.negate,\n            booleanOp: part.booleanOp\n          }\n        } else {\n          var selector = state.getValues(part.select)\n          if (!state.options.allowRegexp && part.op === '~' && selector[1] instanceof RegExp) throw new Error('options.allowRegexp is not enabled.')\n          return {\n            key: selector[0],\n            value: selector[1],\n            negate: part.negate,\n            booleanOp: part.booleanOp,\n            op: part.op\n          }\n        }\n      })\n\n      if (token.multiple) {\n        var keys = []\n        var value = []\n        state.currentItem.forEach(function (item, i) {\n          if (matches(item, match)) {\n            keys.push(i)\n            value.push(item)\n          }\n        })\n        state.setCurrent(keys, value)\n      } else {\n        if (!state.currentItem.some(function (item, i) {\n          if (matches(item, match)) {\n            state.setCurrent(i, item)\n            return true\n          }\n        })) {\n          state.setCurrent(null, null)\n        }\n      }\n    } else {\n      state.setCurrent(null, null)\n    }\n  } else if (token.root) {\n    state.resetCurrent()\n    if (token.args && token.args.length) {\n      state.setCurrent(null, state.getValue(token.args[0]))\n    } else {\n      state.setCurrent(null, state.rootContext)\n    }\n  } else if (token.parent) {\n    state.resetCurrent()\n    state.setCurrent(null, state.options.parent)\n  } else if (token.or) {\n    if (state.currentItem) {\n      return true\n    } else {\n      state.resetCurrent()\n      state.setCurrent(null, state.context)\n    }\n  } else if (token.filter) {\n    var helper = state.getLocal(token.filter) || state.getGlobal(token.filter)\n    if (typeof helper === 'function') {\n      // function(input, args...)\n      var values = state.getValues(token.args || [])\n      var result = helper.apply(state.options, [state.currentItem].concat(values))\n      state.setCurrent(null, result)\n    } else {\n      // fallback to old filters\n      var filter = state.getFilter(token.filter)\n      if (typeof filter === 'function') {\n        var values = state.getValues(token.args || [])\n        var result = filter.call(state.options, state.currentItem, {args: values, state: state, data: state.rootContext})\n        state.setCurrent(null, result)\n      }\n    }\n  } else if (token.deep) {\n    if (state.currentItem) {\n      if (token.deep.length === 0) {\n        return\n      }\n\n      var result = state.deepQuery(state.currentItem, token.deep, state.options)\n      if (result) {\n        state.setCurrent(result.key, result.value)\n        for (var i = 0; i < result.parents.length; i++) {\n          state.currentParents.push(result.parents[i])\n        }\n      } else {\n        state.setCurrent(null, null)\n      }\n    } else {\n      state.currentItem = null\n    }\n  }\n}\n\nfunction matches (item, parts) {\n  var result = false\n  for (var i = 0; i < parts.length; i++) {\n    var opts = parts[i]\n    var r = false\n    if (opts.func) {\n      r = opts.func(item)\n    } else if (opts.op === '~') {\n      if (opts.value instanceof RegExp) {\n        r = item[opts.key] && !!item[opts.key].match(opts.value)\n      } else {\n        r = item[opts.key] && !!~item[opts.key].indexOf(opts.value)\n      }\n    } else if (opts.op === '=') {\n      if ((item[opts.key] === true && opts.value === 'true') || (item[opts.key] === false && opts.value === 'false')) {\n        r = true\n      } else {\n        r = item[opts.key] == opts.value\n      }\n    } else if (opts.op === '>') {\n      r = item[opts.key] > opts.value\n    } else if (opts.op === '<') {\n      r = item[opts.key] < opts.value\n    } else if (opts.op === '>=') {\n      r = item[opts.key] >= opts.value\n    } else if (opts.op === '<=') {\n      r = item[opts.key] <= opts.value\n    }\n\n    if (opts.negate) {\n      r = !r\n    }\n    if (opts.booleanOp === '&') {\n      result = result && r\n    } else if (opts.booleanOp === '|') {\n      result = result || r\n    } else {\n      result = r\n    }\n  }\n\n  return result\n}\n\nfunction isDefined(value) {\n  return typeof value !== 'undefined'\n}\n\nfunction shouldOverride (state, key) {\n  return state.override && state.currentItem === state.rootContext && state.override[key] !== undefined\n}\n\nfunction isDeepAccessor (currentItem, key) {\n  return currentItem instanceof Array && parseInt(key) != key\n}\n\nfunction getLastParentObject (parents) {\n  for (var i = 0; i < parents.length; i++) {\n    if (!(parents[i + 1]) || !(parents[i + 1].value instanceof Object)) {\n      return parents[i].value\n    }\n  }\n}\n","// Copyright 2019–2020 Observable, Inc.\n\n// Permission to use, copy, modify, and/or distribute this software for any\n// purpose with or without fee is hereby granted, provided that the above\n// copyright notice and this permission notice appear in all copies.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n\n// Modifications by @filipinascimento to work as a standalone package\n\nimport * as d3 from \"d3\";\n\nfunction Legend(color, {\n\ttitle,\n\ttitleAlignment = \"start\",\n\tsvg = null,\n\ttickSize = 6,\n\torientation = \"horizontal\",\n\twidth = orientation == \"horizontal\" ? 220 : 44 + tickSize,\n\theight = orientation == \"horizontal\" ? 44 + tickSize : 220,\n\tmarginTop = orientation == \"horizontal\" ? 18 : 0,\n\tmarginRight = orientation == \"horizontal\" ? 0 : 16 + tickSize,\n\tmarginBottom = orientation == \"horizontal\" ? 16 + tickSize : 0,\n\tmarginLeft = orientation == \"horizontal\" ? 0 : 18,\n\tticks = orientation == \"horizontal\" ? width / 64 : height / 64,\n\ttickFormat,\n\ttickValues,\n\t// themeColors = [\"white\",\"black\"],\n\tthemeColors = [\"black\", \"white\"],\n\n} = {}) {\n\n\tfunction rampHorizontal(color, n = 256) {\n\t\tconst canvas = document.createElement(\"canvas\");\n\t\tcanvas.width = n;\n\t\tcanvas.height = 1;\n\t\tconst context = canvas.getContext(\"2d\");\n\t\tfor (let i = 0; i < n; ++i) {\n\t\t\tcontext.fillStyle = color(i / (n - 1));\n\t\t\tcontext.fillRect(i, 0, 1, 1);\n\t\t}\n\t\treturn canvas;\n\t}\n\n\tfunction rampVertical(color, n = 256) {\n\t\tconst canvas = document.createElement(\"canvas\");\n\t\tcanvas.width = 1;\n\t\tcanvas.height = n;\n\t\tconst context = canvas.getContext(\"2d\");\n\t\tfor (let i = 0; i < n; ++i) {\n\t\t\tcontext.fillStyle = color(i / (n - 1));\n\t\t\tcontext.fillRect(0, n - i-1, 1, 1);\n\t\t}\n\t\treturn canvas;\n\t}\n\n\tif (orientation != \"horizontal\" && orientation != \"vertical\") {\n\t\t// raise error\n\t\tconsole.error(\"orientation must be 'horizontal' or 'vertical'\");\n\t\treturn;\n\t}\n\n\tlet tickAdjustHorizontal = g => g.selectAll(\".tick line\").attr(\"y1\", marginTop + marginBottom - height - 1);\n\tlet tickAdjustVertical = g => g.selectAll(\".tick line\").attr(\"x1\", marginLeft - width + marginRight);\n\tlet ramp = orientation == \"horizontal\" ? rampHorizontal : rampVertical;\n\tlet tickAdjust = orientation == \"horizontal\" ? tickAdjustHorizontal : tickAdjustVertical;\n\n\tif (!svg) {\n\t\tsvg = d3.create(\"svg\")\n\t\t\t.attr(\"width\", width)\n\t\t\t.attr(\"height\", height)\n\t\t\t.attr(\"viewBox\", [0, 0, width, height])\n\t\t\t.style(\"overflow\", \"visible\")\n\t\t\t.style(\"display\", \"block\");\n\t} else {\n\t\tsvg\n\t\t\t.attr(\"width\", width)\n\t\t\t.attr(\"height\", height)\n\t\t\t// .attr(\"viewBox\", [0, 0, width, height])\n\t\t\t.style(\"overflow\", \"visible\")\n\t\t// .style(\"display\", \"block\");\n\t}\n\n\tlet x;\n\n\tsvg.append(\"rect\")\n\t\t.attr(\"x\", marginLeft)\n\t\t.attr(\"y\", marginTop)\n\t\t.attr(\"width\", width - marginLeft - marginRight)\n\t\t.attr(\"height\", height - marginTop - marginBottom)\n\t\t.attr(\"fill\", themeColors[1])\n\t\t.attr(\"stroke\", themeColors[1])\n\t\t.attr(\"stroke-width\", 4);\n\n\tsvg.append(\"rect\")\n\t\t.attr(\"x\", marginLeft)\n\t\t.attr(\"y\", marginTop)\n\t\t.attr(\"width\", width - marginLeft - marginRight)\n\t\t.attr(\"height\", height - marginTop - marginBottom)\n\t\t.attr(\"fill\", themeColors[0])\n\t\t.attr(\"stroke\", themeColors[0])\n\t\t.attr(\"stroke-width\", 2);\n\n\t// Continuous\n\tif (color.interpolate) {\n\t\tconst n = Math.min(color.domain().length, color.range().length);\n\t\tif (orientation == \"horizontal\") {\n\t\t\tx = color.copy().rangeRound(d3.quantize(d3.interpolate(marginLeft, width - marginRight), n));\n\t\t} else {\n\t\t\tx = color.copy().rangeRound(d3.quantize(d3.interpolate(height - marginBottom,marginTop), n));\n\t\t}\n\n\t\tsvg.append(\"image\")\n\t\t\t.attr(\"x\", marginLeft)\n\t\t\t.attr(\"y\", marginTop)\n\t\t\t.attr(\"width\", width - marginLeft - marginRight)\n\t\t\t.attr(\"height\", height - marginTop - marginBottom)\n\t\t\t.attr(\"preserveAspectRatio\", \"none\")\n\t\t\t.attr(\"xlink:href\", ramp(color.copy().domain(d3.quantize(d3.interpolate(0, 1), n))).toDataURL());\n\t}\n\n\t// Sequential\n\telse if (color.interpolator) {\n\t\tif (orientation == \"horizontal\") {\n\t\t\tx = Object.assign(color.copy()\n\t\t\t\t.interpolator(d3.interpolateRound(marginLeft, width - marginRight)),\n\t\t\t\t{ range() { return [marginLeft, width - marginRight]; } });\n\t\t} else {\n\t\t\tx = Object.assign(color.copy()\n\t\t\t\t.interpolator(d3.interpolateRound(height - marginBottom,marginTop)),\n\t\t\t\t{ range() { return [height - marginBottom,marginTop]; } });\n\t\t}\n\n\t\tsvg.append(\"image\")\n\t\t\t.attr(\"x\", marginLeft)\n\t\t\t.attr(\"y\", marginTop)\n\t\t\t.attr(\"width\", width - marginLeft - marginRight)\n\t\t\t.attr(\"height\", height - marginTop - marginBottom)\n\t\t\t.attr(\"preserveAspectRatio\", \"none\")\n\t\t\t.attr(\"xlink:href\", ramp(color.interpolator()).toDataURL());\n\n\t\t// scaleSequentialQuantile doesn’t implement ticks or tickFormat.\n\t\tif (!x.ticks) {\n\t\t\tif (tickValues === undefined) {\n\t\t\t\tconst n = Math.round(ticks + 1);\n\t\t\t\ttickValues = d3.range(n).map(i => d3.quantile(color.domain(), i / (n - 1)));\n\t\t\t}\n\t\t\tif (typeof tickFormat !== \"function\") {\n\t\t\t\ttickFormat = d3.format(tickFormat === undefined ? \",f\" : tickFormat);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Threshold\n\telse if (color.invertExtent) {\n\t\tconst thresholds\n\t\t\t= color.thresholds ? color.thresholds() // scaleQuantize\n\t\t\t\t: color.quantiles ? color.quantiles() // scaleQuantile\n\t\t\t\t\t: color.domain(); // scaleThreshold\n\n\t\tconst thresholdFormat\n\t\t\t= tickFormat === undefined ? d => d\n\t\t\t\t: typeof tickFormat === \"string\" ? d3.format(tickFormat)\n\t\t\t\t\t: tickFormat;\n\n\t\tif (orientation == \"horizontal\") {\n\t\t\tx = d3.scaleLinear()\n\t\t\t\t.domain([-1, color.range().length - 1])\n\t\t\t\t.rangeRound([marginLeft, width - marginRight]);\n\t\t} else {\n\t\t\tx = d3.scaleLinear()\n\t\t\t\t.domain([-1, color.range().length - 1])\n\t\t\t\t.rangeRound([height - marginBottom,marginTop]);\n\t\t}\n\n\t\tif (orientation == \"horizontal\") {\n\t\t\tsvg.append(\"g\")\n\t\t\t\t.selectAll(\"rect\")\n\t\t\t\t.data(color.range())\n\t\t\t\t.join(\"rect\")\n\t\t\t\t.attr(\"x\", (d, i) => x(i - 1))\n\t\t\t\t.attr(\"y\", marginTop)\n\t\t\t\t.attr(\"width\", (d, i) => x(i) - x(i - 1))\n\t\t\t\t.attr(\"height\", height - marginTop - marginBottom)\n\t\t\t\t.attr(\"fill\", d => d);\n\t\t} else {\n\t\t\tsvg.append(\"g\")\n\t\t\t\t.selectAll(\"rect\")\n\t\t\t\t.data(color.range())\n\t\t\t\t.join(\"rect\")\n\t\t\t\t.attr(\"x\", marginLeft)\n\t\t\t\t.attr(\"y\", (d, i) => x(i - 1))\n\t\t\t\t.attr(\"width\", width - marginLeft - marginRight)\n\t\t\t\t.attr(\"height\", (d, i) => x(i) - x(i - 1))\n\t\t\t\t.attr(\"fill\", d => d);\n\t\t}\n\n\n\t\ttickValues = d3.range(thresholds.length);\n\t\ttickFormat = i => thresholdFormat(thresholds[i], i);\n\t}\n\n\t// Ordinal\n\telse {\n\t\tif (orientation == \"horizontal\") {\n\t\t\tx = d3.scaleBand()\n\t\t\t\t.domain(color.domain())\n\t\t\t\t.rangeRound([marginLeft, width - marginRight]);\n\t\t} else {\n\t\t\tx = d3.scaleBand()\n\t\t\t\t.domain(color.domain())\n\t\t\t\t.rangeRound([marginTop, height - marginBottom]);\n\t\t}\n\n\t\tif (orientation == \"horizontal\") {\n\t\t\tsvg.append(\"g\")\n\t\t\t\t.selectAll(\"rect\")\n\t\t\t\t.data(color.domain())\n\t\t\t\t.join(\"rect\")\n\t\t\t\t.attr(\"x\", x)\n\t\t\t\t.attr(\"y\", marginTop)\n\t\t\t\t.attr(\"width\", Math.max(0, x.bandwidth() - 1))\n\t\t\t\t.attr(\"height\", height - marginTop - marginBottom)\n\t\t\t\t.attr(\"fill\", color);\n\t\t} else {\n\t\t\tsvg.append(\"g\")\n\t\t\t\t.selectAll(\"rect\")\n\t\t\t\t.data(color.domain())\n\t\t\t\t.join(\"rect\")\n\t\t\t\t.attr(\"x\", marginLeft)\n\t\t\t\t.attr(\"y\", x)\n\t\t\t\t.attr(\"width\", width - marginLeft - marginRight)\n\t\t\t\t.attr(\"height\", Math.max(0, x.bandwidth() - 1))\n\t\t\t\t.attr(\"fill\", color);\n\t\t}\n\n\n\t\ttickAdjust = () => { };\n\t}\n\t//append white rect stroke around the colorbar\n\n\n\tif (orientation == \"horizontal\") {\n\t\tsvg.append(\"g\")\n\t\t\t.attr(\"transform\", `translate(0,${height - marginBottom})`)\n\t\t\t.call(d3.axisBottom(x)\n\t\t\t\t.ticks(ticks, typeof tickFormat === \"string\" ? tickFormat : undefined)\n\t\t\t\t.tickFormat(typeof tickFormat === \"function\" ? tickFormat : undefined)\n\t\t\t\t.tickSize(tickSize)\n\t\t\t\t.tickValues(tickValues))\n\t\t\t// .attr(\"paint-order\", \"stroke\")\n\t\t\t.attr(\"stroke-linecap\", \"round\")\n\t\t\t.attr(\"stroke-linejoin\", \"round\")\n\t\t\t.attr(\"stroke-dasharray\", \"0%\")\n\t\t\t.attr(\"stroke-dashoffset\", 0)\n\t\t\t.attr(\"stroke\", themeColors[1])\n\t\t\t.attr(\"stroke-width\", 2.5)\n\t\t\t.attr(\"fill\", themeColors[1])\n\t\t\t.call(tickAdjust)\n\t\t\t.call(g => {\n\t\t\t\tg.selectAll(\".tick\").select(\"line\")\n\t\t\t\t\t.attr(\"stroke-width\", 3)\n\t\t\t\t\t.attr(\"stroke\", themeColors[1]).clone()\n\t\t\t\t\t.attr(\"stroke-width\", 1.5)\n\t\t\t\t\t.attr(\"stroke\", themeColors[0])\n\n\t\t\t\tg.selectAll(\"text\")\n\t\t\t\t\t.attr(\"stroke\", themeColors[1])\n\t\t\t\t\t.clone(true)\n\t\t\t\t\t\t.attr(\"fill\", themeColors[0])\n\t\t\t\t\t\t.attr(\"stroke\", \"none\");\n\n\t\t\t})\n\t\t\t.call(g => g.select(\".domain\").remove())\n\t\t\t.call(g => {\n\t\t\t\tg.append(\"text\")\n\t\t\t\t\t.attr(\"x\", titleAlignment == \"start\" ? marginLeft : width - marginRight)\n\t\t\t\t\t.attr(\"y\", marginTop + marginBottom - height - 6)\n\t\t\t\t\t.attr(\"stroke\", themeColors[1])\n\t\t\t\t\t.attr(\"text-anchor\", titleAlignment)\n\t\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t\t.attr(\"class\", \"title\")\n\t\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t\t.attr(\"stroke-width\", 3)\n\t\t\t\t\t.text(title).clone(true)\n\t\t\t\t\t.attr(\"stroke\", \"none\")\n\t\t\t\t\t.attr(\"fill\", themeColors[0]);\n\t\t\t});\n\t} else {\n\t\t\n\t\tsvg.append(\"g\")\n\t\t\t.attr(\"transform\", `translate(${width - marginRight},0)`)\n\t\t\t.call(d3.axisRight(x)\n\t\t\t\t.ticks(ticks, typeof tickFormat === \"string\" ? tickFormat : undefined)\n\t\t\t\t.tickFormat(typeof tickFormat === \"function\" ? tickFormat : undefined)\n\t\t\t\t.tickSize(tickSize)\n\t\t\t\t.tickValues(tickValues))\n\t\t\t// .attr(\"paint-order\", \"stroke\")\n\t\t\t.attr(\"stroke-linecap\", \"round\")\n\t\t\t.attr(\"stroke-linejoin\", \"round\")\n\t\t\t.attr(\"stroke-dasharray\", \"0%\")\n\t\t\t.attr(\"stroke-dashoffset\", 0)\n\t\t\t.attr(\"stroke\", themeColors[1])\n\t\t\t.attr(\"stroke-width\", 2.5)\n\t\t\t.attr(\"fill\", themeColors[1])\n\t\t\t.call(tickAdjust)\n\t\t\t.call(g => {\n\t\t\t\tg.selectAll(\".tick\").select(\"line\")\n\t\t\t\t\t.attr(\"stroke-width\", 3)\n\t\t\t\t\t.attr(\"stroke\", themeColors[1]).clone()\n\t\t\t\t\t.attr(\"stroke-width\", 1.5)\n\t\t\t\t\t.attr(\"stroke\", themeColors[0])\n\n\t\t\t\t\n\t\t\t\tg.selectAll(\"text\")\n\t\t\t\t.attr(\"stroke\", themeColors[1])\n\t\t\t\t.clone(true)\n\t\t\t\t\t.attr(\"fill\", themeColors[0])\n\t\t\t\t\t.attr(\"stroke\", \"none\");\n\n\t\t\t}\n\t\t\t)\n\t\t\t.call(g => g.select(\".domain\").remove())\n\t\t\t.call(g => {\n\t\t\t\tg.append(\"text\")\n\t\t\t\t\t.attr(\"x\", marginTop + marginBottom - height+1)\n\t\t\t\t\t.attr(\"y\", -marginLeft)\n\t\t\t\t\t.attr(\"fill\", themeColors[0])\n\t\t\t\t\t.attr(\"stroke\", themeColors[1])\n\t\t\t\t\t.attr(\"text-anchor\", titleAlignment)\n\t\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t\t.attr(\"class\", \"title\")\n\t\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t\t.attr(\"stroke-width\", 3)\n\t\t\t\t\t//rotate the text by 90 degrees\n\t\t\t\t\t.attr(\"transform\", \"rotate(-90)\")\n\t\t\t\t\t.text(title).clone(true)\n\t\t\t\t\t.attr(\"stroke\", \"none\")\n\t\t\t\t\t.attr(\"fill\", themeColors[0]);\n\t\t\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\t\t);\n\n\t}\n\n\treturn svg.node();\n}\n\nexport default Legend;\n","/*! Tweakpane 4.0.4 (c) 2016 cocopon, licensed under the MIT license. */\nfunction forceCast(v) {\n    return v;\n}\nfunction isEmpty(value) {\n    return value === null || value === undefined;\n}\nfunction isObject$1(value) {\n    return value !== null && typeof value === 'object';\n}\nfunction isRecord(value) {\n    return value !== null && typeof value === 'object';\n}\nfunction deepEqualsArray(a1, a2) {\n    if (a1.length !== a2.length) {\n        return false;\n    }\n    for (let i = 0; i < a1.length; i++) {\n        if (a1[i] !== a2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction deepMerge(r1, r2) {\n    const keys = Array.from(new Set([...Object.keys(r1), ...Object.keys(r2)]));\n    return keys.reduce((result, key) => {\n        const v1 = r1[key];\n        const v2 = r2[key];\n        return isRecord(v1) && isRecord(v2)\n            ? Object.assign(Object.assign({}, result), { [key]: deepMerge(v1, v2) }) : Object.assign(Object.assign({}, result), { [key]: key in r2 ? v2 : v1 });\n    }, {});\n}\n\nfunction isBinding(value) {\n    if (!isObject$1(value)) {\n        return false;\n    }\n    return 'target' in value;\n}\n\nconst CREATE_MESSAGE_MAP = {\n    alreadydisposed: () => 'View has been already disposed',\n    invalidparams: (context) => `Invalid parameters for '${context.name}'`,\n    nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\n    nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\n    notbindable: () => `Value is not bindable`,\n    notcompatible: (context) => `Not compatible with  plugin '${context.id}'`,\n    propertynotfound: (context) => `Property '${context.name}' not found`,\n    shouldneverhappen: () => 'This error should never happen',\n};\nclass TpError {\n    static alreadyDisposed() {\n        return new TpError({ type: 'alreadydisposed' });\n    }\n    static notBindable() {\n        return new TpError({\n            type: 'notbindable',\n        });\n    }\n    static notCompatible(bundleId, id) {\n        return new TpError({\n            type: 'notcompatible',\n            context: {\n                id: `${bundleId}.${id}`,\n            },\n        });\n    }\n    static propertyNotFound(name) {\n        return new TpError({\n            type: 'propertynotfound',\n            context: {\n                name: name,\n            },\n        });\n    }\n    static shouldNeverHappen() {\n        return new TpError({ type: 'shouldneverhappen' });\n    }\n    constructor(config) {\n        var _a;\n        this.message =\n            (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n        this.name = this.constructor.name;\n        this.stack = new Error(this.message).stack;\n        this.type = config.type;\n    }\n    toString() {\n        return this.message;\n    }\n}\n\nclass BindingTarget {\n    constructor(obj, key) {\n        this.obj_ = obj;\n        this.key = key;\n    }\n    static isBindable(obj) {\n        if (obj === null) {\n            return false;\n        }\n        if (typeof obj !== 'object' && typeof obj !== 'function') {\n            return false;\n        }\n        return true;\n    }\n    read() {\n        return this.obj_[this.key];\n    }\n    write(value) {\n        this.obj_[this.key] = value;\n    }\n    writeProperty(name, value) {\n        const valueObj = this.read();\n        if (!BindingTarget.isBindable(valueObj)) {\n            throw TpError.notBindable();\n        }\n        if (!(name in valueObj)) {\n            throw TpError.propertyNotFound(name);\n        }\n        valueObj[name] = value;\n    }\n}\n\nclass Emitter {\n    constructor() {\n        this.observers_ = {};\n    }\n    on(eventName, handler, opt_options) {\n        var _a;\n        let observers = this.observers_[eventName];\n        if (!observers) {\n            observers = this.observers_[eventName] = [];\n        }\n        observers.push({\n            handler: handler,\n            key: (_a = opt_options === null || opt_options === void 0 ? void 0 : opt_options.key) !== null && _a !== void 0 ? _a : handler,\n        });\n        return this;\n    }\n    off(eventName, key) {\n        const observers = this.observers_[eventName];\n        if (observers) {\n            this.observers_[eventName] = observers.filter((observer) => {\n                return observer.key !== key;\n            });\n        }\n        return this;\n    }\n    emit(eventName, event) {\n        const observers = this.observers_[eventName];\n        if (!observers) {\n            return;\n        }\n        observers.forEach((observer) => {\n            observer.handler(event);\n        });\n    }\n}\n\nclass ComplexValue {\n    constructor(initialValue, config) {\n        var _a;\n        this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n        this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n        this.emitter = new Emitter();\n        this.rawValue_ = initialValue;\n    }\n    get constraint() {\n        return this.constraint_;\n    }\n    get rawValue() {\n        return this.rawValue_;\n    }\n    set rawValue(rawValue) {\n        this.setRawValue(rawValue, {\n            forceEmit: false,\n            last: true,\n        });\n    }\n    setRawValue(rawValue, options) {\n        const opts = options !== null && options !== void 0 ? options : {\n            forceEmit: false,\n            last: true,\n        };\n        const constrainedValue = this.constraint_\n            ? this.constraint_.constrain(rawValue)\n            : rawValue;\n        const prevValue = this.rawValue_;\n        const changed = !this.equals_(prevValue, constrainedValue);\n        if (!changed && !opts.forceEmit) {\n            return;\n        }\n        this.emitter.emit('beforechange', {\n            sender: this,\n        });\n        this.rawValue_ = constrainedValue;\n        this.emitter.emit('change', {\n            options: opts,\n            previousRawValue: prevValue,\n            rawValue: constrainedValue,\n            sender: this,\n        });\n    }\n}\n\nclass PrimitiveValue {\n    constructor(initialValue) {\n        this.emitter = new Emitter();\n        this.value_ = initialValue;\n    }\n    get rawValue() {\n        return this.value_;\n    }\n    set rawValue(value) {\n        this.setRawValue(value, {\n            forceEmit: false,\n            last: true,\n        });\n    }\n    setRawValue(value, options) {\n        const opts = options !== null && options !== void 0 ? options : {\n            forceEmit: false,\n            last: true,\n        };\n        const prevValue = this.value_;\n        if (prevValue === value && !opts.forceEmit) {\n            return;\n        }\n        this.emitter.emit('beforechange', {\n            sender: this,\n        });\n        this.value_ = value;\n        this.emitter.emit('change', {\n            options: opts,\n            previousRawValue: prevValue,\n            rawValue: this.value_,\n            sender: this,\n        });\n    }\n}\n\nclass ReadonlyPrimitiveValue {\n    constructor(value) {\n        this.emitter = new Emitter();\n        this.onValueBeforeChange_ = this.onValueBeforeChange_.bind(this);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.value_ = value;\n        this.value_.emitter.on('beforechange', this.onValueBeforeChange_);\n        this.value_.emitter.on('change', this.onValueChange_);\n    }\n    get rawValue() {\n        return this.value_.rawValue;\n    }\n    onValueBeforeChange_(ev) {\n        this.emitter.emit('beforechange', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n    onValueChange_(ev) {\n        this.emitter.emit('change', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n}\n\nfunction createValue(initialValue, config) {\n    const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n    const equals = config === null || config === void 0 ? void 0 : config.equals;\n    if (!constraint && !equals) {\n        return new PrimitiveValue(initialValue);\n    }\n    return new ComplexValue(initialValue, config);\n}\nfunction createReadonlyValue(value) {\n    return [\n        new ReadonlyPrimitiveValue(value),\n        (rawValue, options) => {\n            value.setRawValue(rawValue, options);\n        },\n    ];\n}\n\nclass ValueMap {\n    constructor(valueMap) {\n        this.emitter = new Emitter();\n        this.valMap_ = valueMap;\n        for (const key in this.valMap_) {\n            const v = this.valMap_[key];\n            v.emitter.on('change', () => {\n                this.emitter.emit('change', {\n                    key: key,\n                    sender: this,\n                });\n            });\n        }\n    }\n    static createCore(initialValue) {\n        const keys = Object.keys(initialValue);\n        return keys.reduce((o, key) => {\n            return Object.assign(o, {\n                [key]: createValue(initialValue[key]),\n            });\n        }, {});\n    }\n    static fromObject(initialValue) {\n        const core = this.createCore(initialValue);\n        return new ValueMap(core);\n    }\n    get(key) {\n        return this.valMap_[key].rawValue;\n    }\n    set(key, value) {\n        this.valMap_[key].rawValue = value;\n    }\n    value(key) {\n        return this.valMap_[key];\n    }\n}\n\nclass DefiniteRangeConstraint {\n    constructor(config) {\n        this.values = ValueMap.fromObject({\n            max: config.max,\n            min: config.min,\n        });\n    }\n    constrain(value) {\n        const max = this.values.get('max');\n        const min = this.values.get('min');\n        return Math.min(Math.max(value, min), max);\n    }\n}\n\nclass RangeConstraint {\n    constructor(config) {\n        this.values = ValueMap.fromObject({\n            max: config.max,\n            min: config.min,\n        });\n    }\n    constrain(value) {\n        const max = this.values.get('max');\n        const min = this.values.get('min');\n        let result = value;\n        if (!isEmpty(min)) {\n            result = Math.max(result, min);\n        }\n        if (!isEmpty(max)) {\n            result = Math.min(result, max);\n        }\n        return result;\n    }\n}\n\nclass StepConstraint {\n    constructor(step, origin = 0) {\n        this.step = step;\n        this.origin = origin;\n    }\n    constrain(value) {\n        const o = this.origin % this.step;\n        const r = Math.round((value - o) / this.step);\n        return o + r * this.step;\n    }\n}\n\nclass NumberLiteralNode {\n    constructor(text) {\n        this.text = text;\n    }\n    evaluate() {\n        return Number(this.text);\n    }\n    toString() {\n        return this.text;\n    }\n}\nconst BINARY_OPERATION_MAP = {\n    '**': (v1, v2) => Math.pow(v1, v2),\n    '*': (v1, v2) => v1 * v2,\n    '/': (v1, v2) => v1 / v2,\n    '%': (v1, v2) => v1 % v2,\n    '+': (v1, v2) => v1 + v2,\n    '-': (v1, v2) => v1 - v2,\n    '<<': (v1, v2) => v1 << v2,\n    '>>': (v1, v2) => v1 >> v2,\n    '>>>': (v1, v2) => v1 >>> v2,\n    '&': (v1, v2) => v1 & v2,\n    '^': (v1, v2) => v1 ^ v2,\n    '|': (v1, v2) => v1 | v2,\n};\nclass BinaryOperationNode {\n    constructor(operator, left, right) {\n        this.left = left;\n        this.operator = operator;\n        this.right = right;\n    }\n    evaluate() {\n        const op = BINARY_OPERATION_MAP[this.operator];\n        if (!op) {\n            throw new Error(`unexpected binary operator: '${this.operator}`);\n        }\n        return op(this.left.evaluate(), this.right.evaluate());\n    }\n    toString() {\n        return [\n            'b(',\n            this.left.toString(),\n            this.operator,\n            this.right.toString(),\n            ')',\n        ].join(' ');\n    }\n}\nconst UNARY_OPERATION_MAP = {\n    '+': (v) => v,\n    '-': (v) => -v,\n    '~': (v) => ~v,\n};\nclass UnaryOperationNode {\n    constructor(operator, expr) {\n        this.operator = operator;\n        this.expression = expr;\n    }\n    evaluate() {\n        const op = UNARY_OPERATION_MAP[this.operator];\n        if (!op) {\n            throw new Error(`unexpected unary operator: '${this.operator}`);\n        }\n        return op(this.expression.evaluate());\n    }\n    toString() {\n        return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n    }\n}\n\nfunction combineReader(parsers) {\n    return (text, cursor) => {\n        for (let i = 0; i < parsers.length; i++) {\n            const result = parsers[i](text, cursor);\n            if (result !== '') {\n                return result;\n            }\n        }\n        return '';\n    };\n}\nfunction readWhitespace(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^\\s+/);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readNonZeroDigit(text, cursor) {\n    const ch = text.substr(cursor, 1);\n    return ch.match(/^[1-9]$/) ? ch : '';\n}\nfunction readDecimalDigits(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^[0-9]+/);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readSignedInteger(text, cursor) {\n    const ds = readDecimalDigits(text, cursor);\n    if (ds !== '') {\n        return ds;\n    }\n    const sign = text.substr(cursor, 1);\n    cursor += 1;\n    if (sign !== '-' && sign !== '+') {\n        return '';\n    }\n    const sds = readDecimalDigits(text, cursor);\n    if (sds === '') {\n        return '';\n    }\n    return sign + sds;\n}\nfunction readExponentPart(text, cursor) {\n    const e = text.substr(cursor, 1);\n    cursor += 1;\n    if (e.toLowerCase() !== 'e') {\n        return '';\n    }\n    const si = readSignedInteger(text, cursor);\n    if (si === '') {\n        return '';\n    }\n    return e + si;\n}\nfunction readDecimalIntegerLiteral(text, cursor) {\n    const ch = text.substr(cursor, 1);\n    if (ch === '0') {\n        return ch;\n    }\n    const nzd = readNonZeroDigit(text, cursor);\n    cursor += nzd.length;\n    if (nzd === '') {\n        return '';\n    }\n    return nzd + readDecimalDigits(text, cursor);\n}\nfunction readDecimalLiteral1(text, cursor) {\n    const dil = readDecimalIntegerLiteral(text, cursor);\n    cursor += dil.length;\n    if (dil === '') {\n        return '';\n    }\n    const dot = text.substr(cursor, 1);\n    cursor += dot.length;\n    if (dot !== '.') {\n        return '';\n    }\n    const dds = readDecimalDigits(text, cursor);\n    cursor += dds.length;\n    return dil + dot + dds + readExponentPart(text, cursor);\n}\nfunction readDecimalLiteral2(text, cursor) {\n    const dot = text.substr(cursor, 1);\n    cursor += dot.length;\n    if (dot !== '.') {\n        return '';\n    }\n    const dds = readDecimalDigits(text, cursor);\n    cursor += dds.length;\n    if (dds === '') {\n        return '';\n    }\n    return dot + dds + readExponentPart(text, cursor);\n}\nfunction readDecimalLiteral3(text, cursor) {\n    const dil = readDecimalIntegerLiteral(text, cursor);\n    cursor += dil.length;\n    if (dil === '') {\n        return '';\n    }\n    return dil + readExponentPart(text, cursor);\n}\nconst readDecimalLiteral = combineReader([\n    readDecimalLiteral1,\n    readDecimalLiteral2,\n    readDecimalLiteral3,\n]);\nfunction parseBinaryDigits(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^[01]+/);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readBinaryIntegerLiteral(text, cursor) {\n    const prefix = text.substr(cursor, 2);\n    cursor += prefix.length;\n    if (prefix.toLowerCase() !== '0b') {\n        return '';\n    }\n    const bds = parseBinaryDigits(text, cursor);\n    if (bds === '') {\n        return '';\n    }\n    return prefix + bds;\n}\nfunction readOctalDigits(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^[0-7]+/);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readOctalIntegerLiteral(text, cursor) {\n    const prefix = text.substr(cursor, 2);\n    cursor += prefix.length;\n    if (prefix.toLowerCase() !== '0o') {\n        return '';\n    }\n    const ods = readOctalDigits(text, cursor);\n    if (ods === '') {\n        return '';\n    }\n    return prefix + ods;\n}\nfunction readHexDigits(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readHexIntegerLiteral(text, cursor) {\n    const prefix = text.substr(cursor, 2);\n    cursor += prefix.length;\n    if (prefix.toLowerCase() !== '0x') {\n        return '';\n    }\n    const hds = readHexDigits(text, cursor);\n    if (hds === '') {\n        return '';\n    }\n    return prefix + hds;\n}\nconst readNonDecimalIntegerLiteral = combineReader([\n    readBinaryIntegerLiteral,\n    readOctalIntegerLiteral,\n    readHexIntegerLiteral,\n]);\nconst readNumericLiteral = combineReader([\n    readNonDecimalIntegerLiteral,\n    readDecimalLiteral,\n]);\n\nfunction parseLiteral(text, cursor) {\n    const num = readNumericLiteral(text, cursor);\n    cursor += num.length;\n    if (num === '') {\n        return null;\n    }\n    return {\n        evaluable: new NumberLiteralNode(num),\n        cursor: cursor,\n    };\n}\nfunction parseParenthesizedExpression(text, cursor) {\n    const op = text.substr(cursor, 1);\n    cursor += op.length;\n    if (op !== '(') {\n        return null;\n    }\n    const expr = parseExpression(text, cursor);\n    if (!expr) {\n        return null;\n    }\n    cursor = expr.cursor;\n    cursor += readWhitespace(text, cursor).length;\n    const cl = text.substr(cursor, 1);\n    cursor += cl.length;\n    if (cl !== ')') {\n        return null;\n    }\n    return {\n        evaluable: expr.evaluable,\n        cursor: cursor,\n    };\n}\nfunction parsePrimaryExpression(text, cursor) {\n    var _a;\n    return ((_a = parseLiteral(text, cursor)) !== null && _a !== void 0 ? _a : parseParenthesizedExpression(text, cursor));\n}\nfunction parseUnaryExpression(text, cursor) {\n    const expr = parsePrimaryExpression(text, cursor);\n    if (expr) {\n        return expr;\n    }\n    const op = text.substr(cursor, 1);\n    cursor += op.length;\n    if (op !== '+' && op !== '-' && op !== '~') {\n        return null;\n    }\n    const num = parseUnaryExpression(text, cursor);\n    if (!num) {\n        return null;\n    }\n    cursor = num.cursor;\n    return {\n        cursor: cursor,\n        evaluable: new UnaryOperationNode(op, num.evaluable),\n    };\n}\nfunction readBinaryOperator(ops, text, cursor) {\n    cursor += readWhitespace(text, cursor).length;\n    const op = ops.filter((op) => text.startsWith(op, cursor))[0];\n    if (!op) {\n        return null;\n    }\n    cursor += op.length;\n    cursor += readWhitespace(text, cursor).length;\n    return {\n        cursor: cursor,\n        operator: op,\n    };\n}\nfunction createBinaryOperationExpressionParser(exprParser, ops) {\n    return (text, cursor) => {\n        const firstExpr = exprParser(text, cursor);\n        if (!firstExpr) {\n            return null;\n        }\n        cursor = firstExpr.cursor;\n        let expr = firstExpr.evaluable;\n        for (;;) {\n            const op = readBinaryOperator(ops, text, cursor);\n            if (!op) {\n                break;\n            }\n            cursor = op.cursor;\n            const nextExpr = exprParser(text, cursor);\n            if (!nextExpr) {\n                return null;\n            }\n            cursor = nextExpr.cursor;\n            expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n        }\n        return expr\n            ? {\n                cursor: cursor,\n                evaluable: expr,\n            }\n            : null;\n    };\n}\nconst parseBinaryOperationExpression = [\n    ['**'],\n    ['*', '/', '%'],\n    ['+', '-'],\n    ['<<', '>>>', '>>'],\n    ['&'],\n    ['^'],\n    ['|'],\n].reduce((parser, ops) => {\n    return createBinaryOperationExpressionParser(parser, ops);\n}, parseUnaryExpression);\nfunction parseExpression(text, cursor) {\n    cursor += readWhitespace(text, cursor).length;\n    return parseBinaryOperationExpression(text, cursor);\n}\nfunction parseEcmaNumberExpression(text) {\n    const expr = parseExpression(text, 0);\n    if (!expr) {\n        return null;\n    }\n    const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n    if (cursor !== text.length) {\n        return null;\n    }\n    return expr.evaluable;\n}\n\nfunction parseNumber(text) {\n    var _a;\n    const r = parseEcmaNumberExpression(text);\n    return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n}\nfunction numberFromUnknown(value) {\n    if (typeof value === 'number') {\n        return value;\n    }\n    if (typeof value === 'string') {\n        const pv = parseNumber(value);\n        if (!isEmpty(pv)) {\n            return pv;\n        }\n    }\n    return 0;\n}\nfunction numberToString(value) {\n    return String(value);\n}\nfunction createNumberFormatter(digits) {\n    return (value) => {\n        return value.toFixed(Math.max(Math.min(digits, 20), 0));\n    };\n}\n\nfunction mapRange(value, start1, end1, start2, end2) {\n    const p = (value - start1) / (end1 - start1);\n    return start2 + p * (end2 - start2);\n}\nfunction getDecimalDigits(value) {\n    const text = String(value.toFixed(10));\n    const frac = text.split('.')[1];\n    return frac.replace(/0+$/, '').length;\n}\nfunction constrainRange(value, min, max) {\n    return Math.min(Math.max(value, min), max);\n}\nfunction loopRange(value, max) {\n    return ((value % max) + max) % max;\n}\nfunction getSuitableDecimalDigits(params, rawValue) {\n    return !isEmpty(params.step)\n        ? getDecimalDigits(params.step)\n        : Math.max(getDecimalDigits(rawValue), 2);\n}\nfunction getSuitableKeyScale(params) {\n    var _a;\n    return (_a = params.step) !== null && _a !== void 0 ? _a : 1;\n}\nfunction getSuitablePointerScale(params, rawValue) {\n    var _a;\n    const base = Math.abs((_a = params.step) !== null && _a !== void 0 ? _a : rawValue);\n    return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n}\nfunction createStepConstraint(params, initialValue) {\n    if (!isEmpty(params.step)) {\n        return new StepConstraint(params.step, initialValue);\n    }\n    return null;\n}\nfunction createRangeConstraint(params) {\n    if (!isEmpty(params.max) && !isEmpty(params.min)) {\n        return new DefiniteRangeConstraint({\n            max: params.max,\n            min: params.min,\n        });\n    }\n    if (!isEmpty(params.max) || !isEmpty(params.min)) {\n        return new RangeConstraint({\n            max: params.max,\n            min: params.min,\n        });\n    }\n    return null;\n}\nfunction createNumberTextPropsObject(params, initialValue) {\n    var _a, _b, _c;\n    return {\n        formatter: (_a = params.format) !== null && _a !== void 0 ? _a : createNumberFormatter(getSuitableDecimalDigits(params, initialValue)),\n        keyScale: (_b = params.keyScale) !== null && _b !== void 0 ? _b : getSuitableKeyScale(params),\n        pointerScale: (_c = params.pointerScale) !== null && _c !== void 0 ? _c : getSuitablePointerScale(params, initialValue),\n    };\n}\nfunction createNumberTextInputParamsParser(p) {\n    return {\n        format: p.optional.function,\n        keyScale: p.optional.number,\n        max: p.optional.number,\n        min: p.optional.number,\n        pointerScale: p.optional.number,\n        step: p.optional.number,\n    };\n}\n\nfunction createPointAxis(config) {\n    return {\n        constraint: config.constraint,\n        textProps: ValueMap.fromObject(createNumberTextPropsObject(config.params, config.initialValue)),\n    };\n}\n\nclass BladeApi {\n    constructor(controller) {\n        this.controller = controller;\n    }\n    get element() {\n        return this.controller.view.element;\n    }\n    get disabled() {\n        return this.controller.viewProps.get('disabled');\n    }\n    set disabled(disabled) {\n        this.controller.viewProps.set('disabled', disabled);\n    }\n    get hidden() {\n        return this.controller.viewProps.get('hidden');\n    }\n    set hidden(hidden) {\n        this.controller.viewProps.set('hidden', hidden);\n    }\n    dispose() {\n        this.controller.viewProps.set('disposed', true);\n    }\n    importState(state) {\n        return this.controller.importState(state);\n    }\n    exportState() {\n        return this.controller.exportState();\n    }\n}\n\nclass TpEvent {\n    constructor(target) {\n        this.target = target;\n    }\n}\nclass TpChangeEvent extends TpEvent {\n    constructor(target, value, last) {\n        super(target);\n        this.value = value;\n        this.last = last !== null && last !== void 0 ? last : true;\n    }\n}\nclass TpFoldEvent extends TpEvent {\n    constructor(target, expanded) {\n        super(target);\n        this.expanded = expanded;\n    }\n}\nclass TpTabSelectEvent extends TpEvent {\n    constructor(target, index) {\n        super(target);\n        this.index = index;\n    }\n}\nclass TpMouseEvent extends TpEvent {\n    constructor(target, nativeEvent) {\n        super(target);\n        this.native = nativeEvent;\n    }\n}\n\nclass BindingApi extends BladeApi {\n    constructor(controller) {\n        super(controller);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.emitter_ = new Emitter();\n        this.controller.value.emitter.on('change', this.onValueChange_);\n    }\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    get key() {\n        return this.controller.value.binding.target.key;\n    }\n    get tag() {\n        return this.controller.tag;\n    }\n    set tag(tag) {\n        this.controller.tag = tag;\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        }, {\n            key: handler,\n        });\n        return this;\n    }\n    off(eventName, handler) {\n        this.emitter_.off(eventName, handler);\n        return this;\n    }\n    refresh() {\n        this.controller.value.fetch();\n    }\n    onValueChange_(ev) {\n        const value = this.controller.value;\n        this.emitter_.emit('change', new TpChangeEvent(this, forceCast(value.binding.target.read()), ev.options.last));\n    }\n}\n\nclass InputBindingValue {\n    constructor(value, binding) {\n        this.onValueBeforeChange_ = this.onValueBeforeChange_.bind(this);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.binding = binding;\n        this.value_ = value;\n        this.value_.emitter.on('beforechange', this.onValueBeforeChange_);\n        this.value_.emitter.on('change', this.onValueChange_);\n        this.emitter = new Emitter();\n    }\n    get rawValue() {\n        return this.value_.rawValue;\n    }\n    set rawValue(rawValue) {\n        this.value_.rawValue = rawValue;\n    }\n    setRawValue(rawValue, options) {\n        this.value_.setRawValue(rawValue, options);\n    }\n    fetch() {\n        this.value_.rawValue = this.binding.read();\n    }\n    push() {\n        this.binding.write(this.value_.rawValue);\n    }\n    onValueBeforeChange_(ev) {\n        this.emitter.emit('beforechange', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n    onValueChange_(ev) {\n        this.push();\n        this.emitter.emit('change', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n}\nfunction isInputBindingValue(v) {\n    if (!('binding' in v)) {\n        return false;\n    }\n    const b = v['binding'];\n    return isBinding(b) && 'read' in b && 'write' in b;\n}\n\nfunction parseObject(value, keyToParserMap) {\n    const keys = Object.keys(keyToParserMap);\n    const result = keys.reduce((tmp, key) => {\n        if (tmp === undefined) {\n            return undefined;\n        }\n        const parser = keyToParserMap[key];\n        const result = parser(value[key]);\n        return result.succeeded\n            ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n    }, {});\n    return forceCast(result);\n}\nfunction parseArray(value, parseItem) {\n    return value.reduce((tmp, item) => {\n        if (tmp === undefined) {\n            return undefined;\n        }\n        const result = parseItem(item);\n        if (!result.succeeded || result.value === undefined) {\n            return undefined;\n        }\n        return [...tmp, result.value];\n    }, []);\n}\nfunction isObject(value) {\n    if (value === null) {\n        return false;\n    }\n    return typeof value === 'object';\n}\nfunction createMicroParserBuilder(parse) {\n    return (optional) => (v) => {\n        if (!optional && v === undefined) {\n            return {\n                succeeded: false,\n                value: undefined,\n            };\n        }\n        if (optional && v === undefined) {\n            return {\n                succeeded: true,\n                value: undefined,\n            };\n        }\n        const result = parse(v);\n        return result !== undefined\n            ? {\n                succeeded: true,\n                value: result,\n            }\n            : {\n                succeeded: false,\n                value: undefined,\n            };\n    };\n}\nfunction createMicroParserBuilders(optional) {\n    return {\n        custom: (parse) => createMicroParserBuilder(parse)(optional),\n        boolean: createMicroParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n        number: createMicroParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n        string: createMicroParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n        function: createMicroParserBuilder((v) =>\n        typeof v === 'function' ? v : undefined)(optional),\n        constant: (value) => createMicroParserBuilder((v) => (v === value ? value : undefined))(optional),\n        raw: createMicroParserBuilder((v) => v)(optional),\n        object: (keyToParserMap) => createMicroParserBuilder((v) => {\n            if (!isObject(v)) {\n                return undefined;\n            }\n            return parseObject(v, keyToParserMap);\n        })(optional),\n        array: (itemParser) => createMicroParserBuilder((v) => {\n            if (!Array.isArray(v)) {\n                return undefined;\n            }\n            return parseArray(v, itemParser);\n        })(optional),\n    };\n}\nconst MicroParsers = {\n    optional: createMicroParserBuilders(true),\n    required: createMicroParserBuilders(false),\n};\nfunction parseRecord(value, keyToParserMap) {\n    const map = keyToParserMap(MicroParsers);\n    const result = MicroParsers.required.object(map)(value);\n    return result.succeeded ? result.value : undefined;\n}\n\nfunction importBladeState(state, superImport, parser, callback) {\n    if (superImport && !superImport(state)) {\n        return false;\n    }\n    const result = parseRecord(state, parser);\n    return result ? callback(result) : false;\n}\nfunction exportBladeState(superExport, thisState) {\n    var _a;\n    return deepMerge((_a = superExport === null || superExport === void 0 ? void 0 : superExport()) !== null && _a !== void 0 ? _a : {}, thisState);\n}\n\nfunction isValueBladeController(bc) {\n    return 'value' in bc;\n}\n\nfunction isBindingValue(v) {\n    if (!isObject$1(v) || !('binding' in v)) {\n        return false;\n    }\n    const b = v.binding;\n    return isBinding(b);\n}\n\nconst SVG_NS = 'http://www.w3.org/2000/svg';\nfunction forceReflow(element) {\n    element.offsetHeight;\n}\nfunction disableTransitionTemporarily(element, callback) {\n    const t = element.style.transition;\n    element.style.transition = 'none';\n    callback();\n    element.style.transition = t;\n}\nfunction supportsTouch(doc) {\n    return doc.ontouchstart !== undefined;\n}\nfunction getGlobalObject() {\n    return globalThis;\n}\nfunction getWindowDocument() {\n    const globalObj = forceCast(getGlobalObject());\n    return globalObj.document;\n}\nfunction getCanvasContext(canvasElement) {\n    const win = canvasElement.ownerDocument.defaultView;\n    if (!win) {\n        return null;\n    }\n    const isBrowser = 'document' in win;\n    return isBrowser\n        ? canvasElement.getContext('2d', {\n            willReadFrequently: true,\n        })\n        : null;\n}\nconst ICON_ID_TO_INNER_HTML_MAP = {\n    check: '<path d=\"M2 8l4 4l8 -8\"/>',\n    dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\n    p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>',\n};\nfunction createSvgIconElement(document, iconId) {\n    const elem = document.createElementNS(SVG_NS, 'svg');\n    elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n    return elem;\n}\nfunction insertElementAt(parentElement, element, index) {\n    parentElement.insertBefore(element, parentElement.children[index]);\n}\nfunction removeElement(element) {\n    if (element.parentElement) {\n        element.parentElement.removeChild(element);\n    }\n}\nfunction removeChildElements(element) {\n    while (element.children.length > 0) {\n        element.removeChild(element.children[0]);\n    }\n}\nfunction removeChildNodes(element) {\n    while (element.childNodes.length > 0) {\n        element.removeChild(element.childNodes[0]);\n    }\n}\nfunction findNextTarget(ev) {\n    if (ev.relatedTarget) {\n        return forceCast(ev.relatedTarget);\n    }\n    if ('explicitOriginalTarget' in ev) {\n        return ev.explicitOriginalTarget;\n    }\n    return null;\n}\n\nfunction bindValue(value, applyValue) {\n    value.emitter.on('change', (ev) => {\n        applyValue(ev.rawValue);\n    });\n    applyValue(value.rawValue);\n}\nfunction bindValueMap(valueMap, key, applyValue) {\n    bindValue(valueMap.value(key), applyValue);\n}\n\nconst PREFIX = 'tp';\nfunction ClassName(viewName) {\n    const fn = (opt_elementName, opt_modifier) => {\n        return [\n            PREFIX,\n            '-',\n            viewName,\n            'v',\n            opt_elementName ? `_${opt_elementName}` : '',\n            opt_modifier ? `-${opt_modifier}` : '',\n        ].join('');\n    };\n    return fn;\n}\n\nconst cn$r = ClassName('lbl');\nfunction createLabelNode(doc, label) {\n    const frag = doc.createDocumentFragment();\n    const lineNodes = label.split('\\n').map((line) => {\n        return doc.createTextNode(line);\n    });\n    lineNodes.forEach((lineNode, index) => {\n        if (index > 0) {\n            frag.appendChild(doc.createElement('br'));\n        }\n        frag.appendChild(lineNode);\n    });\n    return frag;\n}\nclass LabelView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$r());\n        config.viewProps.bindClassModifiers(this.element);\n        const labelElem = doc.createElement('div');\n        labelElem.classList.add(cn$r('l'));\n        bindValueMap(config.props, 'label', (value) => {\n            if (isEmpty(value)) {\n                this.element.classList.add(cn$r(undefined, 'nol'));\n            }\n            else {\n                this.element.classList.remove(cn$r(undefined, 'nol'));\n                removeChildNodes(labelElem);\n                labelElem.appendChild(createLabelNode(doc, value));\n            }\n        });\n        this.element.appendChild(labelElem);\n        this.labelElement = labelElem;\n        const valueElem = doc.createElement('div');\n        valueElem.classList.add(cn$r('v'));\n        this.element.appendChild(valueElem);\n        this.valueElement = valueElem;\n    }\n}\n\nclass LabelController {\n    constructor(doc, config) {\n        this.props = config.props;\n        this.valueController = config.valueController;\n        this.viewProps = config.valueController.viewProps;\n        this.view = new LabelView(doc, {\n            props: config.props,\n            viewProps: this.viewProps,\n        });\n        this.view.valueElement.appendChild(this.valueController.view.element);\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            label: p.optional.string,\n        }), (result) => {\n            this.props.set('label', result.label);\n            return true;\n        });\n    }\n    exportProps() {\n        return exportBladeState(null, {\n            label: this.props.get('label'),\n        });\n    }\n}\n\nfunction getAllBladePositions() {\n    return ['veryfirst', 'first', 'last', 'verylast'];\n}\n\nconst cn$q = ClassName('');\nconst POS_TO_CLASS_NAME_MAP = {\n    veryfirst: 'vfst',\n    first: 'fst',\n    last: 'lst',\n    verylast: 'vlst',\n};\nclass BladeController {\n    constructor(config) {\n        this.parent_ = null;\n        this.blade = config.blade;\n        this.view = config.view;\n        this.viewProps = config.viewProps;\n        const elem = this.view.element;\n        this.blade.value('positions').emitter.on('change', () => {\n            getAllBladePositions().forEach((pos) => {\n                elem.classList.remove(cn$q(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n            });\n            this.blade.get('positions').forEach((pos) => {\n                elem.classList.add(cn$q(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n            });\n        });\n        this.viewProps.handleDispose(() => {\n            removeElement(elem);\n        });\n    }\n    get parent() {\n        return this.parent_;\n    }\n    set parent(parent) {\n        this.parent_ = parent;\n        this.viewProps.set('parent', this.parent_ ? this.parent_.viewProps : null);\n    }\n    importState(state) {\n        return importBladeState(state, null, (p) => ({\n            disabled: p.required.boolean,\n            hidden: p.required.boolean,\n        }), (result) => {\n            this.viewProps.importState(result);\n            return true;\n        });\n    }\n    exportState() {\n        return exportBladeState(null, Object.assign({}, this.viewProps.exportState()));\n    }\n}\n\nclass LabeledValueBladeController extends BladeController {\n    constructor(doc, config) {\n        if (config.value !== config.valueController.value) {\n            throw TpError.shouldNeverHappen();\n        }\n        const viewProps = config.valueController.viewProps;\n        const lc = new LabelController(doc, {\n            blade: config.blade,\n            props: config.props,\n            valueController: config.valueController,\n        });\n        super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\n                props: config.props,\n                viewProps: viewProps,\n            }), viewProps: viewProps }));\n        this.labelController = lc;\n        this.value = config.value;\n        this.valueController = config.valueController;\n        this.view.valueElement.appendChild(this.valueController.view.element);\n    }\n    importState(state) {\n        return importBladeState(state, (s) => {\n            var _a, _b, _c;\n            return super.importState(s) &&\n                this.labelController.importProps(s) &&\n                ((_c = (_b = (_a = this.valueController).importProps) === null || _b === void 0 ? void 0 : _b.call(_a, state)) !== null && _c !== void 0 ? _c : true);\n        }, (p) => ({\n            value: p.optional.raw,\n        }), (result) => {\n            if (result.value) {\n                this.value.rawValue = result.value;\n            }\n            return true;\n        });\n    }\n    exportState() {\n        var _a, _b, _c;\n        return exportBladeState(() => super.exportState(), Object.assign(Object.assign({ value: this.value.rawValue }, this.labelController.exportProps()), ((_c = (_b = (_a = this.valueController).exportProps) === null || _b === void 0 ? void 0 : _b.call(_a)) !== null && _c !== void 0 ? _c : {})));\n    }\n}\n\nfunction excludeValue(state) {\n    const result = Object.assign({}, state);\n    delete result.value;\n    return result;\n}\nclass BindingController extends LabeledValueBladeController {\n    constructor(doc, config) {\n        super(doc, config);\n        this.tag = config.tag;\n    }\n    importState(state) {\n        return importBladeState(state,\n        (_s) => super.importState(excludeValue(state)), (p) => ({\n            tag: p.optional.string,\n        }), (result) => {\n            this.tag = result.tag;\n            return true;\n        });\n    }\n    exportState() {\n        return exportBladeState(() => excludeValue(super.exportState()), {\n            binding: {\n                key: this.value.binding.target.key,\n                value: this.value.binding.target.read(),\n            },\n            tag: this.tag,\n        });\n    }\n}\nfunction isBindingController(bc) {\n    return isValueBladeController(bc) && isBindingValue(bc.value);\n}\n\nclass InputBindingController extends BindingController {\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s), (p) => ({\n            binding: p.required.object({\n                value: p.required.raw,\n            }),\n        }), (result) => {\n            this.value.binding.inject(result.binding.value);\n            this.value.fetch();\n            return true;\n        });\n    }\n}\nfunction isInputBindingController(bc) {\n    return isValueBladeController(bc) && isInputBindingValue(bc.value);\n}\n\nfunction fillBuffer(buffer, bufferSize) {\n    while (buffer.length < bufferSize) {\n        buffer.push(undefined);\n    }\n}\nfunction initializeBuffer(bufferSize) {\n    const buffer = [];\n    fillBuffer(buffer, bufferSize);\n    return buffer;\n}\nfunction createTrimmedBuffer(buffer) {\n    const index = buffer.indexOf(undefined);\n    return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n}\nfunction createPushedBuffer(buffer, newValue) {\n    const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n    if (newBuffer.length > buffer.length) {\n        newBuffer.splice(0, newBuffer.length - buffer.length);\n    }\n    else {\n        fillBuffer(newBuffer, buffer.length);\n    }\n    return newBuffer;\n}\n\nclass MonitorBindingValue {\n    constructor(config) {\n        this.emitter = new Emitter();\n        this.onTick_ = this.onTick_.bind(this);\n        this.onValueBeforeChange_ = this.onValueBeforeChange_.bind(this);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.binding = config.binding;\n        this.value_ = createValue(initializeBuffer(config.bufferSize));\n        this.value_.emitter.on('beforechange', this.onValueBeforeChange_);\n        this.value_.emitter.on('change', this.onValueChange_);\n        this.ticker = config.ticker;\n        this.ticker.emitter.on('tick', this.onTick_);\n        this.fetch();\n    }\n    get rawValue() {\n        return this.value_.rawValue;\n    }\n    set rawValue(rawValue) {\n        this.value_.rawValue = rawValue;\n    }\n    setRawValue(rawValue, options) {\n        this.value_.setRawValue(rawValue, options);\n    }\n    fetch() {\n        this.value_.rawValue = createPushedBuffer(this.value_.rawValue, this.binding.read());\n    }\n    onTick_() {\n        this.fetch();\n    }\n    onValueBeforeChange_(ev) {\n        this.emitter.emit('beforechange', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n    onValueChange_(ev) {\n        this.emitter.emit('change', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n}\nfunction isMonitorBindingValue(v) {\n    if (!('binding' in v)) {\n        return false;\n    }\n    const b = v['binding'];\n    return isBinding(b) && 'read' in b && !('write' in b);\n}\n\nclass MonitorBindingController extends BindingController {\n    exportState() {\n        return exportBladeState(() => super.exportState(), {\n            binding: {\n                readonly: true,\n            },\n        });\n    }\n}\nfunction isMonitorBindingController(bc) {\n    return (isValueBladeController(bc) &&\n        isMonitorBindingValue(bc.value));\n}\n\nclass ButtonApi extends BladeApi {\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    get title() {\n        var _a;\n        return (_a = this.controller.buttonController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n    }\n    set title(title) {\n        this.controller.buttonController.props.set('title', title);\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        const emitter = this.controller.buttonController.emitter;\n        emitter.on(eventName, (ev) => {\n            bh(new TpMouseEvent(this, ev.nativeEvent));\n        });\n        return this;\n    }\n    off(eventName, handler) {\n        const emitter = this.controller.buttonController.emitter;\n        emitter.off(eventName, handler);\n        return this;\n    }\n}\n\nfunction applyClass(elem, className, active) {\n    if (active) {\n        elem.classList.add(className);\n    }\n    else {\n        elem.classList.remove(className);\n    }\n}\nfunction valueToClassName(elem, className) {\n    return (value) => {\n        applyClass(elem, className, value);\n    };\n}\nfunction bindValueToTextContent(value, elem) {\n    bindValue(value, (text) => {\n        elem.textContent = text !== null && text !== void 0 ? text : '';\n    });\n}\n\nconst cn$p = ClassName('btn');\nclass ButtonView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$p());\n        config.viewProps.bindClassModifiers(this.element);\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(cn$p('b'));\n        config.viewProps.bindDisabled(buttonElem);\n        this.element.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        const titleElem = doc.createElement('div');\n        titleElem.classList.add(cn$p('t'));\n        bindValueToTextContent(config.props.value('title'), titleElem);\n        this.buttonElement.appendChild(titleElem);\n    }\n}\n\nclass ButtonController {\n    constructor(doc, config) {\n        this.emitter = new Emitter();\n        this.onClick_ = this.onClick_.bind(this);\n        this.props = config.props;\n        this.viewProps = config.viewProps;\n        this.view = new ButtonView(doc, {\n            props: this.props,\n            viewProps: this.viewProps,\n        });\n        this.view.buttonElement.addEventListener('click', this.onClick_);\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            title: p.optional.string,\n        }), (result) => {\n            this.props.set('title', result.title);\n            return true;\n        });\n    }\n    exportProps() {\n        return exportBladeState(null, {\n            title: this.props.get('title'),\n        });\n    }\n    onClick_(ev) {\n        this.emitter.emit('click', {\n            nativeEvent: ev,\n            sender: this,\n        });\n    }\n}\n\nclass ButtonBladeController extends BladeController {\n    constructor(doc, config) {\n        const bc = new ButtonController(doc, {\n            props: config.buttonProps,\n            viewProps: config.viewProps,\n        });\n        const lc = new LabelController(doc, {\n            blade: config.blade,\n            props: config.labelProps,\n            valueController: bc,\n        });\n        super({\n            blade: config.blade,\n            view: lc.view,\n            viewProps: config.viewProps,\n        });\n        this.buttonController = bc;\n        this.labelController = lc;\n    }\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s) &&\n            this.buttonController.importProps(s) &&\n            this.labelController.importProps(s), () => ({}), () => true);\n    }\n    exportState() {\n        return exportBladeState(() => super.exportState(), Object.assign(Object.assign({}, this.buttonController.exportProps()), this.labelController.exportProps()));\n    }\n}\n\nclass Semver {\n    constructor(text) {\n        const [core, prerelease] = text.split('-');\n        const coreComps = core.split('.');\n        this.major = parseInt(coreComps[0], 10);\n        this.minor = parseInt(coreComps[1], 10);\n        this.patch = parseInt(coreComps[2], 10);\n        this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\n    }\n    toString() {\n        const core = [this.major, this.minor, this.patch].join('.');\n        return this.prerelease !== null ? [core, this.prerelease].join('-') : core;\n    }\n}\n\nconst VERSION$1 = new Semver('2.0.4');\n\nfunction createPlugin(plugin) {\n    return Object.assign({ core: VERSION$1 }, plugin);\n}\n\nconst ButtonBladePlugin = createPlugin({\n    id: 'button',\n    type: 'blade',\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            title: p.required.string,\n            view: p.required.constant('button'),\n            label: p.optional.string,\n        }));\n        return result ? { params: result } : null;\n    },\n    controller(args) {\n        return new ButtonBladeController(args.document, {\n            blade: args.blade,\n            buttonProps: ValueMap.fromObject({\n                title: args.params.title,\n            }),\n            labelProps: ValueMap.fromObject({\n                label: args.params.label,\n            }),\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (args.controller instanceof ButtonBladeController) {\n            return new ButtonApi(args.controller);\n        }\n        return null;\n    },\n});\n\nfunction addButtonAsBlade(api, params) {\n    return api.addBlade(Object.assign(Object.assign({}, params), { view: 'button' }));\n}\nfunction addFolderAsBlade(api, params) {\n    return api.addBlade(Object.assign(Object.assign({}, params), { view: 'folder' }));\n}\nfunction addTabAsBlade(api, params) {\n    return api.addBlade(Object.assign(Object.assign({}, params), { view: 'tab' }));\n}\n\nfunction isRefreshable(value) {\n    if (!isObject$1(value)) {\n        return false;\n    }\n    return 'refresh' in value && typeof value.refresh === 'function';\n}\n\nfunction createBindingTarget(obj, key) {\n    if (!BindingTarget.isBindable(obj)) {\n        throw TpError.notBindable();\n    }\n    return new BindingTarget(obj, key);\n}\nclass RackApi {\n    constructor(controller, pool) {\n        this.onRackValueChange_ = this.onRackValueChange_.bind(this);\n        this.controller_ = controller;\n        this.emitter_ = new Emitter();\n        this.pool_ = pool;\n        const rack = this.controller_.rack;\n        rack.emitter.on('valuechange', this.onRackValueChange_);\n    }\n    get children() {\n        return this.controller_.rack.children.map((bc) => this.pool_.createApi(bc));\n    }\n    addBinding(object, key, opt_params) {\n        const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n        const doc = this.controller_.element.ownerDocument;\n        const bc = this.pool_.createBinding(doc, createBindingTarget(object, key), params);\n        const api = this.pool_.createBindingApi(bc);\n        return this.add(api, params.index);\n    }\n    addFolder(params) {\n        return addFolderAsBlade(this, params);\n    }\n    addButton(params) {\n        return addButtonAsBlade(this, params);\n    }\n    addTab(params) {\n        return addTabAsBlade(this, params);\n    }\n    add(api, opt_index) {\n        const bc = api.controller;\n        this.controller_.rack.add(bc, opt_index);\n        return api;\n    }\n    remove(api) {\n        this.controller_.rack.remove(api.controller);\n    }\n    addBlade(params) {\n        const doc = this.controller_.element.ownerDocument;\n        const bc = this.pool_.createBlade(doc, params);\n        const api = this.pool_.createApi(bc);\n        return this.add(api, params.index);\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        }, {\n            key: handler,\n        });\n        return this;\n    }\n    off(eventName, handler) {\n        this.emitter_.off(eventName, handler);\n        return this;\n    }\n    refresh() {\n        this.children.forEach((c) => {\n            if (isRefreshable(c)) {\n                c.refresh();\n            }\n        });\n    }\n    onRackValueChange_(ev) {\n        const bc = ev.bladeController;\n        const api = this.pool_.createApi(bc);\n        const binding = isBindingValue(bc.value) ? bc.value.binding : null;\n        this.emitter_.emit('change', new TpChangeEvent(api, binding ? binding.target.read() : bc.value.rawValue, ev.options.last));\n    }\n}\n\nclass ContainerBladeApi extends BladeApi {\n    constructor(controller, pool) {\n        super(controller);\n        this.rackApi_ = new RackApi(controller.rackController, pool);\n    }\n    refresh() {\n        this.rackApi_.refresh();\n    }\n}\n\nclass ContainerBladeController extends BladeController {\n    constructor(config) {\n        super({\n            blade: config.blade,\n            view: config.view,\n            viewProps: config.rackController.viewProps,\n        });\n        this.rackController = config.rackController;\n    }\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s), (p) => ({\n            children: p.required.array(p.required.raw),\n        }), (result) => {\n            return this.rackController.rack.children.every((c, index) => {\n                return c.importState(result.children[index]);\n            });\n        });\n    }\n    exportState() {\n        return exportBladeState(() => super.exportState(), {\n            children: this.rackController.rack.children.map((c) => c.exportState()),\n        });\n    }\n}\nfunction isContainerBladeController(bc) {\n    return 'rackController' in bc;\n}\n\nclass NestedOrderedSet {\n    constructor(extract) {\n        this.emitter = new Emitter();\n        this.items_ = [];\n        this.cache_ = new Set();\n        this.onSubListAdd_ = this.onSubListAdd_.bind(this);\n        this.onSubListRemove_ = this.onSubListRemove_.bind(this);\n        this.extract_ = extract;\n    }\n    get items() {\n        return this.items_;\n    }\n    allItems() {\n        return Array.from(this.cache_);\n    }\n    find(callback) {\n        for (const item of this.allItems()) {\n            if (callback(item)) {\n                return item;\n            }\n        }\n        return null;\n    }\n    includes(item) {\n        return this.cache_.has(item);\n    }\n    add(item, opt_index) {\n        if (this.includes(item)) {\n            throw TpError.shouldNeverHappen();\n        }\n        const index = opt_index !== undefined ? opt_index : this.items_.length;\n        this.items_.splice(index, 0, item);\n        this.cache_.add(item);\n        const subList = this.extract_(item);\n        if (subList) {\n            subList.emitter.on('add', this.onSubListAdd_);\n            subList.emitter.on('remove', this.onSubListRemove_);\n            subList.allItems().forEach((i) => {\n                this.cache_.add(i);\n            });\n        }\n        this.emitter.emit('add', {\n            index: index,\n            item: item,\n            root: this,\n            target: this,\n        });\n    }\n    remove(item) {\n        const index = this.items_.indexOf(item);\n        if (index < 0) {\n            return;\n        }\n        this.items_.splice(index, 1);\n        this.cache_.delete(item);\n        const subList = this.extract_(item);\n        if (subList) {\n            subList.allItems().forEach((i) => {\n                this.cache_.delete(i);\n            });\n            subList.emitter.off('add', this.onSubListAdd_);\n            subList.emitter.off('remove', this.onSubListRemove_);\n        }\n        this.emitter.emit('remove', {\n            index: index,\n            item: item,\n            root: this,\n            target: this,\n        });\n    }\n    onSubListAdd_(ev) {\n        this.cache_.add(ev.item);\n        this.emitter.emit('add', {\n            index: ev.index,\n            item: ev.item,\n            root: this,\n            target: ev.target,\n        });\n    }\n    onSubListRemove_(ev) {\n        this.cache_.delete(ev.item);\n        this.emitter.emit('remove', {\n            index: ev.index,\n            item: ev.item,\n            root: this,\n            target: ev.target,\n        });\n    }\n}\n\nfunction findValueBladeController(bcs, v) {\n    for (let i = 0; i < bcs.length; i++) {\n        const bc = bcs[i];\n        if (isValueBladeController(bc) && bc.value === v) {\n            return bc;\n        }\n    }\n    return null;\n}\nfunction findSubBladeControllerSet(bc) {\n    return isContainerBladeController(bc)\n        ? bc.rackController.rack['bcSet_']\n        : null;\n}\nclass Rack {\n    constructor(config) {\n        var _a, _b;\n        this.emitter = new Emitter();\n        this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\n        this.onSetAdd_ = this.onSetAdd_.bind(this);\n        this.onSetRemove_ = this.onSetRemove_.bind(this);\n        this.onChildDispose_ = this.onChildDispose_.bind(this);\n        this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\n        this.onChildValueChange_ = this.onChildValueChange_.bind(this);\n        this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\n        this.onRackLayout_ = this.onRackLayout_.bind(this);\n        this.onRackValueChange_ = this.onRackValueChange_.bind(this);\n        this.blade_ = (_a = config.blade) !== null && _a !== void 0 ? _a : null;\n        (_b = this.blade_) === null || _b === void 0 ? void 0 : _b.value('positions').emitter.on('change', this.onBladePositionsChange_);\n        this.viewProps = config.viewProps;\n        this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\n        this.bcSet_.emitter.on('add', this.onSetAdd_);\n        this.bcSet_.emitter.on('remove', this.onSetRemove_);\n    }\n    get children() {\n        return this.bcSet_.items;\n    }\n    add(bc, opt_index) {\n        var _a;\n        (_a = bc.parent) === null || _a === void 0 ? void 0 : _a.remove(bc);\n        bc.parent = this;\n        this.bcSet_.add(bc, opt_index);\n    }\n    remove(bc) {\n        bc.parent = null;\n        this.bcSet_.remove(bc);\n    }\n    find(finder) {\n        return this.bcSet_.allItems().filter(finder);\n    }\n    onSetAdd_(ev) {\n        this.updatePositions_();\n        const root = ev.target === ev.root;\n        this.emitter.emit('add', {\n            bladeController: ev.item,\n            index: ev.index,\n            root: root,\n            sender: this,\n        });\n        if (!root) {\n            return;\n        }\n        const bc = ev.item;\n        bc.viewProps.emitter.on('change', this.onChildViewPropsChange_);\n        bc.blade\n            .value('positions')\n            .emitter.on('change', this.onChildPositionsChange_);\n        bc.viewProps.handleDispose(this.onChildDispose_);\n        if (isValueBladeController(bc)) {\n            bc.value.emitter.on('change', this.onChildValueChange_);\n        }\n        else if (isContainerBladeController(bc)) {\n            const rack = bc.rackController.rack;\n            if (rack) {\n                const emitter = rack.emitter;\n                emitter.on('layout', this.onRackLayout_);\n                emitter.on('valuechange', this.onRackValueChange_);\n            }\n        }\n    }\n    onSetRemove_(ev) {\n        this.updatePositions_();\n        const root = ev.target === ev.root;\n        this.emitter.emit('remove', {\n            bladeController: ev.item,\n            root: root,\n            sender: this,\n        });\n        if (!root) {\n            return;\n        }\n        const bc = ev.item;\n        if (isValueBladeController(bc)) {\n            bc.value.emitter.off('change', this.onChildValueChange_);\n        }\n        else if (isContainerBladeController(bc)) {\n            const rack = bc.rackController.rack;\n            if (rack) {\n                const emitter = rack.emitter;\n                emitter.off('layout', this.onRackLayout_);\n                emitter.off('valuechange', this.onRackValueChange_);\n            }\n        }\n    }\n    updatePositions_() {\n        const visibleItems = this.bcSet_.items.filter((bc) => !bc.viewProps.get('hidden'));\n        const firstVisibleItem = visibleItems[0];\n        const lastVisibleItem = visibleItems[visibleItems.length - 1];\n        this.bcSet_.items.forEach((bc) => {\n            const ps = [];\n            if (bc === firstVisibleItem) {\n                ps.push('first');\n                if (!this.blade_ ||\n                    this.blade_.get('positions').includes('veryfirst')) {\n                    ps.push('veryfirst');\n                }\n            }\n            if (bc === lastVisibleItem) {\n                ps.push('last');\n                if (!this.blade_ || this.blade_.get('positions').includes('verylast')) {\n                    ps.push('verylast');\n                }\n            }\n            bc.blade.set('positions', ps);\n        });\n    }\n    onChildPositionsChange_() {\n        this.updatePositions_();\n        this.emitter.emit('layout', {\n            sender: this,\n        });\n    }\n    onChildViewPropsChange_(_ev) {\n        this.updatePositions_();\n        this.emitter.emit('layout', {\n            sender: this,\n        });\n    }\n    onChildDispose_() {\n        const disposedUcs = this.bcSet_.items.filter((bc) => {\n            return bc.viewProps.get('disposed');\n        });\n        disposedUcs.forEach((bc) => {\n            this.bcSet_.remove(bc);\n        });\n    }\n    onChildValueChange_(ev) {\n        const bc = findValueBladeController(this.find(isValueBladeController), ev.sender);\n        if (!bc) {\n            throw TpError.alreadyDisposed();\n        }\n        this.emitter.emit('valuechange', {\n            bladeController: bc,\n            options: ev.options,\n            sender: this,\n        });\n    }\n    onRackLayout_(_) {\n        this.updatePositions_();\n        this.emitter.emit('layout', {\n            sender: this,\n        });\n    }\n    onRackValueChange_(ev) {\n        this.emitter.emit('valuechange', {\n            bladeController: ev.bladeController,\n            options: ev.options,\n            sender: this,\n        });\n    }\n    onBladePositionsChange_() {\n        this.updatePositions_();\n    }\n}\n\nclass RackController {\n    constructor(config) {\n        this.onRackAdd_ = this.onRackAdd_.bind(this);\n        this.onRackRemove_ = this.onRackRemove_.bind(this);\n        this.element = config.element;\n        this.viewProps = config.viewProps;\n        const rack = new Rack({\n            blade: config.root ? undefined : config.blade,\n            viewProps: config.viewProps,\n        });\n        rack.emitter.on('add', this.onRackAdd_);\n        rack.emitter.on('remove', this.onRackRemove_);\n        this.rack = rack;\n        this.viewProps.handleDispose(() => {\n            for (let i = this.rack.children.length - 1; i >= 0; i--) {\n                const bc = this.rack.children[i];\n                bc.viewProps.set('disposed', true);\n            }\n        });\n    }\n    onRackAdd_(ev) {\n        if (!ev.root) {\n            return;\n        }\n        insertElementAt(this.element, ev.bladeController.view.element, ev.index);\n    }\n    onRackRemove_(ev) {\n        if (!ev.root) {\n            return;\n        }\n        removeElement(ev.bladeController.view.element);\n    }\n}\n\nfunction createBlade() {\n    return new ValueMap({\n        positions: createValue([], {\n            equals: deepEqualsArray,\n        }),\n    });\n}\n\nclass Foldable extends ValueMap {\n    constructor(valueMap) {\n        super(valueMap);\n    }\n    static create(expanded) {\n        const coreObj = {\n            completed: true,\n            expanded: expanded,\n            expandedHeight: null,\n            shouldFixHeight: false,\n            temporaryExpanded: null,\n        };\n        const core = ValueMap.createCore(coreObj);\n        return new Foldable(core);\n    }\n    get styleExpanded() {\n        var _a;\n        return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n    }\n    get styleHeight() {\n        if (!this.styleExpanded) {\n            return '0';\n        }\n        const exHeight = this.get('expandedHeight');\n        if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n            return `${exHeight}px`;\n        }\n        return 'auto';\n    }\n    bindExpandedClass(elem, expandedClassName) {\n        const onExpand = () => {\n            const expanded = this.styleExpanded;\n            if (expanded) {\n                elem.classList.add(expandedClassName);\n            }\n            else {\n                elem.classList.remove(expandedClassName);\n            }\n        };\n        bindValueMap(this, 'expanded', onExpand);\n        bindValueMap(this, 'temporaryExpanded', onExpand);\n    }\n    cleanUpTransition() {\n        this.set('shouldFixHeight', false);\n        this.set('expandedHeight', null);\n        this.set('completed', true);\n    }\n}\nfunction computeExpandedFolderHeight(folder, containerElement) {\n    let height = 0;\n    disableTransitionTemporarily(containerElement, () => {\n        folder.set('expandedHeight', null);\n        folder.set('temporaryExpanded', true);\n        forceReflow(containerElement);\n        height = containerElement.clientHeight;\n        folder.set('temporaryExpanded', null);\n        forceReflow(containerElement);\n    });\n    return height;\n}\nfunction applyHeight(foldable, elem) {\n    elem.style.height = foldable.styleHeight;\n}\nfunction bindFoldable(foldable, elem) {\n    foldable.value('expanded').emitter.on('beforechange', () => {\n        foldable.set('completed', false);\n        if (isEmpty(foldable.get('expandedHeight'))) {\n            const h = computeExpandedFolderHeight(foldable, elem);\n            if (h > 0) {\n                foldable.set('expandedHeight', h);\n            }\n        }\n        foldable.set('shouldFixHeight', true);\n        forceReflow(elem);\n    });\n    foldable.emitter.on('change', () => {\n        applyHeight(foldable, elem);\n    });\n    applyHeight(foldable, elem);\n    elem.addEventListener('transitionend', (ev) => {\n        if (ev.propertyName !== 'height') {\n            return;\n        }\n        foldable.cleanUpTransition();\n    });\n}\n\nclass FolderApi extends ContainerBladeApi {\n    constructor(controller, pool) {\n        super(controller, pool);\n        this.emitter_ = new Emitter();\n        this.controller.foldable\n            .value('expanded')\n            .emitter.on('change', (ev) => {\n            this.emitter_.emit('fold', new TpFoldEvent(this, ev.sender.rawValue));\n        });\n        this.rackApi_.on('change', (ev) => {\n            this.emitter_.emit('change', ev);\n        });\n    }\n    get expanded() {\n        return this.controller.foldable.get('expanded');\n    }\n    set expanded(expanded) {\n        this.controller.foldable.set('expanded', expanded);\n    }\n    get title() {\n        return this.controller.props.get('title');\n    }\n    set title(title) {\n        this.controller.props.set('title', title);\n    }\n    get children() {\n        return this.rackApi_.children;\n    }\n    addBinding(object, key, opt_params) {\n        return this.rackApi_.addBinding(object, key, opt_params);\n    }\n    addFolder(params) {\n        return this.rackApi_.addFolder(params);\n    }\n    addButton(params) {\n        return this.rackApi_.addButton(params);\n    }\n    addTab(params) {\n        return this.rackApi_.addTab(params);\n    }\n    add(api, opt_index) {\n        return this.rackApi_.add(api, opt_index);\n    }\n    remove(api) {\n        this.rackApi_.remove(api);\n    }\n    addBlade(params) {\n        return this.rackApi_.addBlade(params);\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        }, {\n            key: handler,\n        });\n        return this;\n    }\n    off(eventName, handler) {\n        this.emitter_.off(eventName, handler);\n        return this;\n    }\n}\n\nconst bladeContainerClassName = ClassName('cnt');\n\nclass FolderView {\n    constructor(doc, config) {\n        var _a;\n        this.className_ = ClassName((_a = config.viewName) !== null && _a !== void 0 ? _a : 'fld');\n        this.element = doc.createElement('div');\n        this.element.classList.add(this.className_(), bladeContainerClassName());\n        config.viewProps.bindClassModifiers(this.element);\n        this.foldable_ = config.foldable;\n        this.foldable_.bindExpandedClass(this.element, this.className_(undefined, 'expanded'));\n        bindValueMap(this.foldable_, 'completed', valueToClassName(this.element, this.className_(undefined, 'cpl')));\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(this.className_('b'));\n        bindValueMap(config.props, 'title', (title) => {\n            if (isEmpty(title)) {\n                this.element.classList.add(this.className_(undefined, 'not'));\n            }\n            else {\n                this.element.classList.remove(this.className_(undefined, 'not'));\n            }\n        });\n        config.viewProps.bindDisabled(buttonElem);\n        this.element.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        const indentElem = doc.createElement('div');\n        indentElem.classList.add(this.className_('i'));\n        this.element.appendChild(indentElem);\n        const titleElem = doc.createElement('div');\n        titleElem.classList.add(this.className_('t'));\n        bindValueToTextContent(config.props.value('title'), titleElem);\n        this.buttonElement.appendChild(titleElem);\n        this.titleElement = titleElem;\n        const markElem = doc.createElement('div');\n        markElem.classList.add(this.className_('m'));\n        this.buttonElement.appendChild(markElem);\n        const containerElem = doc.createElement('div');\n        containerElem.classList.add(this.className_('c'));\n        this.element.appendChild(containerElem);\n        this.containerElement = containerElem;\n    }\n}\n\nclass FolderController extends ContainerBladeController {\n    constructor(doc, config) {\n        var _a;\n        const foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n        const view = new FolderView(doc, {\n            foldable: foldable,\n            props: config.props,\n            viewName: config.root ? 'rot' : undefined,\n            viewProps: config.viewProps,\n        });\n        super(Object.assign(Object.assign({}, config), { rackController: new RackController({\n                blade: config.blade,\n                element: view.containerElement,\n                root: config.root,\n                viewProps: config.viewProps,\n            }), view: view }));\n        this.onTitleClick_ = this.onTitleClick_.bind(this);\n        this.props = config.props;\n        this.foldable = foldable;\n        bindFoldable(this.foldable, this.view.containerElement);\n        this.rackController.rack.emitter.on('add', () => {\n            this.foldable.cleanUpTransition();\n        });\n        this.rackController.rack.emitter.on('remove', () => {\n            this.foldable.cleanUpTransition();\n        });\n        this.view.buttonElement.addEventListener('click', this.onTitleClick_);\n    }\n    get document() {\n        return this.view.element.ownerDocument;\n    }\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s), (p) => ({\n            expanded: p.required.boolean,\n            title: p.optional.string,\n        }), (result) => {\n            this.foldable.set('expanded', result.expanded);\n            this.props.set('title', result.title);\n            return true;\n        });\n    }\n    exportState() {\n        return exportBladeState(() => super.exportState(), {\n            expanded: this.foldable.get('expanded'),\n            title: this.props.get('title'),\n        });\n    }\n    onTitleClick_() {\n        this.foldable.set('expanded', !this.foldable.get('expanded'));\n    }\n}\n\nconst FolderBladePlugin = createPlugin({\n    id: 'folder',\n    type: 'blade',\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            title: p.required.string,\n            view: p.required.constant('folder'),\n            expanded: p.optional.boolean,\n        }));\n        return result ? { params: result } : null;\n    },\n    controller(args) {\n        return new FolderController(args.document, {\n            blade: args.blade,\n            expanded: args.params.expanded,\n            props: ValueMap.fromObject({\n                title: args.params.title,\n            }),\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (!(args.controller instanceof FolderController)) {\n            return null;\n        }\n        return new FolderApi(args.controller, args.pool);\n    },\n});\n\nconst cn$o = ClassName('');\nfunction valueToModifier(elem, modifier) {\n    return valueToClassName(elem, cn$o(undefined, modifier));\n}\nclass ViewProps extends ValueMap {\n    constructor(valueMap) {\n        var _a;\n        super(valueMap);\n        this.onDisabledChange_ = this.onDisabledChange_.bind(this);\n        this.onParentChange_ = this.onParentChange_.bind(this);\n        this.onParentGlobalDisabledChange_ =\n            this.onParentGlobalDisabledChange_.bind(this);\n        [this.globalDisabled_, this.setGlobalDisabled_] = createReadonlyValue(createValue(this.getGlobalDisabled_()));\n        this.value('disabled').emitter.on('change', this.onDisabledChange_);\n        this.value('parent').emitter.on('change', this.onParentChange_);\n        (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n    }\n    static create(opt_initialValue) {\n        var _a, _b, _c;\n        const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n        return new ViewProps(ValueMap.createCore({\n            disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n            disposed: false,\n            hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n            parent: (_c = initialValue.parent) !== null && _c !== void 0 ? _c : null,\n        }));\n    }\n    get globalDisabled() {\n        return this.globalDisabled_;\n    }\n    bindClassModifiers(elem) {\n        bindValue(this.globalDisabled_, valueToModifier(elem, 'disabled'));\n        bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n    }\n    bindDisabled(target) {\n        bindValue(this.globalDisabled_, (disabled) => {\n            target.disabled = disabled;\n        });\n    }\n    bindTabIndex(elem) {\n        bindValue(this.globalDisabled_, (disabled) => {\n            elem.tabIndex = disabled ? -1 : 0;\n        });\n    }\n    handleDispose(callback) {\n        this.value('disposed').emitter.on('change', (disposed) => {\n            if (disposed) {\n                callback();\n            }\n        });\n    }\n    importState(state) {\n        this.set('disabled', state.disabled);\n        this.set('hidden', state.hidden);\n    }\n    exportState() {\n        return {\n            disabled: this.get('disabled'),\n            hidden: this.get('hidden'),\n        };\n    }\n    getGlobalDisabled_() {\n        const parent = this.get('parent');\n        const parentDisabled = parent ? parent.globalDisabled.rawValue : false;\n        return parentDisabled || this.get('disabled');\n    }\n    updateGlobalDisabled_() {\n        this.setGlobalDisabled_(this.getGlobalDisabled_());\n    }\n    onDisabledChange_() {\n        this.updateGlobalDisabled_();\n    }\n    onParentGlobalDisabledChange_() {\n        this.updateGlobalDisabled_();\n    }\n    onParentChange_(ev) {\n        var _a;\n        const prevParent = ev.previousRawValue;\n        prevParent === null || prevParent === void 0 ? void 0 : prevParent.globalDisabled.emitter.off('change', this.onParentGlobalDisabledChange_);\n        (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n        this.updateGlobalDisabled_();\n    }\n}\n\nconst cn$n = ClassName('tbp');\nclass TabPageView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$n());\n        config.viewProps.bindClassModifiers(this.element);\n        const containerElem = doc.createElement('div');\n        containerElem.classList.add(cn$n('c'));\n        this.element.appendChild(containerElem);\n        this.containerElement = containerElem;\n    }\n}\n\nconst cn$m = ClassName('tbi');\nclass TabItemView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$m());\n        config.viewProps.bindClassModifiers(this.element);\n        bindValueMap(config.props, 'selected', (selected) => {\n            if (selected) {\n                this.element.classList.add(cn$m(undefined, 'sel'));\n            }\n            else {\n                this.element.classList.remove(cn$m(undefined, 'sel'));\n            }\n        });\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(cn$m('b'));\n        config.viewProps.bindDisabled(buttonElem);\n        this.element.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        const titleElem = doc.createElement('div');\n        titleElem.classList.add(cn$m('t'));\n        bindValueToTextContent(config.props.value('title'), titleElem);\n        this.buttonElement.appendChild(titleElem);\n        this.titleElement = titleElem;\n    }\n}\n\nclass TabItemController {\n    constructor(doc, config) {\n        this.emitter = new Emitter();\n        this.onClick_ = this.onClick_.bind(this);\n        this.props = config.props;\n        this.viewProps = config.viewProps;\n        this.view = new TabItemView(doc, {\n            props: config.props,\n            viewProps: config.viewProps,\n        });\n        this.view.buttonElement.addEventListener('click', this.onClick_);\n    }\n    onClick_() {\n        this.emitter.emit('click', {\n            sender: this,\n        });\n    }\n}\n\nclass TabPageController extends ContainerBladeController {\n    constructor(doc, config) {\n        const view = new TabPageView(doc, {\n            viewProps: config.viewProps,\n        });\n        super(Object.assign(Object.assign({}, config), { rackController: new RackController({\n                blade: config.blade,\n                element: view.containerElement,\n                viewProps: config.viewProps,\n            }), view: view }));\n        this.onItemClick_ = this.onItemClick_.bind(this);\n        this.ic_ = new TabItemController(doc, {\n            props: config.itemProps,\n            viewProps: ViewProps.create(),\n        });\n        this.ic_.emitter.on('click', this.onItemClick_);\n        this.props = config.props;\n        bindValueMap(this.props, 'selected', (selected) => {\n            this.itemController.props.set('selected', selected);\n            this.viewProps.set('hidden', !selected);\n        });\n    }\n    get itemController() {\n        return this.ic_;\n    }\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s), (p) => ({\n            selected: p.required.boolean,\n            title: p.required.string,\n        }), (result) => {\n            this.ic_.props.set('selected', result.selected);\n            this.ic_.props.set('title', result.title);\n            return true;\n        });\n    }\n    exportState() {\n        return exportBladeState(() => super.exportState(), {\n            selected: this.ic_.props.get('selected'),\n            title: this.ic_.props.get('title'),\n        });\n    }\n    onItemClick_() {\n        this.props.set('selected', true);\n    }\n}\n\nclass TabApi extends ContainerBladeApi {\n    constructor(controller, pool) {\n        super(controller, pool);\n        this.emitter_ = new Emitter();\n        this.onSelect_ = this.onSelect_.bind(this);\n        this.pool_ = pool;\n        this.rackApi_.on('change', (ev) => {\n            this.emitter_.emit('change', ev);\n        });\n        this.controller.tab.selectedIndex.emitter.on('change', this.onSelect_);\n    }\n    get pages() {\n        return this.rackApi_.children;\n    }\n    addPage(params) {\n        const doc = this.controller.view.element.ownerDocument;\n        const pc = new TabPageController(doc, {\n            blade: createBlade(),\n            itemProps: ValueMap.fromObject({\n                selected: false,\n                title: params.title,\n            }),\n            props: ValueMap.fromObject({\n                selected: false,\n            }),\n            viewProps: ViewProps.create(),\n        });\n        const papi = this.pool_.createApi(pc);\n        return this.rackApi_.add(papi, params.index);\n    }\n    removePage(index) {\n        this.rackApi_.remove(this.rackApi_.children[index]);\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        }, {\n            key: handler,\n        });\n        return this;\n    }\n    off(eventName, handler) {\n        this.emitter_.off(eventName, handler);\n        return this;\n    }\n    onSelect_(ev) {\n        this.emitter_.emit('select', new TpTabSelectEvent(this, ev.rawValue));\n    }\n}\n\nclass TabPageApi extends ContainerBladeApi {\n    get title() {\n        var _a;\n        return (_a = this.controller.itemController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n    }\n    set title(title) {\n        this.controller.itemController.props.set('title', title);\n    }\n    get selected() {\n        return this.controller.props.get('selected');\n    }\n    set selected(selected) {\n        this.controller.props.set('selected', selected);\n    }\n    get children() {\n        return this.rackApi_.children;\n    }\n    addButton(params) {\n        return this.rackApi_.addButton(params);\n    }\n    addFolder(params) {\n        return this.rackApi_.addFolder(params);\n    }\n    addTab(params) {\n        return this.rackApi_.addTab(params);\n    }\n    add(api, opt_index) {\n        this.rackApi_.add(api, opt_index);\n    }\n    remove(api) {\n        this.rackApi_.remove(api);\n    }\n    addBinding(object, key, opt_params) {\n        return this.rackApi_.addBinding(object, key, opt_params);\n    }\n    addBlade(params) {\n        return this.rackApi_.addBlade(params);\n    }\n}\n\nconst INDEX_NOT_SELECTED = -1;\nclass Tab {\n    constructor() {\n        this.onItemSelectedChange_ = this.onItemSelectedChange_.bind(this);\n        this.empty = createValue(true);\n        this.selectedIndex = createValue(INDEX_NOT_SELECTED);\n        this.items_ = [];\n    }\n    add(item, opt_index) {\n        const index = opt_index !== null && opt_index !== void 0 ? opt_index : this.items_.length;\n        this.items_.splice(index, 0, item);\n        item.emitter.on('change', this.onItemSelectedChange_);\n        this.keepSelection_();\n    }\n    remove(item) {\n        const index = this.items_.indexOf(item);\n        if (index < 0) {\n            return;\n        }\n        this.items_.splice(index, 1);\n        item.emitter.off('change', this.onItemSelectedChange_);\n        this.keepSelection_();\n    }\n    keepSelection_() {\n        if (this.items_.length === 0) {\n            this.selectedIndex.rawValue = INDEX_NOT_SELECTED;\n            this.empty.rawValue = true;\n            return;\n        }\n        const firstSelIndex = this.items_.findIndex((s) => s.rawValue);\n        if (firstSelIndex < 0) {\n            this.items_.forEach((s, i) => {\n                s.rawValue = i === 0;\n            });\n            this.selectedIndex.rawValue = 0;\n        }\n        else {\n            this.items_.forEach((s, i) => {\n                s.rawValue = i === firstSelIndex;\n            });\n            this.selectedIndex.rawValue = firstSelIndex;\n        }\n        this.empty.rawValue = false;\n    }\n    onItemSelectedChange_(ev) {\n        if (ev.rawValue) {\n            const index = this.items_.findIndex((s) => s === ev.sender);\n            this.items_.forEach((s, i) => {\n                s.rawValue = i === index;\n            });\n            this.selectedIndex.rawValue = index;\n        }\n        else {\n            this.keepSelection_();\n        }\n    }\n}\n\nconst cn$l = ClassName('tab');\nclass TabView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$l(), bladeContainerClassName());\n        config.viewProps.bindClassModifiers(this.element);\n        bindValue(config.empty, valueToClassName(this.element, cn$l(undefined, 'nop')));\n        const titleElem = doc.createElement('div');\n        titleElem.classList.add(cn$l('t'));\n        this.element.appendChild(titleElem);\n        this.itemsElement = titleElem;\n        const indentElem = doc.createElement('div');\n        indentElem.classList.add(cn$l('i'));\n        this.element.appendChild(indentElem);\n        const contentsElem = doc.createElement('div');\n        contentsElem.classList.add(cn$l('c'));\n        this.element.appendChild(contentsElem);\n        this.contentsElement = contentsElem;\n    }\n}\n\nclass TabController extends ContainerBladeController {\n    constructor(doc, config) {\n        const tab = new Tab();\n        const view = new TabView(doc, {\n            empty: tab.empty,\n            viewProps: config.viewProps,\n        });\n        super({\n            blade: config.blade,\n            rackController: new RackController({\n                blade: config.blade,\n                element: view.contentsElement,\n                viewProps: config.viewProps,\n            }),\n            view: view,\n        });\n        this.onRackAdd_ = this.onRackAdd_.bind(this);\n        this.onRackRemove_ = this.onRackRemove_.bind(this);\n        const rack = this.rackController.rack;\n        rack.emitter.on('add', this.onRackAdd_);\n        rack.emitter.on('remove', this.onRackRemove_);\n        this.tab = tab;\n    }\n    add(pc, opt_index) {\n        this.rackController.rack.add(pc, opt_index);\n    }\n    remove(index) {\n        this.rackController.rack.remove(this.rackController.rack.children[index]);\n    }\n    onRackAdd_(ev) {\n        if (!ev.root) {\n            return;\n        }\n        const pc = ev.bladeController;\n        insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\n        pc.itemController.viewProps.set('parent', this.viewProps);\n        this.tab.add(pc.props.value('selected'));\n    }\n    onRackRemove_(ev) {\n        if (!ev.root) {\n            return;\n        }\n        const pc = ev.bladeController;\n        removeElement(pc.itemController.view.element);\n        pc.itemController.viewProps.set('parent', null);\n        this.tab.remove(pc.props.value('selected'));\n    }\n}\n\nconst TabBladePlugin = createPlugin({\n    id: 'tab',\n    type: 'blade',\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            pages: p.required.array(p.required.object({ title: p.required.string })),\n            view: p.required.constant('tab'),\n        }));\n        if (!result || result.pages.length === 0) {\n            return null;\n        }\n        return { params: result };\n    },\n    controller(args) {\n        const c = new TabController(args.document, {\n            blade: args.blade,\n            viewProps: args.viewProps,\n        });\n        args.params.pages.forEach((p) => {\n            const pc = new TabPageController(args.document, {\n                blade: createBlade(),\n                itemProps: ValueMap.fromObject({\n                    selected: false,\n                    title: p.title,\n                }),\n                props: ValueMap.fromObject({\n                    selected: false,\n                }),\n                viewProps: ViewProps.create(),\n            });\n            c.add(pc);\n        });\n        return c;\n    },\n    api(args) {\n        if (args.controller instanceof TabController) {\n            return new TabApi(args.controller, args.pool);\n        }\n        if (args.controller instanceof TabPageController) {\n            return new TabPageApi(args.controller, args.pool);\n        }\n        return null;\n    },\n});\n\nfunction createBladeController(plugin, args) {\n    const ac = plugin.accept(args.params);\n    if (!ac) {\n        return null;\n    }\n    const params = parseRecord(args.params, (p) => ({\n        disabled: p.optional.boolean,\n        hidden: p.optional.boolean,\n    }));\n    return plugin.controller({\n        blade: createBlade(),\n        document: args.document,\n        params: forceCast(Object.assign(Object.assign({}, ac.params), { disabled: params === null || params === void 0 ? void 0 : params.disabled, hidden: params === null || params === void 0 ? void 0 : params.hidden })),\n        viewProps: ViewProps.create({\n            disabled: params === null || params === void 0 ? void 0 : params.disabled,\n            hidden: params === null || params === void 0 ? void 0 : params.hidden,\n        }),\n    });\n}\n\nclass ListInputBindingApi extends BindingApi {\n    get options() {\n        return this.controller.valueController.props.get('options');\n    }\n    set options(options) {\n        this.controller.valueController.props.set('options', options);\n    }\n}\n\nclass ManualTicker {\n    constructor() {\n        this.disabled = false;\n        this.emitter = new Emitter();\n    }\n    dispose() { }\n    tick() {\n        if (this.disabled) {\n            return;\n        }\n        this.emitter.emit('tick', {\n            sender: this,\n        });\n    }\n}\n\nclass IntervalTicker {\n    constructor(doc, interval) {\n        this.disabled_ = false;\n        this.timerId_ = null;\n        this.onTick_ = this.onTick_.bind(this);\n        this.doc_ = doc;\n        this.emitter = new Emitter();\n        this.interval_ = interval;\n        this.setTimer_();\n    }\n    get disabled() {\n        return this.disabled_;\n    }\n    set disabled(inactive) {\n        this.disabled_ = inactive;\n        if (this.disabled_) {\n            this.clearTimer_();\n        }\n        else {\n            this.setTimer_();\n        }\n    }\n    dispose() {\n        this.clearTimer_();\n    }\n    clearTimer_() {\n        if (this.timerId_ === null) {\n            return;\n        }\n        const win = this.doc_.defaultView;\n        if (win) {\n            win.clearInterval(this.timerId_);\n        }\n        this.timerId_ = null;\n    }\n    setTimer_() {\n        this.clearTimer_();\n        if (this.interval_ <= 0) {\n            return;\n        }\n        const win = this.doc_.defaultView;\n        if (win) {\n            this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n        }\n    }\n    onTick_() {\n        if (this.disabled_) {\n            return;\n        }\n        this.emitter.emit('tick', {\n            sender: this,\n        });\n    }\n}\n\nclass CompositeConstraint {\n    constructor(constraints) {\n        this.constraints = constraints;\n    }\n    constrain(value) {\n        return this.constraints.reduce((result, c) => {\n            return c.constrain(result);\n        }, value);\n    }\n}\nfunction findConstraint(c, constraintClass) {\n    if (c instanceof constraintClass) {\n        return c;\n    }\n    if (c instanceof CompositeConstraint) {\n        const result = c.constraints.reduce((tmpResult, sc) => {\n            if (tmpResult) {\n                return tmpResult;\n            }\n            return sc instanceof constraintClass ? sc : null;\n        }, null);\n        if (result) {\n            return result;\n        }\n    }\n    return null;\n}\n\nclass ListConstraint {\n    constructor(options) {\n        this.values = ValueMap.fromObject({\n            options: options,\n        });\n    }\n    constrain(value) {\n        const opts = this.values.get('options');\n        if (opts.length === 0) {\n            return value;\n        }\n        const matched = opts.filter((item) => {\n            return item.value === value;\n        }).length > 0;\n        return matched ? value : opts[0].value;\n    }\n}\n\nfunction parseListOptions(value) {\n    var _a;\n    const p = MicroParsers;\n    if (Array.isArray(value)) {\n        return (_a = parseRecord({ items: value }, (p) => ({\n            items: p.required.array(p.required.object({\n                text: p.required.string,\n                value: p.required.raw,\n            })),\n        }))) === null || _a === void 0 ? void 0 : _a.items;\n    }\n    if (typeof value === 'object') {\n        return p.required.raw(value)\n            .value;\n    }\n    return undefined;\n}\nfunction normalizeListOptions(options) {\n    if (Array.isArray(options)) {\n        return options;\n    }\n    const items = [];\n    Object.keys(options).forEach((text) => {\n        items.push({ text: text, value: options[text] });\n    });\n    return items;\n}\nfunction createListConstraint(options) {\n    return !isEmpty(options)\n        ? new ListConstraint(normalizeListOptions(forceCast(options)))\n        : null;\n}\n\nconst cn$k = ClassName('lst');\nclass ListView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.props_ = config.props;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$k());\n        config.viewProps.bindClassModifiers(this.element);\n        const selectElem = doc.createElement('select');\n        selectElem.classList.add(cn$k('s'));\n        config.viewProps.bindDisabled(selectElem);\n        this.element.appendChild(selectElem);\n        this.selectElement = selectElem;\n        const markElem = doc.createElement('div');\n        markElem.classList.add(cn$k('m'));\n        markElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n        this.element.appendChild(markElem);\n        config.value.emitter.on('change', this.onValueChange_);\n        this.value_ = config.value;\n        bindValueMap(this.props_, 'options', (opts) => {\n            removeChildElements(this.selectElement);\n            opts.forEach((item) => {\n                const optionElem = doc.createElement('option');\n                optionElem.textContent = item.text;\n                this.selectElement.appendChild(optionElem);\n            });\n            this.update_();\n        });\n    }\n    update_() {\n        const values = this.props_.get('options').map((o) => o.value);\n        this.selectElement.selectedIndex = values.indexOf(this.value_.rawValue);\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass ListController {\n    constructor(doc, config) {\n        this.onSelectChange_ = this.onSelectChange_.bind(this);\n        this.props = config.props;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new ListView(doc, {\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.selectElement.addEventListener('change', this.onSelectChange_);\n    }\n    onSelectChange_(e) {\n        const selectElem = forceCast(e.currentTarget);\n        this.value.rawValue =\n            this.props.get('options')[selectElem.selectedIndex].value;\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            options: p.required.custom(parseListOptions),\n        }), (result) => {\n            this.props.set('options', normalizeListOptions(result.options));\n            return true;\n        });\n    }\n    exportProps() {\n        return exportBladeState(null, {\n            options: this.props.get('options'),\n        });\n    }\n}\n\nconst cn$j = ClassName('pop');\nclass PopupView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$j());\n        config.viewProps.bindClassModifiers(this.element);\n        bindValue(config.shows, valueToClassName(this.element, cn$j(undefined, 'v')));\n    }\n}\n\nclass PopupController {\n    constructor(doc, config) {\n        this.shows = createValue(false);\n        this.viewProps = config.viewProps;\n        this.view = new PopupView(doc, {\n            shows: this.shows,\n            viewProps: this.viewProps,\n        });\n    }\n}\n\nconst cn$i = ClassName('txt');\nclass TextView {\n    constructor(doc, config) {\n        this.onChange_ = this.onChange_.bind(this);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$i());\n        config.viewProps.bindClassModifiers(this.element);\n        this.props_ = config.props;\n        this.props_.emitter.on('change', this.onChange_);\n        const inputElem = doc.createElement('input');\n        inputElem.classList.add(cn$i('i'));\n        inputElem.type = 'text';\n        config.viewProps.bindDisabled(inputElem);\n        this.element.appendChild(inputElem);\n        this.inputElement = inputElem;\n        config.value.emitter.on('change', this.onChange_);\n        this.value_ = config.value;\n        this.refresh();\n    }\n    refresh() {\n        const formatter = this.props_.get('formatter');\n        this.inputElement.value = formatter(this.value_.rawValue);\n    }\n    onChange_() {\n        this.refresh();\n    }\n}\n\nclass TextController {\n    constructor(doc, config) {\n        this.onInputChange_ = this.onInputChange_.bind(this);\n        this.parser_ = config.parser;\n        this.props = config.props;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new TextView(doc, {\n            props: config.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.inputElement.addEventListener('change', this.onInputChange_);\n    }\n    onInputChange_(e) {\n        const inputElem = forceCast(e.currentTarget);\n        const value = inputElem.value;\n        const parsedValue = this.parser_(value);\n        if (!isEmpty(parsedValue)) {\n            this.value.rawValue = parsedValue;\n        }\n        this.view.refresh();\n    }\n}\n\nfunction boolToString(value) {\n    return String(value);\n}\nfunction boolFromUnknown(value) {\n    if (value === 'false') {\n        return false;\n    }\n    return !!value;\n}\nfunction BooleanFormatter(value) {\n    return boolToString(value);\n}\n\nfunction composeParsers(parsers) {\n    return (text) => {\n        return parsers.reduce((result, parser) => {\n            if (result !== null) {\n                return result;\n            }\n            return parser(text);\n        }, null);\n    };\n}\n\nconst innerFormatter = createNumberFormatter(0);\nfunction formatPercentage(value) {\n    return innerFormatter(value) + '%';\n}\n\nfunction stringFromUnknown(value) {\n    return String(value);\n}\nfunction formatString(value) {\n    return value;\n}\n\nfunction connectValues({ primary, secondary, forward, backward, }) {\n    let changing = false;\n    function preventFeedback(callback) {\n        if (changing) {\n            return;\n        }\n        changing = true;\n        callback();\n        changing = false;\n    }\n    primary.emitter.on('change', (ev) => {\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), ev.options);\n        });\n    });\n    secondary.emitter.on('change', (ev) => {\n        preventFeedback(() => {\n            primary.setRawValue(backward(primary.rawValue, secondary.rawValue), ev.options);\n        });\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), ev.options);\n        });\n    });\n    preventFeedback(() => {\n        secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), {\n            forceEmit: false,\n            last: true,\n        });\n    });\n}\n\nfunction getStepForKey(keyScale, keys) {\n    const step = keyScale * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n    if (keys.upKey) {\n        return +step;\n    }\n    else if (keys.downKey) {\n        return -step;\n    }\n    return 0;\n}\nfunction getVerticalStepKeys(ev) {\n    return {\n        altKey: ev.altKey,\n        downKey: ev.key === 'ArrowDown',\n        shiftKey: ev.shiftKey,\n        upKey: ev.key === 'ArrowUp',\n    };\n}\nfunction getHorizontalStepKeys(ev) {\n    return {\n        altKey: ev.altKey,\n        downKey: ev.key === 'ArrowLeft',\n        shiftKey: ev.shiftKey,\n        upKey: ev.key === 'ArrowRight',\n    };\n}\nfunction isVerticalArrowKey(key) {\n    return key === 'ArrowUp' || key === 'ArrowDown';\n}\nfunction isArrowKey(key) {\n    return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n}\n\nfunction computeOffset$1(ev, elem) {\n    var _a, _b;\n    const win = elem.ownerDocument.defaultView;\n    const rect = elem.getBoundingClientRect();\n    return {\n        x: ev.pageX - (((_a = (win && win.scrollX)) !== null && _a !== void 0 ? _a : 0) + rect.left),\n        y: ev.pageY - (((_b = (win && win.scrollY)) !== null && _b !== void 0 ? _b : 0) + rect.top),\n    };\n}\nclass PointerHandler {\n    constructor(element) {\n        this.lastTouch_ = null;\n        this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n        this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n        this.onMouseDown_ = this.onMouseDown_.bind(this);\n        this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n        this.onTouchMove_ = this.onTouchMove_.bind(this);\n        this.onTouchStart_ = this.onTouchStart_.bind(this);\n        this.elem_ = element;\n        this.emitter = new Emitter();\n        element.addEventListener('touchstart', this.onTouchStart_, {\n            passive: false,\n        });\n        element.addEventListener('touchmove', this.onTouchMove_, {\n            passive: true,\n        });\n        element.addEventListener('touchend', this.onTouchEnd_);\n        element.addEventListener('mousedown', this.onMouseDown_);\n    }\n    computePosition_(offset) {\n        const rect = this.elem_.getBoundingClientRect();\n        return {\n            bounds: {\n                width: rect.width,\n                height: rect.height,\n            },\n            point: offset\n                ? {\n                    x: offset.x,\n                    y: offset.y,\n                }\n                : null,\n        };\n    }\n    onMouseDown_(ev) {\n        var _a;\n        ev.preventDefault();\n        (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n        const doc = this.elem_.ownerDocument;\n        doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n        doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n        this.emitter.emit('down', {\n            altKey: ev.altKey,\n            data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n    }\n    onDocumentMouseMove_(ev) {\n        this.emitter.emit('move', {\n            altKey: ev.altKey,\n            data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n    }\n    onDocumentMouseUp_(ev) {\n        const doc = this.elem_.ownerDocument;\n        doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n        doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n        this.emitter.emit('up', {\n            altKey: ev.altKey,\n            data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n    }\n    onTouchStart_(ev) {\n        ev.preventDefault();\n        const touch = ev.targetTouches.item(0);\n        const rect = this.elem_.getBoundingClientRect();\n        this.emitter.emit('down', {\n            altKey: ev.altKey,\n            data: this.computePosition_(touch\n                ? {\n                    x: touch.clientX - rect.left,\n                    y: touch.clientY - rect.top,\n                }\n                : undefined),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n        this.lastTouch_ = touch;\n    }\n    onTouchMove_(ev) {\n        const touch = ev.targetTouches.item(0);\n        const rect = this.elem_.getBoundingClientRect();\n        this.emitter.emit('move', {\n            altKey: ev.altKey,\n            data: this.computePosition_(touch\n                ? {\n                    x: touch.clientX - rect.left,\n                    y: touch.clientY - rect.top,\n                }\n                : undefined),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n        this.lastTouch_ = touch;\n    }\n    onTouchEnd_(ev) {\n        var _a;\n        const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n        const rect = this.elem_.getBoundingClientRect();\n        this.emitter.emit('up', {\n            altKey: ev.altKey,\n            data: this.computePosition_(touch\n                ? {\n                    x: touch.clientX - rect.left,\n                    y: touch.clientY - rect.top,\n                }\n                : undefined),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n    }\n}\n\nconst cn$h = ClassName('txt');\nclass NumberTextView {\n    constructor(doc, config) {\n        this.onChange_ = this.onChange_.bind(this);\n        this.props_ = config.props;\n        this.props_.emitter.on('change', this.onChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$h(), cn$h(undefined, 'num'));\n        if (config.arrayPosition) {\n            this.element.classList.add(cn$h(undefined, config.arrayPosition));\n        }\n        config.viewProps.bindClassModifiers(this.element);\n        const inputElem = doc.createElement('input');\n        inputElem.classList.add(cn$h('i'));\n        inputElem.type = 'text';\n        config.viewProps.bindDisabled(inputElem);\n        this.element.appendChild(inputElem);\n        this.inputElement = inputElem;\n        this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n        this.dragging_ = config.dragging;\n        this.dragging_.emitter.on('change', this.onDraggingChange_);\n        this.element.classList.add(cn$h());\n        this.inputElement.classList.add(cn$h('i'));\n        const knobElem = doc.createElement('div');\n        knobElem.classList.add(cn$h('k'));\n        this.element.appendChild(knobElem);\n        this.knobElement = knobElem;\n        const guideElem = doc.createElementNS(SVG_NS, 'svg');\n        guideElem.classList.add(cn$h('g'));\n        this.knobElement.appendChild(guideElem);\n        const bodyElem = doc.createElementNS(SVG_NS, 'path');\n        bodyElem.classList.add(cn$h('gb'));\n        guideElem.appendChild(bodyElem);\n        this.guideBodyElem_ = bodyElem;\n        const headElem = doc.createElementNS(SVG_NS, 'path');\n        headElem.classList.add(cn$h('gh'));\n        guideElem.appendChild(headElem);\n        this.guideHeadElem_ = headElem;\n        const tooltipElem = doc.createElement('div');\n        tooltipElem.classList.add(ClassName('tt')());\n        this.knobElement.appendChild(tooltipElem);\n        this.tooltipElem_ = tooltipElem;\n        config.value.emitter.on('change', this.onChange_);\n        this.value = config.value;\n        this.refresh();\n    }\n    onDraggingChange_(ev) {\n        if (ev.rawValue === null) {\n            this.element.classList.remove(cn$h(undefined, 'drg'));\n            return;\n        }\n        this.element.classList.add(cn$h(undefined, 'drg'));\n        const x = ev.rawValue / this.props_.get('pointerScale');\n        const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n        const adx = constrainRange(-aox, -4, +4);\n        this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n        this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n        const formatter = this.props_.get('formatter');\n        this.tooltipElem_.textContent = formatter(this.value.rawValue);\n        this.tooltipElem_.style.left = `${x}px`;\n    }\n    refresh() {\n        const formatter = this.props_.get('formatter');\n        this.inputElement.value = formatter(this.value.rawValue);\n    }\n    onChange_() {\n        this.refresh();\n    }\n}\n\nclass NumberTextController {\n    constructor(doc, config) {\n        var _a;\n        this.originRawValue_ = 0;\n        this.onInputChange_ = this.onInputChange_.bind(this);\n        this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n        this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.parser_ = config.parser;\n        this.props = config.props;\n        this.sliderProps_ = (_a = config.sliderProps) !== null && _a !== void 0 ? _a : null;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.dragging_ = createValue(null);\n        this.view = new NumberTextView(doc, {\n            arrayPosition: config.arrayPosition,\n            dragging: this.dragging_,\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.inputElement.addEventListener('change', this.onInputChange_);\n        this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n        this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n        const ph = new PointerHandler(this.view.knobElement);\n        ph.emitter.on('down', this.onPointerDown_);\n        ph.emitter.on('move', this.onPointerMove_);\n        ph.emitter.on('up', this.onPointerUp_);\n    }\n    constrainValue_(value) {\n        var _a, _b;\n        const min = (_a = this.sliderProps_) === null || _a === void 0 ? void 0 : _a.get('min');\n        const max = (_b = this.sliderProps_) === null || _b === void 0 ? void 0 : _b.get('max');\n        let v = value;\n        if (min !== undefined) {\n            v = Math.max(v, min);\n        }\n        if (max !== undefined) {\n            v = Math.min(v, max);\n        }\n        return v;\n    }\n    onInputChange_(e) {\n        const inputElem = forceCast(e.currentTarget);\n        const value = inputElem.value;\n        const parsedValue = this.parser_(value);\n        if (!isEmpty(parsedValue)) {\n            this.value.rawValue = this.constrainValue_(parsedValue);\n        }\n        this.view.refresh();\n    }\n    onInputKeyDown_(ev) {\n        const step = getStepForKey(this.props.get('keyScale'), getVerticalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.constrainValue_(this.value.rawValue + step), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onInputKeyUp_(ev) {\n        const step = getStepForKey(this.props.get('keyScale'), getVerticalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onPointerDown_() {\n        this.originRawValue_ = this.value.rawValue;\n        this.dragging_.rawValue = 0;\n    }\n    computeDraggingValue_(data) {\n        if (!data.point) {\n            return null;\n        }\n        const dx = data.point.x - data.bounds.width / 2;\n        return this.constrainValue_(this.originRawValue_ + dx * this.props.get('pointerScale'));\n    }\n    onPointerMove_(ev) {\n        const v = this.computeDraggingValue_(ev.data);\n        if (v === null) {\n            return;\n        }\n        this.value.setRawValue(v, {\n            forceEmit: false,\n            last: false,\n        });\n        this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n    }\n    onPointerUp_(ev) {\n        const v = this.computeDraggingValue_(ev.data);\n        if (v === null) {\n            return;\n        }\n        this.value.setRawValue(v, {\n            forceEmit: true,\n            last: true,\n        });\n        this.dragging_.rawValue = null;\n    }\n}\n\nconst cn$g = ClassName('sld');\nclass SliderView {\n    constructor(doc, config) {\n        this.onChange_ = this.onChange_.bind(this);\n        this.props_ = config.props;\n        this.props_.emitter.on('change', this.onChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$g());\n        config.viewProps.bindClassModifiers(this.element);\n        const trackElem = doc.createElement('div');\n        trackElem.classList.add(cn$g('t'));\n        config.viewProps.bindTabIndex(trackElem);\n        this.element.appendChild(trackElem);\n        this.trackElement = trackElem;\n        const knobElem = doc.createElement('div');\n        knobElem.classList.add(cn$g('k'));\n        this.trackElement.appendChild(knobElem);\n        this.knobElement = knobElem;\n        config.value.emitter.on('change', this.onChange_);\n        this.value = config.value;\n        this.update_();\n    }\n    update_() {\n        const p = constrainRange(mapRange(this.value.rawValue, this.props_.get('min'), this.props_.get('max'), 0, 100), 0, 100);\n        this.knobElement.style.width = `${p}%`;\n    }\n    onChange_() {\n        this.update_();\n    }\n}\n\nclass SliderController {\n    constructor(doc, config) {\n        this.onKeyDown_ = this.onKeyDown_.bind(this);\n        this.onKeyUp_ = this.onKeyUp_.bind(this);\n        this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.props = config.props;\n        this.view = new SliderView(doc, {\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.trackElement);\n        this.ptHandler_.emitter.on('down', this.onPointerDownOrMove_);\n        this.ptHandler_.emitter.on('move', this.onPointerDownOrMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.trackElement.addEventListener('keydown', this.onKeyDown_);\n        this.view.trackElement.addEventListener('keyup', this.onKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get('min'), this.props.get('max')), opts);\n    }\n    onPointerDownOrMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onKeyDown_(ev) {\n        const step = getStepForKey(this.props.get('keyScale'), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue + step, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onKeyUp_(ev) {\n        const step = getStepForKey(this.props.get('keyScale'), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n\nconst cn$f = ClassName('sldtxt');\nclass SliderTextView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$f());\n        const sliderElem = doc.createElement('div');\n        sliderElem.classList.add(cn$f('s'));\n        this.sliderView_ = config.sliderView;\n        sliderElem.appendChild(this.sliderView_.element);\n        this.element.appendChild(sliderElem);\n        const textElem = doc.createElement('div');\n        textElem.classList.add(cn$f('t'));\n        this.textView_ = config.textView;\n        textElem.appendChild(this.textView_.element);\n        this.element.appendChild(textElem);\n    }\n}\n\nclass SliderTextController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.sliderC_ = new SliderController(doc, {\n            props: config.sliderProps,\n            value: config.value,\n            viewProps: this.viewProps,\n        });\n        this.textC_ = new NumberTextController(doc, {\n            parser: config.parser,\n            props: config.textProps,\n            sliderProps: config.sliderProps,\n            value: config.value,\n            viewProps: config.viewProps,\n        });\n        this.view = new SliderTextView(doc, {\n            sliderView: this.sliderC_.view,\n            textView: this.textC_.view,\n        });\n    }\n    get sliderController() {\n        return this.sliderC_;\n    }\n    get textController() {\n        return this.textC_;\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            max: p.required.number,\n            min: p.required.number,\n        }), (result) => {\n            const sliderProps = this.sliderC_.props;\n            sliderProps.set('max', result.max);\n            sliderProps.set('min', result.min);\n            return true;\n        });\n    }\n    exportProps() {\n        const sliderProps = this.sliderC_.props;\n        return exportBladeState(null, {\n            max: sliderProps.get('max'),\n            min: sliderProps.get('min'),\n        });\n    }\n}\nfunction createSliderTextProps(config) {\n    return {\n        sliderProps: new ValueMap({\n            keyScale: config.keyScale,\n            max: config.max,\n            min: config.min,\n        }),\n        textProps: new ValueMap({\n            formatter: createValue(config.formatter),\n            keyScale: config.keyScale,\n            pointerScale: createValue(config.pointerScale),\n        }),\n    };\n}\n\nconst CSS_VAR_MAP = {\n    containerUnitSize: 'cnt-usz',\n};\nfunction getCssVar(key) {\n    return `--${CSS_VAR_MAP[key]}`;\n}\n\nfunction createPointDimensionParser(p) {\n    return createNumberTextInputParamsParser(p);\n}\nfunction parsePointDimensionParams(value) {\n    if (!isRecord(value)) {\n        return undefined;\n    }\n    return parseRecord(value, createPointDimensionParser);\n}\nfunction createDimensionConstraint(params, initialValue) {\n    if (!params) {\n        return undefined;\n    }\n    const constraints = [];\n    const cs = createStepConstraint(params, initialValue);\n    if (cs) {\n        constraints.push(cs);\n    }\n    const rs = createRangeConstraint(params);\n    if (rs) {\n        constraints.push(rs);\n    }\n    return new CompositeConstraint(constraints);\n}\n\nfunction isCompatible(ver) {\n    if (!ver) {\n        return false;\n    }\n    return ver.major === VERSION$1.major;\n}\n\nfunction parsePickerLayout(value) {\n    if (value === 'inline' || value === 'popup') {\n        return value;\n    }\n    return undefined;\n}\n\nfunction writePrimitive(target, value) {\n    target.write(value);\n}\n\nconst cn$e = ClassName('ckb');\nclass CheckboxView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$e());\n        config.viewProps.bindClassModifiers(this.element);\n        const labelElem = doc.createElement('label');\n        labelElem.classList.add(cn$e('l'));\n        this.element.appendChild(labelElem);\n        this.labelElement = labelElem;\n        const inputElem = doc.createElement('input');\n        inputElem.classList.add(cn$e('i'));\n        inputElem.type = 'checkbox';\n        this.labelElement.appendChild(inputElem);\n        this.inputElement = inputElem;\n        config.viewProps.bindDisabled(this.inputElement);\n        const wrapperElem = doc.createElement('div');\n        wrapperElem.classList.add(cn$e('w'));\n        this.labelElement.appendChild(wrapperElem);\n        const markElem = createSvgIconElement(doc, 'check');\n        wrapperElem.appendChild(markElem);\n        config.value.emitter.on('change', this.onValueChange_);\n        this.value = config.value;\n        this.update_();\n    }\n    update_() {\n        this.inputElement.checked = this.value.rawValue;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass CheckboxController {\n    constructor(doc, config) {\n        this.onInputChange_ = this.onInputChange_.bind(this);\n        this.onLabelMouseDown_ = this.onLabelMouseDown_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new CheckboxView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.inputElement.addEventListener('change', this.onInputChange_);\n        this.view.labelElement.addEventListener('mousedown', this.onLabelMouseDown_);\n    }\n    onInputChange_(ev) {\n        const inputElem = forceCast(ev.currentTarget);\n        this.value.rawValue = inputElem.checked;\n        ev.preventDefault();\n        ev.stopPropagation();\n    }\n    onLabelMouseDown_(ev) {\n        ev.preventDefault();\n    }\n}\n\nfunction createConstraint$6(params) {\n    const constraints = [];\n    const lc = createListConstraint(params.options);\n    if (lc) {\n        constraints.push(lc);\n    }\n    return new CompositeConstraint(constraints);\n}\nconst BooleanInputPlugin = createPlugin({\n    id: 'input-bool',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'boolean') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            options: p.optional.custom(parseListOptions),\n            readonly: p.optional.constant(false),\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => boolFromUnknown,\n        constraint: (args) => createConstraint$6(args.params),\n        writer: (_args) => writePrimitive,\n    },\n    controller: (args) => {\n        const doc = args.document;\n        const value = args.value;\n        const c = args.constraint;\n        const lc = c && findConstraint(c, ListConstraint);\n        if (lc) {\n            return new ListController(doc, {\n                props: new ValueMap({\n                    options: lc.values.value('options'),\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new CheckboxController(doc, {\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (typeof args.controller.value.rawValue !== 'boolean') {\n            return null;\n        }\n        if (args.controller.valueController instanceof ListController) {\n            return new ListInputBindingApi(args.controller);\n        }\n        return null;\n    },\n});\n\nconst cn$d = ClassName('col');\nclass ColorView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$d());\n        config.foldable.bindExpandedClass(this.element, cn$d(undefined, 'expanded'));\n        bindValueMap(config.foldable, 'completed', valueToClassName(this.element, cn$d(undefined, 'cpl')));\n        const headElem = doc.createElement('div');\n        headElem.classList.add(cn$d('h'));\n        this.element.appendChild(headElem);\n        const swatchElem = doc.createElement('div');\n        swatchElem.classList.add(cn$d('s'));\n        headElem.appendChild(swatchElem);\n        this.swatchElement = swatchElem;\n        const textElem = doc.createElement('div');\n        textElem.classList.add(cn$d('t'));\n        headElem.appendChild(textElem);\n        this.textElement = textElem;\n        if (config.pickerLayout === 'inline') {\n            const pickerElem = doc.createElement('div');\n            pickerElem.classList.add(cn$d('p'));\n            this.element.appendChild(pickerElem);\n            this.pickerElement = pickerElem;\n        }\n        else {\n            this.pickerElement = null;\n        }\n    }\n}\n\nfunction rgbToHslInt(r, g, b) {\n    const rp = constrainRange(r / 255, 0, 1);\n    const gp = constrainRange(g / 255, 0, 1);\n    const bp = constrainRange(b / 255, 0, 1);\n    const cmax = Math.max(rp, gp, bp);\n    const cmin = Math.min(rp, gp, bp);\n    const c = cmax - cmin;\n    let h = 0;\n    let s = 0;\n    const l = (cmin + cmax) / 2;\n    if (c !== 0) {\n        s = c / (1 - Math.abs(cmax + cmin - 1));\n        if (rp === cmax) {\n            h = (gp - bp) / c;\n        }\n        else if (gp === cmax) {\n            h = 2 + (bp - rp) / c;\n        }\n        else {\n            h = 4 + (rp - gp) / c;\n        }\n        h = h / 6 + (h < 0 ? 1 : 0);\n    }\n    return [h * 360, s * 100, l * 100];\n}\nfunction hslToRgbInt(h, s, l) {\n    const hp = ((h % 360) + 360) % 360;\n    const sp = constrainRange(s / 100, 0, 1);\n    const lp = constrainRange(l / 100, 0, 1);\n    const c = (1 - Math.abs(2 * lp - 1)) * sp;\n    const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n    const m = lp - c / 2;\n    let rp, gp, bp;\n    if (hp >= 0 && hp < 60) {\n        [rp, gp, bp] = [c, x, 0];\n    }\n    else if (hp >= 60 && hp < 120) {\n        [rp, gp, bp] = [x, c, 0];\n    }\n    else if (hp >= 120 && hp < 180) {\n        [rp, gp, bp] = [0, c, x];\n    }\n    else if (hp >= 180 && hp < 240) {\n        [rp, gp, bp] = [0, x, c];\n    }\n    else if (hp >= 240 && hp < 300) {\n        [rp, gp, bp] = [x, 0, c];\n    }\n    else {\n        [rp, gp, bp] = [c, 0, x];\n    }\n    return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n}\nfunction rgbToHsvInt(r, g, b) {\n    const rp = constrainRange(r / 255, 0, 1);\n    const gp = constrainRange(g / 255, 0, 1);\n    const bp = constrainRange(b / 255, 0, 1);\n    const cmax = Math.max(rp, gp, bp);\n    const cmin = Math.min(rp, gp, bp);\n    const d = cmax - cmin;\n    let h;\n    if (d === 0) {\n        h = 0;\n    }\n    else if (cmax === rp) {\n        h = 60 * (((((gp - bp) / d) % 6) + 6) % 6);\n    }\n    else if (cmax === gp) {\n        h = 60 * ((bp - rp) / d + 2);\n    }\n    else {\n        h = 60 * ((rp - gp) / d + 4);\n    }\n    const s = cmax === 0 ? 0 : d / cmax;\n    const v = cmax;\n    return [h, s * 100, v * 100];\n}\nfunction hsvToRgbInt(h, s, v) {\n    const hp = loopRange(h, 360);\n    const sp = constrainRange(s / 100, 0, 1);\n    const vp = constrainRange(v / 100, 0, 1);\n    const c = vp * sp;\n    const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n    const m = vp - c;\n    let rp, gp, bp;\n    if (hp >= 0 && hp < 60) {\n        [rp, gp, bp] = [c, x, 0];\n    }\n    else if (hp >= 60 && hp < 120) {\n        [rp, gp, bp] = [x, c, 0];\n    }\n    else if (hp >= 120 && hp < 180) {\n        [rp, gp, bp] = [0, c, x];\n    }\n    else if (hp >= 180 && hp < 240) {\n        [rp, gp, bp] = [0, x, c];\n    }\n    else if (hp >= 240 && hp < 300) {\n        [rp, gp, bp] = [x, 0, c];\n    }\n    else {\n        [rp, gp, bp] = [c, 0, x];\n    }\n    return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n}\nfunction hslToHsvInt(h, s, l) {\n    const sd = l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100);\n    return [\n        h,\n        sd !== 0 ? (s * (100 - Math.abs(2 * l - 100))) / sd : 0,\n        l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100),\n    ];\n}\nfunction hsvToHslInt(h, s, v) {\n    const sd = 100 - Math.abs((v * (200 - s)) / 100 - 100);\n    return [h, sd !== 0 ? (s * v) / sd : 0, (v * (200 - s)) / (2 * 100)];\n}\nfunction removeAlphaComponent(comps) {\n    return [comps[0], comps[1], comps[2]];\n}\nfunction appendAlphaComponent(comps, alpha) {\n    return [comps[0], comps[1], comps[2], alpha];\n}\nconst MODE_CONVERTER_MAP = {\n    hsl: {\n        hsl: (h, s, l) => [h, s, l],\n        hsv: hslToHsvInt,\n        rgb: hslToRgbInt,\n    },\n    hsv: {\n        hsl: hsvToHslInt,\n        hsv: (h, s, v) => [h, s, v],\n        rgb: hsvToRgbInt,\n    },\n    rgb: {\n        hsl: rgbToHslInt,\n        hsv: rgbToHsvInt,\n        rgb: (r, g, b) => [r, g, b],\n    },\n};\nfunction getColorMaxComponents(mode, type) {\n    return [\n        type === 'float' ? 1 : mode === 'rgb' ? 255 : 360,\n        type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\n        type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\n    ];\n}\nfunction loopHueRange(hue, max) {\n    return hue === max ? max : loopRange(hue, max);\n}\nfunction constrainColorComponents(components, mode, type) {\n    var _a;\n    const ms = getColorMaxComponents(mode, type);\n    return [\n        mode === 'rgb'\n            ? constrainRange(components[0], 0, ms[0])\n            : loopHueRange(components[0], ms[0]),\n        constrainRange(components[1], 0, ms[1]),\n        constrainRange(components[2], 0, ms[2]),\n        constrainRange((_a = components[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n    ];\n}\nfunction convertColorType(comps, mode, from, to) {\n    const fms = getColorMaxComponents(mode, from);\n    const tms = getColorMaxComponents(mode, to);\n    return comps.map((c, index) => (c / fms[index]) * tms[index]);\n}\nfunction convertColor(components, from, to) {\n    const intComps = convertColorType(components, from.mode, from.type, 'int');\n    const result = MODE_CONVERTER_MAP[from.mode][to.mode](...intComps);\n    return convertColorType(result, to.mode, 'int', to.type);\n}\n\nclass IntColor {\n    static black() {\n        return new IntColor([0, 0, 0], 'rgb');\n    }\n    constructor(comps, mode) {\n        this.type = 'int';\n        this.mode = mode;\n        this.comps_ = constrainColorComponents(comps, mode, this.type);\n    }\n    getComponents(opt_mode) {\n        return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), { mode: this.mode, type: this.type }, { mode: opt_mode !== null && opt_mode !== void 0 ? opt_mode : this.mode, type: this.type }), this.comps_[3]);\n    }\n    toRgbaObject() {\n        const rgbComps = this.getComponents('rgb');\n        return {\n            r: rgbComps[0],\n            g: rgbComps[1],\n            b: rgbComps[2],\n            a: rgbComps[3],\n        };\n    }\n}\n\nconst cn$c = ClassName('colp');\nclass ColorPickerView {\n    constructor(doc, config) {\n        this.alphaViews_ = null;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$c());\n        config.viewProps.bindClassModifiers(this.element);\n        const hsvElem = doc.createElement('div');\n        hsvElem.classList.add(cn$c('hsv'));\n        const svElem = doc.createElement('div');\n        svElem.classList.add(cn$c('sv'));\n        this.svPaletteView_ = config.svPaletteView;\n        svElem.appendChild(this.svPaletteView_.element);\n        hsvElem.appendChild(svElem);\n        const hElem = doc.createElement('div');\n        hElem.classList.add(cn$c('h'));\n        this.hPaletteView_ = config.hPaletteView;\n        hElem.appendChild(this.hPaletteView_.element);\n        hsvElem.appendChild(hElem);\n        this.element.appendChild(hsvElem);\n        const rgbElem = doc.createElement('div');\n        rgbElem.classList.add(cn$c('rgb'));\n        this.textsView_ = config.textsView;\n        rgbElem.appendChild(this.textsView_.element);\n        this.element.appendChild(rgbElem);\n        if (config.alphaViews) {\n            this.alphaViews_ = {\n                palette: config.alphaViews.palette,\n                text: config.alphaViews.text,\n            };\n            const aElem = doc.createElement('div');\n            aElem.classList.add(cn$c('a'));\n            const apElem = doc.createElement('div');\n            apElem.classList.add(cn$c('ap'));\n            apElem.appendChild(this.alphaViews_.palette.element);\n            aElem.appendChild(apElem);\n            const atElem = doc.createElement('div');\n            atElem.classList.add(cn$c('at'));\n            atElem.appendChild(this.alphaViews_.text.element);\n            aElem.appendChild(atElem);\n            this.element.appendChild(aElem);\n        }\n    }\n    get allFocusableElements() {\n        const elems = [\n            this.svPaletteView_.element,\n            this.hPaletteView_.element,\n            this.textsView_.modeSelectElement,\n            ...this.textsView_.inputViews.map((v) => v.inputElement),\n        ];\n        if (this.alphaViews_) {\n            elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n        }\n        return elems;\n    }\n}\n\nfunction parseColorType(value) {\n    return value === 'int' ? 'int' : value === 'float' ? 'float' : undefined;\n}\nfunction parseColorInputParams(params) {\n    return parseRecord(params, (p) => ({\n        color: p.optional.object({\n            alpha: p.optional.boolean,\n            type: p.optional.custom(parseColorType),\n        }),\n        expanded: p.optional.boolean,\n        picker: p.optional.custom(parsePickerLayout),\n        readonly: p.optional.constant(false),\n    }));\n}\nfunction getKeyScaleForColor(forAlpha) {\n    return forAlpha ? 0.1 : 1;\n}\nfunction extractColorType(params) {\n    var _a;\n    return (_a = params.color) === null || _a === void 0 ? void 0 : _a.type;\n}\n\nclass FloatColor {\n    constructor(comps, mode) {\n        this.type = 'float';\n        this.mode = mode;\n        this.comps_ = constrainColorComponents(comps, mode, this.type);\n    }\n    getComponents(opt_mode) {\n        return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), { mode: this.mode, type: this.type }, { mode: opt_mode !== null && opt_mode !== void 0 ? opt_mode : this.mode, type: this.type }), this.comps_[3]);\n    }\n    toRgbaObject() {\n        const rgbComps = this.getComponents('rgb');\n        return {\n            r: rgbComps[0],\n            g: rgbComps[1],\n            b: rgbComps[2],\n            a: rgbComps[3],\n        };\n    }\n}\n\nconst TYPE_TO_CONSTRUCTOR_MAP = {\n    int: (comps, mode) => new IntColor(comps, mode),\n    float: (comps, mode) => new FloatColor(comps, mode),\n};\nfunction createColor(comps, mode, type) {\n    return TYPE_TO_CONSTRUCTOR_MAP[type](comps, mode);\n}\nfunction isFloatColor(c) {\n    return c.type === 'float';\n}\nfunction isIntColor(c) {\n    return c.type === 'int';\n}\nfunction convertFloatToInt(cf) {\n    const comps = cf.getComponents();\n    const ms = getColorMaxComponents(cf.mode, 'int');\n    return new IntColor([\n        Math.round(mapRange(comps[0], 0, 1, 0, ms[0])),\n        Math.round(mapRange(comps[1], 0, 1, 0, ms[1])),\n        Math.round(mapRange(comps[2], 0, 1, 0, ms[2])),\n        comps[3],\n    ], cf.mode);\n}\nfunction convertIntToFloat(ci) {\n    const comps = ci.getComponents();\n    const ms = getColorMaxComponents(ci.mode, 'int');\n    return new FloatColor([\n        mapRange(comps[0], 0, ms[0], 0, 1),\n        mapRange(comps[1], 0, ms[1], 0, 1),\n        mapRange(comps[2], 0, ms[2], 0, 1),\n        comps[3],\n    ], ci.mode);\n}\nfunction mapColorType(c, type) {\n    if (c.type === type) {\n        return c;\n    }\n    if (isIntColor(c) && type === 'float') {\n        return convertIntToFloat(c);\n    }\n    if (isFloatColor(c) && type === 'int') {\n        return convertFloatToInt(c);\n    }\n    throw TpError.shouldNeverHappen();\n}\n\nfunction equalsStringColorFormat(f1, f2) {\n    return (f1.alpha === f2.alpha &&\n        f1.mode === f2.mode &&\n        f1.notation === f2.notation &&\n        f1.type === f2.type);\n}\nfunction parseCssNumberOrPercentage(text, max) {\n    const m = text.match(/^(.+)%$/);\n    if (!m) {\n        return Math.min(parseFloat(text), max);\n    }\n    return Math.min(parseFloat(m[1]) * 0.01 * max, max);\n}\nconst ANGLE_TO_DEG_MAP = {\n    deg: (angle) => angle,\n    grad: (angle) => (angle * 360) / 400,\n    rad: (angle) => (angle * 360) / (2 * Math.PI),\n    turn: (angle) => angle * 360,\n};\nfunction parseCssNumberOrAngle(text) {\n    const m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n    if (!m) {\n        return parseFloat(text);\n    }\n    const angle = parseFloat(m[1]);\n    const unit = m[2];\n    return ANGLE_TO_DEG_MAP[unit](angle);\n}\nfunction parseFunctionalRgbColorComponents(text) {\n    const m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseCssNumberOrPercentage(m[1], 255),\n        parseCssNumberOrPercentage(m[2], 255),\n        parseCssNumberOrPercentage(m[3], 255),\n    ];\n    if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n        return null;\n    }\n    return comps;\n}\nfunction parseFunctionalRgbColor(text) {\n    const comps = parseFunctionalRgbColorComponents(text);\n    return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseFunctionalRgbaColorComponents(text) {\n    const m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseCssNumberOrPercentage(m[1], 255),\n        parseCssNumberOrPercentage(m[2], 255),\n        parseCssNumberOrPercentage(m[3], 255),\n        parseCssNumberOrPercentage(m[4], 1),\n    ];\n    if (isNaN(comps[0]) ||\n        isNaN(comps[1]) ||\n        isNaN(comps[2]) ||\n        isNaN(comps[3])) {\n        return null;\n    }\n    return comps;\n}\nfunction parseFunctionalRgbaColor(text) {\n    const comps = parseFunctionalRgbaColorComponents(text);\n    return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseFunctionalHslColorComponents(text) {\n    const m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseCssNumberOrAngle(m[1]),\n        parseCssNumberOrPercentage(m[2], 100),\n        parseCssNumberOrPercentage(m[3], 100),\n    ];\n    if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n        return null;\n    }\n    return comps;\n}\nfunction parseFunctionalHslColor(text) {\n    const comps = parseFunctionalHslColorComponents(text);\n    return comps ? new IntColor(comps, 'hsl') : null;\n}\nfunction parseHslaColorComponents(text) {\n    const m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseCssNumberOrAngle(m[1]),\n        parseCssNumberOrPercentage(m[2], 100),\n        parseCssNumberOrPercentage(m[3], 100),\n        parseCssNumberOrPercentage(m[4], 1),\n    ];\n    if (isNaN(comps[0]) ||\n        isNaN(comps[1]) ||\n        isNaN(comps[2]) ||\n        isNaN(comps[3])) {\n        return null;\n    }\n    return comps;\n}\nfunction parseFunctionalHslaColor(text) {\n    const comps = parseHslaColorComponents(text);\n    return comps ? new IntColor(comps, 'hsl') : null;\n}\nfunction parseHexRgbColorComponents(text) {\n    const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n    if (mRgb) {\n        return [\n            parseInt(mRgb[1] + mRgb[1], 16),\n            parseInt(mRgb[2] + mRgb[2], 16),\n            parseInt(mRgb[3] + mRgb[3], 16),\n        ];\n    }\n    const mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n    if (mRrggbb) {\n        return [\n            parseInt(mRrggbb[1], 16),\n            parseInt(mRrggbb[2], 16),\n            parseInt(mRrggbb[3], 16),\n        ];\n    }\n    return null;\n}\nfunction parseHexRgbColor(text) {\n    const comps = parseHexRgbColorComponents(text);\n    return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseHexRgbaColorComponents(text) {\n    const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n    if (mRgb) {\n        return [\n            parseInt(mRgb[1] + mRgb[1], 16),\n            parseInt(mRgb[2] + mRgb[2], 16),\n            parseInt(mRgb[3] + mRgb[3], 16),\n            mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1),\n        ];\n    }\n    const mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n    if (mRrggbb) {\n        return [\n            parseInt(mRrggbb[1], 16),\n            parseInt(mRrggbb[2], 16),\n            parseInt(mRrggbb[3], 16),\n            mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1),\n        ];\n    }\n    return null;\n}\nfunction parseHexRgbaColor(text) {\n    const comps = parseHexRgbaColorComponents(text);\n    return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseObjectRgbColorComponents(text) {\n    const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseFloat(m[1]),\n        parseFloat(m[2]),\n        parseFloat(m[3]),\n    ];\n    if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n        return null;\n    }\n    return comps;\n}\nfunction createObjectRgbColorParser(type) {\n    return (text) => {\n        const comps = parseObjectRgbColorComponents(text);\n        return comps ? createColor(comps, 'rgb', type) : null;\n    };\n}\nfunction parseObjectRgbaColorComponents(text) {\n    const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*a\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseFloat(m[1]),\n        parseFloat(m[2]),\n        parseFloat(m[3]),\n        parseFloat(m[4]),\n    ];\n    if (isNaN(comps[0]) ||\n        isNaN(comps[1]) ||\n        isNaN(comps[2]) ||\n        isNaN(comps[3])) {\n        return null;\n    }\n    return comps;\n}\nfunction createObjectRgbaColorParser(type) {\n    return (text) => {\n        const comps = parseObjectRgbaColorComponents(text);\n        return comps ? createColor(comps, 'rgb', type) : null;\n    };\n}\nconst PARSER_AND_RESULT = [\n    {\n        parser: parseHexRgbColorComponents,\n        result: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'hex',\n        },\n    },\n    {\n        parser: parseHexRgbaColorComponents,\n        result: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'hex',\n        },\n    },\n    {\n        parser: parseFunctionalRgbColorComponents,\n        result: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'func',\n        },\n    },\n    {\n        parser: parseFunctionalRgbaColorComponents,\n        result: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'func',\n        },\n    },\n    {\n        parser: parseFunctionalHslColorComponents,\n        result: {\n            alpha: false,\n            mode: 'hsl',\n            notation: 'func',\n        },\n    },\n    {\n        parser: parseHslaColorComponents,\n        result: {\n            alpha: true,\n            mode: 'hsl',\n            notation: 'func',\n        },\n    },\n    {\n        parser: parseObjectRgbColorComponents,\n        result: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'object',\n        },\n    },\n    {\n        parser: parseObjectRgbaColorComponents,\n        result: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'object',\n        },\n    },\n];\nfunction detectStringColor(text) {\n    return PARSER_AND_RESULT.reduce((prev, { parser, result: detection }) => {\n        if (prev) {\n            return prev;\n        }\n        return parser(text) ? detection : null;\n    }, null);\n}\nfunction detectStringColorFormat(text, type = 'int') {\n    const r = detectStringColor(text);\n    if (!r) {\n        return null;\n    }\n    if (r.notation === 'hex' && type !== 'float') {\n        return Object.assign(Object.assign({}, r), { type: 'int' });\n    }\n    if (r.notation === 'func') {\n        return Object.assign(Object.assign({}, r), { type: type });\n    }\n    return null;\n}\nfunction createColorStringParser(type) {\n    const parsers = [\n        parseHexRgbColor,\n        parseHexRgbaColor,\n        parseFunctionalRgbColor,\n        parseFunctionalRgbaColor,\n        parseFunctionalHslColor,\n        parseFunctionalHslaColor,\n    ];\n    if (type === 'int') {\n        parsers.push(createObjectRgbColorParser('int'), createObjectRgbaColorParser('int'));\n    }\n    if (type === 'float') {\n        parsers.push(createObjectRgbColorParser('float'), createObjectRgbaColorParser('float'));\n    }\n    const parser = composeParsers(parsers);\n    return (text) => {\n        const result = parser(text);\n        return result ? mapColorType(result, type) : null;\n    };\n}\nfunction readIntColorString(value) {\n    const parser = createColorStringParser('int');\n    if (typeof value !== 'string') {\n        return IntColor.black();\n    }\n    const result = parser(value);\n    return result !== null && result !== void 0 ? result : IntColor.black();\n}\nfunction zerofill(comp) {\n    const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n    return hex.length === 1 ? `0${hex}` : hex;\n}\nfunction colorToHexRgbString(value, prefix = '#') {\n    const hexes = removeAlphaComponent(value.getComponents('rgb'))\n        .map(zerofill)\n        .join('');\n    return `${prefix}${hexes}`;\n}\nfunction colorToHexRgbaString(value, prefix = '#') {\n    const rgbaComps = value.getComponents('rgb');\n    const hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\n        .map(zerofill)\n        .join('');\n    return `${prefix}${hexes}`;\n}\nfunction colorToFunctionalRgbString(value) {\n    const formatter = createNumberFormatter(0);\n    const ci = mapColorType(value, 'int');\n    const comps = removeAlphaComponent(ci.getComponents('rgb')).map((comp) => formatter(comp));\n    return `rgb(${comps.join(', ')})`;\n}\nfunction colorToFunctionalRgbaString(value) {\n    const aFormatter = createNumberFormatter(2);\n    const rgbFormatter = createNumberFormatter(0);\n    const ci = mapColorType(value, 'int');\n    const comps = ci.getComponents('rgb').map((comp, index) => {\n        const formatter = index === 3 ? aFormatter : rgbFormatter;\n        return formatter(comp);\n    });\n    return `rgba(${comps.join(', ')})`;\n}\nfunction colorToFunctionalHslString(value) {\n    const formatters = [\n        createNumberFormatter(0),\n        formatPercentage,\n        formatPercentage,\n    ];\n    const ci = mapColorType(value, 'int');\n    const comps = removeAlphaComponent(ci.getComponents('hsl')).map((comp, index) => formatters[index](comp));\n    return `hsl(${comps.join(', ')})`;\n}\nfunction colorToFunctionalHslaString(value) {\n    const formatters = [\n        createNumberFormatter(0),\n        formatPercentage,\n        formatPercentage,\n        createNumberFormatter(2),\n    ];\n    const ci = mapColorType(value, 'int');\n    const comps = ci\n        .getComponents('hsl')\n        .map((comp, index) => formatters[index](comp));\n    return `hsla(${comps.join(', ')})`;\n}\nfunction colorToObjectRgbString(value, type) {\n    const formatter = createNumberFormatter(type === 'float' ? 2 : 0);\n    const names = ['r', 'g', 'b'];\n    const cc = mapColorType(value, type);\n    const comps = removeAlphaComponent(cc.getComponents('rgb')).map((comp, index) => `${names[index]}: ${formatter(comp)}`);\n    return `{${comps.join(', ')}}`;\n}\nfunction createObjectRgbColorFormatter(type) {\n    return (value) => colorToObjectRgbString(value, type);\n}\nfunction colorToObjectRgbaString(value, type) {\n    const aFormatter = createNumberFormatter(2);\n    const rgbFormatter = createNumberFormatter(type === 'float' ? 2 : 0);\n    const names = ['r', 'g', 'b', 'a'];\n    const cc = mapColorType(value, type);\n    const comps = cc.getComponents('rgb').map((comp, index) => {\n        const formatter = index === 3 ? aFormatter : rgbFormatter;\n        return `${names[index]}: ${formatter(comp)}`;\n    });\n    return `{${comps.join(', ')}}`;\n}\nfunction createObjectRgbaColorFormatter(type) {\n    return (value) => colorToObjectRgbaString(value, type);\n}\nconst FORMAT_AND_STRINGIFIERS = [\n    {\n        format: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'hex',\n            type: 'int',\n        },\n        stringifier: colorToHexRgbString,\n    },\n    {\n        format: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'hex',\n            type: 'int',\n        },\n        stringifier: colorToHexRgbaString,\n    },\n    {\n        format: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'func',\n            type: 'int',\n        },\n        stringifier: colorToFunctionalRgbString,\n    },\n    {\n        format: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'func',\n            type: 'int',\n        },\n        stringifier: colorToFunctionalRgbaString,\n    },\n    {\n        format: {\n            alpha: false,\n            mode: 'hsl',\n            notation: 'func',\n            type: 'int',\n        },\n        stringifier: colorToFunctionalHslString,\n    },\n    {\n        format: {\n            alpha: true,\n            mode: 'hsl',\n            notation: 'func',\n            type: 'int',\n        },\n        stringifier: colorToFunctionalHslaString,\n    },\n    ...['int', 'float'].reduce((prev, type) => {\n        return [\n            ...prev,\n            {\n                format: {\n                    alpha: false,\n                    mode: 'rgb',\n                    notation: 'object',\n                    type: type,\n                },\n                stringifier: createObjectRgbColorFormatter(type),\n            },\n            {\n                format: {\n                    alpha: true,\n                    mode: 'rgb',\n                    notation: 'object',\n                    type: type,\n                },\n                stringifier: createObjectRgbaColorFormatter(type),\n            },\n        ];\n    }, []),\n];\nfunction findColorStringifier(format) {\n    return FORMAT_AND_STRINGIFIERS.reduce((prev, fas) => {\n        if (prev) {\n            return prev;\n        }\n        return equalsStringColorFormat(fas.format, format)\n            ? fas.stringifier\n            : null;\n    }, null);\n}\n\nconst cn$b = ClassName('apl');\nclass APaletteView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.value = config.value;\n        this.value.emitter.on('change', this.onValueChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$b());\n        config.viewProps.bindClassModifiers(this.element);\n        config.viewProps.bindTabIndex(this.element);\n        const barElem = doc.createElement('div');\n        barElem.classList.add(cn$b('b'));\n        this.element.appendChild(barElem);\n        const colorElem = doc.createElement('div');\n        colorElem.classList.add(cn$b('c'));\n        barElem.appendChild(colorElem);\n        this.colorElem_ = colorElem;\n        const markerElem = doc.createElement('div');\n        markerElem.classList.add(cn$b('m'));\n        this.element.appendChild(markerElem);\n        this.markerElem_ = markerElem;\n        const previewElem = doc.createElement('div');\n        previewElem.classList.add(cn$b('p'));\n        this.markerElem_.appendChild(previewElem);\n        this.previewElem_ = previewElem;\n        this.update_();\n    }\n    update_() {\n        const c = this.value.rawValue;\n        const rgbaComps = c.getComponents('rgb');\n        const leftColor = new IntColor([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\n        const rightColor = new IntColor([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\n        const gradientComps = [\n            'to right',\n            colorToFunctionalRgbaString(leftColor),\n            colorToFunctionalRgbaString(rightColor),\n        ];\n        this.colorElem_.style.background = `linear-gradient(${gradientComps.join(',')})`;\n        this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n        const left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n        this.markerElem_.style.left = `${left}%`;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass APaletteController {\n    constructor(doc, config) {\n        this.onKeyDown_ = this.onKeyDown_.bind(this);\n        this.onKeyUp_ = this.onKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new APaletteView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.element);\n        this.ptHandler_.emitter.on('down', this.onPointerDown_);\n        this.ptHandler_.emitter.on('move', this.onPointerMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.element.addEventListener('keydown', this.onKeyDown_);\n        this.view.element.addEventListener('keyup', this.onKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        const alpha = d.point.x / d.bounds.width;\n        const c = this.value.rawValue;\n        const [h, s, v] = c.getComponents('hsv');\n        this.value.setRawValue(new IntColor([h, s, v, alpha], 'hsv'), opts);\n    }\n    onPointerDown_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onKeyDown_(ev) {\n        const step = getStepForKey(getKeyScaleForColor(true), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        const c = this.value.rawValue;\n        const [h, s, v, a] = c.getComponents('hsv');\n        this.value.setRawValue(new IntColor([h, s, v, a + step], 'hsv'), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onKeyUp_(ev) {\n        const step = getStepForKey(getKeyScaleForColor(true), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n\nconst cn$a = ClassName('coltxt');\nfunction createModeSelectElement(doc) {\n    const selectElem = doc.createElement('select');\n    const items = [\n        { text: 'RGB', value: 'rgb' },\n        { text: 'HSL', value: 'hsl' },\n        { text: 'HSV', value: 'hsv' },\n        { text: 'HEX', value: 'hex' },\n    ];\n    selectElem.appendChild(items.reduce((frag, item) => {\n        const optElem = doc.createElement('option');\n        optElem.textContent = item.text;\n        optElem.value = item.value;\n        frag.appendChild(optElem);\n        return frag;\n    }, doc.createDocumentFragment()));\n    return selectElem;\n}\nclass ColorTextsView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$a());\n        config.viewProps.bindClassModifiers(this.element);\n        const modeElem = doc.createElement('div');\n        modeElem.classList.add(cn$a('m'));\n        this.modeElem_ = createModeSelectElement(doc);\n        this.modeElem_.classList.add(cn$a('ms'));\n        modeElem.appendChild(this.modeSelectElement);\n        config.viewProps.bindDisabled(this.modeElem_);\n        const modeMarkerElem = doc.createElement('div');\n        modeMarkerElem.classList.add(cn$a('mm'));\n        modeMarkerElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n        modeElem.appendChild(modeMarkerElem);\n        this.element.appendChild(modeElem);\n        const inputsElem = doc.createElement('div');\n        inputsElem.classList.add(cn$a('w'));\n        this.element.appendChild(inputsElem);\n        this.inputsElem_ = inputsElem;\n        this.inputViews_ = config.inputViews;\n        this.applyInputViews_();\n        bindValue(config.mode, (mode) => {\n            this.modeElem_.value = mode;\n        });\n    }\n    get modeSelectElement() {\n        return this.modeElem_;\n    }\n    get inputViews() {\n        return this.inputViews_;\n    }\n    set inputViews(inputViews) {\n        this.inputViews_ = inputViews;\n        this.applyInputViews_();\n    }\n    applyInputViews_() {\n        removeChildElements(this.inputsElem_);\n        const doc = this.element.ownerDocument;\n        this.inputViews_.forEach((v) => {\n            const compElem = doc.createElement('div');\n            compElem.classList.add(cn$a('c'));\n            compElem.appendChild(v.element);\n            this.inputsElem_.appendChild(compElem);\n        });\n    }\n}\n\nfunction createFormatter$2(type) {\n    return createNumberFormatter(type === 'float' ? 2 : 0);\n}\nfunction createConstraint$5(mode, type, index) {\n    const max = getColorMaxComponents(mode, type)[index];\n    return new DefiniteRangeConstraint({\n        min: 0,\n        max: max,\n    });\n}\nfunction createComponentController(doc, config, index) {\n    return new NumberTextController(doc, {\n        arrayPosition: index === 0 ? 'fst' : index === 3 - 1 ? 'lst' : 'mid',\n        parser: config.parser,\n        props: ValueMap.fromObject({\n            formatter: createFormatter$2(config.colorType),\n            keyScale: getKeyScaleForColor(false),\n            pointerScale: config.colorType === 'float' ? 0.01 : 1,\n        }),\n        value: createValue(0, {\n            constraint: createConstraint$5(config.colorMode, config.colorType, index),\n        }),\n        viewProps: config.viewProps,\n    });\n}\nfunction createComponentControllers(doc, config) {\n    const cc = {\n        colorMode: config.colorMode,\n        colorType: config.colorType,\n        parser: parseNumber,\n        viewProps: config.viewProps,\n    };\n    return [0, 1, 2].map((i) => {\n        const c = createComponentController(doc, cc, i);\n        connectValues({\n            primary: config.value,\n            secondary: c.value,\n            forward(p) {\n                const mc = mapColorType(p, config.colorType);\n                return mc.getComponents(config.colorMode)[i];\n            },\n            backward(p, s) {\n                const pickedMode = config.colorMode;\n                const mc = mapColorType(p, config.colorType);\n                const comps = mc.getComponents(pickedMode);\n                comps[i] = s;\n                const c = createColor(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode, config.colorType);\n                return mapColorType(c, 'int');\n            },\n        });\n        return c;\n    });\n}\nfunction createHexController(doc, config) {\n    const c = new TextController(doc, {\n        parser: createColorStringParser('int'),\n        props: ValueMap.fromObject({\n            formatter: colorToHexRgbString,\n        }),\n        value: createValue(IntColor.black()),\n        viewProps: config.viewProps,\n    });\n    connectValues({\n        primary: config.value,\n        secondary: c.value,\n        forward: (p) => new IntColor(removeAlphaComponent(p.getComponents()), p.mode),\n        backward: (p, s) => new IntColor(appendAlphaComponent(removeAlphaComponent(s.getComponents(p.mode)), p.getComponents()[3]), p.mode),\n    });\n    return [c];\n}\nfunction isColorMode(mode) {\n    return mode !== 'hex';\n}\nclass ColorTextsController {\n    constructor(doc, config) {\n        this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n        this.colorType_ = config.colorType;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.colorMode = createValue(this.value.rawValue.mode);\n        this.ccs_ = this.createComponentControllers_(doc);\n        this.view = new ColorTextsView(doc, {\n            mode: this.colorMode,\n            inputViews: [this.ccs_[0].view, this.ccs_[1].view, this.ccs_[2].view],\n            viewProps: this.viewProps,\n        });\n        this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n    }\n    createComponentControllers_(doc) {\n        const mode = this.colorMode.rawValue;\n        if (isColorMode(mode)) {\n            return createComponentControllers(doc, {\n                colorMode: mode,\n                colorType: this.colorType_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n        return createHexController(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n    }\n    onModeSelectChange_(ev) {\n        const selectElem = ev.currentTarget;\n        this.colorMode.rawValue = selectElem.value;\n        this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\n        this.view.inputViews = this.ccs_.map((cc) => cc.view);\n    }\n}\n\nconst cn$9 = ClassName('hpl');\nclass HPaletteView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.value = config.value;\n        this.value.emitter.on('change', this.onValueChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$9());\n        config.viewProps.bindClassModifiers(this.element);\n        config.viewProps.bindTabIndex(this.element);\n        const colorElem = doc.createElement('div');\n        colorElem.classList.add(cn$9('c'));\n        this.element.appendChild(colorElem);\n        const markerElem = doc.createElement('div');\n        markerElem.classList.add(cn$9('m'));\n        this.element.appendChild(markerElem);\n        this.markerElem_ = markerElem;\n        this.update_();\n    }\n    update_() {\n        const c = this.value.rawValue;\n        const [h] = c.getComponents('hsv');\n        this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new IntColor([h, 100, 100], 'hsv'));\n        const left = mapRange(h, 0, 360, 0, 100);\n        this.markerElem_.style.left = `${left}%`;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass HPaletteController {\n    constructor(doc, config) {\n        this.onKeyDown_ = this.onKeyDown_.bind(this);\n        this.onKeyUp_ = this.onKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new HPaletteView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.element);\n        this.ptHandler_.emitter.on('down', this.onPointerDown_);\n        this.ptHandler_.emitter.on('move', this.onPointerMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.element.addEventListener('keydown', this.onKeyDown_);\n        this.view.element.addEventListener('keyup', this.onKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        const hue = mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, 0, 360);\n        const c = this.value.rawValue;\n        const [, s, v, a] = c.getComponents('hsv');\n        this.value.setRawValue(new IntColor([hue, s, v, a], 'hsv'), opts);\n    }\n    onPointerDown_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onKeyDown_(ev) {\n        const step = getStepForKey(getKeyScaleForColor(false), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        const c = this.value.rawValue;\n        const [h, s, v, a] = c.getComponents('hsv');\n        this.value.setRawValue(new IntColor([h + step, s, v, a], 'hsv'), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onKeyUp_(ev) {\n        const step = getStepForKey(getKeyScaleForColor(false), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n\nconst cn$8 = ClassName('svp');\nconst CANVAS_RESOL = 64;\nclass SvPaletteView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.value = config.value;\n        this.value.emitter.on('change', this.onValueChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$8());\n        config.viewProps.bindClassModifiers(this.element);\n        config.viewProps.bindTabIndex(this.element);\n        const canvasElem = doc.createElement('canvas');\n        canvasElem.height = CANVAS_RESOL;\n        canvasElem.width = CANVAS_RESOL;\n        canvasElem.classList.add(cn$8('c'));\n        this.element.appendChild(canvasElem);\n        this.canvasElement = canvasElem;\n        const markerElem = doc.createElement('div');\n        markerElem.classList.add(cn$8('m'));\n        this.element.appendChild(markerElem);\n        this.markerElem_ = markerElem;\n        this.update_();\n    }\n    update_() {\n        const ctx = getCanvasContext(this.canvasElement);\n        if (!ctx) {\n            return;\n        }\n        const c = this.value.rawValue;\n        const hsvComps = c.getComponents('hsv');\n        const width = this.canvasElement.width;\n        const height = this.canvasElement.height;\n        const imgData = ctx.getImageData(0, 0, width, height);\n        const data = imgData.data;\n        for (let iy = 0; iy < height; iy++) {\n            for (let ix = 0; ix < width; ix++) {\n                const s = mapRange(ix, 0, width, 0, 100);\n                const v = mapRange(iy, 0, height, 100, 0);\n                const rgbComps = hsvToRgbInt(hsvComps[0], s, v);\n                const i = (iy * width + ix) * 4;\n                data[i] = rgbComps[0];\n                data[i + 1] = rgbComps[1];\n                data[i + 2] = rgbComps[2];\n                data[i + 3] = 255;\n            }\n        }\n        ctx.putImageData(imgData, 0, 0);\n        const left = mapRange(hsvComps[1], 0, 100, 0, 100);\n        this.markerElem_.style.left = `${left}%`;\n        const top = mapRange(hsvComps[2], 0, 100, 100, 0);\n        this.markerElem_.style.top = `${top}%`;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass SvPaletteController {\n    constructor(doc, config) {\n        this.onKeyDown_ = this.onKeyDown_.bind(this);\n        this.onKeyUp_ = this.onKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new SvPaletteView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.element);\n        this.ptHandler_.emitter.on('down', this.onPointerDown_);\n        this.ptHandler_.emitter.on('move', this.onPointerMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.element.addEventListener('keydown', this.onKeyDown_);\n        this.view.element.addEventListener('keyup', this.onKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        const saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\n        const value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\n        const [h, , , a] = this.value.rawValue.getComponents('hsv');\n        this.value.setRawValue(new IntColor([h, saturation, value, a], 'hsv'), opts);\n    }\n    onPointerDown_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onKeyDown_(ev) {\n        if (isArrowKey(ev.key)) {\n            ev.preventDefault();\n        }\n        const [h, s, v, a] = this.value.rawValue.getComponents('hsv');\n        const keyScale = getKeyScaleForColor(false);\n        const ds = getStepForKey(keyScale, getHorizontalStepKeys(ev));\n        const dv = getStepForKey(keyScale, getVerticalStepKeys(ev));\n        if (ds === 0 && dv === 0) {\n            return;\n        }\n        this.value.setRawValue(new IntColor([h, s + ds, v + dv, a], 'hsv'), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onKeyUp_(ev) {\n        const keyScale = getKeyScaleForColor(false);\n        const ds = getStepForKey(keyScale, getHorizontalStepKeys(ev));\n        const dv = getStepForKey(keyScale, getVerticalStepKeys(ev));\n        if (ds === 0 && dv === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n\nclass ColorPickerController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.hPaletteC_ = new HPaletteController(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.svPaletteC_ = new SvPaletteController(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.alphaIcs_ = config.supportsAlpha\n            ? {\n                palette: new APaletteController(doc, {\n                    value: this.value,\n                    viewProps: this.viewProps,\n                }),\n                text: new NumberTextController(doc, {\n                    parser: parseNumber,\n                    props: ValueMap.fromObject({\n                        pointerScale: 0.01,\n                        keyScale: 0.1,\n                        formatter: createNumberFormatter(2),\n                    }),\n                    value: createValue(0, {\n                        constraint: new DefiniteRangeConstraint({ min: 0, max: 1 }),\n                    }),\n                    viewProps: this.viewProps,\n                }),\n            }\n            : null;\n        if (this.alphaIcs_) {\n            connectValues({\n                primary: this.value,\n                secondary: this.alphaIcs_.text.value,\n                forward: (p) => p.getComponents()[3],\n                backward: (p, s) => {\n                    const comps = p.getComponents();\n                    comps[3] = s;\n                    return new IntColor(comps, p.mode);\n                },\n            });\n        }\n        this.textsC_ = new ColorTextsController(doc, {\n            colorType: config.colorType,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view = new ColorPickerView(doc, {\n            alphaViews: this.alphaIcs_\n                ? {\n                    palette: this.alphaIcs_.palette.view,\n                    text: this.alphaIcs_.text.view,\n                }\n                : null,\n            hPaletteView: this.hPaletteC_.view,\n            supportsAlpha: config.supportsAlpha,\n            svPaletteView: this.svPaletteC_.view,\n            textsView: this.textsC_.view,\n            viewProps: this.viewProps,\n        });\n    }\n    get textsController() {\n        return this.textsC_;\n    }\n}\n\nconst cn$7 = ClassName('colsw');\nclass ColorSwatchView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        config.value.emitter.on('change', this.onValueChange_);\n        this.value = config.value;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$7());\n        config.viewProps.bindClassModifiers(this.element);\n        const swatchElem = doc.createElement('div');\n        swatchElem.classList.add(cn$7('sw'));\n        this.element.appendChild(swatchElem);\n        this.swatchElem_ = swatchElem;\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(cn$7('b'));\n        config.viewProps.bindDisabled(buttonElem);\n        this.element.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        this.update_();\n    }\n    update_() {\n        const value = this.value.rawValue;\n        this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass ColorSwatchController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new ColorSwatchView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n    }\n}\n\nclass ColorController {\n    constructor(doc, config) {\n        this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n        this.onButtonClick_ = this.onButtonClick_.bind(this);\n        this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n        this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.foldable_ = Foldable.create(config.expanded);\n        this.swatchC_ = new ColorSwatchController(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        const buttonElem = this.swatchC_.view.buttonElement;\n        buttonElem.addEventListener('blur', this.onButtonBlur_);\n        buttonElem.addEventListener('click', this.onButtonClick_);\n        this.textC_ = new TextController(doc, {\n            parser: config.parser,\n            props: ValueMap.fromObject({\n                formatter: config.formatter,\n            }),\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view = new ColorView(doc, {\n            foldable: this.foldable_,\n            pickerLayout: config.pickerLayout,\n        });\n        this.view.swatchElement.appendChild(this.swatchC_.view.element);\n        this.view.textElement.appendChild(this.textC_.view.element);\n        this.popC_ =\n            config.pickerLayout === 'popup'\n                ? new PopupController(doc, {\n                    viewProps: this.viewProps,\n                })\n                : null;\n        const pickerC = new ColorPickerController(doc, {\n            colorType: config.colorType,\n            supportsAlpha: config.supportsAlpha,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        pickerC.view.allFocusableElements.forEach((elem) => {\n            elem.addEventListener('blur', this.onPopupChildBlur_);\n            elem.addEventListener('keydown', this.onPopupChildKeydown_);\n        });\n        this.pickerC_ = pickerC;\n        if (this.popC_) {\n            this.view.element.appendChild(this.popC_.view.element);\n            this.popC_.view.element.appendChild(pickerC.view.element);\n            connectValues({\n                primary: this.foldable_.value('expanded'),\n                secondary: this.popC_.shows,\n                forward: (p) => p,\n                backward: (_, s) => s,\n            });\n        }\n        else if (this.view.pickerElement) {\n            this.view.pickerElement.appendChild(this.pickerC_.view.element);\n            bindFoldable(this.foldable_, this.view.pickerElement);\n        }\n    }\n    get textController() {\n        return this.textC_;\n    }\n    onButtonBlur_(e) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.view.element;\n        const nextTarget = forceCast(e.relatedTarget);\n        if (!nextTarget || !elem.contains(nextTarget)) {\n            this.popC_.shows.rawValue = false;\n        }\n    }\n    onButtonClick_() {\n        this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n        if (this.foldable_.get('expanded')) {\n            this.pickerC_.view.allFocusableElements[0].focus();\n        }\n    }\n    onPopupChildBlur_(ev) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.popC_.view.element;\n        const nextTarget = findNextTarget(ev);\n        if (nextTarget && elem.contains(nextTarget)) {\n            return;\n        }\n        if (nextTarget &&\n            nextTarget === this.swatchC_.view.buttonElement &&\n            !supportsTouch(elem.ownerDocument)) {\n            return;\n        }\n        this.popC_.shows.rawValue = false;\n    }\n    onPopupChildKeydown_(ev) {\n        if (this.popC_) {\n            if (ev.key === 'Escape') {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        else if (this.view.pickerElement) {\n            if (ev.key === 'Escape') {\n                this.swatchC_.view.buttonElement.focus();\n            }\n        }\n    }\n}\n\nfunction colorToRgbNumber(value) {\n    return removeAlphaComponent(value.getComponents('rgb')).reduce((result, comp) => {\n        return (result << 8) | (Math.floor(comp) & 0xff);\n    }, 0);\n}\nfunction colorToRgbaNumber(value) {\n    return (value.getComponents('rgb').reduce((result, comp, index) => {\n        const hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n        return (result << 8) | hex;\n    }, 0) >>> 0);\n}\nfunction numberToRgbColor(num) {\n    return new IntColor([(num >> 16) & 0xff, (num >> 8) & 0xff, num & 0xff], 'rgb');\n}\nfunction numberToRgbaColor(num) {\n    return new IntColor([\n        (num >> 24) & 0xff,\n        (num >> 16) & 0xff,\n        (num >> 8) & 0xff,\n        mapRange(num & 0xff, 0, 255, 0, 1),\n    ], 'rgb');\n}\nfunction colorFromRgbNumber(value) {\n    if (typeof value !== 'number') {\n        return IntColor.black();\n    }\n    return numberToRgbColor(value);\n}\nfunction colorFromRgbaNumber(value) {\n    if (typeof value !== 'number') {\n        return IntColor.black();\n    }\n    return numberToRgbaColor(value);\n}\n\nfunction isRgbColorComponent(obj, key) {\n    if (typeof obj !== 'object' || isEmpty(obj)) {\n        return false;\n    }\n    return key in obj && typeof obj[key] === 'number';\n}\nfunction isRgbColorObject(obj) {\n    return (isRgbColorComponent(obj, 'r') &&\n        isRgbColorComponent(obj, 'g') &&\n        isRgbColorComponent(obj, 'b'));\n}\nfunction isRgbaColorObject(obj) {\n    return isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n}\nfunction isColorObject(obj) {\n    return isRgbColorObject(obj);\n}\nfunction equalsColor(v1, v2) {\n    if (v1.mode !== v2.mode) {\n        return false;\n    }\n    if (v1.type !== v2.type) {\n        return false;\n    }\n    const comps1 = v1.getComponents();\n    const comps2 = v2.getComponents();\n    for (let i = 0; i < comps1.length; i++) {\n        if (comps1[i] !== comps2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction createColorComponentsFromRgbObject(obj) {\n    return 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\n}\n\nfunction createColorStringWriter(format) {\n    const stringify = findColorStringifier(format);\n    return stringify\n        ? (target, value) => {\n            writePrimitive(target, stringify(value));\n        }\n        : null;\n}\nfunction createColorNumberWriter(supportsAlpha) {\n    const colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n    return (target, value) => {\n        writePrimitive(target, colorToNumber(value));\n    };\n}\nfunction writeRgbaColorObject(target, value, type) {\n    const cc = mapColorType(value, type);\n    const obj = cc.toRgbaObject();\n    target.writeProperty('r', obj.r);\n    target.writeProperty('g', obj.g);\n    target.writeProperty('b', obj.b);\n    target.writeProperty('a', obj.a);\n}\nfunction writeRgbColorObject(target, value, type) {\n    const cc = mapColorType(value, type);\n    const obj = cc.toRgbaObject();\n    target.writeProperty('r', obj.r);\n    target.writeProperty('g', obj.g);\n    target.writeProperty('b', obj.b);\n}\nfunction createColorObjectWriter(supportsAlpha, type) {\n    return (target, inValue) => {\n        if (supportsAlpha) {\n            writeRgbaColorObject(target, inValue, type);\n        }\n        else {\n            writeRgbColorObject(target, inValue, type);\n        }\n    };\n}\n\nfunction shouldSupportAlpha$1(inputParams) {\n    var _a;\n    if ((_a = inputParams === null || inputParams === void 0 ? void 0 : inputParams.color) === null || _a === void 0 ? void 0 : _a.alpha) {\n        return true;\n    }\n    return false;\n}\nfunction createFormatter$1(supportsAlpha) {\n    return supportsAlpha\n        ? (v) => colorToHexRgbaString(v, '0x')\n        : (v) => colorToHexRgbString(v, '0x');\n}\nfunction isForColor(params) {\n    if ('color' in params) {\n        return true;\n    }\n    if (params.view === 'color') {\n        return true;\n    }\n    return false;\n}\nconst NumberColorInputPlugin = createPlugin({\n    id: 'input-color-number',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'number') {\n            return null;\n        }\n        if (!isForColor(params)) {\n            return null;\n        }\n        const result = parseColorInputParams(params);\n        return result\n            ? {\n                initialValue: value,\n                params: Object.assign(Object.assign({}, result), { supportsAlpha: shouldSupportAlpha$1(params) }),\n            }\n            : null;\n    },\n    binding: {\n        reader: (args) => {\n            return args.params.supportsAlpha\n                ? colorFromRgbaNumber\n                : colorFromRgbNumber;\n        },\n        equals: equalsColor,\n        writer: (args) => {\n            return createColorNumberWriter(args.params.supportsAlpha);\n        },\n    },\n    controller: (args) => {\n        var _a, _b;\n        return new ColorController(args.document, {\n            colorType: 'int',\n            expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n            formatter: createFormatter$1(args.params.supportsAlpha),\n            parser: createColorStringParser('int'),\n            pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n            supportsAlpha: args.params.supportsAlpha,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nfunction colorFromObject(value, type) {\n    if (!isColorObject(value)) {\n        return mapColorType(IntColor.black(), type);\n    }\n    if (type === 'int') {\n        const comps = createColorComponentsFromRgbObject(value);\n        return new IntColor(comps, 'rgb');\n    }\n    if (type === 'float') {\n        const comps = createColorComponentsFromRgbObject(value);\n        return new FloatColor(comps, 'rgb');\n    }\n    return mapColorType(IntColor.black(), 'int');\n}\n\nfunction shouldSupportAlpha(initialValue) {\n    return isRgbaColorObject(initialValue);\n}\nfunction createColorObjectBindingReader(type) {\n    return (value) => {\n        const c = colorFromObject(value, type);\n        return mapColorType(c, 'int');\n    };\n}\nfunction createColorObjectFormatter(supportsAlpha, type) {\n    return (value) => {\n        if (supportsAlpha) {\n            return colorToObjectRgbaString(value, type);\n        }\n        return colorToObjectRgbString(value, type);\n    };\n}\nconst ObjectColorInputPlugin = createPlugin({\n    id: 'input-color-object',\n    type: 'input',\n    accept: (value, params) => {\n        var _a;\n        if (!isColorObject(value)) {\n            return null;\n        }\n        const result = parseColorInputParams(params);\n        return result\n            ? {\n                initialValue: value,\n                params: Object.assign(Object.assign({}, result), { colorType: (_a = extractColorType(params)) !== null && _a !== void 0 ? _a : 'int' }),\n            }\n            : null;\n    },\n    binding: {\n        reader: (args) => createColorObjectBindingReader(args.params.colorType),\n        equals: equalsColor,\n        writer: (args) => createColorObjectWriter(shouldSupportAlpha(args.initialValue), args.params.colorType),\n    },\n    controller: (args) => {\n        var _a, _b;\n        const supportsAlpha = isRgbaColorObject(args.initialValue);\n        return new ColorController(args.document, {\n            colorType: args.params.colorType,\n            expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n            formatter: createColorObjectFormatter(supportsAlpha, args.params.colorType),\n            parser: createColorStringParser('int'),\n            pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n            supportsAlpha: supportsAlpha,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nconst StringColorInputPlugin = createPlugin({\n    id: 'input-color-string',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'string') {\n            return null;\n        }\n        if (params.view === 'text') {\n            return null;\n        }\n        const format = detectStringColorFormat(value, extractColorType(params));\n        if (!format) {\n            return null;\n        }\n        const stringifier = findColorStringifier(format);\n        if (!stringifier) {\n            return null;\n        }\n        const result = parseColorInputParams(params);\n        return result\n            ? {\n                initialValue: value,\n                params: Object.assign(Object.assign({}, result), { format: format, stringifier: stringifier }),\n            }\n            : null;\n    },\n    binding: {\n        reader: () => readIntColorString,\n        equals: equalsColor,\n        writer: (args) => {\n            const writer = createColorStringWriter(args.params.format);\n            if (!writer) {\n                throw TpError.notBindable();\n            }\n            return writer;\n        },\n    },\n    controller: (args) => {\n        var _a, _b;\n        return new ColorController(args.document, {\n            colorType: args.params.format.type,\n            expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n            formatter: args.params.stringifier,\n            parser: createColorStringParser('int'),\n            pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n            supportsAlpha: args.params.format.alpha,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nclass PointNdConstraint {\n    constructor(config) {\n        this.components = config.components;\n        this.asm_ = config.assembly;\n    }\n    constrain(value) {\n        const comps = this.asm_\n            .toComponents(value)\n            .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\n        return this.asm_.fromComponents(comps);\n    }\n}\n\nconst cn$6 = ClassName('pndtxt');\nclass PointNdTextView {\n    constructor(doc, config) {\n        this.textViews = config.textViews;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$6());\n        this.textViews.forEach((v) => {\n            const axisElem = doc.createElement('div');\n            axisElem.classList.add(cn$6('a'));\n            axisElem.appendChild(v.element);\n            this.element.appendChild(axisElem);\n        });\n    }\n}\n\nfunction createAxisController(doc, config, index) {\n    return new NumberTextController(doc, {\n        arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n        parser: config.parser,\n        props: config.axes[index].textProps,\n        value: createValue(0, {\n            constraint: config.axes[index].constraint,\n        }),\n        viewProps: config.viewProps,\n    });\n}\nclass PointNdTextController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n        this.acs_.forEach((c, index) => {\n            connectValues({\n                primary: this.value,\n                secondary: c.value,\n                forward: (p) => config.assembly.toComponents(p)[index],\n                backward: (p, s) => {\n                    const comps = config.assembly.toComponents(p);\n                    comps[index] = s;\n                    return config.assembly.fromComponents(comps);\n                },\n            });\n        });\n        this.view = new PointNdTextView(doc, {\n            textViews: this.acs_.map((ac) => ac.view),\n        });\n    }\n    get textControllers() {\n        return this.acs_;\n    }\n}\n\nclass SliderInputBindingApi extends BindingApi {\n    get max() {\n        return this.controller.valueController.sliderController.props.get('max');\n    }\n    set max(max) {\n        this.controller.valueController.sliderController.props.set('max', max);\n    }\n    get min() {\n        return this.controller.valueController.sliderController.props.get('min');\n    }\n    set min(max) {\n        this.controller.valueController.sliderController.props.set('min', max);\n    }\n}\n\nfunction createConstraint$4(params, initialValue) {\n    const constraints = [];\n    const sc = createStepConstraint(params, initialValue);\n    if (sc) {\n        constraints.push(sc);\n    }\n    const rc = createRangeConstraint(params);\n    if (rc) {\n        constraints.push(rc);\n    }\n    const lc = createListConstraint(params.options);\n    if (lc) {\n        constraints.push(lc);\n    }\n    return new CompositeConstraint(constraints);\n}\nconst NumberInputPlugin = createPlugin({\n    id: 'input-number',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'number') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createNumberTextInputParamsParser(p)), { options: p.optional.custom(parseListOptions), readonly: p.optional.constant(false) })));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => numberFromUnknown,\n        constraint: (args) => createConstraint$4(args.params, args.initialValue),\n        writer: (_args) => writePrimitive,\n    },\n    controller: (args) => {\n        const value = args.value;\n        const c = args.constraint;\n        const lc = c && findConstraint(c, ListConstraint);\n        if (lc) {\n            return new ListController(args.document, {\n                props: new ValueMap({\n                    options: lc.values.value('options'),\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        }\n        const textPropsObj = createNumberTextPropsObject(args.params, value.rawValue);\n        const drc = c && findConstraint(c, DefiniteRangeConstraint);\n        if (drc) {\n            return new SliderTextController(args.document, Object.assign(Object.assign({}, createSliderTextProps(Object.assign(Object.assign({}, textPropsObj), { keyScale: createValue(textPropsObj.keyScale), max: drc.values.value('max'), min: drc.values.value('min') }))), { parser: parseNumber, value: value, viewProps: args.viewProps }));\n        }\n        return new NumberTextController(args.document, {\n            parser: parseNumber,\n            props: ValueMap.fromObject(textPropsObj),\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (typeof args.controller.value.rawValue !== 'number') {\n            return null;\n        }\n        if (args.controller.valueController instanceof SliderTextController) {\n            return new SliderInputBindingApi(args.controller);\n        }\n        if (args.controller.valueController instanceof ListController) {\n            return new ListInputBindingApi(args.controller);\n        }\n        return null;\n    },\n});\n\nclass Point2d {\n    constructor(x = 0, y = 0) {\n        this.x = x;\n        this.y = y;\n    }\n    getComponents() {\n        return [this.x, this.y];\n    }\n    static isObject(obj) {\n        if (isEmpty(obj)) {\n            return false;\n        }\n        const x = obj.x;\n        const y = obj.y;\n        if (typeof x !== 'number' || typeof y !== 'number') {\n            return false;\n        }\n        return true;\n    }\n    static equals(v1, v2) {\n        return v1.x === v2.x && v1.y === v2.y;\n    }\n    toObject() {\n        return {\n            x: this.x,\n            y: this.y,\n        };\n    }\n}\nconst Point2dAssembly = {\n    toComponents: (p) => p.getComponents(),\n    fromComponents: (comps) => new Point2d(...comps),\n};\n\nconst cn$5 = ClassName('p2d');\nclass Point2dView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$5());\n        config.viewProps.bindClassModifiers(this.element);\n        bindValue(config.expanded, valueToClassName(this.element, cn$5(undefined, 'expanded')));\n        const headElem = doc.createElement('div');\n        headElem.classList.add(cn$5('h'));\n        this.element.appendChild(headElem);\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(cn$5('b'));\n        buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n        config.viewProps.bindDisabled(buttonElem);\n        headElem.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        const textElem = doc.createElement('div');\n        textElem.classList.add(cn$5('t'));\n        headElem.appendChild(textElem);\n        this.textElement = textElem;\n        if (config.pickerLayout === 'inline') {\n            const pickerElem = doc.createElement('div');\n            pickerElem.classList.add(cn$5('p'));\n            this.element.appendChild(pickerElem);\n            this.pickerElement = pickerElem;\n        }\n        else {\n            this.pickerElement = null;\n        }\n    }\n}\n\nconst cn$4 = ClassName('p2dp');\nclass Point2dPickerView {\n    constructor(doc, config) {\n        this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n        this.onPropsChange_ = this.onPropsChange_.bind(this);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.props_ = config.props;\n        this.props_.emitter.on('change', this.onPropsChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$4());\n        if (config.layout === 'popup') {\n            this.element.classList.add(cn$4(undefined, 'p'));\n        }\n        config.viewProps.bindClassModifiers(this.element);\n        const padElem = doc.createElement('div');\n        padElem.classList.add(cn$4('p'));\n        config.viewProps.bindTabIndex(padElem);\n        this.element.appendChild(padElem);\n        this.padElement = padElem;\n        const svgElem = doc.createElementNS(SVG_NS, 'svg');\n        svgElem.classList.add(cn$4('g'));\n        this.padElement.appendChild(svgElem);\n        this.svgElem_ = svgElem;\n        const xAxisElem = doc.createElementNS(SVG_NS, 'line');\n        xAxisElem.classList.add(cn$4('ax'));\n        xAxisElem.setAttributeNS(null, 'x1', '0');\n        xAxisElem.setAttributeNS(null, 'y1', '50%');\n        xAxisElem.setAttributeNS(null, 'x2', '100%');\n        xAxisElem.setAttributeNS(null, 'y2', '50%');\n        this.svgElem_.appendChild(xAxisElem);\n        const yAxisElem = doc.createElementNS(SVG_NS, 'line');\n        yAxisElem.classList.add(cn$4('ax'));\n        yAxisElem.setAttributeNS(null, 'x1', '50%');\n        yAxisElem.setAttributeNS(null, 'y1', '0');\n        yAxisElem.setAttributeNS(null, 'x2', '50%');\n        yAxisElem.setAttributeNS(null, 'y2', '100%');\n        this.svgElem_.appendChild(yAxisElem);\n        const lineElem = doc.createElementNS(SVG_NS, 'line');\n        lineElem.classList.add(cn$4('l'));\n        lineElem.setAttributeNS(null, 'x1', '50%');\n        lineElem.setAttributeNS(null, 'y1', '50%');\n        this.svgElem_.appendChild(lineElem);\n        this.lineElem_ = lineElem;\n        const markerElem = doc.createElement('div');\n        markerElem.classList.add(cn$4('m'));\n        this.padElement.appendChild(markerElem);\n        this.markerElem_ = markerElem;\n        config.value.emitter.on('change', this.onValueChange_);\n        this.value = config.value;\n        this.update_();\n    }\n    get allFocusableElements() {\n        return [this.padElement];\n    }\n    update_() {\n        const [x, y] = this.value.rawValue.getComponents();\n        const max = this.props_.get('max');\n        const px = mapRange(x, -max, +max, 0, 100);\n        const py = mapRange(y, -max, +max, 0, 100);\n        const ipy = this.props_.get('invertsY') ? 100 - py : py;\n        this.lineElem_.setAttributeNS(null, 'x2', `${px}%`);\n        this.lineElem_.setAttributeNS(null, 'y2', `${ipy}%`);\n        this.markerElem_.style.left = `${px}%`;\n        this.markerElem_.style.top = `${ipy}%`;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n    onPropsChange_() {\n        this.update_();\n    }\n    onFoldableChange_() {\n        this.update_();\n    }\n}\n\nfunction computeOffset(ev, keyScales, invertsY) {\n    return [\n        getStepForKey(keyScales[0], getHorizontalStepKeys(ev)),\n        getStepForKey(keyScales[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1),\n    ];\n}\nclass Point2dPickerController {\n    constructor(doc, config) {\n        this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n        this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.props = config.props;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new Point2dPickerView(doc, {\n            layout: config.layout,\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.padElement);\n        this.ptHandler_.emitter.on('down', this.onPointerDown_);\n        this.ptHandler_.emitter.on('move', this.onPointerMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n        this.view.padElement.addEventListener('keyup', this.onPadKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        const max = this.props.get('max');\n        const px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\n        const py = mapRange(this.props.get('invertsY') ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\n        this.value.setRawValue(new Point2d(px, py), opts);\n    }\n    onPointerDown_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onPadKeyDown_(ev) {\n        if (isArrowKey(ev.key)) {\n            ev.preventDefault();\n        }\n        const [dx, dy] = computeOffset(ev, [this.props.get('xKeyScale'), this.props.get('yKeyScale')], this.props.get('invertsY'));\n        if (dx === 0 && dy === 0) {\n            return;\n        }\n        this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPadKeyUp_(ev) {\n        const [dx, dy] = computeOffset(ev, [this.props.get('xKeyScale'), this.props.get('yKeyScale')], this.props.get('invertsY'));\n        if (dx === 0 && dy === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n\nclass Point2dController {\n    constructor(doc, config) {\n        var _a, _b;\n        this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n        this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n        this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n        this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.foldable_ = Foldable.create(config.expanded);\n        this.popC_ =\n            config.pickerLayout === 'popup'\n                ? new PopupController(doc, {\n                    viewProps: this.viewProps,\n                })\n                : null;\n        const padC = new Point2dPickerController(doc, {\n            layout: config.pickerLayout,\n            props: new ValueMap({\n                invertsY: createValue(config.invertsY),\n                max: createValue(config.max),\n                xKeyScale: config.axes[0].textProps.value('keyScale'),\n                yKeyScale: config.axes[1].textProps.value('keyScale'),\n            }),\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        padC.view.allFocusableElements.forEach((elem) => {\n            elem.addEventListener('blur', this.onPopupChildBlur_);\n            elem.addEventListener('keydown', this.onPopupChildKeydown_);\n        });\n        this.pickerC_ = padC;\n        this.textC_ = new PointNdTextController(doc, {\n            assembly: Point2dAssembly,\n            axes: config.axes,\n            parser: config.parser,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view = new Point2dView(doc, {\n            expanded: this.foldable_.value('expanded'),\n            pickerLayout: config.pickerLayout,\n            viewProps: this.viewProps,\n        });\n        this.view.textElement.appendChild(this.textC_.view.element);\n        (_a = this.view.buttonElement) === null || _a === void 0 ? void 0 : _a.addEventListener('blur', this.onPadButtonBlur_);\n        (_b = this.view.buttonElement) === null || _b === void 0 ? void 0 : _b.addEventListener('click', this.onPadButtonClick_);\n        if (this.popC_) {\n            this.view.element.appendChild(this.popC_.view.element);\n            this.popC_.view.element.appendChild(this.pickerC_.view.element);\n            connectValues({\n                primary: this.foldable_.value('expanded'),\n                secondary: this.popC_.shows,\n                forward: (p) => p,\n                backward: (_, s) => s,\n            });\n        }\n        else if (this.view.pickerElement) {\n            this.view.pickerElement.appendChild(this.pickerC_.view.element);\n            bindFoldable(this.foldable_, this.view.pickerElement);\n        }\n    }\n    get textController() {\n        return this.textC_;\n    }\n    onPadButtonBlur_(e) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.view.element;\n        const nextTarget = forceCast(e.relatedTarget);\n        if (!nextTarget || !elem.contains(nextTarget)) {\n            this.popC_.shows.rawValue = false;\n        }\n    }\n    onPadButtonClick_() {\n        this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n        if (this.foldable_.get('expanded')) {\n            this.pickerC_.view.allFocusableElements[0].focus();\n        }\n    }\n    onPopupChildBlur_(ev) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.popC_.view.element;\n        const nextTarget = findNextTarget(ev);\n        if (nextTarget && elem.contains(nextTarget)) {\n            return;\n        }\n        if (nextTarget &&\n            nextTarget === this.view.buttonElement &&\n            !supportsTouch(elem.ownerDocument)) {\n            return;\n        }\n        this.popC_.shows.rawValue = false;\n    }\n    onPopupChildKeydown_(ev) {\n        if (this.popC_) {\n            if (ev.key === 'Escape') {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        else if (this.view.pickerElement) {\n            if (ev.key === 'Escape') {\n                this.view.buttonElement.focus();\n            }\n        }\n    }\n}\n\nfunction point2dFromUnknown(value) {\n    return Point2d.isObject(value)\n        ? new Point2d(value.x, value.y)\n        : new Point2d();\n}\nfunction writePoint2d(target, value) {\n    target.writeProperty('x', value.x);\n    target.writeProperty('y', value.y);\n}\n\nfunction createConstraint$3(params, initialValue) {\n    return new PointNdConstraint({\n        assembly: Point2dAssembly,\n        components: [\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y),\n        ],\n    });\n}\nfunction getSuitableMaxDimensionValue(params, rawValue) {\n    var _a, _b;\n    if (!isEmpty(params.min) || !isEmpty(params.max)) {\n        return Math.max(Math.abs((_a = params.min) !== null && _a !== void 0 ? _a : 0), Math.abs((_b = params.max) !== null && _b !== void 0 ? _b : 0));\n    }\n    const step = getSuitableKeyScale(params);\n    return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n}\nfunction getSuitableMax(params, initialValue) {\n    var _a, _b;\n    const xr = getSuitableMaxDimensionValue(deepMerge(params, ((_a = params.x) !== null && _a !== void 0 ? _a : {})), initialValue.x);\n    const yr = getSuitableMaxDimensionValue(deepMerge(params, ((_b = params.y) !== null && _b !== void 0 ? _b : {})), initialValue.y);\n    return Math.max(xr, yr);\n}\nfunction shouldInvertY(params) {\n    if (!('y' in params)) {\n        return false;\n    }\n    const yParams = params.y;\n    if (!yParams) {\n        return false;\n    }\n    return 'inverted' in yParams ? !!yParams.inverted : false;\n}\nconst Point2dInputPlugin = createPlugin({\n    id: 'input-point2d',\n    type: 'input',\n    accept: (value, params) => {\n        if (!Point2d.isObject(value)) {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createPointDimensionParser(p)), { expanded: p.optional.boolean, picker: p.optional.custom(parsePickerLayout), readonly: p.optional.constant(false), x: p.optional.custom(parsePointDimensionParams), y: p.optional.object(Object.assign(Object.assign({}, createPointDimensionParser(p)), { inverted: p.optional.boolean })) })));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: () => point2dFromUnknown,\n        constraint: (args) => createConstraint$3(args.params, args.initialValue),\n        equals: Point2d.equals,\n        writer: () => writePoint2d,\n    },\n    controller: (args) => {\n        var _a, _b;\n        const doc = args.document;\n        const value = args.value;\n        const c = args.constraint;\n        const dParams = [args.params.x, args.params.y];\n        return new Point2dController(doc, {\n            axes: value.rawValue.getComponents().map((comp, i) => {\n                var _a;\n                return createPointAxis({\n                    constraint: c.components[i],\n                    initialValue: comp,\n                    params: deepMerge(args.params, ((_a = dParams[i]) !== null && _a !== void 0 ? _a : {})),\n                });\n            }),\n            expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n            invertsY: shouldInvertY(args.params),\n            max: getSuitableMax(args.params, value.rawValue),\n            parser: parseNumber,\n            pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nclass Point3d {\n    constructor(x = 0, y = 0, z = 0) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n    getComponents() {\n        return [this.x, this.y, this.z];\n    }\n    static isObject(obj) {\n        if (isEmpty(obj)) {\n            return false;\n        }\n        const x = obj.x;\n        const y = obj.y;\n        const z = obj.z;\n        if (typeof x !== 'number' ||\n            typeof y !== 'number' ||\n            typeof z !== 'number') {\n            return false;\n        }\n        return true;\n    }\n    static equals(v1, v2) {\n        return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n    }\n    toObject() {\n        return {\n            x: this.x,\n            y: this.y,\n            z: this.z,\n        };\n    }\n}\nconst Point3dAssembly = {\n    toComponents: (p) => p.getComponents(),\n    fromComponents: (comps) => new Point3d(...comps),\n};\n\nfunction point3dFromUnknown(value) {\n    return Point3d.isObject(value)\n        ? new Point3d(value.x, value.y, value.z)\n        : new Point3d();\n}\nfunction writePoint3d(target, value) {\n    target.writeProperty('x', value.x);\n    target.writeProperty('y', value.y);\n    target.writeProperty('z', value.z);\n}\n\nfunction createConstraint$2(params, initialValue) {\n    return new PointNdConstraint({\n        assembly: Point3dAssembly,\n        components: [\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.z), initialValue.z),\n        ],\n    });\n}\nconst Point3dInputPlugin = createPlugin({\n    id: 'input-point3d',\n    type: 'input',\n    accept: (value, params) => {\n        if (!Point3d.isObject(value)) {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createPointDimensionParser(p)), { readonly: p.optional.constant(false), x: p.optional.custom(parsePointDimensionParams), y: p.optional.custom(parsePointDimensionParams), z: p.optional.custom(parsePointDimensionParams) })));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => point3dFromUnknown,\n        constraint: (args) => createConstraint$2(args.params, args.initialValue),\n        equals: Point3d.equals,\n        writer: (_args) => writePoint3d,\n    },\n    controller: (args) => {\n        const value = args.value;\n        const c = args.constraint;\n        const dParams = [args.params.x, args.params.y, args.params.z];\n        return new PointNdTextController(args.document, {\n            assembly: Point3dAssembly,\n            axes: value.rawValue.getComponents().map((comp, i) => {\n                var _a;\n                return createPointAxis({\n                    constraint: c.components[i],\n                    initialValue: comp,\n                    params: deepMerge(args.params, ((_a = dParams[i]) !== null && _a !== void 0 ? _a : {})),\n                });\n            }),\n            parser: parseNumber,\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nclass Point4d {\n    constructor(x = 0, y = 0, z = 0, w = 0) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.w = w;\n    }\n    getComponents() {\n        return [this.x, this.y, this.z, this.w];\n    }\n    static isObject(obj) {\n        if (isEmpty(obj)) {\n            return false;\n        }\n        const x = obj.x;\n        const y = obj.y;\n        const z = obj.z;\n        const w = obj.w;\n        if (typeof x !== 'number' ||\n            typeof y !== 'number' ||\n            typeof z !== 'number' ||\n            typeof w !== 'number') {\n            return false;\n        }\n        return true;\n    }\n    static equals(v1, v2) {\n        return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\n    }\n    toObject() {\n        return {\n            x: this.x,\n            y: this.y,\n            z: this.z,\n            w: this.w,\n        };\n    }\n}\nconst Point4dAssembly = {\n    toComponents: (p) => p.getComponents(),\n    fromComponents: (comps) => new Point4d(...comps),\n};\n\nfunction point4dFromUnknown(value) {\n    return Point4d.isObject(value)\n        ? new Point4d(value.x, value.y, value.z, value.w)\n        : new Point4d();\n}\nfunction writePoint4d(target, value) {\n    target.writeProperty('x', value.x);\n    target.writeProperty('y', value.y);\n    target.writeProperty('z', value.z);\n    target.writeProperty('w', value.w);\n}\n\nfunction createConstraint$1(params, initialValue) {\n    return new PointNdConstraint({\n        assembly: Point4dAssembly,\n        components: [\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.z), initialValue.z),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.w), initialValue.w),\n        ],\n    });\n}\nconst Point4dInputPlugin = createPlugin({\n    id: 'input-point4d',\n    type: 'input',\n    accept: (value, params) => {\n        if (!Point4d.isObject(value)) {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createPointDimensionParser(p)), { readonly: p.optional.constant(false), w: p.optional.custom(parsePointDimensionParams), x: p.optional.custom(parsePointDimensionParams), y: p.optional.custom(parsePointDimensionParams), z: p.optional.custom(parsePointDimensionParams) })));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => point4dFromUnknown,\n        constraint: (args) => createConstraint$1(args.params, args.initialValue),\n        equals: Point4d.equals,\n        writer: (_args) => writePoint4d,\n    },\n    controller: (args) => {\n        const value = args.value;\n        const c = args.constraint;\n        const dParams = [\n            args.params.x,\n            args.params.y,\n            args.params.z,\n            args.params.w,\n        ];\n        return new PointNdTextController(args.document, {\n            assembly: Point4dAssembly,\n            axes: value.rawValue.getComponents().map((comp, i) => {\n                var _a;\n                return createPointAxis({\n                    constraint: c.components[i],\n                    initialValue: comp,\n                    params: deepMerge(args.params, ((_a = dParams[i]) !== null && _a !== void 0 ? _a : {})),\n                });\n            }),\n            parser: parseNumber,\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nfunction createConstraint(params) {\n    const constraints = [];\n    const lc = createListConstraint(params.options);\n    if (lc) {\n        constraints.push(lc);\n    }\n    return new CompositeConstraint(constraints);\n}\nconst StringInputPlugin = createPlugin({\n    id: 'input-string',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'string') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            readonly: p.optional.constant(false),\n            options: p.optional.custom(parseListOptions),\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => stringFromUnknown,\n        constraint: (args) => createConstraint(args.params),\n        writer: (_args) => writePrimitive,\n    },\n    controller: (args) => {\n        const doc = args.document;\n        const value = args.value;\n        const c = args.constraint;\n        const lc = c && findConstraint(c, ListConstraint);\n        if (lc) {\n            return new ListController(doc, {\n                props: new ValueMap({\n                    options: lc.values.value('options'),\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new TextController(doc, {\n            parser: (v) => v,\n            props: ValueMap.fromObject({\n                formatter: formatString,\n            }),\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (typeof args.controller.value.rawValue !== 'string') {\n            return null;\n        }\n        if (args.controller.valueController instanceof ListController) {\n            return new ListInputBindingApi(args.controller);\n        }\n        return null;\n    },\n});\n\nconst Constants = {\n    monitor: {\n        defaultInterval: 200,\n        defaultRows: 3,\n    },\n};\n\nconst cn$3 = ClassName('mll');\nclass MultiLogView {\n    constructor(doc, config) {\n        this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n        this.formatter_ = config.formatter;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$3());\n        config.viewProps.bindClassModifiers(this.element);\n        const textareaElem = doc.createElement('textarea');\n        textareaElem.classList.add(cn$3('i'));\n        textareaElem.style.height = `calc(var(${getCssVar('containerUnitSize')}) * ${config.rows})`;\n        textareaElem.readOnly = true;\n        config.viewProps.bindDisabled(textareaElem);\n        this.element.appendChild(textareaElem);\n        this.textareaElem_ = textareaElem;\n        config.value.emitter.on('change', this.onValueUpdate_);\n        this.value = config.value;\n        this.update_();\n    }\n    update_() {\n        const elem = this.textareaElem_;\n        const shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n        const lines = [];\n        this.value.rawValue.forEach((value) => {\n            if (value !== undefined) {\n                lines.push(this.formatter_(value));\n            }\n        });\n        elem.textContent = lines.join('\\n');\n        if (shouldScroll) {\n            elem.scrollTop = elem.scrollHeight;\n        }\n    }\n    onValueUpdate_() {\n        this.update_();\n    }\n}\n\nclass MultiLogController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new MultiLogView(doc, {\n            formatter: config.formatter,\n            rows: config.rows,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n    }\n}\n\nconst cn$2 = ClassName('sgl');\nclass SingleLogView {\n    constructor(doc, config) {\n        this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n        this.formatter_ = config.formatter;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$2());\n        config.viewProps.bindClassModifiers(this.element);\n        const inputElem = doc.createElement('input');\n        inputElem.classList.add(cn$2('i'));\n        inputElem.readOnly = true;\n        inputElem.type = 'text';\n        config.viewProps.bindDisabled(inputElem);\n        this.element.appendChild(inputElem);\n        this.inputElement = inputElem;\n        config.value.emitter.on('change', this.onValueUpdate_);\n        this.value = config.value;\n        this.update_();\n    }\n    update_() {\n        const values = this.value.rawValue;\n        const lastValue = values[values.length - 1];\n        this.inputElement.value =\n            lastValue !== undefined ? this.formatter_(lastValue) : '';\n    }\n    onValueUpdate_() {\n        this.update_();\n    }\n}\n\nclass SingleLogController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new SingleLogView(doc, {\n            formatter: config.formatter,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n    }\n}\n\nconst BooleanMonitorPlugin = createPlugin({\n    id: 'monitor-bool',\n    type: 'monitor',\n    accept: (value, params) => {\n        if (typeof value !== 'boolean') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            readonly: p.required.constant(true),\n            rows: p.optional.number,\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => boolFromUnknown,\n    },\n    controller: (args) => {\n        var _a;\n        if (args.value.rawValue.length === 1) {\n            return new SingleLogController(args.document, {\n                formatter: BooleanFormatter,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new MultiLogController(args.document, {\n            formatter: BooleanFormatter,\n            rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nclass GraphLogMonitorBindingApi extends BindingApi {\n    get max() {\n        return this.controller.valueController.props.get('max');\n    }\n    set max(max) {\n        this.controller.valueController.props.set('max', max);\n    }\n    get min() {\n        return this.controller.valueController.props.get('min');\n    }\n    set min(min) {\n        this.controller.valueController.props.set('min', min);\n    }\n}\n\nconst cn$1 = ClassName('grl');\nclass GraphLogView {\n    constructor(doc, config) {\n        this.onCursorChange_ = this.onCursorChange_.bind(this);\n        this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$1());\n        config.viewProps.bindClassModifiers(this.element);\n        this.formatter_ = config.formatter;\n        this.props_ = config.props;\n        this.cursor_ = config.cursor;\n        this.cursor_.emitter.on('change', this.onCursorChange_);\n        const svgElem = doc.createElementNS(SVG_NS, 'svg');\n        svgElem.classList.add(cn$1('g'));\n        svgElem.style.height = `calc(var(${getCssVar('containerUnitSize')}) * ${config.rows})`;\n        this.element.appendChild(svgElem);\n        this.svgElem_ = svgElem;\n        const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n        this.svgElem_.appendChild(lineElem);\n        this.lineElem_ = lineElem;\n        const tooltipElem = doc.createElement('div');\n        tooltipElem.classList.add(cn$1('t'), ClassName('tt')());\n        this.element.appendChild(tooltipElem);\n        this.tooltipElem_ = tooltipElem;\n        config.value.emitter.on('change', this.onValueUpdate_);\n        this.value = config.value;\n        this.update_();\n    }\n    get graphElement() {\n        return this.svgElem_;\n    }\n    update_() {\n        const { clientWidth: w, clientHeight: h } = this.element;\n        const maxIndex = this.value.rawValue.length - 1;\n        const min = this.props_.get('min');\n        const max = this.props_.get('max');\n        const points = [];\n        this.value.rawValue.forEach((v, index) => {\n            if (v === undefined) {\n                return;\n            }\n            const x = mapRange(index, 0, maxIndex, 0, w);\n            const y = mapRange(v, min, max, h, 0);\n            points.push([x, y].join(','));\n        });\n        this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n        const tooltipElem = this.tooltipElem_;\n        const value = this.value.rawValue[this.cursor_.rawValue];\n        if (value === undefined) {\n            tooltipElem.classList.remove(cn$1('t', 'a'));\n            return;\n        }\n        const tx = mapRange(this.cursor_.rawValue, 0, maxIndex, 0, w);\n        const ty = mapRange(value, min, max, h, 0);\n        tooltipElem.style.left = `${tx}px`;\n        tooltipElem.style.top = `${ty}px`;\n        tooltipElem.textContent = `${this.formatter_(value)}`;\n        if (!tooltipElem.classList.contains(cn$1('t', 'a'))) {\n            tooltipElem.classList.add(cn$1('t', 'a'), cn$1('t', 'in'));\n            forceReflow(tooltipElem);\n            tooltipElem.classList.remove(cn$1('t', 'in'));\n        }\n    }\n    onValueUpdate_() {\n        this.update_();\n    }\n    onCursorChange_() {\n        this.update_();\n    }\n}\n\nclass GraphLogController {\n    constructor(doc, config) {\n        this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n        this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n        this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n        this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n        this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n        this.props = config.props;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.cursor_ = createValue(-1);\n        this.view = new GraphLogView(doc, {\n            cursor: this.cursor_,\n            formatter: config.formatter,\n            rows: config.rows,\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        if (!supportsTouch(doc)) {\n            this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n            this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n        }\n        else {\n            const ph = new PointerHandler(this.view.element);\n            ph.emitter.on('down', this.onGraphPointerDown_);\n            ph.emitter.on('move', this.onGraphPointerMove_);\n            ph.emitter.on('up', this.onGraphPointerUp_);\n        }\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            max: p.required.number,\n            min: p.required.number,\n        }), (result) => {\n            this.props.set('max', result.max);\n            this.props.set('min', result.min);\n            return true;\n        });\n    }\n    exportProps() {\n        return exportBladeState(null, {\n            max: this.props.get('max'),\n            min: this.props.get('min'),\n        });\n    }\n    onGraphMouseLeave_() {\n        this.cursor_.rawValue = -1;\n    }\n    onGraphMouseMove_(ev) {\n        const { clientWidth: w } = this.view.element;\n        this.cursor_.rawValue = Math.floor(mapRange(ev.offsetX, 0, w, 0, this.value.rawValue.length));\n    }\n    onGraphPointerDown_(ev) {\n        this.onGraphPointerMove_(ev);\n    }\n    onGraphPointerMove_(ev) {\n        if (!ev.data.point) {\n            this.cursor_.rawValue = -1;\n            return;\n        }\n        this.cursor_.rawValue = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n    }\n    onGraphPointerUp_() {\n        this.cursor_.rawValue = -1;\n    }\n}\n\nfunction createFormatter(params) {\n    return !isEmpty(params.format) ? params.format : createNumberFormatter(2);\n}\nfunction createTextMonitor(args) {\n    var _a;\n    if (args.value.rawValue.length === 1) {\n        return new SingleLogController(args.document, {\n            formatter: createFormatter(args.params),\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    return new MultiLogController(args.document, {\n        formatter: createFormatter(args.params),\n        rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n        value: args.value,\n        viewProps: args.viewProps,\n    });\n}\nfunction createGraphMonitor(args) {\n    var _a, _b, _c;\n    return new GraphLogController(args.document, {\n        formatter: createFormatter(args.params),\n        rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n        props: ValueMap.fromObject({\n            max: (_b = args.params.max) !== null && _b !== void 0 ? _b : 100,\n            min: (_c = args.params.min) !== null && _c !== void 0 ? _c : 0,\n        }),\n        value: args.value,\n        viewProps: args.viewProps,\n    });\n}\nfunction shouldShowGraph(params) {\n    return params.view === 'graph';\n}\nconst NumberMonitorPlugin = createPlugin({\n    id: 'monitor-number',\n    type: 'monitor',\n    accept: (value, params) => {\n        if (typeof value !== 'number') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            format: p.optional.function,\n            max: p.optional.number,\n            min: p.optional.number,\n            readonly: p.required.constant(true),\n            rows: p.optional.number,\n            view: p.optional.string,\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        defaultBufferSize: (params) => (shouldShowGraph(params) ? 64 : 1),\n        reader: (_args) => numberFromUnknown,\n    },\n    controller: (args) => {\n        if (shouldShowGraph(args.params)) {\n            return createGraphMonitor(args);\n        }\n        return createTextMonitor(args);\n    },\n    api: (args) => {\n        if (args.controller.valueController instanceof GraphLogController) {\n            return new GraphLogMonitorBindingApi(args.controller);\n        }\n        return null;\n    },\n});\n\nconst StringMonitorPlugin = createPlugin({\n    id: 'monitor-string',\n    type: 'monitor',\n    accept: (value, params) => {\n        if (typeof value !== 'string') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            multiline: p.optional.boolean,\n            readonly: p.required.constant(true),\n            rows: p.optional.number,\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => stringFromUnknown,\n    },\n    controller: (args) => {\n        var _a;\n        const value = args.value;\n        const multiline = value.rawValue.length > 1 || args.params.multiline;\n        if (multiline) {\n            return new MultiLogController(args.document, {\n                formatter: formatString,\n                rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new SingleLogController(args.document, {\n            formatter: formatString,\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nclass BladeApiCache {\n    constructor() {\n        this.map_ = new Map();\n    }\n    get(bc) {\n        var _a;\n        return (_a = this.map_.get(bc)) !== null && _a !== void 0 ? _a : null;\n    }\n    has(bc) {\n        return this.map_.has(bc);\n    }\n    add(bc, api) {\n        this.map_.set(bc, api);\n        bc.viewProps.handleDispose(() => {\n            this.map_.delete(bc);\n        });\n        return api;\n    }\n}\n\nclass ReadWriteBinding {\n    constructor(config) {\n        this.target = config.target;\n        this.reader_ = config.reader;\n        this.writer_ = config.writer;\n    }\n    read() {\n        return this.reader_(this.target.read());\n    }\n    write(value) {\n        this.writer_(this.target, value);\n    }\n    inject(value) {\n        this.write(this.reader_(value));\n    }\n}\n\nfunction createInputBindingController(plugin, args) {\n    var _a;\n    const result = plugin.accept(args.target.read(), args.params);\n    if (isEmpty(result)) {\n        return null;\n    }\n    const valueArgs = {\n        target: args.target,\n        initialValue: result.initialValue,\n        params: result.params,\n    };\n    const params = parseRecord(args.params, (p) => ({\n        disabled: p.optional.boolean,\n        hidden: p.optional.boolean,\n        label: p.optional.string,\n        tag: p.optional.string,\n    }));\n    const reader = plugin.binding.reader(valueArgs);\n    const constraint = plugin.binding.constraint\n        ? plugin.binding.constraint(valueArgs)\n        : undefined;\n    const binding = new ReadWriteBinding({\n        reader: reader,\n        target: args.target,\n        writer: plugin.binding.writer(valueArgs),\n    });\n    const value = new InputBindingValue(createValue(reader(result.initialValue), {\n        constraint: constraint,\n        equals: plugin.binding.equals,\n    }), binding);\n    const controller = plugin.controller({\n        constraint: constraint,\n        document: args.document,\n        initialValue: result.initialValue,\n        params: result.params,\n        value: value,\n        viewProps: ViewProps.create({\n            disabled: params === null || params === void 0 ? void 0 : params.disabled,\n            hidden: params === null || params === void 0 ? void 0 : params.hidden,\n        }),\n    });\n    return new InputBindingController(args.document, {\n        blade: createBlade(),\n        props: ValueMap.fromObject({\n            label: 'label' in args.params ? (_a = params === null || params === void 0 ? void 0 : params.label) !== null && _a !== void 0 ? _a : null : args.target.key,\n        }),\n        tag: params === null || params === void 0 ? void 0 : params.tag,\n        value: value,\n        valueController: controller,\n    });\n}\n\nclass ReadonlyBinding {\n    constructor(config) {\n        this.target = config.target;\n        this.reader_ = config.reader;\n    }\n    read() {\n        return this.reader_(this.target.read());\n    }\n}\n\nfunction createTicker(document, interval) {\n    return interval === 0\n        ? new ManualTicker()\n        : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n}\nfunction createMonitorBindingController(plugin, args) {\n    var _a, _b, _c;\n    const result = plugin.accept(args.target.read(), args.params);\n    if (isEmpty(result)) {\n        return null;\n    }\n    const bindingArgs = {\n        target: args.target,\n        initialValue: result.initialValue,\n        params: result.params,\n    };\n    const params = parseRecord(args.params, (p) => ({\n        bufferSize: p.optional.number,\n        disabled: p.optional.boolean,\n        hidden: p.optional.boolean,\n        interval: p.optional.number,\n        label: p.optional.string,\n    }));\n    const reader = plugin.binding.reader(bindingArgs);\n    const bufferSize = (_b = (_a = params === null || params === void 0 ? void 0 : params.bufferSize) !== null && _a !== void 0 ? _a : (plugin.binding.defaultBufferSize &&\n        plugin.binding.defaultBufferSize(result.params))) !== null && _b !== void 0 ? _b : 1;\n    const value = new MonitorBindingValue({\n        binding: new ReadonlyBinding({\n            reader: reader,\n            target: args.target,\n        }),\n        bufferSize: bufferSize,\n        ticker: createTicker(args.document, params === null || params === void 0 ? void 0 : params.interval),\n    });\n    const controller = plugin.controller({\n        document: args.document,\n        params: result.params,\n        value: value,\n        viewProps: ViewProps.create({\n            disabled: params === null || params === void 0 ? void 0 : params.disabled,\n            hidden: params === null || params === void 0 ? void 0 : params.hidden,\n        }),\n    });\n    controller.viewProps.bindDisabled(value.ticker);\n    controller.viewProps.handleDispose(() => {\n        value.ticker.dispose();\n    });\n    return new MonitorBindingController(args.document, {\n        blade: createBlade(),\n        props: ValueMap.fromObject({\n            label: 'label' in args.params ? (_c = params === null || params === void 0 ? void 0 : params.label) !== null && _c !== void 0 ? _c : null : args.target.key,\n        }),\n        value: value,\n        valueController: controller,\n    });\n}\n\nclass PluginPool {\n    constructor(apiCache) {\n        this.pluginsMap_ = {\n            blades: [],\n            inputs: [],\n            monitors: [],\n        };\n        this.apiCache_ = apiCache;\n    }\n    getAll() {\n        return [\n            ...this.pluginsMap_.blades,\n            ...this.pluginsMap_.inputs,\n            ...this.pluginsMap_.monitors,\n        ];\n    }\n    register(bundleId, r) {\n        if (!isCompatible(r.core)) {\n            throw TpError.notCompatible(bundleId, r.id);\n        }\n        if (r.type === 'blade') {\n            this.pluginsMap_.blades.unshift(r);\n        }\n        else if (r.type === 'input') {\n            this.pluginsMap_.inputs.unshift(r);\n        }\n        else if (r.type === 'monitor') {\n            this.pluginsMap_.monitors.unshift(r);\n        }\n    }\n    createInput_(document, target, params) {\n        return this.pluginsMap_.inputs.reduce((result, plugin) => result !== null && result !== void 0 ? result : createInputBindingController(plugin, {\n            document: document,\n            target: target,\n            params: params,\n        }), null);\n    }\n    createMonitor_(document, target, params) {\n        return this.pluginsMap_.monitors.reduce((result, plugin) => result !== null && result !== void 0 ? result : createMonitorBindingController(plugin, {\n            document: document,\n            params: params,\n            target: target,\n        }), null);\n    }\n    createBinding(doc, target, params) {\n        const initialValue = target.read();\n        if (isEmpty(initialValue)) {\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        const ic = this.createInput_(doc, target, params);\n        if (ic) {\n            return ic;\n        }\n        const mc = this.createMonitor_(doc, target, params);\n        if (mc) {\n            return mc;\n        }\n        throw new TpError({\n            context: {\n                key: target.key,\n            },\n            type: 'nomatchingcontroller',\n        });\n    }\n    createBlade(document, params) {\n        const bc = this.pluginsMap_.blades.reduce((result, plugin) => result !== null && result !== void 0 ? result : createBladeController(plugin, {\n            document: document,\n            params: params,\n        }), null);\n        if (!bc) {\n            throw new TpError({\n                type: 'nomatchingview',\n                context: {\n                    params: params,\n                },\n            });\n        }\n        return bc;\n    }\n    createInputBindingApi_(bc) {\n        const api = this.pluginsMap_.inputs.reduce((result, plugin) => {\n            var _a, _b;\n            if (result) {\n                return result;\n            }\n            return ((_b = (_a = plugin.api) === null || _a === void 0 ? void 0 : _a.call(plugin, {\n                controller: bc,\n            })) !== null && _b !== void 0 ? _b : null);\n        }, null);\n        return this.apiCache_.add(bc, api !== null && api !== void 0 ? api : new BindingApi(bc));\n    }\n    createMonitorBindingApi_(bc) {\n        const api = this.pluginsMap_.monitors.reduce((result, plugin) => {\n            var _a, _b;\n            if (result) {\n                return result;\n            }\n            return ((_b = (_a = plugin.api) === null || _a === void 0 ? void 0 : _a.call(plugin, {\n                controller: bc,\n            })) !== null && _b !== void 0 ? _b : null);\n        }, null);\n        return this.apiCache_.add(bc, api !== null && api !== void 0 ? api : new BindingApi(bc));\n    }\n    createBindingApi(bc) {\n        if (this.apiCache_.has(bc)) {\n            return this.apiCache_.get(bc);\n        }\n        if (isInputBindingController(bc)) {\n            return this.createInputBindingApi_(bc);\n        }\n        if (isMonitorBindingController(bc)) {\n            return this.createMonitorBindingApi_(bc);\n        }\n        throw TpError.shouldNeverHappen();\n    }\n    createApi(bc) {\n        if (this.apiCache_.has(bc)) {\n            return this.apiCache_.get(bc);\n        }\n        if (isBindingController(bc)) {\n            return this.createBindingApi(bc);\n        }\n        const api = this.pluginsMap_.blades.reduce((result, plugin) => result !== null && result !== void 0 ? result : plugin.api({\n            controller: bc,\n            pool: this,\n        }), null);\n        if (!api) {\n            throw TpError.shouldNeverHappen();\n        }\n        return this.apiCache_.add(bc, api);\n    }\n}\n\nconst sharedCache = new BladeApiCache();\nfunction createDefaultPluginPool() {\n    const pool = new PluginPool(sharedCache);\n    [\n        Point2dInputPlugin,\n        Point3dInputPlugin,\n        Point4dInputPlugin,\n        StringInputPlugin,\n        NumberInputPlugin,\n        StringColorInputPlugin,\n        ObjectColorInputPlugin,\n        NumberColorInputPlugin,\n        BooleanInputPlugin,\n        BooleanMonitorPlugin,\n        StringMonitorPlugin,\n        NumberMonitorPlugin,\n        ButtonBladePlugin,\n        FolderBladePlugin,\n        TabBladePlugin,\n    ].forEach((p) => {\n        pool.register('core', p);\n    });\n    return pool;\n}\n\nclass ListBladeApi extends BladeApi {\n    /**\n     * @hidden\n     */\n    constructor(controller) {\n        super(controller);\n        this.emitter_ = new Emitter();\n        this.controller.value.emitter.on('change', (ev) => {\n            this.emitter_.emit('change', new TpChangeEvent(this, ev.rawValue));\n        });\n    }\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    get options() {\n        return this.controller.valueController.props.get('options');\n    }\n    set options(options) {\n        this.controller.valueController.props.set('options', options);\n    }\n    get value() {\n        return this.controller.value.rawValue;\n    }\n    set value(value) {\n        this.controller.value.rawValue = value;\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        }, {\n            key: handler,\n        });\n        return this;\n    }\n    off(eventName, handler) {\n        this.emitter_.off(eventName, handler);\n        return this;\n    }\n}\n\nclass SeparatorBladeApi extends BladeApi {\n}\n\nclass SliderBladeApi extends BladeApi {\n    /**\n     * @hidden\n     */\n    constructor(controller) {\n        super(controller);\n        this.emitter_ = new Emitter();\n        this.controller.value.emitter.on('change', (ev) => {\n            this.emitter_.emit('change', new TpChangeEvent(this, ev.rawValue));\n        });\n    }\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    get max() {\n        return this.controller.valueController.sliderController.props.get('max');\n    }\n    set max(max) {\n        this.controller.valueController.sliderController.props.set('max', max);\n    }\n    get min() {\n        return this.controller.valueController.sliderController.props.get('min');\n    }\n    set min(min) {\n        this.controller.valueController.sliderController.props.set('min', min);\n    }\n    get value() {\n        return this.controller.value.rawValue;\n    }\n    set value(value) {\n        this.controller.value.rawValue = value;\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        }, {\n            key: handler,\n        });\n        return this;\n    }\n    off(eventName, handler) {\n        this.emitter_.off(eventName, handler);\n        return this;\n    }\n}\n\nclass TextBladeApi extends BladeApi {\n    /**\n     * @hidden\n     */\n    constructor(controller) {\n        super(controller);\n        this.emitter_ = new Emitter();\n        this.controller.value.emitter.on('change', (ev) => {\n            this.emitter_.emit('change', new TpChangeEvent(this, ev.rawValue));\n        });\n    }\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    get formatter() {\n        return this.controller.valueController.props.get('formatter');\n    }\n    set formatter(formatter) {\n        this.controller.valueController.props.set('formatter', formatter);\n    }\n    get value() {\n        return this.controller.value.rawValue;\n    }\n    set value(value) {\n        this.controller.value.rawValue = value;\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        }, {\n            key: handler,\n        });\n        return this;\n    }\n    off(eventName, handler) {\n        this.emitter_.off(eventName, handler);\n        return this;\n    }\n}\n\nconst ListBladePlugin = (function () {\n    return {\n        id: 'list',\n        type: 'blade',\n        core: VERSION$1,\n        accept(params) {\n            const result = parseRecord(params, (p) => ({\n                options: p.required.custom(parseListOptions),\n                value: p.required.raw,\n                view: p.required.constant('list'),\n                label: p.optional.string,\n            }));\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            const lc = new ListConstraint(normalizeListOptions(args.params.options));\n            const value = createValue(args.params.value, {\n                constraint: lc,\n            });\n            const ic = new ListController(args.document, {\n                props: new ValueMap({\n                    options: lc.values.value('options'),\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueBladeController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                value: value,\n                valueController: ic,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueBladeController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof ListController)) {\n                return null;\n            }\n            return new ListBladeApi(args.controller);\n        },\n    };\n})();\n\nclass RootApi extends FolderApi {\n    /**\n     * @hidden\n     */\n    constructor(controller, pool) {\n        super(controller, pool);\n    }\n    get element() {\n        return this.controller.view.element;\n    }\n}\n\n/**\n * @hidden\n */\nclass RootController extends FolderController {\n    constructor(doc, config) {\n        super(doc, {\n            expanded: config.expanded,\n            blade: config.blade,\n            props: config.props,\n            root: true,\n            viewProps: config.viewProps,\n        });\n    }\n}\n\nconst cn = ClassName('spr');\n/**\n * @hidden\n */\nclass SeparatorView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        const hrElem = doc.createElement('hr');\n        hrElem.classList.add(cn('r'));\n        this.element.appendChild(hrElem);\n    }\n}\n\n/**\n * @hidden\n */\nclass SeparatorController extends BladeController {\n    /**\n     * @hidden\n     */\n    constructor(doc, config) {\n        super(Object.assign(Object.assign({}, config), { view: new SeparatorView(doc, {\n                viewProps: config.viewProps,\n            }) }));\n    }\n}\n\nconst SeparatorBladePlugin = {\n    id: 'separator',\n    type: 'blade',\n    core: VERSION$1,\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            view: p.required.constant('separator'),\n        }));\n        return result ? { params: result } : null;\n    },\n    controller(args) {\n        return new SeparatorController(args.document, {\n            blade: args.blade,\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (!(args.controller instanceof SeparatorController)) {\n            return null;\n        }\n        return new SeparatorBladeApi(args.controller);\n    },\n};\n\nconst SliderBladePlugin = {\n    id: 'slider',\n    type: 'blade',\n    core: VERSION$1,\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            max: p.required.number,\n            min: p.required.number,\n            view: p.required.constant('slider'),\n            format: p.optional.function,\n            label: p.optional.string,\n            value: p.optional.number,\n        }));\n        return result ? { params: result } : null;\n    },\n    controller(args) {\n        var _a, _b;\n        const initialValue = (_a = args.params.value) !== null && _a !== void 0 ? _a : 0;\n        const drc = new DefiniteRangeConstraint({\n            max: args.params.max,\n            min: args.params.min,\n        });\n        const v = createValue(initialValue, {\n            constraint: drc,\n        });\n        const vc = new SliderTextController(args.document, Object.assign(Object.assign({}, createSliderTextProps({\n            formatter: (_b = args.params.format) !== null && _b !== void 0 ? _b : numberToString,\n            keyScale: createValue(1),\n            max: drc.values.value('max'),\n            min: drc.values.value('min'),\n            pointerScale: getSuitablePointerScale(args.params, initialValue),\n        })), { parser: parseNumber, value: v, viewProps: args.viewProps }));\n        return new LabeledValueBladeController(args.document, {\n            blade: args.blade,\n            props: ValueMap.fromObject({\n                label: args.params.label,\n            }),\n            value: v,\n            valueController: vc,\n        });\n    },\n    api(args) {\n        if (!(args.controller instanceof LabeledValueBladeController)) {\n            return null;\n        }\n        if (!(args.controller.valueController instanceof SliderTextController)) {\n            return null;\n        }\n        return new SliderBladeApi(args.controller);\n    },\n};\n\nconst TextBladePlugin = (function () {\n    return {\n        id: 'text',\n        type: 'blade',\n        core: VERSION$1,\n        accept(params) {\n            const result = parseRecord(params, (p) => ({\n                parse: p.required.function,\n                value: p.required.raw,\n                view: p.required.constant('text'),\n                format: p.optional.function,\n                label: p.optional.string,\n            }));\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a;\n            const v = createValue(args.params.value);\n            const ic = new TextController(args.document, {\n                parser: args.params.parse,\n                props: ValueMap.fromObject({\n                    formatter: (_a = args.params.format) !== null && _a !== void 0 ? _a : ((v) => String(v)),\n                }),\n                value: v,\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueBladeController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                value: v,\n                valueController: ic,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueBladeController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof TextController)) {\n                return null;\n            }\n            return new TextBladeApi(args.controller);\n        },\n    };\n})();\n\nfunction createDefaultWrapperElement(doc) {\n    const elem = doc.createElement('div');\n    elem.classList.add(ClassName('dfw')());\n    if (doc.body) {\n        doc.body.appendChild(elem);\n    }\n    return elem;\n}\nfunction embedStyle(doc, id, css) {\n    if (doc.querySelector(`style[data-tp-style=${id}]`)) {\n        return;\n    }\n    const styleElem = doc.createElement('style');\n    styleElem.dataset.tpStyle = id;\n    styleElem.textContent = css;\n    doc.head.appendChild(styleElem);\n}\n/**\n * The root pane of Tweakpane.\n */\nclass Pane extends RootApi {\n    constructor(opt_config) {\n        var _a, _b;\n        const config = opt_config !== null && opt_config !== void 0 ? opt_config : {};\n        const doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n        const pool = createDefaultPluginPool();\n        const rootController = new RootController(doc, {\n            expanded: config.expanded,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                title: config.title,\n            }),\n            viewProps: ViewProps.create(),\n        });\n        super(rootController, pool);\n        this.pool_ = pool;\n        this.containerElem_ = (_b = config.container) !== null && _b !== void 0 ? _b : createDefaultWrapperElement(doc);\n        this.containerElem_.appendChild(this.element);\n        this.doc_ = doc;\n        this.usesDefaultWrapper_ = !config.container;\n        this.setUpDefaultPlugins_();\n    }\n    get document() {\n        if (!this.doc_) {\n            throw TpError.alreadyDisposed();\n        }\n        return this.doc_;\n    }\n    dispose() {\n        const containerElem = this.containerElem_;\n        if (!containerElem) {\n            throw TpError.alreadyDisposed();\n        }\n        if (this.usesDefaultWrapper_) {\n            const parentElem = containerElem.parentElement;\n            if (parentElem) {\n                parentElem.removeChild(containerElem);\n            }\n        }\n        this.containerElem_ = null;\n        this.doc_ = null;\n        super.dispose();\n    }\n    registerPlugin(bundle) {\n        if (bundle.css) {\n            embedStyle(this.document, `plugin-${bundle.id}`, bundle.css);\n        }\n        const plugins = 'plugin' in bundle\n            ? [bundle.plugin]\n            : 'plugins' in bundle\n                ? bundle.plugins\n                : [];\n        plugins.forEach((p) => {\n            this.pool_.register(bundle.id, p);\n        });\n    }\n    setUpDefaultPlugins_() {\n        this.registerPlugin({\n            id: 'default',\n            // NOTE: This string literal will be replaced with the default CSS by Rollup at the compilation time\n            css: '.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\"\";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{display:block;height:16px;inset:0;margin:auto;opacity:0;position:absolute;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:\"\";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{inset:0;position:absolute}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;inset:0;position:absolute}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);content:\"\";display:block;inset:0;position:absolute}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;content:\"\";display:block;height:2px;inset:0;margin:auto;position:absolute}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;content:\"\";display:block;height:2px;inset:0;margin-bottom:auto;margin-top:auto;position:absolute}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:\"\";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:\"\";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:\"\";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);content:\"\";inset:0 0 2px;pointer-events:none;position:absolute}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:\"\";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',\n            plugins: [\n                ListBladePlugin,\n                SeparatorBladePlugin,\n                SliderBladePlugin,\n                TabBladePlugin,\n                TextBladePlugin,\n            ],\n        });\n    }\n}\n\nconst VERSION = new Semver('4.0.4');\n\nexport { BladeApi, ButtonApi, FolderApi, ListBladeApi, ListInputBindingApi, Pane, Semver, SeparatorBladeApi, SliderBladeApi, SliderInputBindingApi, TabApi, TabPageApi, TextBladeApi, TpChangeEvent, VERSION };\n","//class HeliosUI\n\nimport { Pane } from \"tweakpane\";\nimport * as d3Chromatic from \"d3-scale-chromatic\"\nimport { default as extraColors } from \"./extraColors\"\ndocument.documentElement.style.setProperty('--tp-base-border-radius', '0px');\n\n\nlet allColors = {}\nObject.assign(allColors, d3Chromatic);\nObject.assign(allColors, extraColors);\n\n// console.log(allColors);\n//remove last color of category10\n// allColors[\"schemeCategory10\"].pop();\n\n//sort colors by name\nallColors = Object.keys(allColors).sort().reduce((r, k) => (r[k] = allColors[k], r), {});\n\n// allColors[\"interpolateRedBlackBlue\"] = d3ScaleLinear().domain([0,0.5,1.0]).range([\"red\",\"black\", \"blue\"])\nlet ignoredProperties = new Set([\"ID\", \"edges\", \"neighbors\"]);\n\n\nfunction patchPaneNumberInputWithCustomParser(pane, type=\"inputs\", name=\"input-number\") {\n\tlet inp_number = pane.pool_.pluginsMap_[type].find(inp => inp.id == name);\n\n\tconst { controller } = inp_number;\n\n\tinp_number.controller = (_args) => {\n\t\tlet c = controller(_args);\n\t\tif (c.textController && _args.params.format?.parser) {\n\t\t\tconst parser = c.textController.parser_;\n\t\t\tc.textController.parser_ = (value) => _args.params.format.parser(parser(value));\n\t\t}\n\t\treturn c;\n\t};\n\n\t//// uncomment to get transformed values in PARAMS\n\tconst { reader, writer } = inp_number.binding;\n\tinp_number.binding.reader = _args => _args.params.format?.reader ? _args.params.format?.reader : reader(_args);\n\tinp_number.binding.writer = _args => _args.params.format?.writer ? _args.params.format?.writer : writer(_args);\n}\n\n// utility fn for exponential format\nconst toExp = (value)=> (\"\"+(+value.toExponential(1)).toExponential(1).replace('+',''))\n\nconst exp_formatter = (value) => toExp(10 ** value);\nexp_formatter.parser = (value) => Math.log10(value);\nexp_formatter.reader =  (value) => Math.log10(value);\nexp_formatter.writer =  (target, value) => target.write(10**value);\n\n\n\n\nexport default class HeliosUI {\n\tconstructor(helios, options = { collapsed: false, resizeHelios: false }) {\n\t\t// weak reference to helios\n\t\tthis._helios = helios;\n\t\tthis._isCollapsed = options?.collapsed;\n\t\tthis._resizeHelios = options?.resizeHelios;\n\t\tthis._createContainerPanel();\n\t}\n\n\t_createContainerPanel() {\n\t\tthis.panelContainer = document.createElement('div');\n\t\tthis.panelContainer.style.setProperty('--tp-base-font-family', 'Helvetica');\n\t\tthis.panelContainer.style.width = '250px';\n\t\tthis.panelContainer.style.height = '100%';\n\t\tthis.panelContainer.style.position = 'absolute';\n\t\tthis.panelContainer.style.top = '0';\n\t\tthis.panelContainer.style.pointerEvents = 'auto';\n\t\tthis.panelContainer.style.backgroundColor = 'rgba(75,75,75,0.2)';\n\t\tthis.panelContainer.style.overflow = 'visible';\n\t\tthis.panelContainer.style.transition = 'right 0.3s ease';\n\t\tthis._helios.overlay.appendChild(this.panelContainer);\n\n\t\tthis.panel = document.createElement('div');\n\t\tthis.panel.style.width = '100%';\n\t\tthis.panel.style.height = '100%';\n\t\tthis.panel.style.position = 'relative';\n\t\t//allow visible elements outside of div\n\t\tthis.panel.style.overflow = 'visible';\n\n\t\tthis.panelContainer.appendChild(this.panel);\n\n\t\tthis.toggleButton = document.createElement('div');\n\t\tthis.toggleButton.style.position = 'absolute';\n\t\tthis.toggleButton.style.top = '0px';\n\t\tthis.toggleButton.style.fontSize = \"12px\"\n\t\tthis.toggleButton.style.left = '-25px';\n\t\tthis.toggleButton.style.width = '25px';\n\t\tthis.toggleButton.style.height = '70px';\n\t\t// bold\n\t\tthis.toggleButton.style.fontWeight = 'bold';\n\t\tthis.toggleButton.style.backgroundColor = 'rgba(75, 75, 75, 0.45)';\n\t\tthis.toggleButton.style.color = 'white';\n\t\tthis.toggleButton.style.textAlign = 'center';\n\t\t// this.toggleButton.style.lineHeight = '100px';\n\t\tthis.toggleButton.style.lineHeight = '25px';\n\t\tthis.toggleButton.style.cursor = 'pointer';\n\t\t// writing-mode: vertical-rl;\n\t\tthis.toggleButton.style.writingMode = 'vertical-rl';\n\t\tif (this._isCollapsed) {\n\t\t\tthis.toggleButton.textContent = 'Controls';\n\t\t\tthis.panelContainer.style.right = '-255px';\n\t\t} else {\n\t\t\tthis.toggleButton.textContent = 'Controls';\n\t\t\tthis.panelContainer.style.right = '0px';\n\t\t}\n\t\tif (this._resizeHelios) {\n\t\t\t// enable animations in css\n\t\t\tthis._helios.canvasElement.style.transition = 'padding-right 0.3s ease';\n\t\t\tconsole.log(this.panelContainer.style.right)\n\t\t\tthis._helios.canvasElement.style.paddingRight = this._isCollapsed ? \"0px\" : \"250px\";\n\t\t\tthis._helios.svgLayer.style.paddingRight = this._isCollapsed ? \"0px\" : \"250px\";\n\t\t}\n\t\tthis.panel.appendChild(this.toggleButton);\n\n\t\tthis.toggleButton.addEventListener('click', () => {\n\t\t\tthis.toggleCollapse();\n\t\t});\n\n\t\tthis.pane = new Pane({\n\t\t\tcontainer: this.panel,\n\t\t\t// title: 'Helios',\n\t\t});\n\t\tpatchPaneNumberInputWithCustomParser(this.pane, \"inputs\", \"input-number\");\n\t\tpatchPaneNumberInputWithCustomParser(this.pane, \"monitors\", \"monitor-number\");\n\t\t\n\t\tthis.settings = {\n\t\t\t// Helios Visuals\n\t\t\tshaded: false,\n\t\t\tadvancedEdges: false,\n\t\t\tdarkMode: false,\n\t\t\tblendings: \"normal\", // Only for darkMode\n\n\t\t\t// Nodes\n\t\t\tnodeSizeScale: 1.0,\n\n\t\t\t// Nodes Colors\n\t\t\tnodeColorProperty: \"index\",\n\t\t\tnodeColorMap: \"viridis\",\n\t\t\tnodeOutlineScale: 1.0,\n\n\t\t\t// Edges\n\t\t\tedgeOpacityScale: 0.1,\n\n\t\t\t// Density\n\t\t\tdensityEnabled: false,\n\t\t\tdensityProperty: \"uniform\",\n\t\t\tdensityVsProperty: \"None\",\n\t\t\tdensityBandwidth: 0.1,\n\t\t\tdensityWeight: 0.5,\n\n\t\t\t// Layout\n\t\t\tlayout: \"Multipole FR\",\n\t\t\tgravity: 0.1,\n\t\t\tforcesIntensity: 0.1,\n\t\t\tattractiveRepulsiveRatio: 1.0,\n\n\t\t\t// Filter Nodes\n\t\t\tfilterNodes: false,\n\t\t\tfilterNodesProperty: \"None\",\n\t\t\tfilterNodesInterval: [0, 1],\n\n\t\t\t// Filter Edges\n\t\t\tfilterEdges: false,\n\t\t\tfilterEdgesProperty: \"None\",\n\t\t\tfilterEdgesInterval: [0, 1],\n\n\n\n\t\t};\n\t\tthis.addHeliosPropertiesPane();\n\t\tthis.addHeliosLayoutPanel();\n\t}\n\n\tupdateFromHelios() {\n\t\t// // Helios Visuals\n\t\t// shaded: false,\n\t\t// advancedEdges: false,\n\t\t// darkMode: false,\n\t\t// blendings: \"normal\", // Only for darkMode\n\t\tthis.settings.shaded = helios.shadedNodes();\n\t\tthis.settings.advancedEdges = helios._settings.fastEdges;\n\t\t// this.settings.darkMode = helios._settings.darkMode;\n\t\tthis.settings.blendings = helios.additiveBlending() ? \"additive\" : \"normal\";\n\n\t\t// // Nodes\n\t\t// nodeSizeScale: 1.0,\n\t\t// nodeOutlineScale:1.0,\n\t\tthis.settings.nodeSizeScale = helios.nodesGlobalSizeScale()\n\t\tthis.settings.nodeOutlineScale = helios.nodesGlobalOutlineWidthScale()\n\n\t\t// // Nodes Colors\n\t\t// \tnodeColorProperty:\"index\",\n\t\t// \tnodeColorMap:\"viridis\",\n\n\t\t// // Edges\n\t\t// edgeOpacityScale: 0.1,\n\t\tthis.settings.edgeOpacityScale = helios.edgesGlobalOpacityScale()\n\n\t\t// // Density\n\t\tthis.settings.densityEnabled = helios.densityMap ? true : false;\n\t\tif (this.settings.densityEnabled) {\n\t\t\tthis.densityBandwidth = helios.densityMap.bandwidthScale;\n\t\t\tthis.densityWeight = helios.densityMap.kernel_weightScale;\n\t\t}\n\t\t// densityEnabled: false,\n\t\t// densityProperty:\"uniform\",\n\t\t// densityVsProperty: \"None\",\n\t\t// densityBandwidth: 0.1,\n\t\t// densityWeight: 0.5,\n\n\t\t// // Layout\n\t\t// layout: \"Multipole FR\",\n\t\t// gravity: 0.1,\n\t\t// forcesIntensity: 0.1,\n\t\t// attractiveRepulsiveRatio: 1.0,\n\n\t\t// // Filter Nodes\n\t\t// filterNodes: false,\n\t\t// filterNodesProperty: \"None\",\n\t\t// filterNodesInterval: [0, 1],\n\n\t\t// // Filter Edges\n\t\t// filterEdges: false,\n\t\t// filterEdgesProperty: \"None\",\n\t\t// filterEdgesInterval: [0, 1],\n\n\n\t}\n\n\ttoggleCollapse() {\n\t\tif (!this._isCollapsed) {\n\t\t\tthis.panelContainer.style.right = '-255px';\n\t\t\tthis.toggleButton.textContent = \"Controls\"//'◀';\n\t\t} else {\n\t\t\tthis.panelContainer.style.right = '0';\n\t\t\tthis.toggleButton.textContent = \"Controls\"//'▶';\n\t\t}\n\t\tif (this._resizeHelios) {\n\t\t\tthis._helios.canvasElement.style.paddingRight = this._isCollapsed ? \"250px\" : \"0px\";\n\t\t\tthis._helios.svgLayer.style.paddingRight = this._isCollapsed ? \"250px\" : \"0px\";\n\t\t}\n\t\tthis._isCollapsed = !this._isCollapsed;\n\t}\n\n\tisCollapsed() {\n\t\treturn this._isCollapsed;\n\t}\n\n\n\taddHeliosPropertiesPane() {\n\t\tthis.visualPropertiesPanel = this.pane.addFolder({\n\t\t\ttitle: 'Node Visuals',\n\t\t\texpanded: true,\n\t\t});\n\n\t\tthis.visualPropertiesPanel.addBinding(this.settings, 'edgeOpacityScale', {\n\t\t\tmin: 0,\n\t\t\tmax: 255,\n\t\t\tstep: 1,\n\t\t\tformat: (v) => v / 255.0,\n\t\t\tlabel: 'Edge Opacity',\n\t\t}).on('change', (ev) => {\n\t\t\tthis._helios.edgesGlobalOpacityScale(ev.value / 255.0);\n\t\t\tthis._helios.render();\n\t\t});\n\t}\n\n\taddHeliosLayoutPanel() {\n\t\tlet forceLayout = this._helios.layoutWorker;\n\t\tif (!forceLayout) {\n\t\t\tconsole.warn(\"No layout worker found, cannot add layout panel.\");\n\t\t\treturn;\n\t\t}\n\t\tthis.layoutPanel = this.createSettingsPanel(\n\t\t\tthis.pane,\n\t\t\tforceLayout,\n\t\t\t'Force Layout',\n\t\t\ttrue,\n\t\t\t()=>{\n\t\t\t\tforceLayout.interactionReheat();\n\t\t\t}\n\n\t\t);\n\t}\n\n\tcreateSettingsPanel(pane, instance, title, expanded = true, defaultAction) {\n\t\tlet settings = instance.settings();\n\n\t\tlet settingsDefinition = settings.definition();\n\t\tlet folder = pane.addFolder({\n\t\t\ttitle: title,\n\t\t\texpanded: expanded,\n\t\t});\n\n\t\tObject.keys(settingsDefinition).forEach((key) => {\n\t\t\tlet setting = settingsDefinition[key];\n\t\t\tlet binding = null;\n\t\t\tif (setting.type === \"boolean\") {\n\t\t\t\tbinding = folder.addBinding(settings, key, {\n\t\t\t\t\tlabel: setting.label,\n\t\t\t\t\treadonly: setting.access === \"readonly\",\n\t\t\t\t});\n\t\t\t\tif(setting.access !== \"readonly\") {\n\t\t\t\t\tbinding.on('change', (ev) => {\n\t\t\t\t\t\tinstance[key](ev.value);\n\t\t\t\t\t\tdefaultAction?.(key, ev.value);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (setting.type === \"number\") {\n\t\t\t\tlet bindingOptions = {\n\t\t\t\t\tlabel: setting.label,\n\t\t\t\t\treadonly: setting.access === \"readonly\",\n\t\t\t\t};\n\t\t\t\tif (setting.preferableRange) {\n\t\t\t\t\tbindingOptions.min = setting.preferableRange[0];\n\t\t\t\t\tbindingOptions.max = setting.preferableRange[1];\n\t\t\t\t\tbindingOptions.step = setting.preferableRange[2] || 0.01;\n\t\t\t\t}\n\t\t\t\tif (setting.transform === \"log\") {\n\t\t\t\t\tif(setting.preferableRange){\n\t\t\t\t\t\tbindingOptions.min = Math.log10(bindingOptions.min);\n\t\t\t\t\t\tbindingOptions.max = Math.log10(bindingOptions.max);\n\t\t\t\t\t}\n\t\t\t\t\t// bindingOptions.format = (v) => Math.pow(10, v);\n\t\t\t\t\tbindingOptions.format = exp_formatter;\n\t\t\t\t\t// initial value\n\t\t\t\t\tconsole.log(`Binding ${key} with log transform:`, bindingOptions);\n\t\t\t\t}\n\t\t\t\tbinding = folder.addBinding(settings, key, bindingOptions)\n\t\t\t\t\n\n\t\t\t\tif(setting.access !== \"readonly\") {\n\t\t\t\t\tbinding.on('change', (ev) => {\n\t\t\t\t\t\t// console.log(`Setting ${key} with log transform:`, ev.value);\n\t\t\t\t\t\tinstance[key](ev.value);\n\t\t\t\t\t\tdefaultAction?.(key, ev.value);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (setting.type === \"categorical\") {\n\t\t\t\tbinding =  folder.addBinding(settings, key, {\n\t\t\t\t\tlabel: setting.label,\n\t\t\t\t\toptions: setting.options,\n\t\t\t\t\treadOnly: setting.access === \"readonly\",\n\t\t\t\t}).on('change', (ev) => {\n\t\t\t\t\tinstance[key](ev.value);\n\t\t\t\t\tdefaultAction?.(key, ev.value);\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (binding) {\n\t\t\t\t// console.log(`Binding created for ${key}:`, binding);\n\t\t\t\tsettings.on(key, (value) => {\n\t\t\t\t\tbinding.refresh();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t// if (setting.enabled) {\n\t\t// \tfolder.addBinding(this.layoutSettings, setting.enabled, {\n\t\t// \t\tlabel: \"Enable \" + setting.label,\n\t\t// \t\treadOnly: setting.access === \"readonly\",\n\t\t// \t}).on('change', (ev) => {\n\t\t// \t\tinstance[setting.enabled](ev.value);\n\t\t// \t});\n\t\t// }\n\t\treturn folder;\n\t}\n}\n\n\n// settings for d3ForceLayoutWorker\n// const SETTINGS_DEFINITION = {\n// \tuse2D: {\n// \t\ttype: \"boolean\",\n// \t\tdefault: false,\n// \t\tlabel: \"Use 2D\",\n// \t\taccess: \"readwrite\",\n// \t\tdescription: \"Use 2D forces instead of 3D forces. This will ignore the z-coordinate of nodes and edges.\",\n// \t\t// default change function (instance.use2D(value))\n// \t},\n// \tforcesStrength: {\n// \t\ttype: \"number\",\n// \t\tdefault: 1,\n// \t\tlabel: \"Forces Strength\",\n// \t\taccess: \"readwrite\",\n// \t\tpreferableRange: [0.1, 10],\n// \t\ttransform: \"log\",\n// \t\tdescription: \"The strength of the forces applied to the nodes. Higher values will result in stronger forces.\",\n// \t},\n// \tforcesRatio: {\n// \t\ttype: \"number\",\n// \t\tdefault: 1,\n// \t\tlabel: \"Forces Ratio\",\n// \t\taccess: \"readwrite\",\n// \t\tpreferableRange: [0.1, 10],\n// \t\ttransform: \"log\",\n// \t\tdescription: \"The ratio between attractive and repulsive forces. A value of 1 means equal strength, higher values mean stronger attractive forces.\",\n// \t},\n// \trepulsiveExponent: {\n// \t\ttype: \"number\",\n// \t\tdefault: 1,\n// \t\tlabel: \"Repulsive Exponent\",\n// \t\taccess: \"readwrite\",\n// \t\tpreferableRange: [0.5, 2],\n// \t\ttransform: \"log\",\n// \t\tdescription: \"The exponent for the repulsive force. Higher values will result in stronger repulsive forces.\",\n// \t},\n// \tattractiveExponent: {\n// \t\ttype: \"number\",\n// \t\tdefault: 1,\n// \t\tlabel: \"Attractive Exponent\",\n// \t\taccess: \"readwrite\",\n// \t\tpreferableRange: [0.5, 2],\n// \t\ttransform: \"log\",\n// \t\tdescription: \"The exponent for the attractive force. Higher values will result in stronger attractive forces.\",\n// \t},\n// \tgravity: {\n// \t\ttype: \"number\",\n// \t\tdefault: 0.05,\n// \t\tlabel: \"Gravity\",\n// \t\taccess: \"readwrite\",\n// \t\tpreferableRange: [0.1, 10],\n// \t\ttransform: \"log\",\n// \t\tdescription: \"The strength of the gravity force applied to the nodes. Higher values will result in stronger gravity forces.\",\n// \t},\n// \tviscosity: {\n// \t\ttype: \"number\",\n// \t\tdefault: 0.05,\n// \t\tlabel: \"Viscosity\",\n// \t\taccess: \"readwrite\",\n// \t\tpreferableRange: [0.1, 10],\n// \t\ttransform: \"log\",\n// \t\tdescription: \"The strength of the viscosity force applied to the nodes. Higher values will result in stronger viscosity forces.\",\n// \t},\n// \tcollisionRadius: {\n// \t\ttype: \"number\",\n// \t\tdefault: 50,\n// \t\tlabel: \"Collision Radius\",\n// \t\taccess: \"readwrite\",\n// \t\tpreferableRange: [1, 100],\n// \t\ttransform: \"log\",\n// \t\tdescription: \"The radius of the collision force applied to the nodes. Higher values will result in larger collision areas.\",\n// \t\tenabled: \"collisionEnabled\",\n// \t},\n// \tcollisionEnabled: {\n// \t\ttype: \"boolean\",\n// \t\tdefault: false,\n// \t\tlabel: \"Collision Force\",\n// \t\taccess: \"readwrite\",\n// \t\tdescription: \"Enable or disable the collision force. When enabled, nodes will repel each other based on their collision radius.\",\n// \t},\n// \tlinkDistance: {\n// \t\ttype: \"number\",\n// \t\tdefault: 30,\n// \t\tlabel: \"Link Distance\",\n// \t\taccess: \"readwrite\",\n// \t\tpreferableRange: [0, 100],\n// \t\tdescription: \"The distance between linked nodes. Higher values will result in more spaced out nodes.\",\n// \t},\n// \tforceNormalizationType: {\n// \t\ttype: \"categorical\",\n// \t\toptions: [\"strength\", \"degree\", \"none\"],\n// \t\tdefault: \"degree\",\n// \t\tlabel: \"Normalization Type\",\n// \t\taccess: \"readwrite\",\n// \t\tdescription: \"The type of normalization applied to the attractive force. 'strength' normalizes by the minimum strength of the linked nodes, 'degree' normalizes by the minimum degree of the linked nodes, and 'none' applies the force without normalization.\",\n// \t},\n// \talpha: {\n// \t\ttype: \"number\",\n// \t\tdefault: 1.0,\n// \t\tlabel: \"Alpha\",\n// \t\taccess: \"readwrite\",\n// \t\tpreferableRange: [0.001, 1],\n// \t\tdescription: \"The alpha value of the simulation. This controls the strength of the forces applied to the nodes. The value will decay over time, simulating a cooling effect.\",\n// \t},\n// \talphaDecay: {\n// \t\ttype: \"number\",\n// \t\tdefault: 1 - Math.pow(0.001, 1 / 300),\n// \t\tlabel: \"Alpha Decay\",\n// \t\taccess: \"readwrite\",\n// \t\tpreferableRange: [0.001, 1],\n// \t\ttransform: \"log\",\n// \t\tdescription: \"The decay rate of the alpha value. This controls how quickly the forces applied to the nodes will decrease over time. A value of 1 means no decay, while a value close to 0 means very fast decay.\",\n// \t},\n// \talphaTarget: {\n// \t\ttype: \"number\",\n// \t\tdefault: 0,\n// \t\tlabel: \"Alpha Target\",\n// \t\taccess: \"readwrite\",\n// \t\tpreferableRange: [0, 1],\n// \t\tdescription: \"The target alpha value of the simulation. This controls the final strength of the forces applied to the nodes. The alpha value will decay towards this target value over time.\",\n// \t},\n// \talphaMin: {\n// \t\ttype: \"number\",\n// \t\tdefault: 0.001,\n// \t\tlabel: \"Alpha Min\",\n// \t\taccess: \"readwrite\",\n// \t\tpreferableRange: [0.0001, 1],\n// \t\ttransform: \"log\",\n// \t\tdescription: \"The minimum alpha value of the simulation. This controls the minimum strength of the forces applied to the nodes. The alpha value will not decay below this value.\",\n// \t},\n// \trunning: {\n// \t\ttype: \"boolean\",\n// \t\tdefault: false,\n// \t\tlabel: \"Running\",\n// \t\taccess: \"readonly\",\n// \t\tdescription: \"Indicates whether the layout is currently running. This is set to true when the layout is started and false when it is stopped.\",\n// \t},\n// };\n\n","\n/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n/* eslint-disable space-unary-ops */\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n//const Z_FILTERED          = 1;\n//const Z_HUFFMAN_ONLY      = 2;\n//const Z_RLE               = 3;\nconst Z_FIXED$1               = 4;\n//const Z_DEFAULT_STRATEGY  = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\nconst Z_BINARY              = 0;\nconst Z_TEXT                = 1;\n//const Z_ASCII             = 1; // = Z_TEXT\nconst Z_UNKNOWN$1             = 2;\n\n/*============================================================================*/\n\n\nfunction zero$1(buf) { let len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n// From zutil.h\n\nconst STORED_BLOCK = 0;\nconst STATIC_TREES = 1;\nconst DYN_TREES    = 2;\n/* The three kinds of block type */\n\nconst MIN_MATCH$1    = 3;\nconst MAX_MATCH$1    = 258;\n/* The minimum and maximum match lengths */\n\n// From deflate.h\n/* ===========================================================================\n * Internal compression state.\n */\n\nconst LENGTH_CODES$1  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\n\nconst LITERALS$1      = 256;\n/* number of literal bytes 0..255 */\n\nconst L_CODES$1       = LITERALS$1 + 1 + LENGTH_CODES$1;\n/* number of Literal or Length codes, including the END_BLOCK code */\n\nconst D_CODES$1       = 30;\n/* number of distance codes */\n\nconst BL_CODES$1      = 19;\n/* number of codes used to transfer the bit lengths */\n\nconst HEAP_SIZE$1     = 2 * L_CODES$1 + 1;\n/* maximum heap size */\n\nconst MAX_BITS$1      = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nconst Buf_size      = 16;\n/* size of bit buffer in bi_buf */\n\n\n/* ===========================================================================\n * Constants\n */\n\nconst MAX_BL_BITS = 7;\n/* Bit length codes must not exceed MAX_BL_BITS bits */\n\nconst END_BLOCK   = 256;\n/* end of block literal code */\n\nconst REP_3_6     = 16;\n/* repeat previous bit length 3-6 times (2 bits of repeat count) */\n\nconst REPZ_3_10   = 17;\n/* repeat a zero length 3-10 times  (3 bits of repeat count) */\n\nconst REPZ_11_138 = 18;\n/* repeat a zero length 11-138 times  (7 bits of repeat count) */\n\n/* eslint-disable comma-spacing,array-bracket-spacing */\nconst extra_lbits =   /* extra bits for each length code */\n  new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]);\n\nconst extra_dbits =   /* extra bits for each distance code */\n  new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]);\n\nconst extra_blbits =  /* extra bits for each bit length code */\n  new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]);\n\nconst bl_order =\n  new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);\n/* eslint-enable comma-spacing,array-bracket-spacing */\n\n/* The lengths of the bit length codes are sent in order of decreasing\n * probability, to avoid transmitting the lengths for unused bit length codes.\n */\n\n/* ===========================================================================\n * Local data. These are initialized only once.\n */\n\n// We pre-fill arrays with 0 to avoid uninitialized gaps\n\nconst DIST_CODE_LEN = 512; /* see definition of array dist_code below */\n\n// !!!! Use flat array instead of structure, Freq = i*2, Len = i*2+1\nconst static_ltree  = new Array((L_CODES$1 + 2) * 2);\nzero$1(static_ltree);\n/* The static literal tree. Since the bit lengths are imposed, there is no\n * need for the L_CODES extra codes used during heap construction. However\n * The codes 286 and 287 are needed to build a canonical tree (see _tr_init\n * below).\n */\n\nconst static_dtree  = new Array(D_CODES$1 * 2);\nzero$1(static_dtree);\n/* The static distance tree. (Actually a trivial tree since all codes use\n * 5 bits.)\n */\n\nconst _dist_code    = new Array(DIST_CODE_LEN);\nzero$1(_dist_code);\n/* Distance codes. The first 256 values correspond to the distances\n * 3 .. 258, the last 256 values correspond to the top 8 bits of\n * the 15 bit distances.\n */\n\nconst _length_code  = new Array(MAX_MATCH$1 - MIN_MATCH$1 + 1);\nzero$1(_length_code);\n/* length code for each normalized match length (0 == MIN_MATCH) */\n\nconst base_length   = new Array(LENGTH_CODES$1);\nzero$1(base_length);\n/* First normalized length for each code (0 = MIN_MATCH) */\n\nconst base_dist     = new Array(D_CODES$1);\nzero$1(base_dist);\n/* First normalized distance for each code (0 = distance of 1) */\n\n\nfunction StaticTreeDesc(static_tree, extra_bits, extra_base, elems, max_length) {\n\n  this.static_tree  = static_tree;  /* static tree or NULL */\n  this.extra_bits   = extra_bits;   /* extra bits for each code or NULL */\n  this.extra_base   = extra_base;   /* base index for extra_bits */\n  this.elems        = elems;        /* max number of elements in the tree */\n  this.max_length   = max_length;   /* max bit length for the codes */\n\n  // show if `static_tree` has data or dummy - needed for monomorphic objects\n  this.has_stree    = static_tree && static_tree.length;\n}\n\n\nlet static_l_desc;\nlet static_d_desc;\nlet static_bl_desc;\n\n\nfunction TreeDesc(dyn_tree, stat_desc) {\n  this.dyn_tree = dyn_tree;     /* the dynamic tree */\n  this.max_code = 0;            /* largest code with non zero frequency */\n  this.stat_desc = stat_desc;   /* the corresponding static tree */\n}\n\n\n\nconst d_code = (dist) => {\n\n  return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];\n};\n\n\n/* ===========================================================================\n * Output a short LSB first on the stream.\n * IN assertion: there is enough room in pendingBuf.\n */\nconst put_short = (s, w) => {\n//    put_byte(s, (uch)((w) & 0xff));\n//    put_byte(s, (uch)((ush)(w) >> 8));\n  s.pending_buf[s.pending++] = (w) & 0xff;\n  s.pending_buf[s.pending++] = (w >>> 8) & 0xff;\n};\n\n\n/* ===========================================================================\n * Send a value on a given number of bits.\n * IN assertion: length <= 16 and value fits in length bits.\n */\nconst send_bits = (s, value, length) => {\n\n  if (s.bi_valid > (Buf_size - length)) {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    put_short(s, s.bi_buf);\n    s.bi_buf = value >> (Buf_size - s.bi_valid);\n    s.bi_valid += length - Buf_size;\n  } else {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    s.bi_valid += length;\n  }\n};\n\n\nconst send_code = (s, c, tree) => {\n\n  send_bits(s, tree[c * 2]/*.Code*/, tree[c * 2 + 1]/*.Len*/);\n};\n\n\n/* ===========================================================================\n * Reverse the first len bits of a code, using straightforward code (a faster\n * method would use a table)\n * IN assertion: 1 <= len <= 15\n */\nconst bi_reverse = (code, len) => {\n\n  let res = 0;\n  do {\n    res |= code & 1;\n    code >>>= 1;\n    res <<= 1;\n  } while (--len > 0);\n  return res >>> 1;\n};\n\n\n/* ===========================================================================\n * Flush the bit buffer, keeping at most 7 bits in it.\n */\nconst bi_flush = (s) => {\n\n  if (s.bi_valid === 16) {\n    put_short(s, s.bi_buf);\n    s.bi_buf = 0;\n    s.bi_valid = 0;\n\n  } else if (s.bi_valid >= 8) {\n    s.pending_buf[s.pending++] = s.bi_buf & 0xff;\n    s.bi_buf >>= 8;\n    s.bi_valid -= 8;\n  }\n};\n\n\n/* ===========================================================================\n * Compute the optimal bit lengths for a tree and update the total bit length\n * for the current block.\n * IN assertion: the fields freq and dad are set, heap[heap_max] and\n *    above are the tree nodes sorted by increasing frequency.\n * OUT assertions: the field len is set to the optimal bit length, the\n *     array bl_count contains the frequencies for each bit length.\n *     The length opt_len is updated; static_len is also updated if stree is\n *     not null.\n */\nconst gen_bitlen = (s, desc) => {\n//    deflate_state *s;\n//    tree_desc *desc;    /* the tree descriptor */\n\n  const tree            = desc.dyn_tree;\n  const max_code        = desc.max_code;\n  const stree           = desc.stat_desc.static_tree;\n  const has_stree       = desc.stat_desc.has_stree;\n  const extra           = desc.stat_desc.extra_bits;\n  const base            = desc.stat_desc.extra_base;\n  const max_length      = desc.stat_desc.max_length;\n  let h;              /* heap index */\n  let n, m;           /* iterate over the tree elements */\n  let bits;           /* bit length */\n  let xbits;          /* extra bits */\n  let f;              /* frequency */\n  let overflow = 0;   /* number of elements with bit length too large */\n\n  for (bits = 0; bits <= MAX_BITS$1; bits++) {\n    s.bl_count[bits] = 0;\n  }\n\n  /* In a first pass, compute the optimal bit lengths (which may\n   * overflow in the case of the bit length tree).\n   */\n  tree[s.heap[s.heap_max] * 2 + 1]/*.Len*/ = 0; /* root of the heap */\n\n  for (h = s.heap_max + 1; h < HEAP_SIZE$1; h++) {\n    n = s.heap[h];\n    bits = tree[tree[n * 2 + 1]/*.Dad*/ * 2 + 1]/*.Len*/ + 1;\n    if (bits > max_length) {\n      bits = max_length;\n      overflow++;\n    }\n    tree[n * 2 + 1]/*.Len*/ = bits;\n    /* We overwrite tree[n].Dad which is no longer needed */\n\n    if (n > max_code) { continue; } /* not a leaf node */\n\n    s.bl_count[bits]++;\n    xbits = 0;\n    if (n >= base) {\n      xbits = extra[n - base];\n    }\n    f = tree[n * 2]/*.Freq*/;\n    s.opt_len += f * (bits + xbits);\n    if (has_stree) {\n      s.static_len += f * (stree[n * 2 + 1]/*.Len*/ + xbits);\n    }\n  }\n  if (overflow === 0) { return; }\n\n  // Tracev((stderr,\"\\nbit length overflow\\n\"));\n  /* This happens for example on obj2 and pic of the Calgary corpus */\n\n  /* Find the first bit length which could increase: */\n  do {\n    bits = max_length - 1;\n    while (s.bl_count[bits] === 0) { bits--; }\n    s.bl_count[bits]--;      /* move one leaf down the tree */\n    s.bl_count[bits + 1] += 2; /* move one overflow item as its brother */\n    s.bl_count[max_length]--;\n    /* The brother of the overflow item also moves one step up,\n     * but this does not affect bl_count[max_length]\n     */\n    overflow -= 2;\n  } while (overflow > 0);\n\n  /* Now recompute all bit lengths, scanning in increasing frequency.\n   * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all\n   * lengths instead of fixing only the wrong ones. This idea is taken\n   * from 'ar' written by Haruhiko Okumura.)\n   */\n  for (bits = max_length; bits !== 0; bits--) {\n    n = s.bl_count[bits];\n    while (n !== 0) {\n      m = s.heap[--h];\n      if (m > max_code) { continue; }\n      if (tree[m * 2 + 1]/*.Len*/ !== bits) {\n        // Tracev((stderr,\"code %d bits %d->%d\\n\", m, tree[m].Len, bits));\n        s.opt_len += (bits - tree[m * 2 + 1]/*.Len*/) * tree[m * 2]/*.Freq*/;\n        tree[m * 2 + 1]/*.Len*/ = bits;\n      }\n      n--;\n    }\n  }\n};\n\n\n/* ===========================================================================\n * Generate the codes for a given tree and bit counts (which need not be\n * optimal).\n * IN assertion: the array bl_count contains the bit length statistics for\n * the given tree and the field len is set for all tree elements.\n * OUT assertion: the field code is set for all tree elements of non\n *     zero code length.\n */\nconst gen_codes = (tree, max_code, bl_count) => {\n//    ct_data *tree;             /* the tree to decorate */\n//    int max_code;              /* largest code with non zero frequency */\n//    ushf *bl_count;            /* number of codes at each bit length */\n\n  const next_code = new Array(MAX_BITS$1 + 1); /* next code value for each bit length */\n  let code = 0;              /* running code value */\n  let bits;                  /* bit index */\n  let n;                     /* code index */\n\n  /* The distribution counts are first used to generate the code values\n   * without bit reversal.\n   */\n  for (bits = 1; bits <= MAX_BITS$1; bits++) {\n    code = (code + bl_count[bits - 1]) << 1;\n    next_code[bits] = code;\n  }\n  /* Check that the bit counts in bl_count are consistent. The last code\n   * must be all ones.\n   */\n  //Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\n  //        \"inconsistent bit counts\");\n  //Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\n\n  for (n = 0;  n <= max_code; n++) {\n    let len = tree[n * 2 + 1]/*.Len*/;\n    if (len === 0) { continue; }\n    /* Now reverse the bits */\n    tree[n * 2]/*.Code*/ = bi_reverse(next_code[len]++, len);\n\n    //Tracecv(tree != static_ltree, (stderr,\"\\nn %3d %c l %2d c %4x (%x) \",\n    //     n, (isgraph(n) ? n : ' '), len, tree[n].Code, next_code[len]-1));\n  }\n};\n\n\n/* ===========================================================================\n * Initialize the various 'constant' tables.\n */\nconst tr_static_init = () => {\n\n  let n;        /* iterates over tree elements */\n  let bits;     /* bit counter */\n  let length;   /* length value */\n  let code;     /* code value */\n  let dist;     /* distance index */\n  const bl_count = new Array(MAX_BITS$1 + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  // do check in _tr_init()\n  //if (static_init_done) return;\n\n  /* For some embedded targets, global variables are not initialized: */\n/*#ifdef NO_INIT_GLOBAL_POINTERS\n  static_l_desc.static_tree = static_ltree;\n  static_l_desc.extra_bits = extra_lbits;\n  static_d_desc.static_tree = static_dtree;\n  static_d_desc.extra_bits = extra_dbits;\n  static_bl_desc.extra_bits = extra_blbits;\n#endif*/\n\n  /* Initialize the mapping length (0..255) -> length code (0..28) */\n  length = 0;\n  for (code = 0; code < LENGTH_CODES$1 - 1; code++) {\n    base_length[code] = length;\n    for (n = 0; n < (1 << extra_lbits[code]); n++) {\n      _length_code[length++] = code;\n    }\n  }\n  //Assert (length == 256, \"tr_static_init: length != 256\");\n  /* Note that the length 255 (match length 258) can be represented\n   * in two different ways: code 284 + 5 bits or code 285, so we\n   * overwrite length_code[255] to use the best encoding:\n   */\n  _length_code[length - 1] = code;\n\n  /* Initialize the mapping dist (0..32K) -> dist code (0..29) */\n  dist = 0;\n  for (code = 0; code < 16; code++) {\n    base_dist[code] = dist;\n    for (n = 0; n < (1 << extra_dbits[code]); n++) {\n      _dist_code[dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: dist != 256\");\n  dist >>= 7; /* from now on, all distances are divided by 128 */\n  for (; code < D_CODES$1; code++) {\n    base_dist[code] = dist << 7;\n    for (n = 0; n < (1 << (extra_dbits[code] - 7)); n++) {\n      _dist_code[256 + dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: 256+dist != 512\");\n\n  /* Construct the codes of the static literal tree */\n  for (bits = 0; bits <= MAX_BITS$1; bits++) {\n    bl_count[bits] = 0;\n  }\n\n  n = 0;\n  while (n <= 143) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  while (n <= 255) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 9;\n    n++;\n    bl_count[9]++;\n  }\n  while (n <= 279) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 7;\n    n++;\n    bl_count[7]++;\n  }\n  while (n <= 287) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  /* Codes 286 and 287 do not exist, but we must include them in the\n   * tree construction to get a canonical Huffman tree (longest code\n   * all ones)\n   */\n  gen_codes(static_ltree, L_CODES$1 + 1, bl_count);\n\n  /* The static distance tree is trivial: */\n  for (n = 0; n < D_CODES$1; n++) {\n    static_dtree[n * 2 + 1]/*.Len*/ = 5;\n    static_dtree[n * 2]/*.Code*/ = bi_reverse(n, 5);\n  }\n\n  // Now data ready and we can init static trees\n  static_l_desc = new StaticTreeDesc(static_ltree, extra_lbits, LITERALS$1 + 1, L_CODES$1, MAX_BITS$1);\n  static_d_desc = new StaticTreeDesc(static_dtree, extra_dbits, 0,          D_CODES$1, MAX_BITS$1);\n  static_bl_desc = new StaticTreeDesc(new Array(0), extra_blbits, 0,         BL_CODES$1, MAX_BL_BITS);\n\n  //static_init_done = true;\n};\n\n\n/* ===========================================================================\n * Initialize a new block.\n */\nconst init_block = (s) => {\n\n  let n; /* iterates over tree elements */\n\n  /* Initialize the trees. */\n  for (n = 0; n < L_CODES$1;  n++) { s.dyn_ltree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < D_CODES$1;  n++) { s.dyn_dtree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < BL_CODES$1; n++) { s.bl_tree[n * 2]/*.Freq*/ = 0; }\n\n  s.dyn_ltree[END_BLOCK * 2]/*.Freq*/ = 1;\n  s.opt_len = s.static_len = 0;\n  s.sym_next = s.matches = 0;\n};\n\n\n/* ===========================================================================\n * Flush the bit buffer and align the output on a byte boundary\n */\nconst bi_windup = (s) =>\n{\n  if (s.bi_valid > 8) {\n    put_short(s, s.bi_buf);\n  } else if (s.bi_valid > 0) {\n    //put_byte(s, (Byte)s->bi_buf);\n    s.pending_buf[s.pending++] = s.bi_buf;\n  }\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n};\n\n/* ===========================================================================\n * Compares to subtrees, using the tree depth as tie breaker when\n * the subtrees have equal frequency. This minimizes the worst case length.\n */\nconst smaller = (tree, n, m, depth) => {\n\n  const _n2 = n * 2;\n  const _m2 = m * 2;\n  return (tree[_n2]/*.Freq*/ < tree[_m2]/*.Freq*/ ||\n         (tree[_n2]/*.Freq*/ === tree[_m2]/*.Freq*/ && depth[n] <= depth[m]));\n};\n\n/* ===========================================================================\n * Restore the heap property by moving down the tree starting at node k,\n * exchanging a node with the smallest of its two sons if necessary, stopping\n * when the heap property is re-established (each father smaller than its\n * two sons).\n */\nconst pqdownheap = (s, tree, k) => {\n//    deflate_state *s;\n//    ct_data *tree;  /* the tree to restore */\n//    int k;               /* node to move down */\n\n  const v = s.heap[k];\n  let j = k << 1;  /* left son of k */\n  while (j <= s.heap_len) {\n    /* Set j to the smallest of the two sons: */\n    if (j < s.heap_len &&\n      smaller(tree, s.heap[j + 1], s.heap[j], s.depth)) {\n      j++;\n    }\n    /* Exit if v is smaller than both sons */\n    if (smaller(tree, v, s.heap[j], s.depth)) { break; }\n\n    /* Exchange v with the smallest son */\n    s.heap[k] = s.heap[j];\n    k = j;\n\n    /* And continue down the tree, setting j to the left son of k */\n    j <<= 1;\n  }\n  s.heap[k] = v;\n};\n\n\n// inlined manually\n// const SMALLEST = 1;\n\n/* ===========================================================================\n * Send the block data compressed using the given Huffman trees\n */\nconst compress_block = (s, ltree, dtree) => {\n//    deflate_state *s;\n//    const ct_data *ltree; /* literal tree */\n//    const ct_data *dtree; /* distance tree */\n\n  let dist;           /* distance of matched string */\n  let lc;             /* match length or unmatched char (if dist == 0) */\n  let sx = 0;         /* running index in sym_buf */\n  let code;           /* the code to send */\n  let extra;          /* number of extra bits to send */\n\n  if (s.sym_next !== 0) {\n    do {\n      dist = s.pending_buf[s.sym_buf + sx++] & 0xff;\n      dist += (s.pending_buf[s.sym_buf + sx++] & 0xff) << 8;\n      lc = s.pending_buf[s.sym_buf + sx++];\n      if (dist === 0) {\n        send_code(s, lc, ltree); /* send a literal byte */\n        //Tracecv(isgraph(lc), (stderr,\" '%c' \", lc));\n      } else {\n        /* Here, lc is the match length - MIN_MATCH */\n        code = _length_code[lc];\n        send_code(s, code + LITERALS$1 + 1, ltree); /* send the length code */\n        extra = extra_lbits[code];\n        if (extra !== 0) {\n          lc -= base_length[code];\n          send_bits(s, lc, extra);       /* send the extra length bits */\n        }\n        dist--; /* dist is now the match distance - 1 */\n        code = d_code(dist);\n        //Assert (code < D_CODES, \"bad d_code\");\n\n        send_code(s, code, dtree);       /* send the distance code */\n        extra = extra_dbits[code];\n        if (extra !== 0) {\n          dist -= base_dist[code];\n          send_bits(s, dist, extra);   /* send the extra distance bits */\n        }\n      } /* literal or match pair ? */\n\n      /* Check that the overlay between pending_buf and sym_buf is ok: */\n      //Assert(s->pending < s->lit_bufsize + sx, \"pendingBuf overflow\");\n\n    } while (sx < s.sym_next);\n  }\n\n  send_code(s, END_BLOCK, ltree);\n};\n\n\n/* ===========================================================================\n * Construct one Huffman tree and assigns the code bit strings and lengths.\n * Update the total bit length for the current block.\n * IN assertion: the field freq is set for all tree elements.\n * OUT assertions: the fields len and code are set to the optimal bit length\n *     and corresponding code. The length opt_len is updated; static_len is\n *     also updated if stree is not null. The field max_code is set.\n */\nconst build_tree = (s, desc) => {\n//    deflate_state *s;\n//    tree_desc *desc; /* the tree descriptor */\n\n  const tree     = desc.dyn_tree;\n  const stree    = desc.stat_desc.static_tree;\n  const has_stree = desc.stat_desc.has_stree;\n  const elems    = desc.stat_desc.elems;\n  let n, m;          /* iterate over heap elements */\n  let max_code = -1; /* largest code with non zero frequency */\n  let node;          /* new node being created */\n\n  /* Construct the initial heap, with least frequent element in\n   * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\n   * heap[0] is not used.\n   */\n  s.heap_len = 0;\n  s.heap_max = HEAP_SIZE$1;\n\n  for (n = 0; n < elems; n++) {\n    if (tree[n * 2]/*.Freq*/ !== 0) {\n      s.heap[++s.heap_len] = max_code = n;\n      s.depth[n] = 0;\n\n    } else {\n      tree[n * 2 + 1]/*.Len*/ = 0;\n    }\n  }\n\n  /* The pkzip format requires that at least one distance code exists,\n   * and that at least one bit should be sent even if there is only one\n   * possible code. So to avoid special checks later on we force at least\n   * two codes of non zero frequency.\n   */\n  while (s.heap_len < 2) {\n    node = s.heap[++s.heap_len] = (max_code < 2 ? ++max_code : 0);\n    tree[node * 2]/*.Freq*/ = 1;\n    s.depth[node] = 0;\n    s.opt_len--;\n\n    if (has_stree) {\n      s.static_len -= stree[node * 2 + 1]/*.Len*/;\n    }\n    /* node is 0 or 1 so it does not have extra bits */\n  }\n  desc.max_code = max_code;\n\n  /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\n   * establish sub-heaps of increasing lengths:\n   */\n  for (n = (s.heap_len >> 1/*int /2*/); n >= 1; n--) { pqdownheap(s, tree, n); }\n\n  /* Construct the Huffman tree by repeatedly combining the least two\n   * frequent nodes.\n   */\n  node = elems;              /* next internal node of the tree */\n  do {\n    //pqremove(s, tree, n);  /* n = node of least frequency */\n    /*** pqremove ***/\n    n = s.heap[1/*SMALLEST*/];\n    s.heap[1/*SMALLEST*/] = s.heap[s.heap_len--];\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n    /***/\n\n    m = s.heap[1/*SMALLEST*/]; /* m = node of next least frequency */\n\n    s.heap[--s.heap_max] = n; /* keep the nodes sorted by frequency */\n    s.heap[--s.heap_max] = m;\n\n    /* Create a new node father of n and m */\n    tree[node * 2]/*.Freq*/ = tree[n * 2]/*.Freq*/ + tree[m * 2]/*.Freq*/;\n    s.depth[node] = (s.depth[n] >= s.depth[m] ? s.depth[n] : s.depth[m]) + 1;\n    tree[n * 2 + 1]/*.Dad*/ = tree[m * 2 + 1]/*.Dad*/ = node;\n\n    /* and insert the new node in the heap */\n    s.heap[1/*SMALLEST*/] = node++;\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n\n  } while (s.heap_len >= 2);\n\n  s.heap[--s.heap_max] = s.heap[1/*SMALLEST*/];\n\n  /* At this point, the fields freq and dad are set. We can now\n   * generate the bit lengths.\n   */\n  gen_bitlen(s, desc);\n\n  /* The field len is now set, we can generate the bit codes */\n  gen_codes(tree, max_code, s.bl_count);\n};\n\n\n/* ===========================================================================\n * Scan a literal or distance tree to determine the frequencies of the codes\n * in the bit length tree.\n */\nconst scan_tree = (s, tree, max_code) => {\n//    deflate_state *s;\n//    ct_data *tree;   /* the tree to be scanned */\n//    int max_code;    /* and its largest code of non zero frequency */\n\n  let n;                     /* iterates over all tree elements */\n  let prevlen = -1;          /* last emitted length */\n  let curlen;                /* length of current code */\n\n  let nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  let count = 0;             /* repeat count of the current code */\n  let max_count = 7;         /* max repeat count */\n  let min_count = 4;         /* min repeat count */\n\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n  tree[(max_code + 1) * 2 + 1]/*.Len*/ = 0xffff; /* guard */\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      s.bl_tree[curlen * 2]/*.Freq*/ += count;\n\n    } else if (curlen !== 0) {\n\n      if (curlen !== prevlen) { s.bl_tree[curlen * 2]/*.Freq*/++; }\n      s.bl_tree[REP_3_6 * 2]/*.Freq*/++;\n\n    } else if (count <= 10) {\n      s.bl_tree[REPZ_3_10 * 2]/*.Freq*/++;\n\n    } else {\n      s.bl_tree[REPZ_11_138 * 2]/*.Freq*/++;\n    }\n\n    count = 0;\n    prevlen = curlen;\n\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n};\n\n\n/* ===========================================================================\n * Send a literal or distance tree in compressed form, using the codes in\n * bl_tree.\n */\nconst send_tree = (s, tree, max_code) => {\n//    deflate_state *s;\n//    ct_data *tree; /* the tree to be scanned */\n//    int max_code;       /* and its largest code of non zero frequency */\n\n  let n;                     /* iterates over all tree elements */\n  let prevlen = -1;          /* last emitted length */\n  let curlen;                /* length of current code */\n\n  let nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  let count = 0;             /* repeat count of the current code */\n  let max_count = 7;         /* max repeat count */\n  let min_count = 4;         /* min repeat count */\n\n  /* tree[max_code+1].Len = -1; */  /* guard already set */\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      do { send_code(s, curlen, s.bl_tree); } while (--count !== 0);\n\n    } else if (curlen !== 0) {\n      if (curlen !== prevlen) {\n        send_code(s, curlen, s.bl_tree);\n        count--;\n      }\n      //Assert(count >= 3 && count <= 6, \" 3_6?\");\n      send_code(s, REP_3_6, s.bl_tree);\n      send_bits(s, count - 3, 2);\n\n    } else if (count <= 10) {\n      send_code(s, REPZ_3_10, s.bl_tree);\n      send_bits(s, count - 3, 3);\n\n    } else {\n      send_code(s, REPZ_11_138, s.bl_tree);\n      send_bits(s, count - 11, 7);\n    }\n\n    count = 0;\n    prevlen = curlen;\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n};\n\n\n/* ===========================================================================\n * Construct the Huffman tree for the bit lengths and return the index in\n * bl_order of the last bit length code to send.\n */\nconst build_bl_tree = (s) => {\n\n  let max_blindex;  /* index of last bit length code of non zero freq */\n\n  /* Determine the bit length frequencies for literal and distance trees */\n  scan_tree(s, s.dyn_ltree, s.l_desc.max_code);\n  scan_tree(s, s.dyn_dtree, s.d_desc.max_code);\n\n  /* Build the bit length tree: */\n  build_tree(s, s.bl_desc);\n  /* opt_len now includes the length of the tree representations, except\n   * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.\n   */\n\n  /* Determine the number of bit length codes to send. The pkzip format\n   * requires that at least 4 bit length codes be sent. (appnote.txt says\n   * 3 but the actual value used is 4.)\n   */\n  for (max_blindex = BL_CODES$1 - 1; max_blindex >= 3; max_blindex--) {\n    if (s.bl_tree[bl_order[max_blindex] * 2 + 1]/*.Len*/ !== 0) {\n      break;\n    }\n  }\n  /* Update opt_len to include the bit length tree and counts */\n  s.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4;\n  //Tracev((stderr, \"\\ndyn trees: dyn %ld, stat %ld\",\n  //        s->opt_len, s->static_len));\n\n  return max_blindex;\n};\n\n\n/* ===========================================================================\n * Send the header for a block using dynamic Huffman trees: the counts, the\n * lengths of the bit length codes, the literal tree and the distance tree.\n * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\n */\nconst send_all_trees = (s, lcodes, dcodes, blcodes) => {\n//    deflate_state *s;\n//    int lcodes, dcodes, blcodes; /* number of codes for each tree */\n\n  let rank;                    /* index in bl_order */\n\n  //Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, \"not enough codes\");\n  //Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,\n  //        \"too many codes\");\n  //Tracev((stderr, \"\\nbl counts: \"));\n  send_bits(s, lcodes - 257, 5); /* not +255 as stated in appnote.txt */\n  send_bits(s, dcodes - 1,   5);\n  send_bits(s, blcodes - 4,  4); /* not -3 as stated in appnote.txt */\n  for (rank = 0; rank < blcodes; rank++) {\n    //Tracev((stderr, \"\\nbl code %2d \", bl_order[rank]));\n    send_bits(s, s.bl_tree[bl_order[rank] * 2 + 1]/*.Len*/, 3);\n  }\n  //Tracev((stderr, \"\\nbl tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_ltree, lcodes - 1); /* literal tree */\n  //Tracev((stderr, \"\\nlit tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_dtree, dcodes - 1); /* distance tree */\n  //Tracev((stderr, \"\\ndist tree: sent %ld\", s->bits_sent));\n};\n\n\n/* ===========================================================================\n * Check if the data type is TEXT or BINARY, using the following algorithm:\n * - TEXT if the two conditions below are satisfied:\n *    a) There are no non-portable control characters belonging to the\n *       \"block list\" (0..6, 14..25, 28..31).\n *    b) There is at least one printable character belonging to the\n *       \"allow list\" (9 {TAB}, 10 {LF}, 13 {CR}, 32..255).\n * - BINARY otherwise.\n * - The following partially-portable control characters form a\n *   \"gray list\" that is ignored in this detection algorithm:\n *   (7 {BEL}, 8 {BS}, 11 {VT}, 12 {FF}, 26 {SUB}, 27 {ESC}).\n * IN assertion: the fields Freq of dyn_ltree are set.\n */\nconst detect_data_type = (s) => {\n  /* block_mask is the bit mask of block-listed bytes\n   * set bits 0..6, 14..25, and 28..31\n   * 0xf3ffc07f = binary 11110011111111111100000001111111\n   */\n  let block_mask = 0xf3ffc07f;\n  let n;\n\n  /* Check for non-textual (\"block-listed\") bytes. */\n  for (n = 0; n <= 31; n++, block_mask >>>= 1) {\n    if ((block_mask & 1) && (s.dyn_ltree[n * 2]/*.Freq*/ !== 0)) {\n      return Z_BINARY;\n    }\n  }\n\n  /* Check for textual (\"allow-listed\") bytes. */\n  if (s.dyn_ltree[9 * 2]/*.Freq*/ !== 0 || s.dyn_ltree[10 * 2]/*.Freq*/ !== 0 ||\n      s.dyn_ltree[13 * 2]/*.Freq*/ !== 0) {\n    return Z_TEXT;\n  }\n  for (n = 32; n < LITERALS$1; n++) {\n    if (s.dyn_ltree[n * 2]/*.Freq*/ !== 0) {\n      return Z_TEXT;\n    }\n  }\n\n  /* There are no \"block-listed\" or \"allow-listed\" bytes:\n   * this stream either is empty or has tolerated (\"gray-listed\") bytes only.\n   */\n  return Z_BINARY;\n};\n\n\nlet static_init_done = false;\n\n/* ===========================================================================\n * Initialize the tree data structures for a new zlib stream.\n */\nconst _tr_init$1 = (s) =>\n{\n\n  if (!static_init_done) {\n    tr_static_init();\n    static_init_done = true;\n  }\n\n  s.l_desc  = new TreeDesc(s.dyn_ltree, static_l_desc);\n  s.d_desc  = new TreeDesc(s.dyn_dtree, static_d_desc);\n  s.bl_desc = new TreeDesc(s.bl_tree, static_bl_desc);\n\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n\n  /* Initialize the first block of the first file: */\n  init_block(s);\n};\n\n\n/* ===========================================================================\n * Send a stored block\n */\nconst _tr_stored_block$1 = (s, buf, stored_len, last) => {\n//DeflateState *s;\n//charf *buf;       /* input block */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n\n  send_bits(s, (STORED_BLOCK << 1) + (last ? 1 : 0), 3);    /* send block type */\n  bi_windup(s);        /* align on byte boundary */\n  put_short(s, stored_len);\n  put_short(s, ~stored_len);\n  if (stored_len) {\n    s.pending_buf.set(s.window.subarray(buf, buf + stored_len), s.pending);\n  }\n  s.pending += stored_len;\n};\n\n\n/* ===========================================================================\n * Send one empty static block to give enough lookahead for inflate.\n * This takes 10 bits, of which 7 may remain in the bit buffer.\n */\nconst _tr_align$1 = (s) => {\n  send_bits(s, STATIC_TREES << 1, 3);\n  send_code(s, END_BLOCK, static_ltree);\n  bi_flush(s);\n};\n\n\n/* ===========================================================================\n * Determine the best encoding for the current block: dynamic trees, static\n * trees or store, and write out the encoded block.\n */\nconst _tr_flush_block$1 = (s, buf, stored_len, last) => {\n//DeflateState *s;\n//charf *buf;       /* input block, or NULL if too old */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n\n  let opt_lenb, static_lenb;  /* opt_len and static_len in bytes */\n  let max_blindex = 0;        /* index of last bit length code of non zero freq */\n\n  /* Build the Huffman trees unless a stored block is forced */\n  if (s.level > 0) {\n\n    /* Check if the file is binary or text */\n    if (s.strm.data_type === Z_UNKNOWN$1) {\n      s.strm.data_type = detect_data_type(s);\n    }\n\n    /* Construct the literal and distance trees */\n    build_tree(s, s.l_desc);\n    // Tracev((stderr, \"\\nlit data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n\n    build_tree(s, s.d_desc);\n    // Tracev((stderr, \"\\ndist data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n    /* At this point, opt_len and static_len are the total bit lengths of\n     * the compressed block data, excluding the tree representations.\n     */\n\n    /* Build the bit length tree for the above two trees, and get the index\n     * in bl_order of the last bit length code to send.\n     */\n    max_blindex = build_bl_tree(s);\n\n    /* Determine the best encoding. Compute the block lengths in bytes. */\n    opt_lenb = (s.opt_len + 3 + 7) >>> 3;\n    static_lenb = (s.static_len + 3 + 7) >>> 3;\n\n    // Tracev((stderr, \"\\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u \",\n    //        opt_lenb, s->opt_len, static_lenb, s->static_len, stored_len,\n    //        s->sym_next / 3));\n\n    if (static_lenb <= opt_lenb) { opt_lenb = static_lenb; }\n\n  } else {\n    // Assert(buf != (char*)0, \"lost buf\");\n    opt_lenb = static_lenb = stored_len + 5; /* force a stored block */\n  }\n\n  if ((stored_len + 4 <= opt_lenb) && (buf !== -1)) {\n    /* 4: two words for the lengths */\n\n    /* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\n     * Otherwise we can't have processed more than WSIZE input bytes since\n     * the last block flush, because compression would have been\n     * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\n     * transform a block into a stored block.\n     */\n    _tr_stored_block$1(s, buf, stored_len, last);\n\n  } else if (s.strategy === Z_FIXED$1 || static_lenb === opt_lenb) {\n\n    send_bits(s, (STATIC_TREES << 1) + (last ? 1 : 0), 3);\n    compress_block(s, static_ltree, static_dtree);\n\n  } else {\n    send_bits(s, (DYN_TREES << 1) + (last ? 1 : 0), 3);\n    send_all_trees(s, s.l_desc.max_code + 1, s.d_desc.max_code + 1, max_blindex + 1);\n    compress_block(s, s.dyn_ltree, s.dyn_dtree);\n  }\n  // Assert (s->compressed_len == s->bits_sent, \"bad compressed size\");\n  /* The above check is made mod 2^32, for files larger than 512 MB\n   * and uLong implemented on 32 bits.\n   */\n  init_block(s);\n\n  if (last) {\n    bi_windup(s);\n  }\n  // Tracev((stderr,\"\\ncomprlen %lu(%lu) \", s->compressed_len>>3,\n  //       s->compressed_len-7*last));\n};\n\n/* ===========================================================================\n * Save the match info and tally the frequency counts. Return true if\n * the current block must be flushed.\n */\nconst _tr_tally$1 = (s, dist, lc) => {\n//    deflate_state *s;\n//    unsigned dist;  /* distance of matched string */\n//    unsigned lc;    /* match length-MIN_MATCH or unmatched char (if dist==0) */\n\n  s.pending_buf[s.sym_buf + s.sym_next++] = dist;\n  s.pending_buf[s.sym_buf + s.sym_next++] = dist >> 8;\n  s.pending_buf[s.sym_buf + s.sym_next++] = lc;\n  if (dist === 0) {\n    /* lc is the unmatched char */\n    s.dyn_ltree[lc * 2]/*.Freq*/++;\n  } else {\n    s.matches++;\n    /* Here, lc is the match length - MIN_MATCH */\n    dist--;             /* dist = match distance - 1 */\n    //Assert((ush)dist < (ush)MAX_DIST(s) &&\n    //       (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&\n    //       (ush)d_code(dist) < (ush)D_CODES,  \"_tr_tally: bad match\");\n\n    s.dyn_ltree[(_length_code[lc] + LITERALS$1 + 1) * 2]/*.Freq*/++;\n    s.dyn_dtree[d_code(dist) * 2]/*.Freq*/++;\n  }\n\n  return (s.sym_next === s.sym_end);\n};\n\nvar _tr_init_1  = _tr_init$1;\nvar _tr_stored_block_1 = _tr_stored_block$1;\nvar _tr_flush_block_1  = _tr_flush_block$1;\nvar _tr_tally_1 = _tr_tally$1;\nvar _tr_align_1 = _tr_align$1;\n\nvar trees = {\n\t_tr_init: _tr_init_1,\n\t_tr_stored_block: _tr_stored_block_1,\n\t_tr_flush_block: _tr_flush_block_1,\n\t_tr_tally: _tr_tally_1,\n\t_tr_align: _tr_align_1\n};\n\n// Note: adler32 takes 12% for level 0 and 2% for level 6.\n// It isn't worth it to make additional optimizations as in original.\n// Small size is preferable.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nconst adler32 = (adler, buf, len, pos) => {\n  let s1 = (adler & 0xffff) |0,\n      s2 = ((adler >>> 16) & 0xffff) |0,\n      n = 0;\n\n  while (len !== 0) {\n    // Set limit ~ twice less than 5552, to keep\n    // s2 in 31-bits, because we force signed ints.\n    // in other case %= will fail.\n    n = len > 2000 ? 2000 : len;\n    len -= n;\n\n    do {\n      s1 = (s1 + buf[pos++]) |0;\n      s2 = (s2 + s1) |0;\n    } while (--n);\n\n    s1 %= 65521;\n    s2 %= 65521;\n  }\n\n  return (s1 | (s2 << 16)) |0;\n};\n\n\nvar adler32_1 = adler32;\n\n// Note: we can't get significant speed boost here.\n// So write code to minimize size - no pregenerated tables\n// and array tools dependencies.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// Use ordinary array, since untyped makes no boost here\nconst makeTable = () => {\n  let c, table = [];\n\n  for (var n = 0; n < 256; n++) {\n    c = n;\n    for (var k = 0; k < 8; k++) {\n      c = ((c & 1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\n    }\n    table[n] = c;\n  }\n\n  return table;\n};\n\n// Create table on load. Just 255 signed longs. Not a problem.\nconst crcTable = new Uint32Array(makeTable());\n\n\nconst crc32 = (crc, buf, len, pos) => {\n  const t = crcTable;\n  const end = pos + len;\n\n  crc ^= -1;\n\n  for (let i = pos; i < end; i++) {\n    crc = (crc >>> 8) ^ t[(crc ^ buf[i]) & 0xFF];\n  }\n\n  return (crc ^ (-1)); // >>> 0;\n};\n\n\nvar crc32_1 = crc32;\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar messages = {\n  2:      'need dictionary',     /* Z_NEED_DICT       2  */\n  1:      'stream end',          /* Z_STREAM_END      1  */\n  0:      '',                    /* Z_OK              0  */\n  '-1':   'file error',          /* Z_ERRNO         (-1) */\n  '-2':   'stream error',        /* Z_STREAM_ERROR  (-2) */\n  '-3':   'data error',          /* Z_DATA_ERROR    (-3) */\n  '-4':   'insufficient memory', /* Z_MEM_ERROR     (-4) */\n  '-5':   'buffer error',        /* Z_BUF_ERROR     (-5) */\n  '-6':   'incompatible version' /* Z_VERSION_ERROR (-6) */\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar constants$2 = {\n\n  /* Allowed flush values; see deflate() and inflate() below for details */\n  Z_NO_FLUSH:         0,\n  Z_PARTIAL_FLUSH:    1,\n  Z_SYNC_FLUSH:       2,\n  Z_FULL_FLUSH:       3,\n  Z_FINISH:           4,\n  Z_BLOCK:            5,\n  Z_TREES:            6,\n\n  /* Return codes for the compression/decompression functions. Negative values\n  * are errors, positive values are used for special but normal events.\n  */\n  Z_OK:               0,\n  Z_STREAM_END:       1,\n  Z_NEED_DICT:        2,\n  Z_ERRNO:           -1,\n  Z_STREAM_ERROR:    -2,\n  Z_DATA_ERROR:      -3,\n  Z_MEM_ERROR:       -4,\n  Z_BUF_ERROR:       -5,\n  //Z_VERSION_ERROR: -6,\n\n  /* compression levels */\n  Z_NO_COMPRESSION:         0,\n  Z_BEST_SPEED:             1,\n  Z_BEST_COMPRESSION:       9,\n  Z_DEFAULT_COMPRESSION:   -1,\n\n\n  Z_FILTERED:               1,\n  Z_HUFFMAN_ONLY:           2,\n  Z_RLE:                    3,\n  Z_FIXED:                  4,\n  Z_DEFAULT_STRATEGY:       0,\n\n  /* Possible values of the data_type field (though see inflate()) */\n  Z_BINARY:                 0,\n  Z_TEXT:                   1,\n  //Z_ASCII:                1, // = Z_TEXT (deprecated)\n  Z_UNKNOWN:                2,\n\n  /* The deflate compression method */\n  Z_DEFLATED:               8\n  //Z_NULL:                 null // Use -1 or null inline, depending on var type\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nconst { _tr_init, _tr_stored_block, _tr_flush_block, _tr_tally, _tr_align } = trees;\n\n\n\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_NO_FLUSH: Z_NO_FLUSH$2, Z_PARTIAL_FLUSH, Z_FULL_FLUSH: Z_FULL_FLUSH$1, Z_FINISH: Z_FINISH$3, Z_BLOCK: Z_BLOCK$1,\n  Z_OK: Z_OK$3, Z_STREAM_END: Z_STREAM_END$3, Z_STREAM_ERROR: Z_STREAM_ERROR$2, Z_DATA_ERROR: Z_DATA_ERROR$2, Z_BUF_ERROR: Z_BUF_ERROR$1,\n  Z_DEFAULT_COMPRESSION: Z_DEFAULT_COMPRESSION$1,\n  Z_FILTERED, Z_HUFFMAN_ONLY, Z_RLE, Z_FIXED, Z_DEFAULT_STRATEGY: Z_DEFAULT_STRATEGY$1,\n  Z_UNKNOWN,\n  Z_DEFLATED: Z_DEFLATED$2\n} = constants$2;\n\n/*============================================================================*/\n\n\nconst MAX_MEM_LEVEL = 9;\n/* Maximum value for memLevel in deflateInit2 */\nconst MAX_WBITS$1 = 15;\n/* 32K LZ77 window */\nconst DEF_MEM_LEVEL = 8;\n\n\nconst LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\nconst LITERALS      = 256;\n/* number of literal bytes 0..255 */\nconst L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\nconst D_CODES       = 30;\n/* number of distance codes */\nconst BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\nconst HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\nconst MAX_BITS  = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nconst MIN_MATCH = 3;\nconst MAX_MATCH = 258;\nconst MIN_LOOKAHEAD = (MAX_MATCH + MIN_MATCH + 1);\n\nconst PRESET_DICT = 0x20;\n\nconst INIT_STATE    =  42;    /* zlib header -> BUSY_STATE */\n//#ifdef GZIP\nconst GZIP_STATE    =  57;    /* gzip header -> BUSY_STATE | EXTRA_STATE */\n//#endif\nconst EXTRA_STATE   =  69;    /* gzip extra block -> NAME_STATE */\nconst NAME_STATE    =  73;    /* gzip file name -> COMMENT_STATE */\nconst COMMENT_STATE =  91;    /* gzip comment -> HCRC_STATE */\nconst HCRC_STATE    = 103;    /* gzip header CRC -> BUSY_STATE */\nconst BUSY_STATE    = 113;    /* deflate -> FINISH_STATE */\nconst FINISH_STATE  = 666;    /* stream complete */\n\nconst BS_NEED_MORE      = 1; /* block not completed, need more input or more output */\nconst BS_BLOCK_DONE     = 2; /* block flush performed */\nconst BS_FINISH_STARTED = 3; /* finish started, need only more output at next deflate */\nconst BS_FINISH_DONE    = 4; /* finish done, accept no more input or output */\n\nconst OS_CODE = 0x03; // Unix :) . Don't detect, use this default.\n\nconst err = (strm, errorCode) => {\n  strm.msg = messages[errorCode];\n  return errorCode;\n};\n\nconst rank = (f) => {\n  return ((f) * 2) - ((f) > 4 ? 9 : 0);\n};\n\nconst zero = (buf) => {\n  let len = buf.length; while (--len >= 0) { buf[len] = 0; }\n};\n\n/* ===========================================================================\n * Slide the hash table when sliding the window down (could be avoided with 32\n * bit values at the expense of memory usage). We slide even when level == 0 to\n * keep the hash table consistent if we switch back to level > 0 later.\n */\nconst slide_hash = (s) => {\n  let n, m;\n  let p;\n  let wsize = s.w_size;\n\n  n = s.hash_size;\n  p = n;\n  do {\n    m = s.head[--p];\n    s.head[p] = (m >= wsize ? m - wsize : 0);\n  } while (--n);\n  n = wsize;\n//#ifndef FASTEST\n  p = n;\n  do {\n    m = s.prev[--p];\n    s.prev[p] = (m >= wsize ? m - wsize : 0);\n    /* If n is not on any hash chain, prev[n] is garbage but\n     * its value will never be used.\n     */\n  } while (--n);\n//#endif\n};\n\n/* eslint-disable new-cap */\nlet HASH_ZLIB = (s, prev, data) => ((prev << s.hash_shift) ^ data) & s.hash_mask;\n// This hash causes less collisions, https://github.com/nodeca/pako/issues/135\n// But breaks binary compatibility\n//let HASH_FAST = (s, prev, data) => ((prev << 8) + (prev >> 8) + (data << 4)) & s.hash_mask;\nlet HASH = HASH_ZLIB;\n\n\n/* =========================================================================\n * Flush as much pending output as possible. All deflate() output, except for\n * some deflate_stored() output, goes through this function so some\n * applications may wish to modify it to avoid allocating a large\n * strm->next_out buffer and copying into it. (See also read_buf()).\n */\nconst flush_pending = (strm) => {\n  const s = strm.state;\n\n  //_tr_flush_bits(s);\n  let len = s.pending;\n  if (len > strm.avail_out) {\n    len = strm.avail_out;\n  }\n  if (len === 0) { return; }\n\n  strm.output.set(s.pending_buf.subarray(s.pending_out, s.pending_out + len), strm.next_out);\n  strm.next_out  += len;\n  s.pending_out  += len;\n  strm.total_out += len;\n  strm.avail_out -= len;\n  s.pending      -= len;\n  if (s.pending === 0) {\n    s.pending_out = 0;\n  }\n};\n\n\nconst flush_block_only = (s, last) => {\n  _tr_flush_block(s, (s.block_start >= 0 ? s.block_start : -1), s.strstart - s.block_start, last);\n  s.block_start = s.strstart;\n  flush_pending(s.strm);\n};\n\n\nconst put_byte = (s, b) => {\n  s.pending_buf[s.pending++] = b;\n};\n\n\n/* =========================================================================\n * Put a short in the pending buffer. The 16-bit value is put in MSB order.\n * IN assertion: the stream state is correct and there is enough room in\n * pending_buf.\n */\nconst putShortMSB = (s, b) => {\n\n  //  put_byte(s, (Byte)(b >> 8));\n//  put_byte(s, (Byte)(b & 0xff));\n  s.pending_buf[s.pending++] = (b >>> 8) & 0xff;\n  s.pending_buf[s.pending++] = b & 0xff;\n};\n\n\n/* ===========================================================================\n * Read a new buffer from the current input stream, update the adler32\n * and total number of bytes read.  All deflate() input goes through\n * this function so some applications may wish to modify it to avoid\n * allocating a large strm->input buffer and copying from it.\n * (See also flush_pending()).\n */\nconst read_buf = (strm, buf, start, size) => {\n\n  let len = strm.avail_in;\n\n  if (len > size) { len = size; }\n  if (len === 0) { return 0; }\n\n  strm.avail_in -= len;\n\n  // zmemcpy(buf, strm->next_in, len);\n  buf.set(strm.input.subarray(strm.next_in, strm.next_in + len), start);\n  if (strm.state.wrap === 1) {\n    strm.adler = adler32_1(strm.adler, buf, len, start);\n  }\n\n  else if (strm.state.wrap === 2) {\n    strm.adler = crc32_1(strm.adler, buf, len, start);\n  }\n\n  strm.next_in += len;\n  strm.total_in += len;\n\n  return len;\n};\n\n\n/* ===========================================================================\n * Set match_start to the longest match starting at the given string and\n * return its length. Matches shorter or equal to prev_length are discarded,\n * in which case the result is equal to prev_length and match_start is\n * garbage.\n * IN assertions: cur_match is the head of the hash chain for the current\n *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1\n * OUT assertion: the match length is not greater than s->lookahead.\n */\nconst longest_match = (s, cur_match) => {\n\n  let chain_length = s.max_chain_length;      /* max hash chain length */\n  let scan = s.strstart; /* current string */\n  let match;                       /* matched string */\n  let len;                           /* length of current match */\n  let best_len = s.prev_length;              /* best match length so far */\n  let nice_match = s.nice_match;             /* stop if match long enough */\n  const limit = (s.strstart > (s.w_size - MIN_LOOKAHEAD)) ?\n      s.strstart - (s.w_size - MIN_LOOKAHEAD) : 0/*NIL*/;\n\n  const _win = s.window; // shortcut\n\n  const wmask = s.w_mask;\n  const prev  = s.prev;\n\n  /* Stop when cur_match becomes <= limit. To simplify the code,\n   * we prevent matches with the string of window index 0.\n   */\n\n  const strend = s.strstart + MAX_MATCH;\n  let scan_end1  = _win[scan + best_len - 1];\n  let scan_end   = _win[scan + best_len];\n\n  /* The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of 16.\n   * It is easy to get rid of this optimization if necessary.\n   */\n  // Assert(s->hash_bits >= 8 && MAX_MATCH == 258, \"Code too clever\");\n\n  /* Do not waste too much time if we already have a good match: */\n  if (s.prev_length >= s.good_match) {\n    chain_length >>= 2;\n  }\n  /* Do not look for matches beyond the end of the input. This is necessary\n   * to make deflate deterministic.\n   */\n  if (nice_match > s.lookahead) { nice_match = s.lookahead; }\n\n  // Assert((ulg)s->strstart <= s->window_size-MIN_LOOKAHEAD, \"need lookahead\");\n\n  do {\n    // Assert(cur_match < s->strstart, \"no future\");\n    match = cur_match;\n\n    /* Skip to next match if the match length cannot increase\n     * or if the match length is less than 2.  Note that the checks below\n     * for insufficient lookahead only occur occasionally for performance\n     * reasons.  Therefore uninitialized memory will be accessed, and\n     * conditional jumps will be made that depend on those values.\n     * However the length of the match is limited to the lookahead, so\n     * the output of deflate is not affected by the uninitialized values.\n     */\n\n    if (_win[match + best_len]     !== scan_end  ||\n        _win[match + best_len - 1] !== scan_end1 ||\n        _win[match]                !== _win[scan] ||\n        _win[++match]              !== _win[scan + 1]) {\n      continue;\n    }\n\n    /* The check at best_len-1 can be removed because it will be made\n     * again later. (This heuristic is not always a win.)\n     * It is not necessary to compare scan[2] and match[2] since they\n     * are always equal when the other bytes match, given that\n     * the hash keys are equal and that HASH_BITS >= 8.\n     */\n    scan += 2;\n    match++;\n    // Assert(*scan == *match, \"match[2]?\");\n\n    /* We check for insufficient lookahead only every 8th comparison;\n     * the 256th check will be made at strstart+258.\n     */\n    do {\n      /*jshint noempty:false*/\n    } while (_win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             scan < strend);\n\n    // Assert(scan <= s->window+(unsigned)(s->window_size-1), \"wild scan\");\n\n    len = MAX_MATCH - (strend - scan);\n    scan = strend - MAX_MATCH;\n\n    if (len > best_len) {\n      s.match_start = cur_match;\n      best_len = len;\n      if (len >= nice_match) {\n        break;\n      }\n      scan_end1  = _win[scan + best_len - 1];\n      scan_end   = _win[scan + best_len];\n    }\n  } while ((cur_match = prev[cur_match & wmask]) > limit && --chain_length !== 0);\n\n  if (best_len <= s.lookahead) {\n    return best_len;\n  }\n  return s.lookahead;\n};\n\n\n/* ===========================================================================\n * Fill the window when the lookahead becomes insufficient.\n * Updates strstart and lookahead.\n *\n * IN assertion: lookahead < MIN_LOOKAHEAD\n * OUT assertions: strstart <= window_size-MIN_LOOKAHEAD\n *    At least one byte has been read, or avail_in == 0; reads are\n *    performed for at least two bytes (required for the zip translate_eol\n *    option -- not supported here).\n */\nconst fill_window = (s) => {\n\n  const _w_size = s.w_size;\n  let n, more, str;\n\n  //Assert(s->lookahead < MIN_LOOKAHEAD, \"already enough lookahead\");\n\n  do {\n    more = s.window_size - s.lookahead - s.strstart;\n\n    // JS ints have 32 bit, block below not needed\n    /* Deal with !@#$% 64K limit: */\n    //if (sizeof(int) <= 2) {\n    //    if (more == 0 && s->strstart == 0 && s->lookahead == 0) {\n    //        more = wsize;\n    //\n    //  } else if (more == (unsigned)(-1)) {\n    //        /* Very unlikely, but possible on 16 bit machine if\n    //         * strstart == 0 && lookahead == 1 (input done a byte at time)\n    //         */\n    //        more--;\n    //    }\n    //}\n\n\n    /* If the window is almost full and there is insufficient lookahead,\n     * move the upper half to the lower one to make room in the upper half.\n     */\n    if (s.strstart >= _w_size + (_w_size - MIN_LOOKAHEAD)) {\n\n      s.window.set(s.window.subarray(_w_size, _w_size + _w_size - more), 0);\n      s.match_start -= _w_size;\n      s.strstart -= _w_size;\n      /* we now have strstart >= MAX_DIST */\n      s.block_start -= _w_size;\n      if (s.insert > s.strstart) {\n        s.insert = s.strstart;\n      }\n      slide_hash(s);\n      more += _w_size;\n    }\n    if (s.strm.avail_in === 0) {\n      break;\n    }\n\n    /* If there was no sliding:\n     *    strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&\n     *    more == window_size - lookahead - strstart\n     * => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)\n     * => more >= window_size - 2*WSIZE + 2\n     * In the BIG_MEM or MMAP case (not yet supported),\n     *   window_size == input_size + MIN_LOOKAHEAD  &&\n     *   strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.\n     * Otherwise, window_size == 2*WSIZE so more >= 2.\n     * If there was sliding, more >= WSIZE. So in all cases, more >= 2.\n     */\n    //Assert(more >= 2, \"more < 2\");\n    n = read_buf(s.strm, s.window, s.strstart + s.lookahead, more);\n    s.lookahead += n;\n\n    /* Initialize the hash value now that we have some input: */\n    if (s.lookahead + s.insert >= MIN_MATCH) {\n      str = s.strstart - s.insert;\n      s.ins_h = s.window[str];\n\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + 1]); */\n      s.ins_h = HASH(s, s.ins_h, s.window[str + 1]);\n//#if MIN_MATCH != 3\n//        Call update_hash() MIN_MATCH-3 more times\n//#endif\n      while (s.insert) {\n        /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n        s.ins_h = HASH(s, s.ins_h, s.window[str + MIN_MATCH - 1]);\n\n        s.prev[str & s.w_mask] = s.head[s.ins_h];\n        s.head[s.ins_h] = str;\n        str++;\n        s.insert--;\n        if (s.lookahead + s.insert < MIN_MATCH) {\n          break;\n        }\n      }\n    }\n    /* If the whole input has less than MIN_MATCH bytes, ins_h is garbage,\n     * but this is not important since only literal bytes will be emitted.\n     */\n\n  } while (s.lookahead < MIN_LOOKAHEAD && s.strm.avail_in !== 0);\n\n  /* If the WIN_INIT bytes after the end of the current data have never been\n   * written, then zero those bytes in order to avoid memory check reports of\n   * the use of uninitialized (or uninitialised as Julian writes) bytes by\n   * the longest match routines.  Update the high water mark for the next\n   * time through here.  WIN_INIT is set to MAX_MATCH since the longest match\n   * routines allow scanning to strstart + MAX_MATCH, ignoring lookahead.\n   */\n//  if (s.high_water < s.window_size) {\n//    const curr = s.strstart + s.lookahead;\n//    let init = 0;\n//\n//    if (s.high_water < curr) {\n//      /* Previous high water mark below current data -- zero WIN_INIT\n//       * bytes or up to end of window, whichever is less.\n//       */\n//      init = s.window_size - curr;\n//      if (init > WIN_INIT)\n//        init = WIN_INIT;\n//      zmemzero(s->window + curr, (unsigned)init);\n//      s->high_water = curr + init;\n//    }\n//    else if (s->high_water < (ulg)curr + WIN_INIT) {\n//      /* High water mark at or above current data, but below current data\n//       * plus WIN_INIT -- zero out to current data plus WIN_INIT, or up\n//       * to end of window, whichever is less.\n//       */\n//      init = (ulg)curr + WIN_INIT - s->high_water;\n//      if (init > s->window_size - s->high_water)\n//        init = s->window_size - s->high_water;\n//      zmemzero(s->window + s->high_water, (unsigned)init);\n//      s->high_water += init;\n//    }\n//  }\n//\n//  Assert((ulg)s->strstart <= s->window_size - MIN_LOOKAHEAD,\n//    \"not enough room for search\");\n};\n\n/* ===========================================================================\n * Copy without compression as much as possible from the input stream, return\n * the current block state.\n *\n * In case deflateParams() is used to later switch to a non-zero compression\n * level, s->matches (otherwise unused when storing) keeps track of the number\n * of hash table slides to perform. If s->matches is 1, then one hash table\n * slide will be done when switching. If s->matches is 2, the maximum value\n * allowed here, then the hash table will be cleared, since two or more slides\n * is the same as a clear.\n *\n * deflate_stored() is written to minimize the number of times an input byte is\n * copied. It is most efficient with large input and output buffers, which\n * maximizes the opportunites to have a single copy from next_in to next_out.\n */\nconst deflate_stored = (s, flush) => {\n\n  /* Smallest worthy block size when not flushing or finishing. By default\n   * this is 32K. This can be as small as 507 bytes for memLevel == 1. For\n   * large input and output buffers, the stored block size will be larger.\n   */\n  let min_block = s.pending_buf_size - 5 > s.w_size ? s.w_size : s.pending_buf_size - 5;\n\n  /* Copy as many min_block or larger stored blocks directly to next_out as\n   * possible. If flushing, copy the remaining available input to next_out as\n   * stored blocks, if there is enough space.\n   */\n  let len, left, have, last = 0;\n  let used = s.strm.avail_in;\n  do {\n    /* Set len to the maximum size block that we can copy directly with the\n     * available input data and output space. Set left to how much of that\n     * would be copied from what's left in the window.\n     */\n    len = 65535/* MAX_STORED */;     /* maximum deflate stored block length */\n    have = (s.bi_valid + 42) >> 3;     /* number of header bytes */\n    if (s.strm.avail_out < have) {         /* need room for header */\n      break;\n    }\n      /* maximum stored block length that will fit in avail_out: */\n    have = s.strm.avail_out - have;\n    left = s.strstart - s.block_start;  /* bytes left in window */\n    if (len > left + s.strm.avail_in) {\n      len = left + s.strm.avail_in;   /* limit len to the input */\n    }\n    if (len > have) {\n      len = have;             /* limit len to the output */\n    }\n\n    /* If the stored block would be less than min_block in length, or if\n     * unable to copy all of the available input when flushing, then try\n     * copying to the window and the pending buffer instead. Also don't\n     * write an empty block when flushing -- deflate() does that.\n     */\n    if (len < min_block && ((len === 0 && flush !== Z_FINISH$3) ||\n                        flush === Z_NO_FLUSH$2 ||\n                        len !== left + s.strm.avail_in)) {\n      break;\n    }\n\n    /* Make a dummy stored block in pending to get the header bytes,\n     * including any pending bits. This also updates the debugging counts.\n     */\n    last = flush === Z_FINISH$3 && len === left + s.strm.avail_in ? 1 : 0;\n    _tr_stored_block(s, 0, 0, last);\n\n    /* Replace the lengths in the dummy stored block with len. */\n    s.pending_buf[s.pending - 4] = len;\n    s.pending_buf[s.pending - 3] = len >> 8;\n    s.pending_buf[s.pending - 2] = ~len;\n    s.pending_buf[s.pending - 1] = ~len >> 8;\n\n    /* Write the stored block header bytes. */\n    flush_pending(s.strm);\n\n//#ifdef ZLIB_DEBUG\n//    /* Update debugging counts for the data about to be copied. */\n//    s->compressed_len += len << 3;\n//    s->bits_sent += len << 3;\n//#endif\n\n    /* Copy uncompressed bytes from the window to next_out. */\n    if (left) {\n      if (left > len) {\n        left = len;\n      }\n      //zmemcpy(s->strm->next_out, s->window + s->block_start, left);\n      s.strm.output.set(s.window.subarray(s.block_start, s.block_start + left), s.strm.next_out);\n      s.strm.next_out += left;\n      s.strm.avail_out -= left;\n      s.strm.total_out += left;\n      s.block_start += left;\n      len -= left;\n    }\n\n    /* Copy uncompressed bytes directly from next_in to next_out, updating\n     * the check value.\n     */\n    if (len) {\n      read_buf(s.strm, s.strm.output, s.strm.next_out, len);\n      s.strm.next_out += len;\n      s.strm.avail_out -= len;\n      s.strm.total_out += len;\n    }\n  } while (last === 0);\n\n  /* Update the sliding window with the last s->w_size bytes of the copied\n   * data, or append all of the copied data to the existing window if less\n   * than s->w_size bytes were copied. Also update the number of bytes to\n   * insert in the hash tables, in the event that deflateParams() switches to\n   * a non-zero compression level.\n   */\n  used -= s.strm.avail_in;    /* number of input bytes directly copied */\n  if (used) {\n    /* If any input was used, then no unused input remains in the window,\n     * therefore s->block_start == s->strstart.\n     */\n    if (used >= s.w_size) {  /* supplant the previous history */\n      s.matches = 2;     /* clear hash */\n      //zmemcpy(s->window, s->strm->next_in - s->w_size, s->w_size);\n      s.window.set(s.strm.input.subarray(s.strm.next_in - s.w_size, s.strm.next_in), 0);\n      s.strstart = s.w_size;\n      s.insert = s.strstart;\n    }\n    else {\n      if (s.window_size - s.strstart <= used) {\n        /* Slide the window down. */\n        s.strstart -= s.w_size;\n        //zmemcpy(s->window, s->window + s->w_size, s->strstart);\n        s.window.set(s.window.subarray(s.w_size, s.w_size + s.strstart), 0);\n        if (s.matches < 2) {\n          s.matches++;   /* add a pending slide_hash() */\n        }\n        if (s.insert > s.strstart) {\n          s.insert = s.strstart;\n        }\n      }\n      //zmemcpy(s->window + s->strstart, s->strm->next_in - used, used);\n      s.window.set(s.strm.input.subarray(s.strm.next_in - used, s.strm.next_in), s.strstart);\n      s.strstart += used;\n      s.insert += used > s.w_size - s.insert ? s.w_size - s.insert : used;\n    }\n    s.block_start = s.strstart;\n  }\n  if (s.high_water < s.strstart) {\n    s.high_water = s.strstart;\n  }\n\n  /* If the last block was written to next_out, then done. */\n  if (last) {\n    return BS_FINISH_DONE;\n  }\n\n  /* If flushing and all input has been consumed, then done. */\n  if (flush !== Z_NO_FLUSH$2 && flush !== Z_FINISH$3 &&\n    s.strm.avail_in === 0 && s.strstart === s.block_start) {\n    return BS_BLOCK_DONE;\n  }\n\n  /* Fill the window with any remaining input. */\n  have = s.window_size - s.strstart;\n  if (s.strm.avail_in > have && s.block_start >= s.w_size) {\n    /* Slide the window down. */\n    s.block_start -= s.w_size;\n    s.strstart -= s.w_size;\n    //zmemcpy(s->window, s->window + s->w_size, s->strstart);\n    s.window.set(s.window.subarray(s.w_size, s.w_size + s.strstart), 0);\n    if (s.matches < 2) {\n      s.matches++;       /* add a pending slide_hash() */\n    }\n    have += s.w_size;      /* more space now */\n    if (s.insert > s.strstart) {\n      s.insert = s.strstart;\n    }\n  }\n  if (have > s.strm.avail_in) {\n    have = s.strm.avail_in;\n  }\n  if (have) {\n    read_buf(s.strm, s.window, s.strstart, have);\n    s.strstart += have;\n    s.insert += have > s.w_size - s.insert ? s.w_size - s.insert : have;\n  }\n  if (s.high_water < s.strstart) {\n    s.high_water = s.strstart;\n  }\n\n  /* There was not enough avail_out to write a complete worthy or flushed\n   * stored block to next_out. Write a stored block to pending instead, if we\n   * have enough input for a worthy block, or if flushing and there is enough\n   * room for the remaining input as a stored block in the pending buffer.\n   */\n  have = (s.bi_valid + 42) >> 3;     /* number of header bytes */\n    /* maximum stored block length that will fit in pending: */\n  have = s.pending_buf_size - have > 65535/* MAX_STORED */ ? 65535/* MAX_STORED */ : s.pending_buf_size - have;\n  min_block = have > s.w_size ? s.w_size : have;\n  left = s.strstart - s.block_start;\n  if (left >= min_block ||\n     ((left || flush === Z_FINISH$3) && flush !== Z_NO_FLUSH$2 &&\n     s.strm.avail_in === 0 && left <= have)) {\n    len = left > have ? have : left;\n    last = flush === Z_FINISH$3 && s.strm.avail_in === 0 &&\n         len === left ? 1 : 0;\n    _tr_stored_block(s, s.block_start, len, last);\n    s.block_start += len;\n    flush_pending(s.strm);\n  }\n\n  /* We've done all we can with the available input and output. */\n  return last ? BS_FINISH_STARTED : BS_NEED_MORE;\n};\n\n\n/* ===========================================================================\n * Compress as much as possible from the input stream, return the current\n * block state.\n * This function does not perform lazy evaluation of matches and inserts\n * new strings in the dictionary only for unmatched strings or for short\n * matches. It is used only for the fast compression options.\n */\nconst deflate_fast = (s, flush) => {\n\n  let hash_head;        /* head of the hash chain */\n  let bflush;           /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH$2) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) {\n        break; /* flush the current block */\n      }\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     * At this point we have always match_length < MIN_MATCH\n     */\n    if (hash_head !== 0/*NIL*/ && ((s.strstart - hash_head) <= (s.w_size - MIN_LOOKAHEAD))) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n    }\n    if (s.match_length >= MIN_MATCH) {\n      // check_match(s, s.strstart, s.match_start, s.match_length); // for debug only\n\n      /*** _tr_tally_dist(s, s.strstart - s.match_start,\n                     s.match_length - MIN_MATCH, bflush); ***/\n      bflush = _tr_tally(s, s.strstart - s.match_start, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n\n      /* Insert new strings in the hash table only if the match length\n       * is not too large. This saves time but degrades compression.\n       */\n      if (s.match_length <= s.max_lazy_match/*max_insert_length*/ && s.lookahead >= MIN_MATCH) {\n        s.match_length--; /* string at strstart already in table */\n        do {\n          s.strstart++;\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n          /* strstart never exceeds WSIZE-MAX_MATCH, so there are\n           * always MIN_MATCH bytes ahead.\n           */\n        } while (--s.match_length !== 0);\n        s.strstart++;\n      } else\n      {\n        s.strstart += s.match_length;\n        s.match_length = 0;\n        s.ins_h = s.window[s.strstart];\n        /* UPDATE_HASH(s, s.ins_h, s.window[s.strstart+1]); */\n        s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + 1]);\n\n//#if MIN_MATCH != 3\n//                Call UPDATE_HASH() MIN_MATCH-3 more times\n//#endif\n        /* If lookahead < MIN_MATCH, ins_h is garbage, but it does not\n         * matter since it will be recomputed at next deflate call.\n         */\n      }\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s.window[s.strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = _tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = ((s.strstart < (MIN_MATCH - 1)) ? s.strstart : MIN_MATCH - 1);\n  if (flush === Z_FINISH$3) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.sym_next) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n};\n\n/* ===========================================================================\n * Same as above, but achieves better compression. We use a lazy\n * evaluation for matches: a match is finally adopted only if there is\n * no better match at the next window position.\n */\nconst deflate_slow = (s, flush) => {\n\n  let hash_head;          /* head of hash chain */\n  let bflush;              /* set if current block must be flushed */\n\n  let max_insert;\n\n  /* Process the input block. */\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH$2) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     */\n    s.prev_length = s.match_length;\n    s.prev_match = s.match_start;\n    s.match_length = MIN_MATCH - 1;\n\n    if (hash_head !== 0/*NIL*/ && s.prev_length < s.max_lazy_match &&\n        s.strstart - hash_head <= (s.w_size - MIN_LOOKAHEAD)/*MAX_DIST(s)*/) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n\n      if (s.match_length <= 5 &&\n         (s.strategy === Z_FILTERED || (s.match_length === MIN_MATCH && s.strstart - s.match_start > 4096/*TOO_FAR*/))) {\n\n        /* If prev_match is also MIN_MATCH, match_start is garbage\n         * but we will ignore the current match anyway.\n         */\n        s.match_length = MIN_MATCH - 1;\n      }\n    }\n    /* If there was a match at the previous step and the current\n     * match is not better, output the previous match:\n     */\n    if (s.prev_length >= MIN_MATCH && s.match_length <= s.prev_length) {\n      max_insert = s.strstart + s.lookahead - MIN_MATCH;\n      /* Do not insert strings in hash table beyond this. */\n\n      //check_match(s, s.strstart-1, s.prev_match, s.prev_length);\n\n      /***_tr_tally_dist(s, s.strstart - 1 - s.prev_match,\n                     s.prev_length - MIN_MATCH, bflush);***/\n      bflush = _tr_tally(s, s.strstart - 1 - s.prev_match, s.prev_length - MIN_MATCH);\n      /* Insert in hash table all strings up to the end of the match.\n       * strstart-1 and strstart are already inserted. If there is not\n       * enough lookahead, the last two strings are not inserted in\n       * the hash table.\n       */\n      s.lookahead -= s.prev_length - 1;\n      s.prev_length -= 2;\n      do {\n        if (++s.strstart <= max_insert) {\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n        }\n      } while (--s.prev_length !== 0);\n      s.match_available = 0;\n      s.match_length = MIN_MATCH - 1;\n      s.strstart++;\n\n      if (bflush) {\n        /*** FLUSH_BLOCK(s, 0); ***/\n        flush_block_only(s, false);\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n        /***/\n      }\n\n    } else if (s.match_available) {\n      /* If there was no match at the previous position, output a\n       * single literal. If there was a match but the current match\n       * is longer, truncate the previous match to a single literal.\n       */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n      /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n      bflush = _tr_tally(s, 0, s.window[s.strstart - 1]);\n\n      if (bflush) {\n        /*** FLUSH_BLOCK_ONLY(s, 0) ***/\n        flush_block_only(s, false);\n        /***/\n      }\n      s.strstart++;\n      s.lookahead--;\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n    } else {\n      /* There is no previous match to compare with, wait for\n       * the next step to decide.\n       */\n      s.match_available = 1;\n      s.strstart++;\n      s.lookahead--;\n    }\n  }\n  //Assert (flush != Z_NO_FLUSH, \"no flush?\");\n  if (s.match_available) {\n    //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n    /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n    bflush = _tr_tally(s, 0, s.window[s.strstart - 1]);\n\n    s.match_available = 0;\n  }\n  s.insert = s.strstart < MIN_MATCH - 1 ? s.strstart : MIN_MATCH - 1;\n  if (flush === Z_FINISH$3) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.sym_next) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_BLOCK_DONE;\n};\n\n\n/* ===========================================================================\n * For Z_RLE, simply look for runs of bytes, generate matches only of distance\n * one.  Do not maintain a hash table.  (It will be regenerated if this run of\n * deflate switches away from Z_RLE.)\n */\nconst deflate_rle = (s, flush) => {\n\n  let bflush;            /* set if current block must be flushed */\n  let prev;              /* byte at distance one to match */\n  let scan, strend;      /* scan goes up to strend for length of run */\n\n  const _win = s.window;\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the longest run, plus one for the unrolled loop.\n     */\n    if (s.lookahead <= MAX_MATCH) {\n      fill_window(s);\n      if (s.lookahead <= MAX_MATCH && flush === Z_NO_FLUSH$2) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* See how many times the previous byte repeats */\n    s.match_length = 0;\n    if (s.lookahead >= MIN_MATCH && s.strstart > 0) {\n      scan = s.strstart - 1;\n      prev = _win[scan];\n      if (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan]) {\n        strend = s.strstart + MAX_MATCH;\n        do {\n          /*jshint noempty:false*/\n        } while (prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 scan < strend);\n        s.match_length = MAX_MATCH - (strend - scan);\n        if (s.match_length > s.lookahead) {\n          s.match_length = s.lookahead;\n        }\n      }\n      //Assert(scan <= s->window+(uInt)(s->window_size-1), \"wild scan\");\n    }\n\n    /* Emit match if have run of MIN_MATCH or longer, else emit literal */\n    if (s.match_length >= MIN_MATCH) {\n      //check_match(s, s.strstart, s.strstart - 1, s.match_length);\n\n      /*** _tr_tally_dist(s, 1, s.match_length - MIN_MATCH, bflush); ***/\n      bflush = _tr_tally(s, 1, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n      s.strstart += s.match_length;\n      s.match_length = 0;\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = _tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH$3) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.sym_next) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n};\n\n/* ===========================================================================\n * For Z_HUFFMAN_ONLY, do not look for matches.  Do not maintain a hash table.\n * (It will be regenerated if this run of deflate switches away from Huffman.)\n */\nconst deflate_huff = (s, flush) => {\n\n  let bflush;             /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we have a literal to write. */\n    if (s.lookahead === 0) {\n      fill_window(s);\n      if (s.lookahead === 0) {\n        if (flush === Z_NO_FLUSH$2) {\n          return BS_NEED_MORE;\n        }\n        break;      /* flush the current block */\n      }\n    }\n\n    /* Output a literal byte */\n    s.match_length = 0;\n    //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n    /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n    bflush = _tr_tally(s, 0, s.window[s.strstart]);\n    s.lookahead--;\n    s.strstart++;\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH$3) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.sym_next) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n};\n\n/* Values for max_lazy_match, good_match and max_chain_length, depending on\n * the desired pack level (0..9). The values given below have been tuned to\n * exclude worst case performance for pathological files. Better values may be\n * found for specific files.\n */\nfunction Config(good_length, max_lazy, nice_length, max_chain, func) {\n\n  this.good_length = good_length;\n  this.max_lazy = max_lazy;\n  this.nice_length = nice_length;\n  this.max_chain = max_chain;\n  this.func = func;\n}\n\nconst configuration_table = [\n  /*      good lazy nice chain */\n  new Config(0, 0, 0, 0, deflate_stored),          /* 0 store only */\n  new Config(4, 4, 8, 4, deflate_fast),            /* 1 max speed, no lazy matches */\n  new Config(4, 5, 16, 8, deflate_fast),           /* 2 */\n  new Config(4, 6, 32, 32, deflate_fast),          /* 3 */\n\n  new Config(4, 4, 16, 16, deflate_slow),          /* 4 lazy matches */\n  new Config(8, 16, 32, 32, deflate_slow),         /* 5 */\n  new Config(8, 16, 128, 128, deflate_slow),       /* 6 */\n  new Config(8, 32, 128, 256, deflate_slow),       /* 7 */\n  new Config(32, 128, 258, 1024, deflate_slow),    /* 8 */\n  new Config(32, 258, 258, 4096, deflate_slow)     /* 9 max compression */\n];\n\n\n/* ===========================================================================\n * Initialize the \"longest match\" routines for a new zlib stream\n */\nconst lm_init = (s) => {\n\n  s.window_size = 2 * s.w_size;\n\n  /*** CLEAR_HASH(s); ***/\n  zero(s.head); // Fill with NIL (= 0);\n\n  /* Set the default configuration parameters:\n   */\n  s.max_lazy_match = configuration_table[s.level].max_lazy;\n  s.good_match = configuration_table[s.level].good_length;\n  s.nice_match = configuration_table[s.level].nice_length;\n  s.max_chain_length = configuration_table[s.level].max_chain;\n\n  s.strstart = 0;\n  s.block_start = 0;\n  s.lookahead = 0;\n  s.insert = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  s.ins_h = 0;\n};\n\n\nfunction DeflateState() {\n  this.strm = null;            /* pointer back to this zlib stream */\n  this.status = 0;            /* as the name implies */\n  this.pending_buf = null;      /* output still pending */\n  this.pending_buf_size = 0;  /* size of pending_buf */\n  this.pending_out = 0;       /* next pending byte to output to the stream */\n  this.pending = 0;           /* nb of bytes in the pending buffer */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.gzhead = null;         /* gzip header information to write */\n  this.gzindex = 0;           /* where in extra, name, or comment */\n  this.method = Z_DEFLATED$2; /* can only be DEFLATED */\n  this.last_flush = -1;   /* value of flush param for previous deflate call */\n\n  this.w_size = 0;  /* LZ77 window size (32K by default) */\n  this.w_bits = 0;  /* log2(w_size)  (8..16) */\n  this.w_mask = 0;  /* w_size - 1 */\n\n  this.window = null;\n  /* Sliding window. Input bytes are read into the second half of the window,\n   * and move to the first half later to keep a dictionary of at least wSize\n   * bytes. With this organization, matches are limited to a distance of\n   * wSize-MAX_MATCH bytes, but this ensures that IO is always\n   * performed with a length multiple of the block size.\n   */\n\n  this.window_size = 0;\n  /* Actual size of window: 2*wSize, except when the user input buffer\n   * is directly used as sliding window.\n   */\n\n  this.prev = null;\n  /* Link to older string with same hash index. To limit the size of this\n   * array to 64K, this link is maintained only for the last 32K strings.\n   * An index in this array is thus a window index modulo 32K.\n   */\n\n  this.head = null;   /* Heads of the hash chains or NIL. */\n\n  this.ins_h = 0;       /* hash index of string to be inserted */\n  this.hash_size = 0;   /* number of elements in hash table */\n  this.hash_bits = 0;   /* log2(hash_size) */\n  this.hash_mask = 0;   /* hash_size-1 */\n\n  this.hash_shift = 0;\n  /* Number of bits by which ins_h must be shifted at each input\n   * step. It must be such that after MIN_MATCH steps, the oldest\n   * byte no longer takes part in the hash key, that is:\n   *   hash_shift * MIN_MATCH >= hash_bits\n   */\n\n  this.block_start = 0;\n  /* Window position at the beginning of the current output block. Gets\n   * negative when the window is moved backwards.\n   */\n\n  this.match_length = 0;      /* length of best match */\n  this.prev_match = 0;        /* previous match */\n  this.match_available = 0;   /* set if previous match exists */\n  this.strstart = 0;          /* start of string to insert */\n  this.match_start = 0;       /* start of matching string */\n  this.lookahead = 0;         /* number of valid bytes ahead in window */\n\n  this.prev_length = 0;\n  /* Length of the best match at previous step. Matches not greater than this\n   * are discarded. This is used in the lazy match evaluation.\n   */\n\n  this.max_chain_length = 0;\n  /* To speed up deflation, hash chains are never searched beyond this\n   * length.  A higher limit improves compression ratio but degrades the\n   * speed.\n   */\n\n  this.max_lazy_match = 0;\n  /* Attempt to find a better match only when the current match is strictly\n   * smaller than this value. This mechanism is used only for compression\n   * levels >= 4.\n   */\n  // That's alias to max_lazy_match, don't use directly\n  //this.max_insert_length = 0;\n  /* Insert new strings in the hash table only if the match length is not\n   * greater than this length. This saves time but degrades compression.\n   * max_insert_length is used only for compression levels <= 3.\n   */\n\n  this.level = 0;     /* compression level (1..9) */\n  this.strategy = 0;  /* favor or force Huffman coding*/\n\n  this.good_match = 0;\n  /* Use a faster search when the previous match is longer than this */\n\n  this.nice_match = 0; /* Stop searching when current match exceeds this */\n\n              /* used by trees.c: */\n\n  /* Didn't use ct_data typedef below to suppress compiler warning */\n\n  // struct ct_data_s dyn_ltree[HEAP_SIZE];   /* literal and length tree */\n  // struct ct_data_s dyn_dtree[2*D_CODES+1]; /* distance tree */\n  // struct ct_data_s bl_tree[2*BL_CODES+1];  /* Huffman tree for bit lengths */\n\n  // Use flat array of DOUBLE size, with interleaved fata,\n  // because JS does not support effective\n  this.dyn_ltree  = new Uint16Array(HEAP_SIZE * 2);\n  this.dyn_dtree  = new Uint16Array((2 * D_CODES + 1) * 2);\n  this.bl_tree    = new Uint16Array((2 * BL_CODES + 1) * 2);\n  zero(this.dyn_ltree);\n  zero(this.dyn_dtree);\n  zero(this.bl_tree);\n\n  this.l_desc   = null;         /* desc. for literal tree */\n  this.d_desc   = null;         /* desc. for distance tree */\n  this.bl_desc  = null;         /* desc. for bit length tree */\n\n  //ush bl_count[MAX_BITS+1];\n  this.bl_count = new Uint16Array(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  //int heap[2*L_CODES+1];      /* heap used to build the Huffman trees */\n  this.heap = new Uint16Array(2 * L_CODES + 1);  /* heap used to build the Huffman trees */\n  zero(this.heap);\n\n  this.heap_len = 0;               /* number of elements in the heap */\n  this.heap_max = 0;               /* element of largest frequency */\n  /* The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.\n   * The same heap array is used to build all trees.\n   */\n\n  this.depth = new Uint16Array(2 * L_CODES + 1); //uch depth[2*L_CODES+1];\n  zero(this.depth);\n  /* Depth of each subtree used as tie breaker for trees of equal frequency\n   */\n\n  this.sym_buf = 0;        /* buffer for distances and literals/lengths */\n\n  this.lit_bufsize = 0;\n  /* Size of match buffer for literals/lengths.  There are 4 reasons for\n   * limiting lit_bufsize to 64K:\n   *   - frequencies can be kept in 16 bit counters\n   *   - if compression is not successful for the first block, all input\n   *     data is still in the window so we can still emit a stored block even\n   *     when input comes from standard input.  (This can also be done for\n   *     all blocks if lit_bufsize is not greater than 32K.)\n   *   - if compression is not successful for a file smaller than 64K, we can\n   *     even emit a stored file instead of a stored block (saving 5 bytes).\n   *     This is applicable only for zip (not gzip or zlib).\n   *   - creating new Huffman trees less frequently may not provide fast\n   *     adaptation to changes in the input data statistics. (Take for\n   *     example a binary file with poorly compressible code followed by\n   *     a highly compressible string table.) Smaller buffer sizes give\n   *     fast adaptation but have of course the overhead of transmitting\n   *     trees more frequently.\n   *   - I can't count above 4\n   */\n\n  this.sym_next = 0;      /* running index in sym_buf */\n  this.sym_end = 0;       /* symbol table full when sym_next reaches this */\n\n  this.opt_len = 0;       /* bit length of current block with optimal trees */\n  this.static_len = 0;    /* bit length of current block with static trees */\n  this.matches = 0;       /* number of string matches in current block */\n  this.insert = 0;        /* bytes at end of window left to insert */\n\n\n  this.bi_buf = 0;\n  /* Output buffer. bits are inserted starting at the bottom (least\n   * significant bits).\n   */\n  this.bi_valid = 0;\n  /* Number of valid bits in bi_buf.  All bits above the last valid bit\n   * are always zero.\n   */\n\n  // Used for window memory init. We safely ignore it for JS. That makes\n  // sense only for pointers and memory check tools.\n  //this.high_water = 0;\n  /* High water mark offset in window for initialized bytes -- bytes above\n   * this are set to zero in order to avoid memory check warnings when\n   * longest match routines access bytes past the input.  This is then\n   * updated to the new high water mark.\n   */\n}\n\n\n/* =========================================================================\n * Check for a valid deflate stream state. Return 0 if ok, 1 if not.\n */\nconst deflateStateCheck = (strm) => {\n\n  if (!strm) {\n    return 1;\n  }\n  const s = strm.state;\n  if (!s || s.strm !== strm || (s.status !== INIT_STATE &&\n//#ifdef GZIP\n                                s.status !== GZIP_STATE &&\n//#endif\n                                s.status !== EXTRA_STATE &&\n                                s.status !== NAME_STATE &&\n                                s.status !== COMMENT_STATE &&\n                                s.status !== HCRC_STATE &&\n                                s.status !== BUSY_STATE &&\n                                s.status !== FINISH_STATE)) {\n    return 1;\n  }\n  return 0;\n};\n\n\nconst deflateResetKeep = (strm) => {\n\n  if (deflateStateCheck(strm)) {\n    return err(strm, Z_STREAM_ERROR$2);\n  }\n\n  strm.total_in = strm.total_out = 0;\n  strm.data_type = Z_UNKNOWN;\n\n  const s = strm.state;\n  s.pending = 0;\n  s.pending_out = 0;\n\n  if (s.wrap < 0) {\n    s.wrap = -s.wrap;\n    /* was made negative by deflate(..., Z_FINISH); */\n  }\n  s.status =\n//#ifdef GZIP\n    s.wrap === 2 ? GZIP_STATE :\n//#endif\n    s.wrap ? INIT_STATE : BUSY_STATE;\n  strm.adler = (s.wrap === 2) ?\n    0  // crc32(0, Z_NULL, 0)\n  :\n    1; // adler32(0, Z_NULL, 0)\n  s.last_flush = -2;\n  _tr_init(s);\n  return Z_OK$3;\n};\n\n\nconst deflateReset = (strm) => {\n\n  const ret = deflateResetKeep(strm);\n  if (ret === Z_OK$3) {\n    lm_init(strm.state);\n  }\n  return ret;\n};\n\n\nconst deflateSetHeader = (strm, head) => {\n\n  if (deflateStateCheck(strm) || strm.state.wrap !== 2) {\n    return Z_STREAM_ERROR$2;\n  }\n  strm.state.gzhead = head;\n  return Z_OK$3;\n};\n\n\nconst deflateInit2 = (strm, level, method, windowBits, memLevel, strategy) => {\n\n  if (!strm) { // === Z_NULL\n    return Z_STREAM_ERROR$2;\n  }\n  let wrap = 1;\n\n  if (level === Z_DEFAULT_COMPRESSION$1) {\n    level = 6;\n  }\n\n  if (windowBits < 0) { /* suppress zlib wrapper */\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n\n  else if (windowBits > 15) {\n    wrap = 2;           /* write gzip wrapper instead */\n    windowBits -= 16;\n  }\n\n\n  if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || method !== Z_DEFLATED$2 ||\n    windowBits < 8 || windowBits > 15 || level < 0 || level > 9 ||\n    strategy < 0 || strategy > Z_FIXED || (windowBits === 8 && wrap !== 1)) {\n    return err(strm, Z_STREAM_ERROR$2);\n  }\n\n\n  if (windowBits === 8) {\n    windowBits = 9;\n  }\n  /* until 256-byte window bug fixed */\n\n  const s = new DeflateState();\n\n  strm.state = s;\n  s.strm = strm;\n  s.status = INIT_STATE;     /* to pass state test in deflateReset() */\n\n  s.wrap = wrap;\n  s.gzhead = null;\n  s.w_bits = windowBits;\n  s.w_size = 1 << s.w_bits;\n  s.w_mask = s.w_size - 1;\n\n  s.hash_bits = memLevel + 7;\n  s.hash_size = 1 << s.hash_bits;\n  s.hash_mask = s.hash_size - 1;\n  s.hash_shift = ~~((s.hash_bits + MIN_MATCH - 1) / MIN_MATCH);\n\n  s.window = new Uint8Array(s.w_size * 2);\n  s.head = new Uint16Array(s.hash_size);\n  s.prev = new Uint16Array(s.w_size);\n\n  // Don't need mem init magic for JS.\n  //s.high_water = 0;  /* nothing written to s->window yet */\n\n  s.lit_bufsize = 1 << (memLevel + 6); /* 16K elements by default */\n\n  /* We overlay pending_buf and sym_buf. This works since the average size\n   * for length/distance pairs over any compressed block is assured to be 31\n   * bits or less.\n   *\n   * Analysis: The longest fixed codes are a length code of 8 bits plus 5\n   * extra bits, for lengths 131 to 257. The longest fixed distance codes are\n   * 5 bits plus 13 extra bits, for distances 16385 to 32768. The longest\n   * possible fixed-codes length/distance pair is then 31 bits total.\n   *\n   * sym_buf starts one-fourth of the way into pending_buf. So there are\n   * three bytes in sym_buf for every four bytes in pending_buf. Each symbol\n   * in sym_buf is three bytes -- two for the distance and one for the\n   * literal/length. As each symbol is consumed, the pointer to the next\n   * sym_buf value to read moves forward three bytes. From that symbol, up to\n   * 31 bits are written to pending_buf. The closest the written pending_buf\n   * bits gets to the next sym_buf symbol to read is just before the last\n   * code is written. At that time, 31*(n-2) bits have been written, just\n   * after 24*(n-2) bits have been consumed from sym_buf. sym_buf starts at\n   * 8*n bits into pending_buf. (Note that the symbol buffer fills when n-1\n   * symbols are written.) The closest the writing gets to what is unread is\n   * then n+14 bits. Here n is lit_bufsize, which is 16384 by default, and\n   * can range from 128 to 32768.\n   *\n   * Therefore, at a minimum, there are 142 bits of space between what is\n   * written and what is read in the overlain buffers, so the symbols cannot\n   * be overwritten by the compressed data. That space is actually 139 bits,\n   * due to the three-bit fixed-code block header.\n   *\n   * That covers the case where either Z_FIXED is specified, forcing fixed\n   * codes, or when the use of fixed codes is chosen, because that choice\n   * results in a smaller compressed block than dynamic codes. That latter\n   * condition then assures that the above analysis also covers all dynamic\n   * blocks. A dynamic-code block will only be chosen to be emitted if it has\n   * fewer bits than a fixed-code block would for the same set of symbols.\n   * Therefore its average symbol length is assured to be less than 31. So\n   * the compressed data for a dynamic block also cannot overwrite the\n   * symbols from which it is being constructed.\n   */\n\n  s.pending_buf_size = s.lit_bufsize * 4;\n  s.pending_buf = new Uint8Array(s.pending_buf_size);\n\n  // It is offset from `s.pending_buf` (size is `s.lit_bufsize * 2`)\n  //s->sym_buf = s->pending_buf + s->lit_bufsize;\n  s.sym_buf = s.lit_bufsize;\n\n  //s->sym_end = (s->lit_bufsize - 1) * 3;\n  s.sym_end = (s.lit_bufsize - 1) * 3;\n  /* We avoid equality with lit_bufsize*3 because of wraparound at 64K\n   * on 16 bit machines and because stored blocks are restricted to\n   * 64K-1 bytes.\n   */\n\n  s.level = level;\n  s.strategy = strategy;\n  s.method = method;\n\n  return deflateReset(strm);\n};\n\nconst deflateInit = (strm, level) => {\n\n  return deflateInit2(strm, level, Z_DEFLATED$2, MAX_WBITS$1, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY$1);\n};\n\n\n/* ========================================================================= */\nconst deflate$2 = (strm, flush) => {\n\n  if (deflateStateCheck(strm) || flush > Z_BLOCK$1 || flush < 0) {\n    return strm ? err(strm, Z_STREAM_ERROR$2) : Z_STREAM_ERROR$2;\n  }\n\n  const s = strm.state;\n\n  if (!strm.output ||\n      (strm.avail_in !== 0 && !strm.input) ||\n      (s.status === FINISH_STATE && flush !== Z_FINISH$3)) {\n    return err(strm, (strm.avail_out === 0) ? Z_BUF_ERROR$1 : Z_STREAM_ERROR$2);\n  }\n\n  const old_flush = s.last_flush;\n  s.last_flush = flush;\n\n  /* Flush as much pending output as possible */\n  if (s.pending !== 0) {\n    flush_pending(strm);\n    if (strm.avail_out === 0) {\n      /* Since avail_out is 0, deflate will be called again with\n       * more output space, but possibly with both pending and\n       * avail_in equal to zero. There won't be anything to do,\n       * but this is not an error situation so make sure we\n       * return OK instead of BUF_ERROR at next call of deflate:\n       */\n      s.last_flush = -1;\n      return Z_OK$3;\n    }\n\n    /* Make sure there is something to do and avoid duplicate consecutive\n     * flushes. For repeated and useless calls with Z_FINISH, we keep\n     * returning Z_STREAM_END instead of Z_BUF_ERROR.\n     */\n  } else if (strm.avail_in === 0 && rank(flush) <= rank(old_flush) &&\n    flush !== Z_FINISH$3) {\n    return err(strm, Z_BUF_ERROR$1);\n  }\n\n  /* User must not provide more input after the first FINISH: */\n  if (s.status === FINISH_STATE && strm.avail_in !== 0) {\n    return err(strm, Z_BUF_ERROR$1);\n  }\n\n  /* Write the header */\n  if (s.status === INIT_STATE && s.wrap === 0) {\n    s.status = BUSY_STATE;\n  }\n  if (s.status === INIT_STATE) {\n    /* zlib header */\n    let header = (Z_DEFLATED$2 + ((s.w_bits - 8) << 4)) << 8;\n    let level_flags = -1;\n\n    if (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2) {\n      level_flags = 0;\n    } else if (s.level < 6) {\n      level_flags = 1;\n    } else if (s.level === 6) {\n      level_flags = 2;\n    } else {\n      level_flags = 3;\n    }\n    header |= (level_flags << 6);\n    if (s.strstart !== 0) { header |= PRESET_DICT; }\n    header += 31 - (header % 31);\n\n    putShortMSB(s, header);\n\n    /* Save the adler32 of the preset dictionary: */\n    if (s.strstart !== 0) {\n      putShortMSB(s, strm.adler >>> 16);\n      putShortMSB(s, strm.adler & 0xffff);\n    }\n    strm.adler = 1; // adler32(0L, Z_NULL, 0);\n    s.status = BUSY_STATE;\n\n    /* Compression must start with an empty pending buffer */\n    flush_pending(strm);\n    if (s.pending !== 0) {\n      s.last_flush = -1;\n      return Z_OK$3;\n    }\n  }\n//#ifdef GZIP\n  if (s.status === GZIP_STATE) {\n    /* gzip header */\n    strm.adler = 0;  //crc32(0L, Z_NULL, 0);\n    put_byte(s, 31);\n    put_byte(s, 139);\n    put_byte(s, 8);\n    if (!s.gzhead) { // s->gzhead == Z_NULL\n      put_byte(s, 0);\n      put_byte(s, 0);\n      put_byte(s, 0);\n      put_byte(s, 0);\n      put_byte(s, 0);\n      put_byte(s, s.level === 9 ? 2 :\n                  (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                   4 : 0));\n      put_byte(s, OS_CODE);\n      s.status = BUSY_STATE;\n\n      /* Compression must start with an empty pending buffer */\n      flush_pending(strm);\n      if (s.pending !== 0) {\n        s.last_flush = -1;\n        return Z_OK$3;\n      }\n    }\n    else {\n      put_byte(s, (s.gzhead.text ? 1 : 0) +\n                  (s.gzhead.hcrc ? 2 : 0) +\n                  (!s.gzhead.extra ? 0 : 4) +\n                  (!s.gzhead.name ? 0 : 8) +\n                  (!s.gzhead.comment ? 0 : 16)\n      );\n      put_byte(s, s.gzhead.time & 0xff);\n      put_byte(s, (s.gzhead.time >> 8) & 0xff);\n      put_byte(s, (s.gzhead.time >> 16) & 0xff);\n      put_byte(s, (s.gzhead.time >> 24) & 0xff);\n      put_byte(s, s.level === 9 ? 2 :\n                  (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                   4 : 0));\n      put_byte(s, s.gzhead.os & 0xff);\n      if (s.gzhead.extra && s.gzhead.extra.length) {\n        put_byte(s, s.gzhead.extra.length & 0xff);\n        put_byte(s, (s.gzhead.extra.length >> 8) & 0xff);\n      }\n      if (s.gzhead.hcrc) {\n        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending, 0);\n      }\n      s.gzindex = 0;\n      s.status = EXTRA_STATE;\n    }\n  }\n  if (s.status === EXTRA_STATE) {\n    if (s.gzhead.extra/* != Z_NULL*/) {\n      let beg = s.pending;   /* start of bytes to update crc */\n      let left = (s.gzhead.extra.length & 0xffff) - s.gzindex;\n      while (s.pending + left > s.pending_buf_size) {\n        let copy = s.pending_buf_size - s.pending;\n        // zmemcpy(s.pending_buf + s.pending,\n        //    s.gzhead.extra + s.gzindex, copy);\n        s.pending_buf.set(s.gzhead.extra.subarray(s.gzindex, s.gzindex + copy), s.pending);\n        s.pending = s.pending_buf_size;\n        //--- HCRC_UPDATE(beg) ---//\n        if (s.gzhead.hcrc && s.pending > beg) {\n          strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n        }\n        //---//\n        s.gzindex += copy;\n        flush_pending(strm);\n        if (s.pending !== 0) {\n          s.last_flush = -1;\n          return Z_OK$3;\n        }\n        beg = 0;\n        left -= copy;\n      }\n      // JS specific: s.gzhead.extra may be TypedArray or Array for backward compatibility\n      //              TypedArray.slice and TypedArray.from don't exist in IE10-IE11\n      let gzhead_extra = new Uint8Array(s.gzhead.extra);\n      // zmemcpy(s->pending_buf + s->pending,\n      //     s->gzhead->extra + s->gzindex, left);\n      s.pending_buf.set(gzhead_extra.subarray(s.gzindex, s.gzindex + left), s.pending);\n      s.pending += left;\n      //--- HCRC_UPDATE(beg) ---//\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      //---//\n      s.gzindex = 0;\n    }\n    s.status = NAME_STATE;\n  }\n  if (s.status === NAME_STATE) {\n    if (s.gzhead.name/* != Z_NULL*/) {\n      let beg = s.pending;   /* start of bytes to update crc */\n      let val;\n      do {\n        if (s.pending === s.pending_buf_size) {\n          //--- HCRC_UPDATE(beg) ---//\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          //---//\n          flush_pending(strm);\n          if (s.pending !== 0) {\n            s.last_flush = -1;\n            return Z_OK$3;\n          }\n          beg = 0;\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.name.length) {\n          val = s.gzhead.name.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n      //--- HCRC_UPDATE(beg) ---//\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      //---//\n      s.gzindex = 0;\n    }\n    s.status = COMMENT_STATE;\n  }\n  if (s.status === COMMENT_STATE) {\n    if (s.gzhead.comment/* != Z_NULL*/) {\n      let beg = s.pending;   /* start of bytes to update crc */\n      let val;\n      do {\n        if (s.pending === s.pending_buf_size) {\n          //--- HCRC_UPDATE(beg) ---//\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          //---//\n          flush_pending(strm);\n          if (s.pending !== 0) {\n            s.last_flush = -1;\n            return Z_OK$3;\n          }\n          beg = 0;\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.comment.length) {\n          val = s.gzhead.comment.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n      //--- HCRC_UPDATE(beg) ---//\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      //---//\n    }\n    s.status = HCRC_STATE;\n  }\n  if (s.status === HCRC_STATE) {\n    if (s.gzhead.hcrc) {\n      if (s.pending + 2 > s.pending_buf_size) {\n        flush_pending(strm);\n        if (s.pending !== 0) {\n          s.last_flush = -1;\n          return Z_OK$3;\n        }\n      }\n      put_byte(s, strm.adler & 0xff);\n      put_byte(s, (strm.adler >> 8) & 0xff);\n      strm.adler = 0; //crc32(0L, Z_NULL, 0);\n    }\n    s.status = BUSY_STATE;\n\n    /* Compression must start with an empty pending buffer */\n    flush_pending(strm);\n    if (s.pending !== 0) {\n      s.last_flush = -1;\n      return Z_OK$3;\n    }\n  }\n//#endif\n\n  /* Start a new block or continue the current one.\n   */\n  if (strm.avail_in !== 0 || s.lookahead !== 0 ||\n    (flush !== Z_NO_FLUSH$2 && s.status !== FINISH_STATE)) {\n    let bstate = s.level === 0 ? deflate_stored(s, flush) :\n                 s.strategy === Z_HUFFMAN_ONLY ? deflate_huff(s, flush) :\n                 s.strategy === Z_RLE ? deflate_rle(s, flush) :\n                 configuration_table[s.level].func(s, flush);\n\n    if (bstate === BS_FINISH_STARTED || bstate === BS_FINISH_DONE) {\n      s.status = FINISH_STATE;\n    }\n    if (bstate === BS_NEED_MORE || bstate === BS_FINISH_STARTED) {\n      if (strm.avail_out === 0) {\n        s.last_flush = -1;\n        /* avoid BUF_ERROR next call, see above */\n      }\n      return Z_OK$3;\n      /* If flush != Z_NO_FLUSH && avail_out == 0, the next call\n       * of deflate should use the same flush parameter to make sure\n       * that the flush is complete. So we don't have to output an\n       * empty block here, this will be done at next call. This also\n       * ensures that for a very small output buffer, we emit at most\n       * one empty block.\n       */\n    }\n    if (bstate === BS_BLOCK_DONE) {\n      if (flush === Z_PARTIAL_FLUSH) {\n        _tr_align(s);\n      }\n      else if (flush !== Z_BLOCK$1) { /* FULL_FLUSH or SYNC_FLUSH */\n\n        _tr_stored_block(s, 0, 0, false);\n        /* For a full flush, this empty block will be recognized\n         * as a special marker by inflate_sync().\n         */\n        if (flush === Z_FULL_FLUSH$1) {\n          /*** CLEAR_HASH(s); ***/             /* forget history */\n          zero(s.head); // Fill with NIL (= 0);\n\n          if (s.lookahead === 0) {\n            s.strstart = 0;\n            s.block_start = 0;\n            s.insert = 0;\n          }\n        }\n      }\n      flush_pending(strm);\n      if (strm.avail_out === 0) {\n        s.last_flush = -1; /* avoid BUF_ERROR at next call, see above */\n        return Z_OK$3;\n      }\n    }\n  }\n\n  if (flush !== Z_FINISH$3) { return Z_OK$3; }\n  if (s.wrap <= 0) { return Z_STREAM_END$3; }\n\n  /* Write the trailer */\n  if (s.wrap === 2) {\n    put_byte(s, strm.adler & 0xff);\n    put_byte(s, (strm.adler >> 8) & 0xff);\n    put_byte(s, (strm.adler >> 16) & 0xff);\n    put_byte(s, (strm.adler >> 24) & 0xff);\n    put_byte(s, strm.total_in & 0xff);\n    put_byte(s, (strm.total_in >> 8) & 0xff);\n    put_byte(s, (strm.total_in >> 16) & 0xff);\n    put_byte(s, (strm.total_in >> 24) & 0xff);\n  }\n  else\n  {\n    putShortMSB(s, strm.adler >>> 16);\n    putShortMSB(s, strm.adler & 0xffff);\n  }\n\n  flush_pending(strm);\n  /* If avail_out is zero, the application will call deflate again\n   * to flush the rest.\n   */\n  if (s.wrap > 0) { s.wrap = -s.wrap; }\n  /* write the trailer only once! */\n  return s.pending !== 0 ? Z_OK$3 : Z_STREAM_END$3;\n};\n\n\nconst deflateEnd = (strm) => {\n\n  if (deflateStateCheck(strm)) {\n    return Z_STREAM_ERROR$2;\n  }\n\n  const status = strm.state.status;\n\n  strm.state = null;\n\n  return status === BUSY_STATE ? err(strm, Z_DATA_ERROR$2) : Z_OK$3;\n};\n\n\n/* =========================================================================\n * Initializes the compression dictionary from the given byte\n * sequence without producing any compressed output.\n */\nconst deflateSetDictionary = (strm, dictionary) => {\n\n  let dictLength = dictionary.length;\n\n  if (deflateStateCheck(strm)) {\n    return Z_STREAM_ERROR$2;\n  }\n\n  const s = strm.state;\n  const wrap = s.wrap;\n\n  if (wrap === 2 || (wrap === 1 && s.status !== INIT_STATE) || s.lookahead) {\n    return Z_STREAM_ERROR$2;\n  }\n\n  /* when using zlib wrappers, compute Adler-32 for provided dictionary */\n  if (wrap === 1) {\n    /* adler32(strm->adler, dictionary, dictLength); */\n    strm.adler = adler32_1(strm.adler, dictionary, dictLength, 0);\n  }\n\n  s.wrap = 0;   /* avoid computing Adler-32 in read_buf */\n\n  /* if dictionary would fill window, just replace the history */\n  if (dictLength >= s.w_size) {\n    if (wrap === 0) {            /* already empty otherwise */\n      /*** CLEAR_HASH(s); ***/\n      zero(s.head); // Fill with NIL (= 0);\n      s.strstart = 0;\n      s.block_start = 0;\n      s.insert = 0;\n    }\n    /* use the tail */\n    // dictionary = dictionary.slice(dictLength - s.w_size);\n    let tmpDict = new Uint8Array(s.w_size);\n    tmpDict.set(dictionary.subarray(dictLength - s.w_size, dictLength), 0);\n    dictionary = tmpDict;\n    dictLength = s.w_size;\n  }\n  /* insert dictionary into window and hash */\n  const avail = strm.avail_in;\n  const next = strm.next_in;\n  const input = strm.input;\n  strm.avail_in = dictLength;\n  strm.next_in = 0;\n  strm.input = dictionary;\n  fill_window(s);\n  while (s.lookahead >= MIN_MATCH) {\n    let str = s.strstart;\n    let n = s.lookahead - (MIN_MATCH - 1);\n    do {\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n      s.ins_h = HASH(s, s.ins_h, s.window[str + MIN_MATCH - 1]);\n\n      s.prev[str & s.w_mask] = s.head[s.ins_h];\n\n      s.head[s.ins_h] = str;\n      str++;\n    } while (--n);\n    s.strstart = str;\n    s.lookahead = MIN_MATCH - 1;\n    fill_window(s);\n  }\n  s.strstart += s.lookahead;\n  s.block_start = s.strstart;\n  s.insert = s.lookahead;\n  s.lookahead = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  strm.next_in = next;\n  strm.input = input;\n  strm.avail_in = avail;\n  s.wrap = wrap;\n  return Z_OK$3;\n};\n\n\nvar deflateInit_1 = deflateInit;\nvar deflateInit2_1 = deflateInit2;\nvar deflateReset_1 = deflateReset;\nvar deflateResetKeep_1 = deflateResetKeep;\nvar deflateSetHeader_1 = deflateSetHeader;\nvar deflate_2$1 = deflate$2;\nvar deflateEnd_1 = deflateEnd;\nvar deflateSetDictionary_1 = deflateSetDictionary;\nvar deflateInfo = 'pako deflate (from Nodeca project)';\n\n/* Not implemented\nmodule.exports.deflateBound = deflateBound;\nmodule.exports.deflateCopy = deflateCopy;\nmodule.exports.deflateGetDictionary = deflateGetDictionary;\nmodule.exports.deflateParams = deflateParams;\nmodule.exports.deflatePending = deflatePending;\nmodule.exports.deflatePrime = deflatePrime;\nmodule.exports.deflateTune = deflateTune;\n*/\n\nvar deflate_1$2 = {\n\tdeflateInit: deflateInit_1,\n\tdeflateInit2: deflateInit2_1,\n\tdeflateReset: deflateReset_1,\n\tdeflateResetKeep: deflateResetKeep_1,\n\tdeflateSetHeader: deflateSetHeader_1,\n\tdeflate: deflate_2$1,\n\tdeflateEnd: deflateEnd_1,\n\tdeflateSetDictionary: deflateSetDictionary_1,\n\tdeflateInfo: deflateInfo\n};\n\nconst _has = (obj, key) => {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n};\n\nvar assign = function (obj /*from1, from2, from3, ...*/) {\n  const sources = Array.prototype.slice.call(arguments, 1);\n  while (sources.length) {\n    const source = sources.shift();\n    if (!source) { continue; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be non-object');\n    }\n\n    for (const p in source) {\n      if (_has(source, p)) {\n        obj[p] = source[p];\n      }\n    }\n  }\n\n  return obj;\n};\n\n\n// Join array of chunks to single array.\nvar flattenChunks = (chunks) => {\n  // calculate data length\n  let len = 0;\n\n  for (let i = 0, l = chunks.length; i < l; i++) {\n    len += chunks[i].length;\n  }\n\n  // join chunks\n  const result = new Uint8Array(len);\n\n  for (let i = 0, pos = 0, l = chunks.length; i < l; i++) {\n    let chunk = chunks[i];\n    result.set(chunk, pos);\n    pos += chunk.length;\n  }\n\n  return result;\n};\n\nvar common = {\n\tassign: assign,\n\tflattenChunks: flattenChunks\n};\n\n// String encode/decode helpers\n\n\n// Quick check if we can use fast array to bin string conversion\n//\n// - apply(Array) can fail on Android 2.2\n// - apply(Uint8Array) can fail on iOS 5.1 Safari\n//\nlet STR_APPLY_UIA_OK = true;\n\ntry { String.fromCharCode.apply(null, new Uint8Array(1)); } catch (__) { STR_APPLY_UIA_OK = false; }\n\n\n// Table with utf8 lengths (calculated by first byte of sequence)\n// Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,\n// because max possible codepoint is 0x10ffff\nconst _utf8len = new Uint8Array(256);\nfor (let q = 0; q < 256; q++) {\n  _utf8len[q] = (q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1);\n}\n_utf8len[254] = _utf8len[254] = 1; // Invalid sequence start\n\n\n// convert string to array (typed, when possible)\nvar string2buf = (str) => {\n  if (typeof TextEncoder === 'function' && TextEncoder.prototype.encode) {\n    return new TextEncoder().encode(str);\n  }\n\n  let buf, c, c2, m_pos, i, str_len = str.length, buf_len = 0;\n\n  // count binary size\n  for (m_pos = 0; m_pos < str_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;\n  }\n\n  // allocate buffer\n  buf = new Uint8Array(buf_len);\n\n  // convert\n  for (i = 0, m_pos = 0; i < buf_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    if (c < 0x80) {\n      /* one byte */\n      buf[i++] = c;\n    } else if (c < 0x800) {\n      /* two bytes */\n      buf[i++] = 0xC0 | (c >>> 6);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else if (c < 0x10000) {\n      /* three bytes */\n      buf[i++] = 0xE0 | (c >>> 12);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else {\n      /* four bytes */\n      buf[i++] = 0xf0 | (c >>> 18);\n      buf[i++] = 0x80 | (c >>> 12 & 0x3f);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    }\n  }\n\n  return buf;\n};\n\n// Helper\nconst buf2binstring = (buf, len) => {\n  // On Chrome, the arguments in a function call that are allowed is `65534`.\n  // If the length of the buffer is smaller than that, we can use this optimization,\n  // otherwise we will take a slower path.\n  if (len < 65534) {\n    if (buf.subarray && STR_APPLY_UIA_OK) {\n      return String.fromCharCode.apply(null, buf.length === len ? buf : buf.subarray(0, len));\n    }\n  }\n\n  let result = '';\n  for (let i = 0; i < len; i++) {\n    result += String.fromCharCode(buf[i]);\n  }\n  return result;\n};\n\n\n// convert array to string\nvar buf2string = (buf, max) => {\n  const len = max || buf.length;\n\n  if (typeof TextDecoder === 'function' && TextDecoder.prototype.decode) {\n    return new TextDecoder().decode(buf.subarray(0, max));\n  }\n\n  let i, out;\n\n  // Reserve max possible length (2 words per char)\n  // NB: by unknown reasons, Array is significantly faster for\n  //     String.fromCharCode.apply than Uint16Array.\n  const utf16buf = new Array(len * 2);\n\n  for (out = 0, i = 0; i < len;) {\n    let c = buf[i++];\n    // quick process ascii\n    if (c < 0x80) { utf16buf[out++] = c; continue; }\n\n    let c_len = _utf8len[c];\n    // skip 5 & 6 byte codes\n    if (c_len > 4) { utf16buf[out++] = 0xfffd; i += c_len - 1; continue; }\n\n    // apply mask on first byte\n    c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;\n    // join the rest\n    while (c_len > 1 && i < len) {\n      c = (c << 6) | (buf[i++] & 0x3f);\n      c_len--;\n    }\n\n    // terminated by end of string?\n    if (c_len > 1) { utf16buf[out++] = 0xfffd; continue; }\n\n    if (c < 0x10000) {\n      utf16buf[out++] = c;\n    } else {\n      c -= 0x10000;\n      utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);\n      utf16buf[out++] = 0xdc00 | (c & 0x3ff);\n    }\n  }\n\n  return buf2binstring(utf16buf, out);\n};\n\n\n// Calculate max possible position in utf8 buffer,\n// that will not break sequence. If that's not possible\n// - (very small limits) return max size as is.\n//\n// buf[] - utf8 bytes array\n// max   - length limit (mandatory);\nvar utf8border = (buf, max) => {\n\n  max = max || buf.length;\n  if (max > buf.length) { max = buf.length; }\n\n  // go back from last position, until start of sequence found\n  let pos = max - 1;\n  while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) { pos--; }\n\n  // Very small and broken sequence,\n  // return max, because we should return something anyway.\n  if (pos < 0) { return max; }\n\n  // If we came to start of buffer - that means buffer is too small,\n  // return max too.\n  if (pos === 0) { return max; }\n\n  return (pos + _utf8len[buf[pos]] > max) ? pos : max;\n};\n\nvar strings = {\n\tstring2buf: string2buf,\n\tbuf2string: buf2string,\n\tutf8border: utf8border\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction ZStream() {\n  /* next input byte */\n  this.input = null; // JS specific, because we have no pointers\n  this.next_in = 0;\n  /* number of bytes available at input */\n  this.avail_in = 0;\n  /* total number of input bytes read so far */\n  this.total_in = 0;\n  /* next output byte should be put there */\n  this.output = null; // JS specific, because we have no pointers\n  this.next_out = 0;\n  /* remaining free space at output */\n  this.avail_out = 0;\n  /* total number of bytes output so far */\n  this.total_out = 0;\n  /* last error message, NULL if no error */\n  this.msg = ''/*Z_NULL*/;\n  /* not visible by applications */\n  this.state = null;\n  /* best guess about the data type: binary or text */\n  this.data_type = 2/*Z_UNKNOWN*/;\n  /* adler32 value of the uncompressed data */\n  this.adler = 0;\n}\n\nvar zstream = ZStream;\n\nconst toString$1 = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_NO_FLUSH: Z_NO_FLUSH$1, Z_SYNC_FLUSH, Z_FULL_FLUSH, Z_FINISH: Z_FINISH$2,\n  Z_OK: Z_OK$2, Z_STREAM_END: Z_STREAM_END$2,\n  Z_DEFAULT_COMPRESSION,\n  Z_DEFAULT_STRATEGY,\n  Z_DEFLATED: Z_DEFLATED$1\n} = constants$2;\n\n/* ===========================================================================*/\n\n\n/**\n * class Deflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[deflate]],\n * [[deflateRaw]] and [[gzip]].\n **/\n\n/* internal\n * Deflate.chunks -> Array\n *\n * Chunks of output data, if [[Deflate#onData]] not overridden.\n **/\n\n/**\n * Deflate.result -> Uint8Array\n *\n * Compressed result, generated by default [[Deflate#onData]]\n * and [[Deflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Deflate#push]] with `Z_FINISH` / `true` param).\n **/\n\n/**\n * Deflate.err -> Number\n *\n * Error code after deflate finished. 0 (Z_OK) on success.\n * You will not need it in real life, because deflate errors\n * are possible only on wrong options or bad `onData` / `onEnd`\n * custom handlers.\n **/\n\n/**\n * Deflate.msg -> String\n *\n * Error message, if [[Deflate.err]] != 0\n **/\n\n\n/**\n * new Deflate(options)\n * - options (Object): zlib deflate options.\n *\n * Creates new deflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `level`\n * - `windowBits`\n * - `memLevel`\n * - `strategy`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw deflate\n * - `gzip` (Boolean) - create gzip wrapper\n * - `header` (Object) - custom header for gzip\n *   - `text` (Boolean) - true if compressed data believed to be text\n *   - `time` (Number) - modification time, unix timestamp\n *   - `os` (Number) - operation system code\n *   - `extra` (Array) - array of bytes with extra data (max 65536)\n *   - `name` (String) - file name (binary string)\n *   - `comment` (String) - comment (binary string)\n *   - `hcrc` (Boolean) - true if header crc should be added\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako')\n *   , chunk1 = new Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = new Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * const deflate = new pako.Deflate({ level: 3});\n *\n * deflate.push(chunk1, false);\n * deflate.push(chunk2, true);  // true -> last chunk\n *\n * if (deflate.err) { throw new Error(deflate.err); }\n *\n * console.log(deflate.result);\n * ```\n **/\nfunction Deflate$1(options) {\n  this.options = common.assign({\n    level: Z_DEFAULT_COMPRESSION,\n    method: Z_DEFLATED$1,\n    chunkSize: 16384,\n    windowBits: 15,\n    memLevel: 8,\n    strategy: Z_DEFAULT_STRATEGY\n  }, options || {});\n\n  let opt = this.options;\n\n  if (opt.raw && (opt.windowBits > 0)) {\n    opt.windowBits = -opt.windowBits;\n  }\n\n  else if (opt.gzip && (opt.windowBits > 0) && (opt.windowBits < 16)) {\n    opt.windowBits += 16;\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm = new zstream();\n  this.strm.avail_out = 0;\n\n  let status = deflate_1$2.deflateInit2(\n    this.strm,\n    opt.level,\n    opt.method,\n    opt.windowBits,\n    opt.memLevel,\n    opt.strategy\n  );\n\n  if (status !== Z_OK$2) {\n    throw new Error(messages[status]);\n  }\n\n  if (opt.header) {\n    deflate_1$2.deflateSetHeader(this.strm, opt.header);\n  }\n\n  if (opt.dictionary) {\n    let dict;\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      // If we need to compress text, change encoding to utf8.\n      dict = strings.string2buf(opt.dictionary);\n    } else if (toString$1.call(opt.dictionary) === '[object ArrayBuffer]') {\n      dict = new Uint8Array(opt.dictionary);\n    } else {\n      dict = opt.dictionary;\n    }\n\n    status = deflate_1$2.deflateSetDictionary(this.strm, dict);\n\n    if (status !== Z_OK$2) {\n      throw new Error(messages[status]);\n    }\n\n    this._dict_set = true;\n  }\n}\n\n/**\n * Deflate#push(data[, flush_mode]) -> Boolean\n * - data (Uint8Array|ArrayBuffer|String): input data. Strings will be\n *   converted to utf8 byte sequence.\n * - flush_mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to deflate pipe, generating [[Deflate#onData]] calls with\n * new compressed chunks. Returns `true` on success. The last data block must\n * have `flush_mode` Z_FINISH (or `true`). That will flush internal pending\n * buffers and call [[Deflate#onEnd]].\n *\n * On fail call [[Deflate#onEnd]] with error code and return false.\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nDeflate$1.prototype.push = function (data, flush_mode) {\n  const strm = this.strm;\n  const chunkSize = this.options.chunkSize;\n  let status, _flush_mode;\n\n  if (this.ended) { return false; }\n\n  if (flush_mode === ~~flush_mode) _flush_mode = flush_mode;\n  else _flush_mode = flush_mode === true ? Z_FINISH$2 : Z_NO_FLUSH$1;\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // If we need to compress text, change encoding to utf8.\n    strm.input = strings.string2buf(data);\n  } else if (toString$1.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  for (;;) {\n    if (strm.avail_out === 0) {\n      strm.output = new Uint8Array(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    // Make sure avail_out > 6 to avoid repeating markers\n    if ((_flush_mode === Z_SYNC_FLUSH || _flush_mode === Z_FULL_FLUSH) && strm.avail_out <= 6) {\n      this.onData(strm.output.subarray(0, strm.next_out));\n      strm.avail_out = 0;\n      continue;\n    }\n\n    status = deflate_1$2.deflate(strm, _flush_mode);\n\n    // Ended => flush and finish\n    if (status === Z_STREAM_END$2) {\n      if (strm.next_out > 0) {\n        this.onData(strm.output.subarray(0, strm.next_out));\n      }\n      status = deflate_1$2.deflateEnd(this.strm);\n      this.onEnd(status);\n      this.ended = true;\n      return status === Z_OK$2;\n    }\n\n    // Flush if out buffer full\n    if (strm.avail_out === 0) {\n      this.onData(strm.output);\n      continue;\n    }\n\n    // Flush if requested and has data\n    if (_flush_mode > 0 && strm.next_out > 0) {\n      this.onData(strm.output.subarray(0, strm.next_out));\n      strm.avail_out = 0;\n      continue;\n    }\n\n    if (strm.avail_in === 0) break;\n  }\n\n  return true;\n};\n\n\n/**\n * Deflate#onData(chunk) -> Void\n * - chunk (Uint8Array): output data.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nDeflate$1.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Deflate#onEnd(status) -> Void\n * - status (Number): deflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called once after you tell deflate that the input stream is\n * complete (Z_FINISH). By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nDeflate$1.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK$2) {\n    this.result = common.flattenChunks(this.chunks);\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * deflate(data[, options]) -> Uint8Array\n * - data (Uint8Array|ArrayBuffer|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * Compress `data` with deflate algorithm and `options`.\n *\n * Supported options are:\n *\n * - level\n * - windowBits\n * - memLevel\n * - strategy\n * - dictionary\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako')\n * const data = new Uint8Array([1,2,3,4,5,6,7,8,9]);\n *\n * console.log(pako.deflate(data));\n * ```\n **/\nfunction deflate$1(input, options) {\n  const deflator = new Deflate$1(options);\n\n  deflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (deflator.err) { throw deflator.msg || messages[deflator.err]; }\n\n  return deflator.result;\n}\n\n\n/**\n * deflateRaw(data[, options]) -> Uint8Array\n * - data (Uint8Array|ArrayBuffer|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction deflateRaw$1(input, options) {\n  options = options || {};\n  options.raw = true;\n  return deflate$1(input, options);\n}\n\n\n/**\n * gzip(data[, options]) -> Uint8Array\n * - data (Uint8Array|ArrayBuffer|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but create gzip wrapper instead of\n * deflate one.\n **/\nfunction gzip$1(input, options) {\n  options = options || {};\n  options.gzip = true;\n  return deflate$1(input, options);\n}\n\n\nvar Deflate_1$1 = Deflate$1;\nvar deflate_2 = deflate$1;\nvar deflateRaw_1$1 = deflateRaw$1;\nvar gzip_1$1 = gzip$1;\nvar constants$1 = constants$2;\n\nvar deflate_1$1 = {\n\tDeflate: Deflate_1$1,\n\tdeflate: deflate_2,\n\tdeflateRaw: deflateRaw_1$1,\n\tgzip: gzip_1$1,\n\tconstants: constants$1\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// See state defs from inflate.js\nconst BAD$1 = 16209;       /* got a data error -- remain here until reset */\nconst TYPE$1 = 16191;      /* i: waiting for type bits, including last-flag bit */\n\n/*\n   Decode literal, length, and distance codes and write out the resulting\n   literal and match bytes until either not enough input or output is\n   available, an end-of-block is encountered, or a data error is encountered.\n   When large enough input and output buffers are supplied to inflate(), for\n   example, a 16K input buffer and a 64K output buffer, more than 95% of the\n   inflate execution time is spent in this routine.\n\n   Entry assumptions:\n\n        state.mode === LEN\n        strm.avail_in >= 6\n        strm.avail_out >= 258\n        start >= strm.avail_out\n        state.bits < 8\n\n   On return, state.mode is one of:\n\n        LEN -- ran out of enough output space or enough available input\n        TYPE -- reached end of block code, inflate() to interpret next block\n        BAD -- error in block data\n\n   Notes:\n\n    - The maximum input bits used by a length/distance pair is 15 bits for the\n      length code, 5 bits for the length extra, 15 bits for the distance code,\n      and 13 bits for the distance extra.  This totals 48 bits, or six bytes.\n      Therefore if strm.avail_in >= 6, then there is enough input to avoid\n      checking for available input while decoding.\n\n    - The maximum bytes that a single length/distance pair can output is 258\n      bytes, which is the maximum length that can be coded.  inflate_fast()\n      requires strm.avail_out >= 258 for each loop to avoid checking for\n      output space.\n */\nvar inffast = function inflate_fast(strm, start) {\n  let _in;                    /* local strm.input */\n  let last;                   /* have enough input while in < last */\n  let _out;                   /* local strm.output */\n  let beg;                    /* inflate()'s initial strm.output */\n  let end;                    /* while out < end, enough space available */\n//#ifdef INFLATE_STRICT\n  let dmax;                   /* maximum distance from zlib header */\n//#endif\n  let wsize;                  /* window size or zero if not using window */\n  let whave;                  /* valid bytes in the window */\n  let wnext;                  /* window write index */\n  // Use `s_window` instead `window`, avoid conflict with instrumentation tools\n  let s_window;               /* allocated sliding window, if wsize != 0 */\n  let hold;                   /* local strm.hold */\n  let bits;                   /* local strm.bits */\n  let lcode;                  /* local strm.lencode */\n  let dcode;                  /* local strm.distcode */\n  let lmask;                  /* mask for first level of length codes */\n  let dmask;                  /* mask for first level of distance codes */\n  let here;                   /* retrieved table entry */\n  let op;                     /* code bits, operation, extra bits, or */\n                              /*  window position, window bytes to copy */\n  let len;                    /* match length, unused bytes */\n  let dist;                   /* match distance */\n  let from;                   /* where to copy match from */\n  let from_source;\n\n\n  let input, output; // JS specific, because we have no pointers\n\n  /* copy state to local variables */\n  const state = strm.state;\n  //here = state.here;\n  _in = strm.next_in;\n  input = strm.input;\n  last = _in + (strm.avail_in - 5);\n  _out = strm.next_out;\n  output = strm.output;\n  beg = _out - (start - strm.avail_out);\n  end = _out + (strm.avail_out - 257);\n//#ifdef INFLATE_STRICT\n  dmax = state.dmax;\n//#endif\n  wsize = state.wsize;\n  whave = state.whave;\n  wnext = state.wnext;\n  s_window = state.window;\n  hold = state.hold;\n  bits = state.bits;\n  lcode = state.lencode;\n  dcode = state.distcode;\n  lmask = (1 << state.lenbits) - 1;\n  dmask = (1 << state.distbits) - 1;\n\n\n  /* decode literals and length/distances until end-of-block or not enough\n     input data or output space */\n\n  top:\n  do {\n    if (bits < 15) {\n      hold += input[_in++] << bits;\n      bits += 8;\n      hold += input[_in++] << bits;\n      bits += 8;\n    }\n\n    here = lcode[hold & lmask];\n\n    dolen:\n    for (;;) { // Goto emulation\n      op = here >>> 24/*here.bits*/;\n      hold >>>= op;\n      bits -= op;\n      op = (here >>> 16) & 0xff/*here.op*/;\n      if (op === 0) {                          /* literal */\n        //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n        //        \"inflate:         literal '%c'\\n\" :\n        //        \"inflate:         literal 0x%02x\\n\", here.val));\n        output[_out++] = here & 0xffff/*here.val*/;\n      }\n      else if (op & 16) {                     /* length base */\n        len = here & 0xffff/*here.val*/;\n        op &= 15;                           /* number of extra bits */\n        if (op) {\n          if (bits < op) {\n            hold += input[_in++] << bits;\n            bits += 8;\n          }\n          len += hold & ((1 << op) - 1);\n          hold >>>= op;\n          bits -= op;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", len));\n        if (bits < 15) {\n          hold += input[_in++] << bits;\n          bits += 8;\n          hold += input[_in++] << bits;\n          bits += 8;\n        }\n        here = dcode[hold & dmask];\n\n        dodist:\n        for (;;) { // goto emulation\n          op = here >>> 24/*here.bits*/;\n          hold >>>= op;\n          bits -= op;\n          op = (here >>> 16) & 0xff/*here.op*/;\n\n          if (op & 16) {                      /* distance base */\n            dist = here & 0xffff/*here.val*/;\n            op &= 15;                       /* number of extra bits */\n            if (bits < op) {\n              hold += input[_in++] << bits;\n              bits += 8;\n              if (bits < op) {\n                hold += input[_in++] << bits;\n                bits += 8;\n              }\n            }\n            dist += hold & ((1 << op) - 1);\n//#ifdef INFLATE_STRICT\n            if (dist > dmax) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD$1;\n              break top;\n            }\n//#endif\n            hold >>>= op;\n            bits -= op;\n            //Tracevv((stderr, \"inflate:         distance %u\\n\", dist));\n            op = _out - beg;                /* max distance in output */\n            if (dist > op) {                /* see if copy from window */\n              op = dist - op;               /* distance back in window */\n              if (op > whave) {\n                if (state.sane) {\n                  strm.msg = 'invalid distance too far back';\n                  state.mode = BAD$1;\n                  break top;\n                }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//                if (len <= op - whave) {\n//                  do {\n//                    output[_out++] = 0;\n//                  } while (--len);\n//                  continue top;\n//                }\n//                len -= op - whave;\n//                do {\n//                  output[_out++] = 0;\n//                } while (--op > whave);\n//                if (op === 0) {\n//                  from = _out - dist;\n//                  do {\n//                    output[_out++] = output[from++];\n//                  } while (--len);\n//                  continue top;\n//                }\n//#endif\n              }\n              from = 0; // window index\n              from_source = s_window;\n              if (wnext === 0) {           /* very common case */\n                from += wsize - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              else if (wnext < op) {      /* wrap around window */\n                from += wsize + wnext - op;\n                op -= wnext;\n                if (op < len) {         /* some from end of window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = 0;\n                  if (wnext < len) {  /* some from start of window */\n                    op = wnext;\n                    len -= op;\n                    do {\n                      output[_out++] = s_window[from++];\n                    } while (--op);\n                    from = _out - dist;      /* rest from output */\n                    from_source = output;\n                  }\n                }\n              }\n              else {                      /* contiguous in window */\n                from += wnext - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              while (len > 2) {\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                len -= 3;\n              }\n              if (len) {\n                output[_out++] = from_source[from++];\n                if (len > 1) {\n                  output[_out++] = from_source[from++];\n                }\n              }\n            }\n            else {\n              from = _out - dist;          /* copy direct from output */\n              do {                        /* minimum length is three */\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                len -= 3;\n              } while (len > 2);\n              if (len) {\n                output[_out++] = output[from++];\n                if (len > 1) {\n                  output[_out++] = output[from++];\n                }\n              }\n            }\n          }\n          else if ((op & 64) === 0) {          /* 2nd level distance code */\n            here = dcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n            continue dodist;\n          }\n          else {\n            strm.msg = 'invalid distance code';\n            state.mode = BAD$1;\n            break top;\n          }\n\n          break; // need to emulate goto via \"continue\"\n        }\n      }\n      else if ((op & 64) === 0) {              /* 2nd level length code */\n        here = lcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n        continue dolen;\n      }\n      else if (op & 32) {                     /* end-of-block */\n        //Tracevv((stderr, \"inflate:         end of block\\n\"));\n        state.mode = TYPE$1;\n        break top;\n      }\n      else {\n        strm.msg = 'invalid literal/length code';\n        state.mode = BAD$1;\n        break top;\n      }\n\n      break; // need to emulate goto via \"continue\"\n    }\n  } while (_in < last && _out < end);\n\n  /* return unused bytes (on entry, bits < 8, so in won't go too far back) */\n  len = bits >> 3;\n  _in -= len;\n  bits -= len << 3;\n  hold &= (1 << bits) - 1;\n\n  /* update state and return */\n  strm.next_in = _in;\n  strm.next_out = _out;\n  strm.avail_in = (_in < last ? 5 + (last - _in) : 5 - (_in - last));\n  strm.avail_out = (_out < end ? 257 + (end - _out) : 257 - (_out - end));\n  state.hold = hold;\n  state.bits = bits;\n  return;\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nconst MAXBITS = 15;\nconst ENOUGH_LENS$1 = 852;\nconst ENOUGH_DISTS$1 = 592;\n//const ENOUGH = (ENOUGH_LENS+ENOUGH_DISTS);\n\nconst CODES$1 = 0;\nconst LENS$1 = 1;\nconst DISTS$1 = 2;\n\nconst lbase = new Uint16Array([ /* Length codes 257..285 base */\n  3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,\n  35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0\n]);\n\nconst lext = new Uint8Array([ /* Length codes 257..285 extra */\n  16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18,\n  19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78\n]);\n\nconst dbase = new Uint16Array([ /* Distance codes 0..29 base */\n  1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,\n  257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,\n  8193, 12289, 16385, 24577, 0, 0\n]);\n\nconst dext = new Uint8Array([ /* Distance codes 0..29 extra */\n  16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22,\n  23, 23, 24, 24, 25, 25, 26, 26, 27, 27,\n  28, 28, 29, 29, 64, 64\n]);\n\nconst inflate_table = (type, lens, lens_index, codes, table, table_index, work, opts) =>\n{\n  const bits = opts.bits;\n      //here = opts.here; /* table entry for duplication */\n\n  let len = 0;               /* a code's length in bits */\n  let sym = 0;               /* index of code symbols */\n  let min = 0, max = 0;          /* minimum and maximum code lengths */\n  let root = 0;              /* number of index bits for root table */\n  let curr = 0;              /* number of index bits for current table */\n  let drop = 0;              /* code bits to drop for sub-table */\n  let left = 0;                   /* number of prefix codes available */\n  let used = 0;              /* code entries in table used */\n  let huff = 0;              /* Huffman code */\n  let incr;              /* for incrementing code, index */\n  let fill;              /* index for replicating entries */\n  let low;               /* low bits for current root entry */\n  let mask;              /* mask for low root bits */\n  let next;             /* next available space in table */\n  let base = null;     /* base value table to use */\n//  let shoextra;    /* extra bits table to use */\n  let match;                  /* use base and extra for symbol >= match */\n  const count = new Uint16Array(MAXBITS + 1); //[MAXBITS+1];    /* number of codes of each length */\n  const offs = new Uint16Array(MAXBITS + 1); //[MAXBITS+1];     /* offsets in table for each length */\n  let extra = null;\n\n  let here_bits, here_op, here_val;\n\n  /*\n   Process a set of code lengths to create a canonical Huffman code.  The\n   code lengths are lens[0..codes-1].  Each length corresponds to the\n   symbols 0..codes-1.  The Huffman code is generated by first sorting the\n   symbols by length from short to long, and retaining the symbol order\n   for codes with equal lengths.  Then the code starts with all zero bits\n   for the first code of the shortest length, and the codes are integer\n   increments for the same length, and zeros are appended as the length\n   increases.  For the deflate format, these bits are stored backwards\n   from their more natural integer increment ordering, and so when the\n   decoding tables are built in the large loop below, the integer codes\n   are incremented backwards.\n\n   This routine assumes, but does not check, that all of the entries in\n   lens[] are in the range 0..MAXBITS.  The caller must assure this.\n   1..MAXBITS is interpreted as that code length.  zero means that that\n   symbol does not occur in this code.\n\n   The codes are sorted by computing a count of codes for each length,\n   creating from that a table of starting indices for each length in the\n   sorted table, and then entering the symbols in order in the sorted\n   table.  The sorted table is work[], with that space being provided by\n   the caller.\n\n   The length counts are used for other purposes as well, i.e. finding\n   the minimum and maximum length codes, determining if there are any\n   codes at all, checking for a valid set of lengths, and looking ahead\n   at length counts to determine sub-table sizes when building the\n   decoding tables.\n   */\n\n  /* accumulate lengths for codes (assumes lens[] all in 0..MAXBITS) */\n  for (len = 0; len <= MAXBITS; len++) {\n    count[len] = 0;\n  }\n  for (sym = 0; sym < codes; sym++) {\n    count[lens[lens_index + sym]]++;\n  }\n\n  /* bound code lengths, force root to be within code lengths */\n  root = bits;\n  for (max = MAXBITS; max >= 1; max--) {\n    if (count[max] !== 0) { break; }\n  }\n  if (root > max) {\n    root = max;\n  }\n  if (max === 0) {                     /* no symbols to code at all */\n    //table.op[opts.table_index] = 64;  //here.op = (var char)64;    /* invalid code marker */\n    //table.bits[opts.table_index] = 1;   //here.bits = (var char)1;\n    //table.val[opts.table_index++] = 0;   //here.val = (var short)0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n\n    //table.op[opts.table_index] = 64;\n    //table.bits[opts.table_index] = 1;\n    //table.val[opts.table_index++] = 0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n    opts.bits = 1;\n    return 0;     /* no symbols, but wait for decoding to report error */\n  }\n  for (min = 1; min < max; min++) {\n    if (count[min] !== 0) { break; }\n  }\n  if (root < min) {\n    root = min;\n  }\n\n  /* check for an over-subscribed or incomplete set of lengths */\n  left = 1;\n  for (len = 1; len <= MAXBITS; len++) {\n    left <<= 1;\n    left -= count[len];\n    if (left < 0) {\n      return -1;\n    }        /* over-subscribed */\n  }\n  if (left > 0 && (type === CODES$1 || max !== 1)) {\n    return -1;                      /* incomplete set */\n  }\n\n  /* generate offsets into symbol table for each length for sorting */\n  offs[1] = 0;\n  for (len = 1; len < MAXBITS; len++) {\n    offs[len + 1] = offs[len] + count[len];\n  }\n\n  /* sort symbols by length, by symbol order within each length */\n  for (sym = 0; sym < codes; sym++) {\n    if (lens[lens_index + sym] !== 0) {\n      work[offs[lens[lens_index + sym]]++] = sym;\n    }\n  }\n\n  /*\n   Create and fill in decoding tables.  In this loop, the table being\n   filled is at next and has curr index bits.  The code being used is huff\n   with length len.  That code is converted to an index by dropping drop\n   bits off of the bottom.  For codes where len is less than drop + curr,\n   those top drop + curr - len bits are incremented through all values to\n   fill the table with replicated entries.\n\n   root is the number of index bits for the root table.  When len exceeds\n   root, sub-tables are created pointed to by the root entry with an index\n   of the low root bits of huff.  This is saved in low to check for when a\n   new sub-table should be started.  drop is zero when the root table is\n   being filled, and drop is root when sub-tables are being filled.\n\n   When a new sub-table is needed, it is necessary to look ahead in the\n   code lengths to determine what size sub-table is needed.  The length\n   counts are used for this, and so count[] is decremented as codes are\n   entered in the tables.\n\n   used keeps track of how many table entries have been allocated from the\n   provided *table space.  It is checked for LENS and DIST tables against\n   the constants ENOUGH_LENS and ENOUGH_DISTS to guard against changes in\n   the initial root table size constants.  See the comments in inftrees.h\n   for more information.\n\n   sym increments through all symbols, and the loop terminates when\n   all codes of length max, i.e. all codes, have been processed.  This\n   routine permits incomplete codes, so another loop after this one fills\n   in the rest of the decoding tables with invalid code markers.\n   */\n\n  /* set up for code type */\n  // poor man optimization - use if-else instead of switch,\n  // to avoid deopts in old v8\n  if (type === CODES$1) {\n    base = extra = work;    /* dummy value--not used */\n    match = 20;\n\n  } else if (type === LENS$1) {\n    base = lbase;\n    extra = lext;\n    match = 257;\n\n  } else {                    /* DISTS */\n    base = dbase;\n    extra = dext;\n    match = 0;\n  }\n\n  /* initialize opts for loop */\n  huff = 0;                   /* starting code */\n  sym = 0;                    /* starting code symbol */\n  len = min;                  /* starting code length */\n  next = table_index;              /* current table to fill in */\n  curr = root;                /* current table index bits */\n  drop = 0;                   /* current bits to drop from code for index */\n  low = -1;                   /* trigger new sub-table when len > root */\n  used = 1 << root;          /* use root table entries */\n  mask = used - 1;            /* mask for comparing low */\n\n  /* check available table space */\n  if ((type === LENS$1 && used > ENOUGH_LENS$1) ||\n    (type === DISTS$1 && used > ENOUGH_DISTS$1)) {\n    return 1;\n  }\n\n  /* process all codes and make table entries */\n  for (;;) {\n    /* create table entry */\n    here_bits = len - drop;\n    if (work[sym] + 1 < match) {\n      here_op = 0;\n      here_val = work[sym];\n    }\n    else if (work[sym] >= match) {\n      here_op = extra[work[sym] - match];\n      here_val = base[work[sym] - match];\n    }\n    else {\n      here_op = 32 + 64;         /* end of block */\n      here_val = 0;\n    }\n\n    /* replicate for those indices with low len bits equal to huff */\n    incr = 1 << (len - drop);\n    fill = 1 << curr;\n    min = fill;                 /* save offset to next table */\n    do {\n      fill -= incr;\n      table[next + (huff >> drop) + fill] = (here_bits << 24) | (here_op << 16) | here_val |0;\n    } while (fill !== 0);\n\n    /* backwards increment the len-bit code huff */\n    incr = 1 << (len - 1);\n    while (huff & incr) {\n      incr >>= 1;\n    }\n    if (incr !== 0) {\n      huff &= incr - 1;\n      huff += incr;\n    } else {\n      huff = 0;\n    }\n\n    /* go to next symbol, update count, len */\n    sym++;\n    if (--count[len] === 0) {\n      if (len === max) { break; }\n      len = lens[lens_index + work[sym]];\n    }\n\n    /* create new sub-table if needed */\n    if (len > root && (huff & mask) !== low) {\n      /* if first time, transition to sub-tables */\n      if (drop === 0) {\n        drop = root;\n      }\n\n      /* increment past last table */\n      next += min;            /* here min is 1 << curr */\n\n      /* determine length of next table */\n      curr = len - drop;\n      left = 1 << curr;\n      while (curr + drop < max) {\n        left -= count[curr + drop];\n        if (left <= 0) { break; }\n        curr++;\n        left <<= 1;\n      }\n\n      /* check for enough space */\n      used += 1 << curr;\n      if ((type === LENS$1 && used > ENOUGH_LENS$1) ||\n        (type === DISTS$1 && used > ENOUGH_DISTS$1)) {\n        return 1;\n      }\n\n      /* point entry in root table to sub-table */\n      low = huff & mask;\n      /*table.op[low] = curr;\n      table.bits[low] = root;\n      table.val[low] = next - opts.table_index;*/\n      table[low] = (root << 24) | (curr << 16) | (next - table_index) |0;\n    }\n  }\n\n  /* fill in remaining table entry if code is incomplete (guaranteed to have\n   at most one remaining entry, since if the code is incomplete, the\n   maximum code length that was allowed to get this far is one bit) */\n  if (huff !== 0) {\n    //table.op[next + huff] = 64;            /* invalid code marker */\n    //table.bits[next + huff] = len - drop;\n    //table.val[next + huff] = 0;\n    table[next + huff] = ((len - drop) << 24) | (64 << 16) |0;\n  }\n\n  /* set return parameters */\n  //opts.table_index += used;\n  opts.bits = root;\n  return 0;\n};\n\n\nvar inftrees = inflate_table;\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n\n\n\n\n\nconst CODES = 0;\nconst LENS = 1;\nconst DISTS = 2;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_FINISH: Z_FINISH$1, Z_BLOCK, Z_TREES,\n  Z_OK: Z_OK$1, Z_STREAM_END: Z_STREAM_END$1, Z_NEED_DICT: Z_NEED_DICT$1, Z_STREAM_ERROR: Z_STREAM_ERROR$1, Z_DATA_ERROR: Z_DATA_ERROR$1, Z_MEM_ERROR: Z_MEM_ERROR$1, Z_BUF_ERROR,\n  Z_DEFLATED\n} = constants$2;\n\n\n/* STATES ====================================================================*/\n/* ===========================================================================*/\n\n\nconst    HEAD = 16180;       /* i: waiting for magic header */\nconst    FLAGS = 16181;      /* i: waiting for method and flags (gzip) */\nconst    TIME = 16182;       /* i: waiting for modification time (gzip) */\nconst    OS = 16183;         /* i: waiting for extra flags and operating system (gzip) */\nconst    EXLEN = 16184;      /* i: waiting for extra length (gzip) */\nconst    EXTRA = 16185;      /* i: waiting for extra bytes (gzip) */\nconst    NAME = 16186;       /* i: waiting for end of file name (gzip) */\nconst    COMMENT = 16187;    /* i: waiting for end of comment (gzip) */\nconst    HCRC = 16188;       /* i: waiting for header crc (gzip) */\nconst    DICTID = 16189;    /* i: waiting for dictionary check value */\nconst    DICT = 16190;      /* waiting for inflateSetDictionary() call */\nconst        TYPE = 16191;      /* i: waiting for type bits, including last-flag bit */\nconst        TYPEDO = 16192;    /* i: same, but skip check to exit inflate on new block */\nconst        STORED = 16193;    /* i: waiting for stored size (length and complement) */\nconst        COPY_ = 16194;     /* i/o: same as COPY below, but only first time in */\nconst        COPY = 16195;      /* i/o: waiting for input or output to copy stored block */\nconst        TABLE = 16196;     /* i: waiting for dynamic block table lengths */\nconst        LENLENS = 16197;   /* i: waiting for code length code lengths */\nconst        CODELENS = 16198;  /* i: waiting for length/lit and distance code lengths */\nconst            LEN_ = 16199;      /* i: same as LEN below, but only first time in */\nconst            LEN = 16200;       /* i: waiting for length/lit/eob code */\nconst            LENEXT = 16201;    /* i: waiting for length extra bits */\nconst            DIST = 16202;      /* i: waiting for distance code */\nconst            DISTEXT = 16203;   /* i: waiting for distance extra bits */\nconst            MATCH = 16204;     /* o: waiting for output space to copy string */\nconst            LIT = 16205;       /* o: waiting for output space to write literal */\nconst    CHECK = 16206;     /* i: waiting for 32-bit check value */\nconst    LENGTH = 16207;    /* i: waiting for 32-bit length (gzip) */\nconst    DONE = 16208;      /* finished check, done -- remain here until reset */\nconst    BAD = 16209;       /* got a data error -- remain here until reset */\nconst    MEM = 16210;       /* got an inflate() memory error -- remain here until reset */\nconst    SYNC = 16211;      /* looking for synchronization bytes to restart inflate() */\n\n/* ===========================================================================*/\n\n\n\nconst ENOUGH_LENS = 852;\nconst ENOUGH_DISTS = 592;\n//const ENOUGH =  (ENOUGH_LENS+ENOUGH_DISTS);\n\nconst MAX_WBITS = 15;\n/* 32K LZ77 window */\nconst DEF_WBITS = MAX_WBITS;\n\n\nconst zswap32 = (q) => {\n\n  return  (((q >>> 24) & 0xff) +\n          ((q >>> 8) & 0xff00) +\n          ((q & 0xff00) << 8) +\n          ((q & 0xff) << 24));\n};\n\n\nfunction InflateState() {\n  this.strm = null;           /* pointer back to this zlib stream */\n  this.mode = 0;              /* current inflate mode */\n  this.last = false;          /* true if processing last block */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip,\n                                 bit 2 true to validate check value */\n  this.havedict = false;      /* true if dictionary provided */\n  this.flags = 0;             /* gzip header method and flags (0 if zlib), or\n                                 -1 if raw or no header yet */\n  this.dmax = 0;              /* zlib header max distance (INFLATE_STRICT) */\n  this.check = 0;             /* protected copy of check value */\n  this.total = 0;             /* protected copy of output count */\n  // TODO: may be {}\n  this.head = null;           /* where to save gzip header information */\n\n  /* sliding window */\n  this.wbits = 0;             /* log base 2 of requested window size */\n  this.wsize = 0;             /* window size or zero if not using window */\n  this.whave = 0;             /* valid bytes in the window */\n  this.wnext = 0;             /* window write index */\n  this.window = null;         /* allocated sliding window, if needed */\n\n  /* bit accumulator */\n  this.hold = 0;              /* input bit accumulator */\n  this.bits = 0;              /* number of bits in \"in\" */\n\n  /* for string and stored block copying */\n  this.length = 0;            /* literal or length of data to copy */\n  this.offset = 0;            /* distance back to copy string from */\n\n  /* for table and code decoding */\n  this.extra = 0;             /* extra bits needed */\n\n  /* fixed and dynamic code tables */\n  this.lencode = null;          /* starting table for length/literal codes */\n  this.distcode = null;         /* starting table for distance codes */\n  this.lenbits = 0;           /* index bits for lencode */\n  this.distbits = 0;          /* index bits for distcode */\n\n  /* dynamic table building */\n  this.ncode = 0;             /* number of code length code lengths */\n  this.nlen = 0;              /* number of length code lengths */\n  this.ndist = 0;             /* number of distance code lengths */\n  this.have = 0;              /* number of code lengths in lens[] */\n  this.next = null;              /* next available space in codes[] */\n\n  this.lens = new Uint16Array(320); /* temporary storage for code lengths */\n  this.work = new Uint16Array(288); /* work area for code table building */\n\n  /*\n   because we don't have pointers in js, we use lencode and distcode directly\n   as buffers so we don't need codes\n  */\n  //this.codes = new Int32Array(ENOUGH);       /* space for code tables */\n  this.lendyn = null;              /* dynamic table for length/literal codes (JS specific) */\n  this.distdyn = null;             /* dynamic table for distance codes (JS specific) */\n  this.sane = 0;                   /* if false, allow invalid distance too far */\n  this.back = 0;                   /* bits back of last unprocessed length/lit */\n  this.was = 0;                    /* initial length of match */\n}\n\n\nconst inflateStateCheck = (strm) => {\n\n  if (!strm) {\n    return 1;\n  }\n  const state = strm.state;\n  if (!state || state.strm !== strm ||\n    state.mode < HEAD || state.mode > SYNC) {\n    return 1;\n  }\n  return 0;\n};\n\n\nconst inflateResetKeep = (strm) => {\n\n  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n  strm.total_in = strm.total_out = state.total = 0;\n  strm.msg = ''; /*Z_NULL*/\n  if (state.wrap) {       /* to support ill-conceived Java test suite */\n    strm.adler = state.wrap & 1;\n  }\n  state.mode = HEAD;\n  state.last = 0;\n  state.havedict = 0;\n  state.flags = -1;\n  state.dmax = 32768;\n  state.head = null/*Z_NULL*/;\n  state.hold = 0;\n  state.bits = 0;\n  //state.lencode = state.distcode = state.next = state.codes;\n  state.lencode = state.lendyn = new Int32Array(ENOUGH_LENS);\n  state.distcode = state.distdyn = new Int32Array(ENOUGH_DISTS);\n\n  state.sane = 1;\n  state.back = -1;\n  //Tracev((stderr, \"inflate: reset\\n\"));\n  return Z_OK$1;\n};\n\n\nconst inflateReset = (strm) => {\n\n  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n  state.wsize = 0;\n  state.whave = 0;\n  state.wnext = 0;\n  return inflateResetKeep(strm);\n\n};\n\n\nconst inflateReset2 = (strm, windowBits) => {\n  let wrap;\n\n  /* get the state */\n  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n\n  /* extract wrap request from windowBits parameter */\n  if (windowBits < 0) {\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n  else {\n    wrap = (windowBits >> 4) + 5;\n    if (windowBits < 48) {\n      windowBits &= 15;\n    }\n  }\n\n  /* set number of window bits, free window if different */\n  if (windowBits && (windowBits < 8 || windowBits > 15)) {\n    return Z_STREAM_ERROR$1;\n  }\n  if (state.window !== null && state.wbits !== windowBits) {\n    state.window = null;\n  }\n\n  /* update state and reset the rest of it */\n  state.wrap = wrap;\n  state.wbits = windowBits;\n  return inflateReset(strm);\n};\n\n\nconst inflateInit2 = (strm, windowBits) => {\n\n  if (!strm) { return Z_STREAM_ERROR$1; }\n  //strm.msg = Z_NULL;                 /* in case we return an error */\n\n  const state = new InflateState();\n\n  //if (state === Z_NULL) return Z_MEM_ERROR;\n  //Tracev((stderr, \"inflate: allocated\\n\"));\n  strm.state = state;\n  state.strm = strm;\n  state.window = null/*Z_NULL*/;\n  state.mode = HEAD;     /* to pass state test in inflateReset2() */\n  const ret = inflateReset2(strm, windowBits);\n  if (ret !== Z_OK$1) {\n    strm.state = null/*Z_NULL*/;\n  }\n  return ret;\n};\n\n\nconst inflateInit = (strm) => {\n\n  return inflateInit2(strm, DEF_WBITS);\n};\n\n\n/*\n Return state with length and distance decoding tables and index sizes set to\n fixed code decoding.  Normally this returns fixed tables from inffixed.h.\n If BUILDFIXED is defined, then instead this routine builds the tables the\n first time it's called, and returns those tables the first time and\n thereafter.  This reduces the size of the code by about 2K bytes, in\n exchange for a little execution time.  However, BUILDFIXED should not be\n used for threaded applications, since the rewriting of the tables and virgin\n may not be thread-safe.\n */\nlet virgin = true;\n\nlet lenfix, distfix; // We have no pointers in JS, so keep tables separate\n\n\nconst fixedtables = (state) => {\n\n  /* build fixed huffman tables if first call (may not be thread safe) */\n  if (virgin) {\n    lenfix = new Int32Array(512);\n    distfix = new Int32Array(32);\n\n    /* literal/length table */\n    let sym = 0;\n    while (sym < 144) { state.lens[sym++] = 8; }\n    while (sym < 256) { state.lens[sym++] = 9; }\n    while (sym < 280) { state.lens[sym++] = 7; }\n    while (sym < 288) { state.lens[sym++] = 8; }\n\n    inftrees(LENS,  state.lens, 0, 288, lenfix,   0, state.work, { bits: 9 });\n\n    /* distance table */\n    sym = 0;\n    while (sym < 32) { state.lens[sym++] = 5; }\n\n    inftrees(DISTS, state.lens, 0, 32,   distfix, 0, state.work, { bits: 5 });\n\n    /* do this just once */\n    virgin = false;\n  }\n\n  state.lencode = lenfix;\n  state.lenbits = 9;\n  state.distcode = distfix;\n  state.distbits = 5;\n};\n\n\n/*\n Update the window with the last wsize (normally 32K) bytes written before\n returning.  If window does not exist yet, create it.  This is only called\n when a window is already in use, or when output has been written during this\n inflate call, but the end of the deflate stream has not been reached yet.\n It is also called to create a window for dictionary data when a dictionary\n is loaded.\n\n Providing output buffers larger than 32K to inflate() should provide a speed\n advantage, since only the last 32K of output is copied to the sliding window\n upon return from inflate(), and since all distances after the first 32K of\n output will fall in the output data, making match copies simpler and faster.\n The advantage may be dependent on the size of the processor's data caches.\n */\nconst updatewindow = (strm, src, end, copy) => {\n\n  let dist;\n  const state = strm.state;\n\n  /* if it hasn't been done already, allocate space for the window */\n  if (state.window === null) {\n    state.wsize = 1 << state.wbits;\n    state.wnext = 0;\n    state.whave = 0;\n\n    state.window = new Uint8Array(state.wsize);\n  }\n\n  /* copy state->wsize or less output bytes into the circular window */\n  if (copy >= state.wsize) {\n    state.window.set(src.subarray(end - state.wsize, end), 0);\n    state.wnext = 0;\n    state.whave = state.wsize;\n  }\n  else {\n    dist = state.wsize - state.wnext;\n    if (dist > copy) {\n      dist = copy;\n    }\n    //zmemcpy(state->window + state->wnext, end - copy, dist);\n    state.window.set(src.subarray(end - copy, end - copy + dist), state.wnext);\n    copy -= dist;\n    if (copy) {\n      //zmemcpy(state->window, end - copy, copy);\n      state.window.set(src.subarray(end - copy, end), 0);\n      state.wnext = copy;\n      state.whave = state.wsize;\n    }\n    else {\n      state.wnext += dist;\n      if (state.wnext === state.wsize) { state.wnext = 0; }\n      if (state.whave < state.wsize) { state.whave += dist; }\n    }\n  }\n  return 0;\n};\n\n\nconst inflate$2 = (strm, flush) => {\n\n  let state;\n  let input, output;          // input/output buffers\n  let next;                   /* next input INDEX */\n  let put;                    /* next output INDEX */\n  let have, left;             /* available input and output */\n  let hold;                   /* bit buffer */\n  let bits;                   /* bits in bit buffer */\n  let _in, _out;              /* save starting available input and output */\n  let copy;                   /* number of stored or match bytes to copy */\n  let from;                   /* where to copy match bytes from */\n  let from_source;\n  let here = 0;               /* current decoding table entry */\n  let here_bits, here_op, here_val; // paked \"here\" denormalized (JS specific)\n  //let last;                   /* parent table entry */\n  let last_bits, last_op, last_val; // paked \"last\" denormalized (JS specific)\n  let len;                    /* length to copy for repeats, bits to drop */\n  let ret;                    /* return code */\n  const hbuf = new Uint8Array(4);    /* buffer for gzip header crc calculation */\n  let opts;\n\n  let n; // temporary variable for NEED_BITS\n\n  const order = /* permutation of code lengths */\n    new Uint8Array([ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ]);\n\n\n  if (inflateStateCheck(strm) || !strm.output ||\n      (!strm.input && strm.avail_in !== 0)) {\n    return Z_STREAM_ERROR$1;\n  }\n\n  state = strm.state;\n  if (state.mode === TYPE) { state.mode = TYPEDO; }    /* skip check */\n\n\n  //--- LOAD() ---\n  put = strm.next_out;\n  output = strm.output;\n  left = strm.avail_out;\n  next = strm.next_in;\n  input = strm.input;\n  have = strm.avail_in;\n  hold = state.hold;\n  bits = state.bits;\n  //---\n\n  _in = have;\n  _out = left;\n  ret = Z_OK$1;\n\n  inf_leave: // goto emulation\n  for (;;) {\n    switch (state.mode) {\n      case HEAD:\n        if (state.wrap === 0) {\n          state.mode = TYPEDO;\n          break;\n        }\n        //=== NEEDBITS(16);\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((state.wrap & 2) && hold === 0x8b1f) {  /* gzip header */\n          if (state.wbits === 0) {\n            state.wbits = 15;\n          }\n          state.check = 0/*crc32(0L, Z_NULL, 0)*/;\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 2, 0);\n          //===//\n\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          state.mode = FLAGS;\n          break;\n        }\n        if (state.head) {\n          state.head.done = false;\n        }\n        if (!(state.wrap & 1) ||   /* check if zlib header allowed */\n          (((hold & 0xff)/*BITS(8)*/ << 8) + (hold >> 8)) % 31) {\n          strm.msg = 'incorrect header check';\n          state.mode = BAD;\n          break;\n        }\n        if ((hold & 0x0f)/*BITS(4)*/ !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n        len = (hold & 0x0f)/*BITS(4)*/ + 8;\n        if (state.wbits === 0) {\n          state.wbits = len;\n        }\n        if (len > 15 || len > state.wbits) {\n          strm.msg = 'invalid window size';\n          state.mode = BAD;\n          break;\n        }\n\n        // !!! pako patch. Force use `options.windowBits` if passed.\n        // Required to always use max window size by default.\n        state.dmax = 1 << state.wbits;\n        //state.dmax = 1 << len;\n\n        state.flags = 0;               /* indicate zlib header */\n        //Tracev((stderr, \"inflate:   zlib header ok\\n\"));\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = hold & 0x200 ? DICTID : TYPE;\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        break;\n      case FLAGS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.flags = hold;\n        if ((state.flags & 0xff) !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        if (state.flags & 0xe000) {\n          strm.msg = 'unknown header flags set';\n          state.mode = BAD;\n          break;\n        }\n        if (state.head) {\n          state.head.text = ((hold >> 8) & 1);\n        }\n        if ((state.flags & 0x0200) && (state.wrap & 4)) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = TIME;\n        /* falls through */\n      case TIME:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.time = hold;\n        }\n        if ((state.flags & 0x0200) && (state.wrap & 4)) {\n          //=== CRC4(state.check, hold)\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          hbuf[2] = (hold >>> 16) & 0xff;\n          hbuf[3] = (hold >>> 24) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 4, 0);\n          //===\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = OS;\n        /* falls through */\n      case OS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.xflags = (hold & 0xff);\n          state.head.os = (hold >> 8);\n        }\n        if ((state.flags & 0x0200) && (state.wrap & 4)) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = EXLEN;\n        /* falls through */\n      case EXLEN:\n        if (state.flags & 0x0400) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length = hold;\n          if (state.head) {\n            state.head.extra_len = hold;\n          }\n          if ((state.flags & 0x0200) && (state.wrap & 4)) {\n            //=== CRC2(state.check, hold);\n            hbuf[0] = hold & 0xff;\n            hbuf[1] = (hold >>> 8) & 0xff;\n            state.check = crc32_1(state.check, hbuf, 2, 0);\n            //===//\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        else if (state.head) {\n          state.head.extra = null/*Z_NULL*/;\n        }\n        state.mode = EXTRA;\n        /* falls through */\n      case EXTRA:\n        if (state.flags & 0x0400) {\n          copy = state.length;\n          if (copy > have) { copy = have; }\n          if (copy) {\n            if (state.head) {\n              len = state.head.extra_len - state.length;\n              if (!state.head.extra) {\n                // Use untyped array for more convenient processing later\n                state.head.extra = new Uint8Array(state.head.extra_len);\n              }\n              state.head.extra.set(\n                input.subarray(\n                  next,\n                  // extra field is limited to 65536 bytes\n                  // - no need for additional size check\n                  next + copy\n                ),\n                /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/\n                len\n              );\n              //zmemcpy(state.head.extra + len, next,\n              //        len + copy > state.head.extra_max ?\n              //        state.head.extra_max - len : copy);\n            }\n            if ((state.flags & 0x0200) && (state.wrap & 4)) {\n              state.check = crc32_1(state.check, input, copy, next);\n            }\n            have -= copy;\n            next += copy;\n            state.length -= copy;\n          }\n          if (state.length) { break inf_leave; }\n        }\n        state.length = 0;\n        state.mode = NAME;\n        /* falls through */\n      case NAME:\n        if (state.flags & 0x0800) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            // TODO: 2 or 1 bytes?\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.name_max*/)) {\n              state.head.name += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n\n          if ((state.flags & 0x0200) && (state.wrap & 4)) {\n            state.check = crc32_1(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.name = null;\n        }\n        state.length = 0;\n        state.mode = COMMENT;\n        /* falls through */\n      case COMMENT:\n        if (state.flags & 0x1000) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.comm_max*/)) {\n              state.head.comment += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n          if ((state.flags & 0x0200) && (state.wrap & 4)) {\n            state.check = crc32_1(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.comment = null;\n        }\n        state.mode = HCRC;\n        /* falls through */\n      case HCRC:\n        if (state.flags & 0x0200) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if ((state.wrap & 4) && hold !== (state.check & 0xffff)) {\n            strm.msg = 'header crc mismatch';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        if (state.head) {\n          state.head.hcrc = ((state.flags >> 9) & 1);\n          state.head.done = true;\n        }\n        strm.adler = state.check = 0;\n        state.mode = TYPE;\n        break;\n      case DICTID:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        strm.adler = state.check = zswap32(hold);\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = DICT;\n        /* falls through */\n      case DICT:\n        if (state.havedict === 0) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          return Z_NEED_DICT$1;\n        }\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = TYPE;\n        /* falls through */\n      case TYPE:\n        if (flush === Z_BLOCK || flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case TYPEDO:\n        if (state.last) {\n          //--- BYTEBITS() ---//\n          hold >>>= bits & 7;\n          bits -= bits & 7;\n          //---//\n          state.mode = CHECK;\n          break;\n        }\n        //=== NEEDBITS(3); */\n        while (bits < 3) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.last = (hold & 0x01)/*BITS(1)*/;\n        //--- DROPBITS(1) ---//\n        hold >>>= 1;\n        bits -= 1;\n        //---//\n\n        switch ((hold & 0x03)/*BITS(2)*/) {\n          case 0:                             /* stored block */\n            //Tracev((stderr, \"inflate:     stored block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = STORED;\n            break;\n          case 1:                             /* fixed block */\n            fixedtables(state);\n            //Tracev((stderr, \"inflate:     fixed codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = LEN_;             /* decode codes */\n            if (flush === Z_TREES) {\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n              break inf_leave;\n            }\n            break;\n          case 2:                             /* dynamic block */\n            //Tracev((stderr, \"inflate:     dynamic codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = TABLE;\n            break;\n          case 3:\n            strm.msg = 'invalid block type';\n            state.mode = BAD;\n        }\n        //--- DROPBITS(2) ---//\n        hold >>>= 2;\n        bits -= 2;\n        //---//\n        break;\n      case STORED:\n        //--- BYTEBITS() ---// /* go to byte boundary */\n        hold >>>= bits & 7;\n        bits -= bits & 7;\n        //---//\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((hold & 0xffff) !== ((hold >>> 16) ^ 0xffff)) {\n          strm.msg = 'invalid stored block lengths';\n          state.mode = BAD;\n          break;\n        }\n        state.length = hold & 0xffff;\n        //Tracev((stderr, \"inflate:       stored length %u\\n\",\n        //        state.length));\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = COPY_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case COPY_:\n        state.mode = COPY;\n        /* falls through */\n      case COPY:\n        copy = state.length;\n        if (copy) {\n          if (copy > have) { copy = have; }\n          if (copy > left) { copy = left; }\n          if (copy === 0) { break inf_leave; }\n          //--- zmemcpy(put, next, copy); ---\n          output.set(input.subarray(next, next + copy), put);\n          //---//\n          have -= copy;\n          next += copy;\n          left -= copy;\n          put += copy;\n          state.length -= copy;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       stored end\\n\"));\n        state.mode = TYPE;\n        break;\n      case TABLE:\n        //=== NEEDBITS(14); */\n        while (bits < 14) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.nlen = (hold & 0x1f)/*BITS(5)*/ + 257;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ndist = (hold & 0x1f)/*BITS(5)*/ + 1;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ncode = (hold & 0x0f)/*BITS(4)*/ + 4;\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n//#ifndef PKZIP_BUG_WORKAROUND\n        if (state.nlen > 286 || state.ndist > 30) {\n          strm.msg = 'too many length or distance symbols';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracev((stderr, \"inflate:       table sizes ok\\n\"));\n        state.have = 0;\n        state.mode = LENLENS;\n        /* falls through */\n      case LENLENS:\n        while (state.have < state.ncode) {\n          //=== NEEDBITS(3);\n          while (bits < 3) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.lens[order[state.have++]] = (hold & 0x07);//BITS(3);\n          //--- DROPBITS(3) ---//\n          hold >>>= 3;\n          bits -= 3;\n          //---//\n        }\n        while (state.have < 19) {\n          state.lens[order[state.have++]] = 0;\n        }\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        //state.next = state.codes;\n        //state.lencode = state.next;\n        // Switch to use dynamic table\n        state.lencode = state.lendyn;\n        state.lenbits = 7;\n\n        opts = { bits: state.lenbits };\n        ret = inftrees(CODES, state.lens, 0, 19, state.lencode, 0, state.work, opts);\n        state.lenbits = opts.bits;\n\n        if (ret) {\n          strm.msg = 'invalid code lengths set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       code lengths ok\\n\"));\n        state.have = 0;\n        state.mode = CODELENS;\n        /* falls through */\n      case CODELENS:\n        while (state.have < state.nlen + state.ndist) {\n          for (;;) {\n            here = state.lencode[hold & ((1 << state.lenbits) - 1)];/*BITS(state.lenbits)*/\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          if (here_val < 16) {\n            //--- DROPBITS(here.bits) ---//\n            hold >>>= here_bits;\n            bits -= here_bits;\n            //---//\n            state.lens[state.have++] = here_val;\n          }\n          else {\n            if (here_val === 16) {\n              //=== NEEDBITS(here.bits + 2);\n              n = here_bits + 2;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              if (state.have === 0) {\n                strm.msg = 'invalid bit length repeat';\n                state.mode = BAD;\n                break;\n              }\n              len = state.lens[state.have - 1];\n              copy = 3 + (hold & 0x03);//BITS(2);\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n            }\n            else if (here_val === 17) {\n              //=== NEEDBITS(here.bits + 3);\n              n = here_bits + 3;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 3 + (hold & 0x07);//BITS(3);\n              //--- DROPBITS(3) ---//\n              hold >>>= 3;\n              bits -= 3;\n              //---//\n            }\n            else {\n              //=== NEEDBITS(here.bits + 7);\n              n = here_bits + 7;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 11 + (hold & 0x7f);//BITS(7);\n              //--- DROPBITS(7) ---//\n              hold >>>= 7;\n              bits -= 7;\n              //---//\n            }\n            if (state.have + copy > state.nlen + state.ndist) {\n              strm.msg = 'invalid bit length repeat';\n              state.mode = BAD;\n              break;\n            }\n            while (copy--) {\n              state.lens[state.have++] = len;\n            }\n          }\n        }\n\n        /* handle error breaks in while */\n        if (state.mode === BAD) { break; }\n\n        /* check for end-of-block code (better have one) */\n        if (state.lens[256] === 0) {\n          strm.msg = 'invalid code -- missing end-of-block';\n          state.mode = BAD;\n          break;\n        }\n\n        /* build code tables -- note: do not change the lenbits or distbits\n           values here (9 and 6) without reading the comments in inftrees.h\n           concerning the ENOUGH constants, which depend on those values */\n        state.lenbits = 9;\n\n        opts = { bits: state.lenbits };\n        ret = inftrees(LENS, state.lens, 0, state.nlen, state.lencode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.lenbits = opts.bits;\n        // state.lencode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid literal/lengths set';\n          state.mode = BAD;\n          break;\n        }\n\n        state.distbits = 6;\n        //state.distcode.copy(state.codes);\n        // Switch to use dynamic table\n        state.distcode = state.distdyn;\n        opts = { bits: state.distbits };\n        ret = inftrees(DISTS, state.lens, state.nlen, state.ndist, state.distcode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.distbits = opts.bits;\n        // state.distcode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid distances set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, 'inflate:       codes ok\\n'));\n        state.mode = LEN_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case LEN_:\n        state.mode = LEN;\n        /* falls through */\n      case LEN:\n        if (have >= 6 && left >= 258) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          inffast(strm, _out);\n          //--- LOAD() ---\n          put = strm.next_out;\n          output = strm.output;\n          left = strm.avail_out;\n          next = strm.next_in;\n          input = strm.input;\n          have = strm.avail_in;\n          hold = state.hold;\n          bits = state.bits;\n          //---\n\n          if (state.mode === TYPE) {\n            state.back = -1;\n          }\n          break;\n        }\n        state.back = 0;\n        for (;;) {\n          here = state.lencode[hold & ((1 << state.lenbits) - 1)];  /*BITS(state.lenbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if (here_bits <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if (here_op && (here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.lencode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        state.length = here_val;\n        if (here_op === 0) {\n          //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n          //        \"inflate:         literal '%c'\\n\" :\n          //        \"inflate:         literal 0x%02x\\n\", here.val));\n          state.mode = LIT;\n          break;\n        }\n        if (here_op & 32) {\n          //Tracevv((stderr, \"inflate:         end of block\\n\"));\n          state.back = -1;\n          state.mode = TYPE;\n          break;\n        }\n        if (here_op & 64) {\n          strm.msg = 'invalid literal/length code';\n          state.mode = BAD;\n          break;\n        }\n        state.extra = here_op & 15;\n        state.mode = LENEXT;\n        /* falls through */\n      case LENEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", state.length));\n        state.was = state.length;\n        state.mode = DIST;\n        /* falls through */\n      case DIST:\n        for (;;) {\n          here = state.distcode[hold & ((1 << state.distbits) - 1)];/*BITS(state.distbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if ((here_bits) <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if ((here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.distcode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        if (here_op & 64) {\n          strm.msg = 'invalid distance code';\n          state.mode = BAD;\n          break;\n        }\n        state.offset = here_val;\n        state.extra = (here_op) & 15;\n        state.mode = DISTEXT;\n        /* falls through */\n      case DISTEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.offset += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n//#ifdef INFLATE_STRICT\n        if (state.offset > state.dmax) {\n          strm.msg = 'invalid distance too far back';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracevv((stderr, \"inflate:         distance %u\\n\", state.offset));\n        state.mode = MATCH;\n        /* falls through */\n      case MATCH:\n        if (left === 0) { break inf_leave; }\n        copy = _out - left;\n        if (state.offset > copy) {         /* copy from window */\n          copy = state.offset - copy;\n          if (copy > state.whave) {\n            if (state.sane) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break;\n            }\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//          Trace((stderr, \"inflate.c too far\\n\"));\n//          copy -= state.whave;\n//          if (copy > state.length) { copy = state.length; }\n//          if (copy > left) { copy = left; }\n//          left -= copy;\n//          state.length -= copy;\n//          do {\n//            output[put++] = 0;\n//          } while (--copy);\n//          if (state.length === 0) { state.mode = LEN; }\n//          break;\n//#endif\n          }\n          if (copy > state.wnext) {\n            copy -= state.wnext;\n            from = state.wsize - copy;\n          }\n          else {\n            from = state.wnext - copy;\n          }\n          if (copy > state.length) { copy = state.length; }\n          from_source = state.window;\n        }\n        else {                              /* copy from output */\n          from_source = output;\n          from = put - state.offset;\n          copy = state.length;\n        }\n        if (copy > left) { copy = left; }\n        left -= copy;\n        state.length -= copy;\n        do {\n          output[put++] = from_source[from++];\n        } while (--copy);\n        if (state.length === 0) { state.mode = LEN; }\n        break;\n      case LIT:\n        if (left === 0) { break inf_leave; }\n        output[put++] = state.length;\n        left--;\n        state.mode = LEN;\n        break;\n      case CHECK:\n        if (state.wrap) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            // Use '|' instead of '+' to make sure that result is signed\n            hold |= input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          _out -= left;\n          strm.total_out += _out;\n          state.total += _out;\n          if ((state.wrap & 4) && _out) {\n            strm.adler = state.check =\n                /*UPDATE_CHECK(state.check, put - _out, _out);*/\n                (state.flags ? crc32_1(state.check, output, _out, put - _out) : adler32_1(state.check, output, _out, put - _out));\n\n          }\n          _out = left;\n          // NB: crc32 stored as signed 32-bit int, zswap32 returns signed too\n          if ((state.wrap & 4) && (state.flags ? hold : zswap32(hold)) !== state.check) {\n            strm.msg = 'incorrect data check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   check matches trailer\\n\"));\n        }\n        state.mode = LENGTH;\n        /* falls through */\n      case LENGTH:\n        if (state.wrap && state.flags) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if ((state.wrap & 4) && hold !== (state.total & 0xffffffff)) {\n            strm.msg = 'incorrect length check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   length matches trailer\\n\"));\n        }\n        state.mode = DONE;\n        /* falls through */\n      case DONE:\n        ret = Z_STREAM_END$1;\n        break inf_leave;\n      case BAD:\n        ret = Z_DATA_ERROR$1;\n        break inf_leave;\n      case MEM:\n        return Z_MEM_ERROR$1;\n      case SYNC:\n        /* falls through */\n      default:\n        return Z_STREAM_ERROR$1;\n    }\n  }\n\n  // inf_leave <- here is real place for \"goto inf_leave\", emulated via \"break inf_leave\"\n\n  /*\n     Return from inflate(), updating the total counts and the check value.\n     If there was no progress during the inflate() call, return a buffer\n     error.  Call updatewindow() to create and/or update the window state.\n     Note: a memory error from inflate() is non-recoverable.\n   */\n\n  //--- RESTORE() ---\n  strm.next_out = put;\n  strm.avail_out = left;\n  strm.next_in = next;\n  strm.avail_in = have;\n  state.hold = hold;\n  state.bits = bits;\n  //---\n\n  if (state.wsize || (_out !== strm.avail_out && state.mode < BAD &&\n                      (state.mode < CHECK || flush !== Z_FINISH$1))) {\n    if (updatewindow(strm, strm.output, strm.next_out, _out - strm.avail_out)) ;\n  }\n  _in -= strm.avail_in;\n  _out -= strm.avail_out;\n  strm.total_in += _in;\n  strm.total_out += _out;\n  state.total += _out;\n  if ((state.wrap & 4) && _out) {\n    strm.adler = state.check = /*UPDATE_CHECK(state.check, strm.next_out - _out, _out);*/\n      (state.flags ? crc32_1(state.check, output, _out, strm.next_out - _out) : adler32_1(state.check, output, _out, strm.next_out - _out));\n  }\n  strm.data_type = state.bits + (state.last ? 64 : 0) +\n                    (state.mode === TYPE ? 128 : 0) +\n                    (state.mode === LEN_ || state.mode === COPY_ ? 256 : 0);\n  if (((_in === 0 && _out === 0) || flush === Z_FINISH$1) && ret === Z_OK$1) {\n    ret = Z_BUF_ERROR;\n  }\n  return ret;\n};\n\n\nconst inflateEnd = (strm) => {\n\n  if (inflateStateCheck(strm)) {\n    return Z_STREAM_ERROR$1;\n  }\n\n  let state = strm.state;\n  if (state.window) {\n    state.window = null;\n  }\n  strm.state = null;\n  return Z_OK$1;\n};\n\n\nconst inflateGetHeader = (strm, head) => {\n\n  /* check state */\n  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n  if ((state.wrap & 2) === 0) { return Z_STREAM_ERROR$1; }\n\n  /* save header structure */\n  state.head = head;\n  head.done = false;\n  return Z_OK$1;\n};\n\n\nconst inflateSetDictionary = (strm, dictionary) => {\n  const dictLength = dictionary.length;\n\n  let state;\n  let dictid;\n  let ret;\n\n  /* check state */\n  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR$1; }\n  state = strm.state;\n\n  if (state.wrap !== 0 && state.mode !== DICT) {\n    return Z_STREAM_ERROR$1;\n  }\n\n  /* check for correct dictionary identifier */\n  if (state.mode === DICT) {\n    dictid = 1; /* adler32(0, null, 0)*/\n    /* dictid = adler32(dictid, dictionary, dictLength); */\n    dictid = adler32_1(dictid, dictionary, dictLength, 0);\n    if (dictid !== state.check) {\n      return Z_DATA_ERROR$1;\n    }\n  }\n  /* copy dictionary to window using updatewindow(), which will amend the\n   existing dictionary if appropriate */\n  ret = updatewindow(strm, dictionary, dictLength, dictLength);\n  if (ret) {\n    state.mode = MEM;\n    return Z_MEM_ERROR$1;\n  }\n  state.havedict = 1;\n  // Tracev((stderr, \"inflate:   dictionary set\\n\"));\n  return Z_OK$1;\n};\n\n\nvar inflateReset_1 = inflateReset;\nvar inflateReset2_1 = inflateReset2;\nvar inflateResetKeep_1 = inflateResetKeep;\nvar inflateInit_1 = inflateInit;\nvar inflateInit2_1 = inflateInit2;\nvar inflate_2$1 = inflate$2;\nvar inflateEnd_1 = inflateEnd;\nvar inflateGetHeader_1 = inflateGetHeader;\nvar inflateSetDictionary_1 = inflateSetDictionary;\nvar inflateInfo = 'pako inflate (from Nodeca project)';\n\n/* Not implemented\nmodule.exports.inflateCodesUsed = inflateCodesUsed;\nmodule.exports.inflateCopy = inflateCopy;\nmodule.exports.inflateGetDictionary = inflateGetDictionary;\nmodule.exports.inflateMark = inflateMark;\nmodule.exports.inflatePrime = inflatePrime;\nmodule.exports.inflateSync = inflateSync;\nmodule.exports.inflateSyncPoint = inflateSyncPoint;\nmodule.exports.inflateUndermine = inflateUndermine;\nmodule.exports.inflateValidate = inflateValidate;\n*/\n\nvar inflate_1$2 = {\n\tinflateReset: inflateReset_1,\n\tinflateReset2: inflateReset2_1,\n\tinflateResetKeep: inflateResetKeep_1,\n\tinflateInit: inflateInit_1,\n\tinflateInit2: inflateInit2_1,\n\tinflate: inflate_2$1,\n\tinflateEnd: inflateEnd_1,\n\tinflateGetHeader: inflateGetHeader_1,\n\tinflateSetDictionary: inflateSetDictionary_1,\n\tinflateInfo: inflateInfo\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction GZheader() {\n  /* true if compressed data believed to be text */\n  this.text       = 0;\n  /* modification time */\n  this.time       = 0;\n  /* extra flags (not used when writing a gzip file) */\n  this.xflags     = 0;\n  /* operating system */\n  this.os         = 0;\n  /* pointer to extra field or Z_NULL if none */\n  this.extra      = null;\n  /* extra field length (valid if extra != Z_NULL) */\n  this.extra_len  = 0; // Actually, we don't need it in JS,\n                       // but leave for few code modifications\n\n  //\n  // Setup limits is not necessary because in js we should not preallocate memory\n  // for inflate use constant limit in 65536 bytes\n  //\n\n  /* space at extra (only when reading header) */\n  // this.extra_max  = 0;\n  /* pointer to zero-terminated file name or Z_NULL */\n  this.name       = '';\n  /* space at name (only when reading header) */\n  // this.name_max   = 0;\n  /* pointer to zero-terminated comment or Z_NULL */\n  this.comment    = '';\n  /* space at comment (only when reading header) */\n  // this.comm_max   = 0;\n  /* true if there was or will be a header crc */\n  this.hcrc       = 0;\n  /* true when done reading gzip header (not used when writing a gzip file) */\n  this.done       = false;\n}\n\nvar gzheader = GZheader;\n\nconst toString = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_NO_FLUSH, Z_FINISH,\n  Z_OK, Z_STREAM_END, Z_NEED_DICT, Z_STREAM_ERROR, Z_DATA_ERROR, Z_MEM_ERROR\n} = constants$2;\n\n/* ===========================================================================*/\n\n\n/**\n * class Inflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[inflate]]\n * and [[inflateRaw]].\n **/\n\n/* internal\n * inflate.chunks -> Array\n *\n * Chunks of output data, if [[Inflate#onData]] not overridden.\n **/\n\n/**\n * Inflate.result -> Uint8Array|String\n *\n * Uncompressed result, generated by default [[Inflate#onData]]\n * and [[Inflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Inflate#push]] with `Z_FINISH` / `true` param).\n **/\n\n/**\n * Inflate.err -> Number\n *\n * Error code after inflate finished. 0 (Z_OK) on success.\n * Should be checked if broken data possible.\n **/\n\n/**\n * Inflate.msg -> String\n *\n * Error message, if [[Inflate.err]] != 0\n **/\n\n\n/**\n * new Inflate(options)\n * - options (Object): zlib inflate options.\n *\n * Creates new inflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `windowBits`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw inflate\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n * By default, when no options set, autodetect deflate/gzip data format via\n * wrapper header.\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako')\n * const chunk1 = new Uint8Array([1,2,3,4,5,6,7,8,9])\n * const chunk2 = new Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * const inflate = new pako.Inflate({ level: 3});\n *\n * inflate.push(chunk1, false);\n * inflate.push(chunk2, true);  // true -> last chunk\n *\n * if (inflate.err) { throw new Error(inflate.err); }\n *\n * console.log(inflate.result);\n * ```\n **/\nfunction Inflate$1(options) {\n  this.options = common.assign({\n    chunkSize: 1024 * 64,\n    windowBits: 15,\n    to: ''\n  }, options || {});\n\n  const opt = this.options;\n\n  // Force window size for `raw` data, if not set directly,\n  // because we have no header for autodetect.\n  if (opt.raw && (opt.windowBits >= 0) && (opt.windowBits < 16)) {\n    opt.windowBits = -opt.windowBits;\n    if (opt.windowBits === 0) { opt.windowBits = -15; }\n  }\n\n  // If `windowBits` not defined (and mode not raw) - set autodetect flag for gzip/deflate\n  if ((opt.windowBits >= 0) && (opt.windowBits < 16) &&\n      !(options && options.windowBits)) {\n    opt.windowBits += 32;\n  }\n\n  // Gzip header has no info about windows size, we can do autodetect only\n  // for deflate. So, if window size not set, force it to max when gzip possible\n  if ((opt.windowBits > 15) && (opt.windowBits < 48)) {\n    // bit 3 (16) -> gzipped data\n    // bit 4 (32) -> autodetect gzip/deflate\n    if ((opt.windowBits & 15) === 0) {\n      opt.windowBits |= 15;\n    }\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm   = new zstream();\n  this.strm.avail_out = 0;\n\n  let status  = inflate_1$2.inflateInit2(\n    this.strm,\n    opt.windowBits\n  );\n\n  if (status !== Z_OK) {\n    throw new Error(messages[status]);\n  }\n\n  this.header = new gzheader();\n\n  inflate_1$2.inflateGetHeader(this.strm, this.header);\n\n  // Setup dictionary\n  if (opt.dictionary) {\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      opt.dictionary = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      opt.dictionary = new Uint8Array(opt.dictionary);\n    }\n    if (opt.raw) { //In raw mode we need to set the dictionary early\n      status = inflate_1$2.inflateSetDictionary(this.strm, opt.dictionary);\n      if (status !== Z_OK) {\n        throw new Error(messages[status]);\n      }\n    }\n  }\n}\n\n/**\n * Inflate#push(data[, flush_mode]) -> Boolean\n * - data (Uint8Array|ArrayBuffer): input data\n * - flush_mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE\n *   flush modes. See constants. Skipped or `false` means Z_NO_FLUSH,\n *   `true` means Z_FINISH.\n *\n * Sends input data to inflate pipe, generating [[Inflate#onData]] calls with\n * new output chunks. Returns `true` on success. If end of stream detected,\n * [[Inflate#onEnd]] will be called.\n *\n * `flush_mode` is not needed for normal operation, because end of stream\n * detected automatically. You may try to use it for advanced things, but\n * this functionality was not tested.\n *\n * On fail call [[Inflate#onEnd]] with error code and return false.\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nInflate$1.prototype.push = function (data, flush_mode) {\n  const strm = this.strm;\n  const chunkSize = this.options.chunkSize;\n  const dictionary = this.options.dictionary;\n  let status, _flush_mode, last_avail_out;\n\n  if (this.ended) return false;\n\n  if (flush_mode === ~~flush_mode) _flush_mode = flush_mode;\n  else _flush_mode = flush_mode === true ? Z_FINISH : Z_NO_FLUSH;\n\n  // Convert data if needed\n  if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  for (;;) {\n    if (strm.avail_out === 0) {\n      strm.output = new Uint8Array(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    status = inflate_1$2.inflate(strm, _flush_mode);\n\n    if (status === Z_NEED_DICT && dictionary) {\n      status = inflate_1$2.inflateSetDictionary(strm, dictionary);\n\n      if (status === Z_OK) {\n        status = inflate_1$2.inflate(strm, _flush_mode);\n      } else if (status === Z_DATA_ERROR) {\n        // Replace code with more verbose\n        status = Z_NEED_DICT;\n      }\n    }\n\n    // Skip snyc markers if more data follows and not raw mode\n    while (strm.avail_in > 0 &&\n           status === Z_STREAM_END &&\n           strm.state.wrap > 0 &&\n           data[strm.next_in] !== 0)\n    {\n      inflate_1$2.inflateReset(strm);\n      status = inflate_1$2.inflate(strm, _flush_mode);\n    }\n\n    switch (status) {\n      case Z_STREAM_ERROR:\n      case Z_DATA_ERROR:\n      case Z_NEED_DICT:\n      case Z_MEM_ERROR:\n        this.onEnd(status);\n        this.ended = true;\n        return false;\n    }\n\n    // Remember real `avail_out` value, because we may patch out buffer content\n    // to align utf8 strings boundaries.\n    last_avail_out = strm.avail_out;\n\n    if (strm.next_out) {\n      if (strm.avail_out === 0 || status === Z_STREAM_END) {\n\n        if (this.options.to === 'string') {\n\n          let next_out_utf8 = strings.utf8border(strm.output, strm.next_out);\n\n          let tail = strm.next_out - next_out_utf8;\n          let utf8str = strings.buf2string(strm.output, next_out_utf8);\n\n          // move tail & realign counters\n          strm.next_out = tail;\n          strm.avail_out = chunkSize - tail;\n          if (tail) strm.output.set(strm.output.subarray(next_out_utf8, next_out_utf8 + tail), 0);\n\n          this.onData(utf8str);\n\n        } else {\n          this.onData(strm.output.length === strm.next_out ? strm.output : strm.output.subarray(0, strm.next_out));\n        }\n      }\n    }\n\n    // Must repeat iteration if out buffer is full\n    if (status === Z_OK && last_avail_out === 0) continue;\n\n    // Finalize if end of stream reached.\n    if (status === Z_STREAM_END) {\n      status = inflate_1$2.inflateEnd(this.strm);\n      this.onEnd(status);\n      this.ended = true;\n      return true;\n    }\n\n    if (strm.avail_in === 0) break;\n  }\n\n  return true;\n};\n\n\n/**\n * Inflate#onData(chunk) -> Void\n * - chunk (Uint8Array|String): output data. When string output requested,\n *   each chunk will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nInflate$1.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Inflate#onEnd(status) -> Void\n * - status (Number): inflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called either after you tell inflate that the input stream is\n * complete (Z_FINISH). By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nInflate$1.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK) {\n    if (this.options.to === 'string') {\n      this.result = this.chunks.join('');\n    } else {\n      this.result = common.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * inflate(data[, options]) -> Uint8Array|String\n * - data (Uint8Array|ArrayBuffer): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Decompress `data` with inflate/ungzip and `options`. Autodetect\n * format via wrapper header by default. That's why we don't provide\n * separate `ungzip` method.\n *\n * Supported options are:\n *\n * - windowBits\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako');\n * const input = pako.deflate(new Uint8Array([1,2,3,4,5,6,7,8,9]));\n * let output;\n *\n * try {\n *   output = pako.inflate(input);\n * } catch (err) {\n *   console.log(err);\n * }\n * ```\n **/\nfunction inflate$1(input, options) {\n  const inflator = new Inflate$1(options);\n\n  inflator.push(input);\n\n  // That will never happens, if you don't cheat with options :)\n  if (inflator.err) throw inflator.msg || messages[inflator.err];\n\n  return inflator.result;\n}\n\n\n/**\n * inflateRaw(data[, options]) -> Uint8Array|String\n * - data (Uint8Array|ArrayBuffer): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * The same as [[inflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction inflateRaw$1(input, options) {\n  options = options || {};\n  options.raw = true;\n  return inflate$1(input, options);\n}\n\n\n/**\n * ungzip(data[, options]) -> Uint8Array|String\n * - data (Uint8Array|ArrayBuffer): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Just shortcut to [[inflate]], because it autodetects format\n * by header.content. Done for convenience.\n **/\n\n\nvar Inflate_1$1 = Inflate$1;\nvar inflate_2 = inflate$1;\nvar inflateRaw_1$1 = inflateRaw$1;\nvar ungzip$1 = inflate$1;\nvar constants = constants$2;\n\nvar inflate_1$1 = {\n\tInflate: Inflate_1$1,\n\tinflate: inflate_2,\n\tinflateRaw: inflateRaw_1$1,\n\tungzip: ungzip$1,\n\tconstants: constants\n};\n\nconst { Deflate, deflate, deflateRaw, gzip } = deflate_1$1;\n\nconst { Inflate, inflate, inflateRaw, ungzip } = inflate_1$1;\n\n\n\nvar Deflate_1 = Deflate;\nvar deflate_1 = deflate;\nvar deflateRaw_1 = deflateRaw;\nvar gzip_1 = gzip;\nvar Inflate_1 = Inflate;\nvar inflate_1 = inflate;\nvar inflateRaw_1 = inflateRaw;\nvar ungzip_1 = ungzip;\nvar constants_1 = constants$2;\n\nvar pako = {\n\tDeflate: Deflate_1,\n\tdeflate: deflate_1,\n\tdeflateRaw: deflateRaw_1,\n\tgzip: gzip_1,\n\tInflate: Inflate_1,\n\tinflate: inflate_1,\n\tinflateRaw: inflateRaw_1,\n\tungzip: ungzip_1,\n\tconstants: constants_1\n};\n\nexport { Deflate_1 as Deflate, Inflate_1 as Inflate, constants_1 as constants, pako as default, deflate_1 as deflate, deflateRaw_1 as deflateRaw, gzip_1 as gzip, inflate_1 as inflate, inflateRaw_1 as inflateRaw, ungzip_1 as ungzip };\n","export default function(x) {\n  return x;\n}\n","import identity from \"./identity.js\";\n\nexport default function(transform) {\n  if (transform == null) return identity;\n  var x0,\n      y0,\n      kx = transform.scale[0],\n      ky = transform.scale[1],\n      dx = transform.translate[0],\n      dy = transform.translate[1];\n  return function(input, i) {\n    if (!i) x0 = y0 = 0;\n    var j = 2, n = input.length, output = new Array(n);\n    output[0] = (x0 += input[0]) * kx + dx;\n    output[1] = (y0 += input[1]) * ky + dy;\n    while (j < n) output[j] = input[j], ++j;\n    return output;\n  };\n}\n","export default function(array, n) {\n  var t, j = array.length, i = j - n;\n  while (i < --j) t = array[i], array[i++] = array[j], array[j] = t;\n}\n","import reverse from \"./reverse.js\";\nimport transform from \"./transform.js\";\n\nexport default function(topology, o) {\n  if (typeof o === \"string\") o = topology.objects[o];\n  return o.type === \"GeometryCollection\"\n      ? {type: \"FeatureCollection\", features: o.geometries.map(function(o) { return feature(topology, o); })}\n      : feature(topology, o);\n}\n\nfunction feature(topology, o) {\n  var id = o.id,\n      bbox = o.bbox,\n      properties = o.properties == null ? {} : o.properties,\n      geometry = object(topology, o);\n  return id == null && bbox == null ? {type: \"Feature\", properties: properties, geometry: geometry}\n      : bbox == null ? {type: \"Feature\", id: id, properties: properties, geometry: geometry}\n      : {type: \"Feature\", id: id, bbox: bbox, properties: properties, geometry: geometry};\n}\n\nexport function object(topology, o) {\n  var transformPoint = transform(topology.transform),\n      arcs = topology.arcs;\n\n  function arc(i, points) {\n    if (points.length) points.pop();\n    for (var a = arcs[i < 0 ? ~i : i], k = 0, n = a.length; k < n; ++k) {\n      points.push(transformPoint(a[k], k));\n    }\n    if (i < 0) reverse(points, n);\n  }\n\n  function point(p) {\n    return transformPoint(p);\n  }\n\n  function line(arcs) {\n    var points = [];\n    for (var i = 0, n = arcs.length; i < n; ++i) arc(arcs[i], points);\n    if (points.length < 2) points.push(points[0]); // This should never happen per the specification.\n    return points;\n  }\n\n  function ring(arcs) {\n    var points = line(arcs);\n    while (points.length < 4) points.push(points[0]); // This may happen if an arc has only two points.\n    return points;\n  }\n\n  function polygon(arcs) {\n    return arcs.map(ring);\n  }\n\n  function geometry(o) {\n    var type = o.type, coordinates;\n    switch (type) {\n      case \"GeometryCollection\": return {type: type, geometries: o.geometries.map(geometry)};\n      case \"Point\": coordinates = point(o.coordinates); break;\n      case \"MultiPoint\": coordinates = o.coordinates.map(point); break;\n      case \"LineString\": coordinates = line(o.arcs); break;\n      case \"MultiLineString\": coordinates = o.arcs.map(line); break;\n      case \"Polygon\": coordinates = polygon(o.arcs); break;\n      case \"MultiPolygon\": coordinates = o.arcs.map(polygon); break;\n      default: return null;\n    }\n    return {type: type, coordinates: coordinates};\n  }\n\n  return geometry(o);\n}\n","\"use strict\";\nexport var PipsMode;\n(function (PipsMode) {\n    PipsMode[\"Range\"] = \"range\";\n    PipsMode[\"Steps\"] = \"steps\";\n    PipsMode[\"Positions\"] = \"positions\";\n    PipsMode[\"Count\"] = \"count\";\n    PipsMode[\"Values\"] = \"values\";\n})(PipsMode || (PipsMode = {}));\nexport var PipsType;\n(function (PipsType) {\n    PipsType[PipsType[\"None\"] = -1] = \"None\";\n    PipsType[PipsType[\"NoValue\"] = 0] = \"NoValue\";\n    PipsType[PipsType[\"LargeValue\"] = 1] = \"LargeValue\";\n    PipsType[PipsType[\"SmallValue\"] = 2] = \"SmallValue\";\n})(PipsType || (PipsType = {}));\n//region Helper Methods\nfunction isValidFormatter(entry) {\n    return isValidPartialFormatter(entry) && typeof entry.from === \"function\";\n}\nfunction isValidPartialFormatter(entry) {\n    // partial formatters only need a to function and not a from function\n    return typeof entry === \"object\" && typeof entry.to === \"function\";\n}\nfunction removeElement(el) {\n    el.parentElement.removeChild(el);\n}\nfunction isSet(value) {\n    return value !== null && value !== undefined;\n}\n// Bindable version\nfunction preventDefault(e) {\n    e.preventDefault();\n}\n// Removes duplicates from an array.\nfunction unique(array) {\n    return array.filter(function (a) {\n        return !this[a] ? (this[a] = true) : false;\n    }, {});\n}\n// Round a value to the closest 'to'.\nfunction closest(value, to) {\n    return Math.round(value / to) * to;\n}\n// Current position of an element relative to the document.\nfunction offset(elem, orientation) {\n    var rect = elem.getBoundingClientRect();\n    var doc = elem.ownerDocument;\n    var docElem = doc.documentElement;\n    var pageOffset = getPageOffset(doc);\n    // getBoundingClientRect contains left scroll in Chrome on Android.\n    // I haven't found a feature detection that proves this. Worst case\n    // scenario on mis-match: the 'tap' feature on horizontal sliders breaks.\n    if (/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)) {\n        pageOffset.x = 0;\n    }\n    return orientation ? rect.top + pageOffset.y - docElem.clientTop : rect.left + pageOffset.x - docElem.clientLeft;\n}\n// Checks whether a value is numerical.\nfunction isNumeric(a) {\n    return typeof a === \"number\" && !isNaN(a) && isFinite(a);\n}\n// Sets a class and removes it after [duration] ms.\nfunction addClassFor(element, className, duration) {\n    if (duration > 0) {\n        addClass(element, className);\n        setTimeout(function () {\n            removeClass(element, className);\n        }, duration);\n    }\n}\n// Limits a value to 0 - 100\nfunction limit(a) {\n    return Math.max(Math.min(a, 100), 0);\n}\n// Wraps a variable as an array, if it isn't one yet.\n// Note that an input array is returned by reference!\nfunction asArray(a) {\n    return Array.isArray(a) ? a : [a];\n}\n// Counts decimals\nfunction countDecimals(numStr) {\n    numStr = String(numStr);\n    var pieces = numStr.split(\".\");\n    return pieces.length > 1 ? pieces[1].length : 0;\n}\n// http://youmightnotneedjquery.com/#add_class\nfunction addClass(el, className) {\n    if (el.classList && !/\\s/.test(className)) {\n        el.classList.add(className);\n    }\n    else {\n        el.className += \" \" + className;\n    }\n}\n// http://youmightnotneedjquery.com/#remove_class\nfunction removeClass(el, className) {\n    if (el.classList && !/\\s/.test(className)) {\n        el.classList.remove(className);\n    }\n    else {\n        el.className = el.className.replace(new RegExp(\"(^|\\\\b)\" + className.split(\" \").join(\"|\") + \"(\\\\b|$)\", \"gi\"), \" \");\n    }\n}\n// https://plainjs.com/javascript/attributes/adding-removing-and-testing-for-classes-9/\nfunction hasClass(el, className) {\n    return el.classList ? el.classList.contains(className) : new RegExp(\"\\\\b\" + className + \"\\\\b\").test(el.className);\n}\n// https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollY#Notes\nfunction getPageOffset(doc) {\n    var supportPageOffset = window.pageXOffset !== undefined;\n    var isCSS1Compat = (doc.compatMode || \"\") === \"CSS1Compat\";\n    var x = supportPageOffset\n        ? window.pageXOffset\n        : isCSS1Compat\n            ? doc.documentElement.scrollLeft\n            : doc.body.scrollLeft;\n    var y = supportPageOffset\n        ? window.pageYOffset\n        : isCSS1Compat\n            ? doc.documentElement.scrollTop\n            : doc.body.scrollTop;\n    return {\n        x: x,\n        y: y,\n    };\n}\n// we provide a function to compute constants instead\n// of accessing window.* as soon as the module needs it\n// so that we do not compute anything if not needed\nfunction getActions() {\n    // Determine the events to bind. IE11 implements pointerEvents without\n    // a prefix, which breaks compatibility with the IE10 implementation.\n    return window.navigator.pointerEnabled\n        ? {\n            start: \"pointerdown\",\n            move: \"pointermove\",\n            end: \"pointerup\",\n        }\n        : window.navigator.msPointerEnabled\n            ? {\n                start: \"MSPointerDown\",\n                move: \"MSPointerMove\",\n                end: \"MSPointerUp\",\n            }\n            : {\n                start: \"mousedown touchstart\",\n                move: \"mousemove touchmove\",\n                end: \"mouseup touchend\",\n            };\n}\n// https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n// Issue #785\nfunction getSupportsPassive() {\n    var supportsPassive = false;\n    /* eslint-disable */\n    try {\n        var opts = Object.defineProperty({}, \"passive\", {\n            get: function () {\n                supportsPassive = true;\n            },\n        });\n        // @ts-ignore\n        window.addEventListener(\"test\", null, opts);\n    }\n    catch (e) { }\n    /* eslint-enable */\n    return supportsPassive;\n}\nfunction getSupportsTouchActionNone() {\n    return window.CSS && CSS.supports && CSS.supports(\"touch-action\", \"none\");\n}\n//endregion\n//region Range Calculation\n// Determine the size of a sub-range in relation to a full range.\nfunction subRangeRatio(pa, pb) {\n    return 100 / (pb - pa);\n}\n// (percentage) How many percent is this value of this range?\nfunction fromPercentage(range, value, startRange) {\n    return (value * 100) / (range[startRange + 1] - range[startRange]);\n}\n// (percentage) Where is this value on this range?\nfunction toPercentage(range, value) {\n    return fromPercentage(range, range[0] < 0 ? value + Math.abs(range[0]) : value - range[0], 0);\n}\n// (value) How much is this percentage on this range?\nfunction isPercentage(range, value) {\n    return (value * (range[1] - range[0])) / 100 + range[0];\n}\nfunction getJ(value, arr) {\n    var j = 1;\n    while (value >= arr[j]) {\n        j += 1;\n    }\n    return j;\n}\n// (percentage) Input a value, find where, on a scale of 0-100, it applies.\nfunction toStepping(xVal, xPct, value) {\n    if (value >= xVal.slice(-1)[0]) {\n        return 100;\n    }\n    var j = getJ(value, xVal);\n    var va = xVal[j - 1];\n    var vb = xVal[j];\n    var pa = xPct[j - 1];\n    var pb = xPct[j];\n    return pa + toPercentage([va, vb], value) / subRangeRatio(pa, pb);\n}\n// (value) Input a percentage, find where it is on the specified range.\nfunction fromStepping(xVal, xPct, value) {\n    // There is no range group that fits 100\n    if (value >= 100) {\n        return xVal.slice(-1)[0];\n    }\n    var j = getJ(value, xPct);\n    var va = xVal[j - 1];\n    var vb = xVal[j];\n    var pa = xPct[j - 1];\n    var pb = xPct[j];\n    return isPercentage([va, vb], (value - pa) * subRangeRatio(pa, pb));\n}\n// (percentage) Get the step that applies at a certain value.\nfunction getStep(xPct, xSteps, snap, value) {\n    if (value === 100) {\n        return value;\n    }\n    var j = getJ(value, xPct);\n    var a = xPct[j - 1];\n    var b = xPct[j];\n    // If 'snap' is set, steps are used as fixed points on the slider.\n    if (snap) {\n        // Find the closest position, a or b.\n        if (value - a > (b - a) / 2) {\n            return b;\n        }\n        return a;\n    }\n    if (!xSteps[j - 1]) {\n        return value;\n    }\n    return xPct[j - 1] + closest(value - xPct[j - 1], xSteps[j - 1]);\n}\n//endregion\n//region Spectrum\nvar Spectrum = /** @class */ (function () {\n    function Spectrum(entry, snap, singleStep) {\n        this.xPct = [];\n        this.xVal = [];\n        this.xSteps = [];\n        this.xNumSteps = [];\n        this.xHighestCompleteStep = [];\n        this.xSteps = [singleStep || false];\n        this.xNumSteps = [false];\n        this.snap = snap;\n        var index;\n        var ordered = [];\n        // Map the object keys to an array.\n        Object.keys(entry).forEach(function (index) {\n            ordered.push([asArray(entry[index]), index]);\n        });\n        // Sort all entries by value (numeric sort).\n        ordered.sort(function (a, b) {\n            return a[0][0] - b[0][0];\n        });\n        // Convert all entries to subranges.\n        for (index = 0; index < ordered.length; index++) {\n            this.handleEntryPoint(ordered[index][1], ordered[index][0]);\n        }\n        // Store the actual step values.\n        // xSteps is sorted in the same order as xPct and xVal.\n        this.xNumSteps = this.xSteps.slice(0);\n        // Convert all numeric steps to the percentage of the subrange they represent.\n        for (index = 0; index < this.xNumSteps.length; index++) {\n            this.handleStepPoint(index, this.xNumSteps[index]);\n        }\n    }\n    Spectrum.prototype.getDistance = function (value) {\n        var distances = [];\n        for (var index = 0; index < this.xNumSteps.length - 1; index++) {\n            distances[index] = fromPercentage(this.xVal, value, index);\n        }\n        return distances;\n    };\n    // Calculate the percentual distance over the whole scale of ranges.\n    // direction: 0 = backwards / 1 = forwards\n    Spectrum.prototype.getAbsoluteDistance = function (value, distances, direction) {\n        var xPct_index = 0;\n        // Calculate range where to start calculation\n        if (value < this.xPct[this.xPct.length - 1]) {\n            while (value > this.xPct[xPct_index + 1]) {\n                xPct_index++;\n            }\n        }\n        else if (value === this.xPct[this.xPct.length - 1]) {\n            xPct_index = this.xPct.length - 2;\n        }\n        // If looking backwards and the value is exactly at a range separator then look one range further\n        if (!direction && value === this.xPct[xPct_index + 1]) {\n            xPct_index++;\n        }\n        if (distances === null) {\n            distances = [];\n        }\n        var start_factor;\n        var rest_factor = 1;\n        var rest_rel_distance = distances[xPct_index];\n        var range_pct = 0;\n        var rel_range_distance = 0;\n        var abs_distance_counter = 0;\n        var range_counter = 0;\n        // Calculate what part of the start range the value is\n        if (direction) {\n            start_factor = (value - this.xPct[xPct_index]) / (this.xPct[xPct_index + 1] - this.xPct[xPct_index]);\n        }\n        else {\n            start_factor = (this.xPct[xPct_index + 1] - value) / (this.xPct[xPct_index + 1] - this.xPct[xPct_index]);\n        }\n        // Do until the complete distance across ranges is calculated\n        while (rest_rel_distance > 0) {\n            // Calculate the percentage of total range\n            range_pct = this.xPct[xPct_index + 1 + range_counter] - this.xPct[xPct_index + range_counter];\n            // Detect if the margin, padding or limit is larger then the current range and calculate\n            if (distances[xPct_index + range_counter] * rest_factor + 100 - start_factor * 100 > 100) {\n                // If larger then take the percentual distance of the whole range\n                rel_range_distance = range_pct * start_factor;\n                // Rest factor of relative percentual distance still to be calculated\n                rest_factor = (rest_rel_distance - 100 * start_factor) / distances[xPct_index + range_counter];\n                // Set start factor to 1 as for next range it does not apply.\n                start_factor = 1;\n            }\n            else {\n                // If smaller or equal then take the percentual distance of the calculate percentual part of that range\n                rel_range_distance = ((distances[xPct_index + range_counter] * range_pct) / 100) * rest_factor;\n                // No rest left as the rest fits in current range\n                rest_factor = 0;\n            }\n            if (direction) {\n                abs_distance_counter = abs_distance_counter - rel_range_distance;\n                // Limit range to first range when distance becomes outside of minimum range\n                if (this.xPct.length + range_counter >= 1) {\n                    range_counter--;\n                }\n            }\n            else {\n                abs_distance_counter = abs_distance_counter + rel_range_distance;\n                // Limit range to last range when distance becomes outside of maximum range\n                if (this.xPct.length - range_counter >= 1) {\n                    range_counter++;\n                }\n            }\n            // Rest of relative percentual distance still to be calculated\n            rest_rel_distance = distances[xPct_index + range_counter] * rest_factor;\n        }\n        return value + abs_distance_counter;\n    };\n    Spectrum.prototype.toStepping = function (value) {\n        value = toStepping(this.xVal, this.xPct, value);\n        return value;\n    };\n    Spectrum.prototype.fromStepping = function (value) {\n        return fromStepping(this.xVal, this.xPct, value);\n    };\n    Spectrum.prototype.getStep = function (value) {\n        value = getStep(this.xPct, this.xSteps, this.snap, value);\n        return value;\n    };\n    Spectrum.prototype.getDefaultStep = function (value, isDown, size) {\n        var j = getJ(value, this.xPct);\n        // When at the top or stepping down, look at the previous sub-range\n        if (value === 100 || (isDown && value === this.xPct[j - 1])) {\n            j = Math.max(j - 1, 1);\n        }\n        return (this.xVal[j] - this.xVal[j - 1]) / size;\n    };\n    Spectrum.prototype.getNearbySteps = function (value) {\n        var j = getJ(value, this.xPct);\n        return {\n            stepBefore: {\n                startValue: this.xVal[j - 2],\n                step: this.xNumSteps[j - 2],\n                highestStep: this.xHighestCompleteStep[j - 2],\n            },\n            thisStep: {\n                startValue: this.xVal[j - 1],\n                step: this.xNumSteps[j - 1],\n                highestStep: this.xHighestCompleteStep[j - 1],\n            },\n            stepAfter: {\n                startValue: this.xVal[j],\n                step: this.xNumSteps[j],\n                highestStep: this.xHighestCompleteStep[j],\n            },\n        };\n    };\n    Spectrum.prototype.countStepDecimals = function () {\n        var stepDecimals = this.xNumSteps.map(countDecimals);\n        return Math.max.apply(null, stepDecimals);\n    };\n    Spectrum.prototype.hasNoSize = function () {\n        return this.xVal[0] === this.xVal[this.xVal.length - 1];\n    };\n    // Outside testing\n    Spectrum.prototype.convert = function (value) {\n        return this.getStep(this.toStepping(value));\n    };\n    Spectrum.prototype.handleEntryPoint = function (index, value) {\n        var percentage;\n        // Covert min/max syntax to 0 and 100.\n        if (index === \"min\") {\n            percentage = 0;\n        }\n        else if (index === \"max\") {\n            percentage = 100;\n        }\n        else {\n            percentage = parseFloat(index);\n        }\n        // Check for correct input.\n        if (!isNumeric(percentage) || !isNumeric(value[0])) {\n            throw new Error(\"noUiSlider: 'range' value isn't numeric.\");\n        }\n        // Store values.\n        this.xPct.push(percentage);\n        this.xVal.push(value[0]);\n        var value1 = Number(value[1]);\n        // NaN will evaluate to false too, but to keep\n        // logging clear, set step explicitly. Make sure\n        // not to override the 'step' setting with false.\n        if (!percentage) {\n            if (!isNaN(value1)) {\n                this.xSteps[0] = value1;\n            }\n        }\n        else {\n            this.xSteps.push(isNaN(value1) ? false : value1);\n        }\n        this.xHighestCompleteStep.push(0);\n    };\n    Spectrum.prototype.handleStepPoint = function (i, n) {\n        // Ignore 'false' stepping.\n        if (!n) {\n            return;\n        }\n        // Step over zero-length ranges (#948);\n        if (this.xVal[i] === this.xVal[i + 1]) {\n            this.xSteps[i] = this.xHighestCompleteStep[i] = this.xVal[i];\n            return;\n        }\n        // Factor to range ratio\n        this.xSteps[i] =\n            fromPercentage([this.xVal[i], this.xVal[i + 1]], n, 0) / subRangeRatio(this.xPct[i], this.xPct[i + 1]);\n        var totalSteps = (this.xVal[i + 1] - this.xVal[i]) / this.xNumSteps[i];\n        var highestStep = Math.ceil(Number(totalSteps.toFixed(3)) - 1);\n        var step = this.xVal[i] + this.xNumSteps[i] * highestStep;\n        this.xHighestCompleteStep[i] = step;\n    };\n    return Spectrum;\n}());\n//endregion\n//region Options\n/*\tEvery input option is tested and parsed. This will prevent\n    endless validation in internal methods. These tests are\n    structured with an item for every option available. An\n    option can be marked as required by setting the 'r' flag.\n    The testing function is provided with three arguments:\n        - The provided value for the option;\n        - A reference to the options object;\n        - The name for the option;\n\n    The testing function returns false when an error is detected,\n    or true when everything is OK. It can also modify the option\n    object, to make sure all values can be correctly looped elsewhere. */\n//region Defaults\nvar defaultFormatter = {\n    to: function (value) {\n        return value === undefined ? \"\" : value.toFixed(2);\n    },\n    from: Number,\n};\nvar cssClasses = {\n    target: \"target\",\n    base: \"base\",\n    origin: \"origin\",\n    handle: \"handle\",\n    handleLower: \"handle-lower\",\n    handleUpper: \"handle-upper\",\n    touchArea: \"touch-area\",\n    horizontal: \"horizontal\",\n    vertical: \"vertical\",\n    background: \"background\",\n    connect: \"connect\",\n    connects: \"connects\",\n    ltr: \"ltr\",\n    rtl: \"rtl\",\n    textDirectionLtr: \"txt-dir-ltr\",\n    textDirectionRtl: \"txt-dir-rtl\",\n    draggable: \"draggable\",\n    drag: \"state-drag\",\n    tap: \"state-tap\",\n    active: \"active\",\n    tooltip: \"tooltip\",\n    pips: \"pips\",\n    pipsHorizontal: \"pips-horizontal\",\n    pipsVertical: \"pips-vertical\",\n    marker: \"marker\",\n    markerHorizontal: \"marker-horizontal\",\n    markerVertical: \"marker-vertical\",\n    markerNormal: \"marker-normal\",\n    markerLarge: \"marker-large\",\n    markerSub: \"marker-sub\",\n    value: \"value\",\n    valueHorizontal: \"value-horizontal\",\n    valueVertical: \"value-vertical\",\n    valueNormal: \"value-normal\",\n    valueLarge: \"value-large\",\n    valueSub: \"value-sub\",\n};\n// Namespaces of internal event listeners\nvar INTERNAL_EVENT_NS = {\n    tooltips: \".__tooltips\",\n    aria: \".__aria\",\n};\n//endregion\nfunction testStep(parsed, entry) {\n    if (!isNumeric(entry)) {\n        throw new Error(\"noUiSlider: 'step' is not numeric.\");\n    }\n    // The step option can still be used to set stepping\n    // for linear sliders. Overwritten if set in 'range'.\n    parsed.singleStep = entry;\n}\nfunction testKeyboardPageMultiplier(parsed, entry) {\n    if (!isNumeric(entry)) {\n        throw new Error(\"noUiSlider: 'keyboardPageMultiplier' is not numeric.\");\n    }\n    parsed.keyboardPageMultiplier = entry;\n}\nfunction testKeyboardMultiplier(parsed, entry) {\n    if (!isNumeric(entry)) {\n        throw new Error(\"noUiSlider: 'keyboardMultiplier' is not numeric.\");\n    }\n    parsed.keyboardMultiplier = entry;\n}\nfunction testKeyboardDefaultStep(parsed, entry) {\n    if (!isNumeric(entry)) {\n        throw new Error(\"noUiSlider: 'keyboardDefaultStep' is not numeric.\");\n    }\n    parsed.keyboardDefaultStep = entry;\n}\nfunction testRange(parsed, entry) {\n    // Filter incorrect input.\n    if (typeof entry !== \"object\" || Array.isArray(entry)) {\n        throw new Error(\"noUiSlider: 'range' is not an object.\");\n    }\n    // Catch missing start or end.\n    if (entry.min === undefined || entry.max === undefined) {\n        throw new Error(\"noUiSlider: Missing 'min' or 'max' in 'range'.\");\n    }\n    parsed.spectrum = new Spectrum(entry, parsed.snap || false, parsed.singleStep);\n}\nfunction testStart(parsed, entry) {\n    entry = asArray(entry);\n    // Validate input. Values aren't tested, as the public .val method\n    // will always provide a valid location.\n    if (!Array.isArray(entry) || !entry.length) {\n        throw new Error(\"noUiSlider: 'start' option is incorrect.\");\n    }\n    // Store the number of handles.\n    parsed.handles = entry.length;\n    // When the slider is initialized, the .val method will\n    // be called with the start options.\n    parsed.start = entry;\n}\nfunction testSnap(parsed, entry) {\n    if (typeof entry !== \"boolean\") {\n        throw new Error(\"noUiSlider: 'snap' option must be a boolean.\");\n    }\n    // Enforce 100% stepping within subranges.\n    parsed.snap = entry;\n}\nfunction testAnimate(parsed, entry) {\n    if (typeof entry !== \"boolean\") {\n        throw new Error(\"noUiSlider: 'animate' option must be a boolean.\");\n    }\n    // Enforce 100% stepping within subranges.\n    parsed.animate = entry;\n}\nfunction testAnimationDuration(parsed, entry) {\n    if (typeof entry !== \"number\") {\n        throw new Error(\"noUiSlider: 'animationDuration' option must be a number.\");\n    }\n    parsed.animationDuration = entry;\n}\nfunction testConnect(parsed, entry) {\n    var connect = [false];\n    var i;\n    // Map legacy options\n    if (entry === \"lower\") {\n        entry = [true, false];\n    }\n    else if (entry === \"upper\") {\n        entry = [false, true];\n    }\n    // Handle boolean options\n    if (entry === true || entry === false) {\n        for (i = 1; i < parsed.handles; i++) {\n            connect.push(entry);\n        }\n        connect.push(false);\n    }\n    // Reject invalid input\n    else if (!Array.isArray(entry) || !entry.length || entry.length !== parsed.handles + 1) {\n        throw new Error(\"noUiSlider: 'connect' option doesn't match handle count.\");\n    }\n    else {\n        connect = entry;\n    }\n    parsed.connect = connect;\n}\nfunction testOrientation(parsed, entry) {\n    // Set orientation to an a numerical value for easy\n    // array selection.\n    switch (entry) {\n        case \"horizontal\":\n            parsed.ort = 0;\n            break;\n        case \"vertical\":\n            parsed.ort = 1;\n            break;\n        default:\n            throw new Error(\"noUiSlider: 'orientation' option is invalid.\");\n    }\n}\nfunction testMargin(parsed, entry) {\n    if (!isNumeric(entry)) {\n        throw new Error(\"noUiSlider: 'margin' option must be numeric.\");\n    }\n    // Issue #582\n    if (entry === 0) {\n        return;\n    }\n    parsed.margin = parsed.spectrum.getDistance(entry);\n}\nfunction testLimit(parsed, entry) {\n    if (!isNumeric(entry)) {\n        throw new Error(\"noUiSlider: 'limit' option must be numeric.\");\n    }\n    parsed.limit = parsed.spectrum.getDistance(entry);\n    if (!parsed.limit || parsed.handles < 2) {\n        throw new Error(\"noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.\");\n    }\n}\nfunction testPadding(parsed, entry) {\n    var index;\n    if (!isNumeric(entry) && !Array.isArray(entry)) {\n        throw new Error(\"noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.\");\n    }\n    if (Array.isArray(entry) && !(entry.length === 2 || isNumeric(entry[0]) || isNumeric(entry[1]))) {\n        throw new Error(\"noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.\");\n    }\n    if (entry === 0) {\n        return;\n    }\n    if (!Array.isArray(entry)) {\n        entry = [entry, entry];\n    }\n    // 'getDistance' returns false for invalid values.\n    parsed.padding = [parsed.spectrum.getDistance(entry[0]), parsed.spectrum.getDistance(entry[1])];\n    for (index = 0; index < parsed.spectrum.xNumSteps.length - 1; index++) {\n        // last \"range\" can't contain step size as it is purely an endpoint.\n        if (parsed.padding[0][index] < 0 || parsed.padding[1][index] < 0) {\n            throw new Error(\"noUiSlider: 'padding' option must be a positive number(s).\");\n        }\n    }\n    var totalPadding = entry[0] + entry[1];\n    var firstValue = parsed.spectrum.xVal[0];\n    var lastValue = parsed.spectrum.xVal[parsed.spectrum.xVal.length - 1];\n    if (totalPadding / (lastValue - firstValue) > 1) {\n        throw new Error(\"noUiSlider: 'padding' option must not exceed 100% of the range.\");\n    }\n}\nfunction testDirection(parsed, entry) {\n    // Set direction as a numerical value for easy parsing.\n    // Invert connection for RTL sliders, so that the proper\n    // handles get the connect/background classes.\n    switch (entry) {\n        case \"ltr\":\n            parsed.dir = 0;\n            break;\n        case \"rtl\":\n            parsed.dir = 1;\n            break;\n        default:\n            throw new Error(\"noUiSlider: 'direction' option was not recognized.\");\n    }\n}\nfunction testBehaviour(parsed, entry) {\n    // Make sure the input is a string.\n    if (typeof entry !== \"string\") {\n        throw new Error(\"noUiSlider: 'behaviour' must be a string containing options.\");\n    }\n    // Check if the string contains any keywords.\n    // None are required.\n    var tap = entry.indexOf(\"tap\") >= 0;\n    var drag = entry.indexOf(\"drag\") >= 0;\n    var fixed = entry.indexOf(\"fixed\") >= 0;\n    var snap = entry.indexOf(\"snap\") >= 0;\n    var hover = entry.indexOf(\"hover\") >= 0;\n    var unconstrained = entry.indexOf(\"unconstrained\") >= 0;\n    var invertConnects = entry.indexOf(\"invert-connects\") >= 0;\n    var dragAll = entry.indexOf(\"drag-all\") >= 0;\n    var smoothSteps = entry.indexOf(\"smooth-steps\") >= 0;\n    if (fixed) {\n        if (parsed.handles !== 2) {\n            throw new Error(\"noUiSlider: 'fixed' behaviour must be used with 2 handles\");\n        }\n        // Use margin to enforce fixed state\n        testMargin(parsed, parsed.start[1] - parsed.start[0]);\n    }\n    if (invertConnects && parsed.handles !== 2) {\n        throw new Error(\"noUiSlider: 'invert-connects' behaviour must be used with 2 handles\");\n    }\n    if (unconstrained && (parsed.margin || parsed.limit)) {\n        throw new Error(\"noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit\");\n    }\n    parsed.events = {\n        tap: tap || snap,\n        drag: drag,\n        dragAll: dragAll,\n        smoothSteps: smoothSteps,\n        fixed: fixed,\n        snap: snap,\n        hover: hover,\n        unconstrained: unconstrained,\n        invertConnects: invertConnects,\n    };\n}\nfunction testTooltips(parsed, entry) {\n    if (entry === false) {\n        return;\n    }\n    if (entry === true || isValidPartialFormatter(entry)) {\n        parsed.tooltips = [];\n        for (var i = 0; i < parsed.handles; i++) {\n            parsed.tooltips.push(entry);\n        }\n    }\n    else {\n        entry = asArray(entry);\n        if (entry.length !== parsed.handles) {\n            throw new Error(\"noUiSlider: must pass a formatter for all handles.\");\n        }\n        entry.forEach(function (formatter) {\n            if (typeof formatter !== \"boolean\" && !isValidPartialFormatter(formatter)) {\n                throw new Error(\"noUiSlider: 'tooltips' must be passed a formatter or 'false'.\");\n            }\n        });\n        parsed.tooltips = entry;\n    }\n}\nfunction testHandleAttributes(parsed, entry) {\n    if (entry.length !== parsed.handles) {\n        throw new Error(\"noUiSlider: must pass a attributes for all handles.\");\n    }\n    parsed.handleAttributes = entry;\n}\nfunction testAriaFormat(parsed, entry) {\n    if (!isValidPartialFormatter(entry)) {\n        throw new Error(\"noUiSlider: 'ariaFormat' requires 'to' method.\");\n    }\n    parsed.ariaFormat = entry;\n}\nfunction testFormat(parsed, entry) {\n    if (!isValidFormatter(entry)) {\n        throw new Error(\"noUiSlider: 'format' requires 'to' and 'from' methods.\");\n    }\n    parsed.format = entry;\n}\nfunction testKeyboardSupport(parsed, entry) {\n    if (typeof entry !== \"boolean\") {\n        throw new Error(\"noUiSlider: 'keyboardSupport' option must be a boolean.\");\n    }\n    parsed.keyboardSupport = entry;\n}\nfunction testDocumentElement(parsed, entry) {\n    // This is an advanced option. Passed values are used without validation.\n    parsed.documentElement = entry;\n}\nfunction testCssPrefix(parsed, entry) {\n    if (typeof entry !== \"string\" && entry !== false) {\n        throw new Error(\"noUiSlider: 'cssPrefix' must be a string or `false`.\");\n    }\n    parsed.cssPrefix = entry;\n}\nfunction testCssClasses(parsed, entry) {\n    if (typeof entry !== \"object\") {\n        throw new Error(\"noUiSlider: 'cssClasses' must be an object.\");\n    }\n    if (typeof parsed.cssPrefix === \"string\") {\n        parsed.cssClasses = {};\n        Object.keys(entry).forEach(function (key) {\n            parsed.cssClasses[key] = parsed.cssPrefix + entry[key];\n        });\n    }\n    else {\n        parsed.cssClasses = entry;\n    }\n}\n// Test all developer settings and parse to assumption-safe values.\nfunction testOptions(options) {\n    // To prove a fix for #537, freeze options here.\n    // If the object is modified, an error will be thrown.\n    // Object.freeze(options);\n    var parsed = {\n        margin: null,\n        limit: null,\n        padding: null,\n        animate: true,\n        animationDuration: 300,\n        ariaFormat: defaultFormatter,\n        format: defaultFormatter,\n    };\n    // Tests are executed in the order they are presented here.\n    var tests = {\n        step: { r: false, t: testStep },\n        keyboardPageMultiplier: { r: false, t: testKeyboardPageMultiplier },\n        keyboardMultiplier: { r: false, t: testKeyboardMultiplier },\n        keyboardDefaultStep: { r: false, t: testKeyboardDefaultStep },\n        start: { r: true, t: testStart },\n        connect: { r: true, t: testConnect },\n        direction: { r: true, t: testDirection },\n        snap: { r: false, t: testSnap },\n        animate: { r: false, t: testAnimate },\n        animationDuration: { r: false, t: testAnimationDuration },\n        range: { r: true, t: testRange },\n        orientation: { r: false, t: testOrientation },\n        margin: { r: false, t: testMargin },\n        limit: { r: false, t: testLimit },\n        padding: { r: false, t: testPadding },\n        behaviour: { r: true, t: testBehaviour },\n        ariaFormat: { r: false, t: testAriaFormat },\n        format: { r: false, t: testFormat },\n        tooltips: { r: false, t: testTooltips },\n        keyboardSupport: { r: true, t: testKeyboardSupport },\n        documentElement: { r: false, t: testDocumentElement },\n        cssPrefix: { r: true, t: testCssPrefix },\n        cssClasses: { r: true, t: testCssClasses },\n        handleAttributes: { r: false, t: testHandleAttributes },\n    };\n    var defaults = {\n        connect: false,\n        direction: \"ltr\",\n        behaviour: \"tap\",\n        orientation: \"horizontal\",\n        keyboardSupport: true,\n        cssPrefix: \"noUi-\",\n        cssClasses: cssClasses,\n        keyboardPageMultiplier: 5,\n        keyboardMultiplier: 1,\n        keyboardDefaultStep: 10,\n    };\n    // AriaFormat defaults to regular format, if any.\n    if (options.format && !options.ariaFormat) {\n        options.ariaFormat = options.format;\n    }\n    // Run all options through a testing mechanism to ensure correct\n    // input. It should be noted that options might get modified to\n    // be handled properly. E.g. wrapping integers in arrays.\n    Object.keys(tests).forEach(function (name) {\n        // If the option isn't set, but it is required, throw an error.\n        if (!isSet(options[name]) && defaults[name] === undefined) {\n            if (tests[name].r) {\n                throw new Error(\"noUiSlider: '\" + name + \"' is required.\");\n            }\n            return;\n        }\n        tests[name].t(parsed, !isSet(options[name]) ? defaults[name] : options[name]);\n    });\n    // Forward pips options\n    parsed.pips = options.pips;\n    // All recent browsers accept unprefixed transform.\n    // We need -ms- for IE9 and -webkit- for older Android;\n    // Assume use of -webkit- if unprefixed and -ms- are not supported.\n    // https://caniuse.com/#feat=transforms2d\n    var d = document.createElement(\"div\");\n    var msPrefix = d.style.msTransform !== undefined;\n    var noPrefix = d.style.transform !== undefined;\n    parsed.transformRule = noPrefix ? \"transform\" : msPrefix ? \"msTransform\" : \"webkitTransform\";\n    // Pips don't move, so we can place them using left/top.\n    var styles = [\n        [\"left\", \"top\"],\n        [\"right\", \"bottom\"],\n    ];\n    parsed.style = styles[parsed.dir][parsed.ort];\n    return parsed;\n}\n//endregion\nfunction scope(target, options, originalOptions) {\n    var actions = getActions();\n    var supportsTouchActionNone = getSupportsTouchActionNone();\n    var supportsPassive = supportsTouchActionNone && getSupportsPassive();\n    // All variables local to 'scope' are prefixed with 'scope_'\n    // Slider DOM Nodes\n    var scope_Target = target;\n    var scope_Base;\n    var scope_ConnectBase;\n    var scope_Handles;\n    var scope_Connects;\n    var scope_Pips;\n    var scope_Tooltips;\n    // Slider state values\n    var scope_Spectrum = options.spectrum;\n    var scope_Values = [];\n    var scope_Locations = [];\n    var scope_HandleNumbers = [];\n    var scope_ActiveHandlesCount = 0;\n    var scope_Events = {};\n    var scope_ConnectsInverted = false;\n    // Document Nodes\n    var scope_Document = target.ownerDocument;\n    var scope_DocumentElement = options.documentElement || scope_Document.documentElement;\n    var scope_Body = scope_Document.body;\n    // For horizontal sliders in standard ltr documents,\n    // make .noUi-origin overflow to the left so the document doesn't scroll.\n    var scope_DirOffset = scope_Document.dir === \"rtl\" || options.ort === 1 ? 0 : 100;\n    // Creates a node, adds it to target, returns the new node.\n    function addNodeTo(addTarget, className) {\n        var div = scope_Document.createElement(\"div\");\n        if (className) {\n            addClass(div, className);\n        }\n        addTarget.appendChild(div);\n        return div;\n    }\n    // Append a origin to the base\n    function addOrigin(base, handleNumber) {\n        var origin = addNodeTo(base, options.cssClasses.origin);\n        var handle = addNodeTo(origin, options.cssClasses.handle);\n        addNodeTo(handle, options.cssClasses.touchArea);\n        handle.setAttribute(\"data-handle\", String(handleNumber));\n        if (options.keyboardSupport) {\n            // https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex\n            // 0 = focusable and reachable\n            handle.setAttribute(\"tabindex\", \"0\");\n            handle.addEventListener(\"keydown\", function (event) {\n                return eventKeydown(event, handleNumber);\n            });\n        }\n        if (options.handleAttributes !== undefined) {\n            var attributes_1 = options.handleAttributes[handleNumber];\n            Object.keys(attributes_1).forEach(function (attribute) {\n                handle.setAttribute(attribute, attributes_1[attribute]);\n            });\n        }\n        handle.setAttribute(\"role\", \"slider\");\n        handle.setAttribute(\"aria-orientation\", options.ort ? \"vertical\" : \"horizontal\");\n        if (handleNumber === 0) {\n            addClass(handle, options.cssClasses.handleLower);\n        }\n        else if (handleNumber === options.handles - 1) {\n            addClass(handle, options.cssClasses.handleUpper);\n        }\n        origin.handle = handle;\n        return origin;\n    }\n    // Insert nodes for connect elements\n    function addConnect(base, add) {\n        if (!add) {\n            return false;\n        }\n        return addNodeTo(base, options.cssClasses.connect);\n    }\n    // Add handles to the slider base.\n    function addElements(connectOptions, base) {\n        scope_ConnectBase = addNodeTo(base, options.cssClasses.connects);\n        scope_Handles = [];\n        scope_Connects = [];\n        scope_Connects.push(addConnect(scope_ConnectBase, connectOptions[0]));\n        // [::::O====O====O====]\n        // connectOptions = [0, 1, 1, 1]\n        for (var i = 0; i < options.handles; i++) {\n            // Keep a list of all added handles.\n            scope_Handles.push(addOrigin(base, i));\n            scope_HandleNumbers[i] = i;\n            scope_Connects.push(addConnect(scope_ConnectBase, connectOptions[i + 1]));\n        }\n    }\n    // Initialize a single slider.\n    function addSlider(addTarget) {\n        // Apply classes and data to the target.\n        addClass(addTarget, options.cssClasses.target);\n        if (options.dir === 0) {\n            addClass(addTarget, options.cssClasses.ltr);\n        }\n        else {\n            addClass(addTarget, options.cssClasses.rtl);\n        }\n        if (options.ort === 0) {\n            addClass(addTarget, options.cssClasses.horizontal);\n        }\n        else {\n            addClass(addTarget, options.cssClasses.vertical);\n        }\n        var textDirection = getComputedStyle(addTarget).direction;\n        if (textDirection === \"rtl\") {\n            addClass(addTarget, options.cssClasses.textDirectionRtl);\n        }\n        else {\n            addClass(addTarget, options.cssClasses.textDirectionLtr);\n        }\n        return addNodeTo(addTarget, options.cssClasses.base);\n    }\n    function addTooltip(handle, handleNumber) {\n        if (!options.tooltips || !options.tooltips[handleNumber]) {\n            return false;\n        }\n        return addNodeTo(handle.firstChild, options.cssClasses.tooltip);\n    }\n    function isSliderDisabled() {\n        return scope_Target.hasAttribute(\"disabled\");\n    }\n    // Disable the slider dragging if any handle is disabled\n    function isHandleDisabled(handleNumber) {\n        var handleOrigin = scope_Handles[handleNumber];\n        return handleOrigin.hasAttribute(\"disabled\");\n    }\n    function disable(handleNumber) {\n        if (handleNumber !== null && handleNumber !== undefined) {\n            scope_Handles[handleNumber].setAttribute(\"disabled\", \"\");\n            scope_Handles[handleNumber].handle.removeAttribute(\"tabindex\");\n        }\n        else {\n            scope_Target.setAttribute(\"disabled\", \"\");\n            scope_Handles.forEach(function (handle) {\n                handle.handle.removeAttribute(\"tabindex\");\n            });\n        }\n    }\n    function enable(handleNumber) {\n        if (handleNumber !== null && handleNumber !== undefined) {\n            scope_Handles[handleNumber].removeAttribute(\"disabled\");\n            scope_Handles[handleNumber].handle.setAttribute(\"tabindex\", \"0\");\n        }\n        else {\n            scope_Target.removeAttribute(\"disabled\");\n            scope_Handles.forEach(function (handle) {\n                handle.removeAttribute(\"disabled\");\n                handle.handle.setAttribute(\"tabindex\", \"0\");\n            });\n        }\n    }\n    function removeTooltips() {\n        if (scope_Tooltips) {\n            removeEvent(\"update\" + INTERNAL_EVENT_NS.tooltips);\n            scope_Tooltips.forEach(function (tooltip) {\n                if (tooltip) {\n                    removeElement(tooltip);\n                }\n            });\n            scope_Tooltips = null;\n        }\n    }\n    // The tooltips option is a shorthand for using the 'update' event.\n    function tooltips() {\n        removeTooltips();\n        // Tooltips are added with options.tooltips in original order.\n        scope_Tooltips = scope_Handles.map(addTooltip);\n        bindEvent(\"update\" + INTERNAL_EVENT_NS.tooltips, function (values, handleNumber, unencoded) {\n            if (!scope_Tooltips || !options.tooltips) {\n                return;\n            }\n            if (scope_Tooltips[handleNumber] === false) {\n                return;\n            }\n            var formattedValue = values[handleNumber];\n            if (options.tooltips[handleNumber] !== true) {\n                formattedValue = options.tooltips[handleNumber].to(unencoded[handleNumber]);\n            }\n            scope_Tooltips[handleNumber].innerHTML = formattedValue;\n        });\n    }\n    function aria() {\n        removeEvent(\"update\" + INTERNAL_EVENT_NS.aria);\n        bindEvent(\"update\" + INTERNAL_EVENT_NS.aria, function (values, handleNumber, unencoded, tap, positions) {\n            // Update Aria Values for all handles, as a change in one changes min and max values for the next.\n            scope_HandleNumbers.forEach(function (index) {\n                var handle = scope_Handles[index];\n                var min = checkHandlePosition(scope_Locations, index, 0, true, true, true);\n                var max = checkHandlePosition(scope_Locations, index, 100, true, true, true);\n                var now = positions[index];\n                // Formatted value for display\n                var text = String(options.ariaFormat.to(unencoded[index]));\n                // Map to slider range values\n                min = scope_Spectrum.fromStepping(min).toFixed(1);\n                max = scope_Spectrum.fromStepping(max).toFixed(1);\n                now = scope_Spectrum.fromStepping(now).toFixed(1);\n                handle.children[0].setAttribute(\"aria-valuemin\", min);\n                handle.children[0].setAttribute(\"aria-valuemax\", max);\n                handle.children[0].setAttribute(\"aria-valuenow\", now);\n                handle.children[0].setAttribute(\"aria-valuetext\", text);\n            });\n        });\n    }\n    function getGroup(pips) {\n        // Use the range.\n        if (pips.mode === PipsMode.Range || pips.mode === PipsMode.Steps) {\n            return scope_Spectrum.xVal;\n        }\n        if (pips.mode === PipsMode.Count) {\n            if (pips.values < 2) {\n                throw new Error(\"noUiSlider: 'values' (>= 2) required for mode 'count'.\");\n            }\n            // Divide 0 - 100 in 'count' parts.\n            var interval = pips.values - 1;\n            var spread = 100 / interval;\n            var values = [];\n            // List these parts and have them handled as 'positions'.\n            while (interval--) {\n                values[interval] = interval * spread;\n            }\n            values.push(100);\n            return mapToRange(values, pips.stepped);\n        }\n        if (pips.mode === PipsMode.Positions) {\n            // Map all percentages to on-range values.\n            return mapToRange(pips.values, pips.stepped);\n        }\n        if (pips.mode === PipsMode.Values) {\n            // If the value must be stepped, it needs to be converted to a percentage first.\n            if (pips.stepped) {\n                return pips.values.map(function (value) {\n                    // Convert to percentage, apply step, return to value.\n                    return scope_Spectrum.fromStepping(scope_Spectrum.getStep(scope_Spectrum.toStepping(value)));\n                });\n            }\n            // Otherwise, we can simply use the values.\n            return pips.values;\n        }\n        return []; // pips.mode = never\n    }\n    function mapToRange(values, stepped) {\n        return values.map(function (value) {\n            return scope_Spectrum.fromStepping(stepped ? scope_Spectrum.getStep(value) : value);\n        });\n    }\n    function generateSpread(pips) {\n        function safeIncrement(value, increment) {\n            // Avoid floating point variance by dropping the smallest decimal places.\n            return Number((value + increment).toFixed(7));\n        }\n        var group = getGroup(pips);\n        var indexes = {};\n        var firstInRange = scope_Spectrum.xVal[0];\n        var lastInRange = scope_Spectrum.xVal[scope_Spectrum.xVal.length - 1];\n        var ignoreFirst = false;\n        var ignoreLast = false;\n        var prevPct = 0;\n        // Create a copy of the group, sort it and filter away all duplicates.\n        group = unique(group.slice().sort(function (a, b) {\n            return a - b;\n        }));\n        // Make sure the range starts with the first element.\n        if (group[0] !== firstInRange) {\n            group.unshift(firstInRange);\n            ignoreFirst = true;\n        }\n        // Likewise for the last one.\n        if (group[group.length - 1] !== lastInRange) {\n            group.push(lastInRange);\n            ignoreLast = true;\n        }\n        group.forEach(function (current, index) {\n            // Get the current step and the lower + upper positions.\n            var step;\n            var i;\n            var q;\n            var low = current;\n            var high = group[index + 1];\n            var newPct;\n            var pctDifference;\n            var pctPos;\n            var type;\n            var steps;\n            var realSteps;\n            var stepSize;\n            var isSteps = pips.mode === PipsMode.Steps;\n            // When using 'steps' mode, use the provided steps.\n            // Otherwise, we'll step on to the next subrange.\n            if (isSteps) {\n                step = scope_Spectrum.xNumSteps[index];\n            }\n            // Default to a 'full' step.\n            if (!step) {\n                step = high - low;\n            }\n            // If high is undefined we are at the last subrange. Make sure it iterates once (#1088)\n            if (high === undefined) {\n                high = low;\n            }\n            // Make sure step isn't 0, which would cause an infinite loop (#654)\n            step = Math.max(step, 0.0000001);\n            // Find all steps in the subrange.\n            for (i = low; i <= high; i = safeIncrement(i, step)) {\n                // Get the percentage value for the current step,\n                // calculate the size for the subrange.\n                newPct = scope_Spectrum.toStepping(i);\n                pctDifference = newPct - prevPct;\n                steps = pctDifference / (pips.density || 1);\n                realSteps = Math.round(steps);\n                // This ratio represents the amount of percentage-space a point indicates.\n                // For a density 1 the points/percentage = 1. For density 2, that percentage needs to be re-divided.\n                // Round the percentage offset to an even number, then divide by two\n                // to spread the offset on both sides of the range.\n                stepSize = pctDifference / realSteps;\n                // Divide all points evenly, adding the correct number to this subrange.\n                // Run up to <= so that 100% gets a point, event if ignoreLast is set.\n                for (q = 1; q <= realSteps; q += 1) {\n                    // The ratio between the rounded value and the actual size might be ~1% off.\n                    // Correct the percentage offset by the number of points\n                    // per subrange. density = 1 will result in 100 points on the\n                    // full range, 2 for 50, 4 for 25, etc.\n                    pctPos = prevPct + q * stepSize;\n                    indexes[pctPos.toFixed(5)] = [scope_Spectrum.fromStepping(pctPos), 0];\n                }\n                // Determine the point type.\n                type = group.indexOf(i) > -1 ? PipsType.LargeValue : isSteps ? PipsType.SmallValue : PipsType.NoValue;\n                // Enforce the 'ignoreFirst' option by overwriting the type for 0.\n                if (!index && ignoreFirst && i !== high) {\n                    type = 0;\n                }\n                if (!(i === high && ignoreLast)) {\n                    // Mark the 'type' of this point. 0 = plain, 1 = real value, 2 = step value.\n                    indexes[newPct.toFixed(5)] = [i, type];\n                }\n                // Update the percentage count.\n                prevPct = newPct;\n            }\n        });\n        return indexes;\n    }\n    function addMarking(spread, filterFunc, formatter) {\n        var _a, _b;\n        var element = scope_Document.createElement(\"div\");\n        var valueSizeClasses = (_a = {},\n            _a[PipsType.None] = \"\",\n            _a[PipsType.NoValue] = options.cssClasses.valueNormal,\n            _a[PipsType.LargeValue] = options.cssClasses.valueLarge,\n            _a[PipsType.SmallValue] = options.cssClasses.valueSub,\n            _a);\n        var markerSizeClasses = (_b = {},\n            _b[PipsType.None] = \"\",\n            _b[PipsType.NoValue] = options.cssClasses.markerNormal,\n            _b[PipsType.LargeValue] = options.cssClasses.markerLarge,\n            _b[PipsType.SmallValue] = options.cssClasses.markerSub,\n            _b);\n        var valueOrientationClasses = [options.cssClasses.valueHorizontal, options.cssClasses.valueVertical];\n        var markerOrientationClasses = [options.cssClasses.markerHorizontal, options.cssClasses.markerVertical];\n        addClass(element, options.cssClasses.pips);\n        addClass(element, options.ort === 0 ? options.cssClasses.pipsHorizontal : options.cssClasses.pipsVertical);\n        function getClasses(type, source) {\n            var a = source === options.cssClasses.value;\n            var orientationClasses = a ? valueOrientationClasses : markerOrientationClasses;\n            var sizeClasses = a ? valueSizeClasses : markerSizeClasses;\n            return source + \" \" + orientationClasses[options.ort] + \" \" + sizeClasses[type];\n        }\n        function addSpread(offset, value, type) {\n            // Apply the filter function, if it is set.\n            type = filterFunc ? filterFunc(value, type) : type;\n            if (type === PipsType.None) {\n                return;\n            }\n            // Add a marker for every point\n            var node = addNodeTo(element, false);\n            node.className = getClasses(type, options.cssClasses.marker);\n            node.style[options.style] = offset + \"%\";\n            // Values are only appended for points marked '1' or '2'.\n            if (type > PipsType.NoValue) {\n                node = addNodeTo(element, false);\n                node.className = getClasses(type, options.cssClasses.value);\n                node.setAttribute(\"data-value\", String(value));\n                node.style[options.style] = offset + \"%\";\n                node.innerHTML = String(formatter.to(value));\n            }\n        }\n        // Append all points.\n        Object.keys(spread).forEach(function (offset) {\n            addSpread(offset, spread[offset][0], spread[offset][1]);\n        });\n        return element;\n    }\n    function removePips() {\n        if (scope_Pips) {\n            removeElement(scope_Pips);\n            scope_Pips = null;\n        }\n    }\n    function pips(pips) {\n        // Fix #669\n        removePips();\n        var spread = generateSpread(pips);\n        var filter = pips.filter;\n        var format = pips.format || {\n            to: function (value) {\n                return String(Math.round(value));\n            },\n        };\n        scope_Pips = scope_Target.appendChild(addMarking(spread, filter, format));\n        return scope_Pips;\n    }\n    // Shorthand for base dimensions.\n    function baseSize() {\n        var rect = scope_Base.getBoundingClientRect();\n        var alt = (\"offset\" + [\"Width\", \"Height\"][options.ort]);\n        return options.ort === 0 ? rect.width || scope_Base[alt] : rect.height || scope_Base[alt];\n    }\n    // Handler for attaching events trough a proxy.\n    function attachEvent(events, element, callback, data) {\n        // This function can be used to 'filter' events to the slider.\n        // element is a node, not a nodeList\n        var method = function (event) {\n            var e = fixEvent(event, data.pageOffset, data.target || element);\n            // fixEvent returns false if this event has a different target\n            // when handling (multi-) touch events;\n            if (!e) {\n                return false;\n            }\n            // doNotReject is passed by all end events to make sure released touches\n            // are not rejected, leaving the slider \"stuck\" to the cursor;\n            if (isSliderDisabled() && !data.doNotReject) {\n                return false;\n            }\n            // Stop if an active 'tap' transition is taking place.\n            if (hasClass(scope_Target, options.cssClasses.tap) && !data.doNotReject) {\n                return false;\n            }\n            // Ignore right or middle clicks on start #454\n            if (events === actions.start && e.buttons !== undefined && e.buttons > 1) {\n                return false;\n            }\n            // Ignore right or middle clicks on start #454\n            if (data.hover && e.buttons) {\n                return false;\n            }\n            // 'supportsPassive' is only true if a browser also supports touch-action: none in CSS.\n            // iOS safari does not, so it doesn't get to benefit from passive scrolling. iOS does support\n            // touch-action: manipulation, but that allows panning, which breaks\n            // sliders after zooming/on non-responsive pages.\n            // See: https://bugs.webkit.org/show_bug.cgi?id=133112\n            if (!supportsPassive) {\n                e.preventDefault();\n            }\n            e.calcPoint = e.points[options.ort];\n            // Call the event handler with the event [ and additional data ].\n            callback(e, data);\n            return;\n        };\n        var methods = [];\n        // Bind a closure on the target for every event type.\n        events.split(\" \").forEach(function (eventName) {\n            element.addEventListener(eventName, method, supportsPassive ? { passive: true } : false);\n            methods.push([eventName, method]);\n        });\n        return methods;\n    }\n    // Provide a clean event with standardized offset values.\n    function fixEvent(e, pageOffset, eventTarget) {\n        // Filter the event to register the type, which can be\n        // touch, mouse or pointer. Offset changes need to be\n        // made on an event specific basis.\n        var touch = e.type.indexOf(\"touch\") === 0;\n        var mouse = e.type.indexOf(\"mouse\") === 0;\n        var pointer = e.type.indexOf(\"pointer\") === 0;\n        var x = 0;\n        var y = 0;\n        // IE10 implemented pointer events with a prefix;\n        if (e.type.indexOf(\"MSPointer\") === 0) {\n            pointer = true;\n        }\n        // Erroneous events seem to be passed in occasionally on iOS/iPadOS after user finishes interacting with\n        // the slider. They appear to be of type MouseEvent, yet they don't have usual properties set. Ignore\n        // events that have no touches or buttons associated with them. (#1057, #1079, #1095)\n        if (e.type === \"mousedown\" && !e.buttons && !e.touches) {\n            return false;\n        }\n        // The only thing one handle should be concerned about is the touches that originated on top of it.\n        if (touch) {\n            // Returns true if a touch originated on the target.\n            var isTouchOnTarget = function (checkTouch) {\n                var target = checkTouch.target;\n                return (target === eventTarget ||\n                    eventTarget.contains(target) ||\n                    (e.composed && e.composedPath().shift() === eventTarget));\n            };\n            // In the case of touchstart events, we need to make sure there is still no more than one\n            // touch on the target so we look amongst all touches.\n            if (e.type === \"touchstart\") {\n                var targetTouches = Array.prototype.filter.call(e.touches, isTouchOnTarget);\n                // Do not support more than one touch per handle.\n                if (targetTouches.length > 1) {\n                    return false;\n                }\n                x = targetTouches[0].pageX;\n                y = targetTouches[0].pageY;\n            }\n            else {\n                // In the other cases, find on changedTouches is enough.\n                var targetTouch = Array.prototype.find.call(e.changedTouches, isTouchOnTarget);\n                // Cancel if the target touch has not moved.\n                if (!targetTouch) {\n                    return false;\n                }\n                x = targetTouch.pageX;\n                y = targetTouch.pageY;\n            }\n        }\n        pageOffset = pageOffset || getPageOffset(scope_Document);\n        if (mouse || pointer) {\n            x = e.clientX + pageOffset.x;\n            y = e.clientY + pageOffset.y;\n        }\n        e.pageOffset = pageOffset;\n        e.points = [x, y];\n        e.cursor = mouse || pointer; // Fix #435\n        return e;\n    }\n    // Translate a coordinate in the document to a percentage on the slider\n    function calcPointToPercentage(calcPoint) {\n        var location = calcPoint - offset(scope_Base, options.ort);\n        var proposal = (location * 100) / baseSize();\n        // Clamp proposal between 0% and 100%\n        // Out-of-bound coordinates may occur when .noUi-base pseudo-elements\n        // are used (e.g. contained handles feature)\n        proposal = limit(proposal);\n        return options.dir ? 100 - proposal : proposal;\n    }\n    // Find handle closest to a certain percentage on the slider\n    function getClosestHandle(clickedPosition) {\n        var smallestDifference = 100;\n        var handleNumber = false;\n        scope_Handles.forEach(function (handle, index) {\n            // Disabled handles are ignored\n            if (isHandleDisabled(index)) {\n                return;\n            }\n            var handlePosition = scope_Locations[index];\n            var differenceWithThisHandle = Math.abs(handlePosition - clickedPosition);\n            // Initial state\n            var clickAtEdge = differenceWithThisHandle === 100 && smallestDifference === 100;\n            // Difference with this handle is smaller than the previously checked handle\n            var isCloser = differenceWithThisHandle < smallestDifference;\n            var isCloserAfter = differenceWithThisHandle <= smallestDifference && clickedPosition > handlePosition;\n            if (isCloser || isCloserAfter || clickAtEdge) {\n                handleNumber = index;\n                smallestDifference = differenceWithThisHandle;\n            }\n        });\n        return handleNumber;\n    }\n    // Fire 'end' when a mouse or pen leaves the document.\n    function documentLeave(event, data) {\n        if (event.type === \"mouseout\" &&\n            event.target.nodeName === \"HTML\" &&\n            event.relatedTarget === null) {\n            eventEnd(event, data);\n        }\n    }\n    // Handle movement on document for handle and range drag.\n    function eventMove(event, data) {\n        // Fix #498\n        // Check value of .buttons in 'start' to work around a bug in IE10 mobile (data.buttonsProperty).\n        // https://connect.microsoft.com/IE/feedback/details/927005/mobile-ie10-windows-phone-buttons-property-of-pointermove-event-always-zero\n        // IE9 has .buttons and .which zero on mousemove.\n        // Firefox breaks the spec MDN defines.\n        if (navigator.appVersion.indexOf(\"MSIE 9\") === -1 && event.buttons === 0 && data.buttonsProperty !== 0) {\n            return eventEnd(event, data);\n        }\n        // Check if we are moving up or down\n        var movement = (options.dir ? -1 : 1) * (event.calcPoint - data.startCalcPoint);\n        // Convert the movement into a percentage of the slider width/height\n        var proposal = (movement * 100) / data.baseSize;\n        moveHandles(movement > 0, proposal, data.locations, data.handleNumbers, data.connect);\n    }\n    // Unbind move events on document, call callbacks.\n    function eventEnd(event, data) {\n        // The handle is no longer active, so remove the class.\n        if (data.handle) {\n            removeClass(data.handle, options.cssClasses.active);\n            scope_ActiveHandlesCount -= 1;\n        }\n        // Unbind the move and end events, which are added on 'start'.\n        data.listeners.forEach(function (c) {\n            scope_DocumentElement.removeEventListener(c[0], c[1]);\n        });\n        if (scope_ActiveHandlesCount === 0) {\n            // Remove dragging class.\n            removeClass(scope_Target, options.cssClasses.drag);\n            setZindex();\n            // Remove cursor styles and text-selection events bound to the body.\n            if (event.cursor) {\n                scope_Body.style.cursor = \"\";\n                scope_Body.removeEventListener(\"selectstart\", preventDefault);\n            }\n        }\n        if (options.events.smoothSteps) {\n            data.handleNumbers.forEach(function (handleNumber) {\n                setHandle(handleNumber, scope_Locations[handleNumber], true, true, false, false);\n            });\n            data.handleNumbers.forEach(function (handleNumber) {\n                fireEvent(\"update\", handleNumber);\n            });\n        }\n        data.handleNumbers.forEach(function (handleNumber) {\n            fireEvent(\"change\", handleNumber);\n            fireEvent(\"set\", handleNumber);\n            fireEvent(\"end\", handleNumber);\n        });\n    }\n    // Bind move events on document.\n    function eventStart(event, data) {\n        // Ignore event if any handle is disabled\n        if (data.handleNumbers.some(isHandleDisabled)) {\n            return;\n        }\n        var handle;\n        if (data.handleNumbers.length === 1) {\n            var handleOrigin = scope_Handles[data.handleNumbers[0]];\n            handle = handleOrigin.children[0];\n            scope_ActiveHandlesCount += 1;\n            // Mark the handle as 'active' so it can be styled.\n            addClass(handle, options.cssClasses.active);\n        }\n        // A drag should never propagate up to the 'tap' event.\n        event.stopPropagation();\n        // Record the event listeners.\n        var listeners = [];\n        // Attach the move and end events.\n        var moveEvent = attachEvent(actions.move, scope_DocumentElement, eventMove, {\n            // The event target has changed so we need to propagate the original one so that we keep\n            // relying on it to extract target touches.\n            target: event.target,\n            handle: handle,\n            connect: data.connect,\n            listeners: listeners,\n            startCalcPoint: event.calcPoint,\n            baseSize: baseSize(),\n            pageOffset: event.pageOffset,\n            handleNumbers: data.handleNumbers,\n            buttonsProperty: event.buttons,\n            locations: scope_Locations.slice(),\n        });\n        var endEvent = attachEvent(actions.end, scope_DocumentElement, eventEnd, {\n            target: event.target,\n            handle: handle,\n            listeners: listeners,\n            doNotReject: true,\n            handleNumbers: data.handleNumbers,\n        });\n        var outEvent = attachEvent(\"mouseout\", scope_DocumentElement, documentLeave, {\n            target: event.target,\n            handle: handle,\n            listeners: listeners,\n            doNotReject: true,\n            handleNumbers: data.handleNumbers,\n        });\n        // We want to make sure we pushed the listeners in the listener list rather than creating\n        // a new one as it has already been passed to the event handlers.\n        listeners.push.apply(listeners, moveEvent.concat(endEvent, outEvent));\n        // Text selection isn't an issue on touch devices,\n        // so adding cursor styles can be skipped.\n        if (event.cursor) {\n            // Prevent the 'I' cursor and extend the range-drag cursor.\n            scope_Body.style.cursor = getComputedStyle(event.target).cursor;\n            // Mark the target with a dragging state.\n            if (scope_Handles.length > 1) {\n                addClass(scope_Target, options.cssClasses.drag);\n            }\n            // Prevent text selection when dragging the handles.\n            // In noUiSlider <= 9.2.0, this was handled by calling preventDefault on mouse/touch start/move,\n            // which is scroll blocking. The selectstart event is supported by FireFox starting from version 52,\n            // meaning the only holdout is iOS Safari. This doesn't matter: text selection isn't triggered there.\n            // The 'cursor' flag is false.\n            // See: http://caniuse.com/#search=selectstart\n            scope_Body.addEventListener(\"selectstart\", preventDefault, false);\n        }\n        data.handleNumbers.forEach(function (handleNumber) {\n            fireEvent(\"start\", handleNumber);\n        });\n    }\n    // Move closest handle to tapped location.\n    function eventTap(event) {\n        // The tap event shouldn't propagate up\n        event.stopPropagation();\n        var proposal = calcPointToPercentage(event.calcPoint);\n        var handleNumber = getClosestHandle(proposal);\n        // Tackle the case that all handles are 'disabled'.\n        if (handleNumber === false) {\n            return;\n        }\n        // Flag the slider as it is now in a transitional state.\n        // Transition takes a configurable amount of ms (default 300). Re-enable the slider after that.\n        if (!options.events.snap) {\n            addClassFor(scope_Target, options.cssClasses.tap, options.animationDuration);\n        }\n        setHandle(handleNumber, proposal, true, true);\n        setZindex();\n        fireEvent(\"slide\", handleNumber, true);\n        fireEvent(\"update\", handleNumber, true);\n        if (!options.events.snap) {\n            fireEvent(\"change\", handleNumber, true);\n            fireEvent(\"set\", handleNumber, true);\n        }\n        else {\n            eventStart(event, { handleNumbers: [handleNumber] });\n        }\n    }\n    // Fires a 'hover' event for a hovered mouse/pen position.\n    function eventHover(event) {\n        var proposal = calcPointToPercentage(event.calcPoint);\n        var to = scope_Spectrum.getStep(proposal);\n        var value = scope_Spectrum.fromStepping(to);\n        Object.keys(scope_Events).forEach(function (targetEvent) {\n            if (\"hover\" === targetEvent.split(\".\")[0]) {\n                scope_Events[targetEvent].forEach(function (callback) {\n                    callback.call(scope_Self, value);\n                });\n            }\n        });\n    }\n    // Handles keydown on focused handles\n    // Don't move the document when pressing arrow keys on focused handles\n    function eventKeydown(event, handleNumber) {\n        if (isSliderDisabled() || isHandleDisabled(handleNumber)) {\n            return false;\n        }\n        var horizontalKeys = [\"Left\", \"Right\"];\n        var verticalKeys = [\"Down\", \"Up\"];\n        var largeStepKeys = [\"PageDown\", \"PageUp\"];\n        var edgeKeys = [\"Home\", \"End\"];\n        if (options.dir && !options.ort) {\n            // On an right-to-left slider, the left and right keys act inverted\n            horizontalKeys.reverse();\n        }\n        else if (options.ort && !options.dir) {\n            // On a top-to-bottom slider, the up and down keys act inverted\n            verticalKeys.reverse();\n            largeStepKeys.reverse();\n        }\n        // Strip \"Arrow\" for IE compatibility. https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key\n        var key = event.key.replace(\"Arrow\", \"\");\n        var isLargeDown = key === largeStepKeys[0];\n        var isLargeUp = key === largeStepKeys[1];\n        var isDown = key === verticalKeys[0] || key === horizontalKeys[0] || isLargeDown;\n        var isUp = key === verticalKeys[1] || key === horizontalKeys[1] || isLargeUp;\n        var isMin = key === edgeKeys[0];\n        var isMax = key === edgeKeys[1];\n        if (!isDown && !isUp && !isMin && !isMax) {\n            return true;\n        }\n        event.preventDefault();\n        var to;\n        if (isUp || isDown) {\n            var direction = isDown ? 0 : 1;\n            var steps = getNextStepsForHandle(handleNumber);\n            var step = steps[direction];\n            // At the edge of a slider, do nothing\n            if (step === null) {\n                return false;\n            }\n            // No step set, use the default of 10% of the sub-range\n            if (step === false) {\n                step = scope_Spectrum.getDefaultStep(scope_Locations[handleNumber], isDown, options.keyboardDefaultStep);\n            }\n            if (isLargeUp || isLargeDown) {\n                step *= options.keyboardPageMultiplier;\n            }\n            else {\n                step *= options.keyboardMultiplier;\n            }\n            // Step over zero-length ranges (#948);\n            step = Math.max(step, 0.0000001);\n            // Decrement for down steps\n            step = (isDown ? -1 : 1) * step;\n            to = scope_Values[handleNumber] + step;\n        }\n        else if (isMax) {\n            // End key\n            to = options.spectrum.xVal[options.spectrum.xVal.length - 1];\n        }\n        else {\n            // Home key\n            to = options.spectrum.xVal[0];\n        }\n        setHandle(handleNumber, scope_Spectrum.toStepping(to), true, true);\n        fireEvent(\"slide\", handleNumber);\n        fireEvent(\"update\", handleNumber);\n        fireEvent(\"change\", handleNumber);\n        fireEvent(\"set\", handleNumber);\n        return false;\n    }\n    // Attach events to several slider parts.\n    function bindSliderEvents(behaviour) {\n        // Attach the standard drag event to the handles.\n        if (!behaviour.fixed) {\n            scope_Handles.forEach(function (handle, index) {\n                // These events are only bound to the visual handle\n                // element, not the 'real' origin element.\n                attachEvent(actions.start, handle.children[0], eventStart, {\n                    handleNumbers: [index],\n                });\n            });\n        }\n        // Attach the tap event to the slider base.\n        if (behaviour.tap) {\n            attachEvent(actions.start, scope_Base, eventTap, {});\n        }\n        // Fire hover events\n        if (behaviour.hover) {\n            attachEvent(actions.move, scope_Base, eventHover, {\n                hover: true,\n            });\n        }\n        // Make the range draggable.\n        if (behaviour.drag) {\n            scope_Connects.forEach(function (connect, index) {\n                if (connect === false || index === 0 || index === scope_Connects.length - 1) {\n                    return;\n                }\n                var handleBefore = scope_Handles[index - 1];\n                var handleAfter = scope_Handles[index];\n                var eventHolders = [connect];\n                var handlesToDrag = [handleBefore, handleAfter];\n                var handleNumbersToDrag = [index - 1, index];\n                addClass(connect, options.cssClasses.draggable);\n                // When the range is fixed, the entire range can\n                // be dragged by the handles. The handle in the first\n                // origin will propagate the start event upward,\n                // but it needs to be bound manually on the other.\n                if (behaviour.fixed) {\n                    eventHolders.push(handleBefore.children[0]);\n                    eventHolders.push(handleAfter.children[0]);\n                }\n                if (behaviour.dragAll) {\n                    handlesToDrag = scope_Handles;\n                    handleNumbersToDrag = scope_HandleNumbers;\n                }\n                eventHolders.forEach(function (eventHolder) {\n                    attachEvent(actions.start, eventHolder, eventStart, {\n                        handles: handlesToDrag,\n                        handleNumbers: handleNumbersToDrag,\n                        connect: connect,\n                    });\n                });\n            });\n        }\n    }\n    // Attach an event to this slider, possibly including a namespace\n    function bindEvent(namespacedEvent, callback) {\n        scope_Events[namespacedEvent] = scope_Events[namespacedEvent] || [];\n        scope_Events[namespacedEvent].push(callback);\n        // If the event bound is 'update,' fire it immediately for all handles.\n        if (namespacedEvent.split(\".\")[0] === \"update\") {\n            scope_Handles.forEach(function (a, index) {\n                fireEvent(\"update\", index);\n            });\n        }\n    }\n    function isInternalNamespace(namespace) {\n        return namespace === INTERNAL_EVENT_NS.aria || namespace === INTERNAL_EVENT_NS.tooltips;\n    }\n    // Undo attachment of event\n    function removeEvent(namespacedEvent) {\n        var event = namespacedEvent && namespacedEvent.split(\".\")[0];\n        var namespace = event ? namespacedEvent.substring(event.length) : namespacedEvent;\n        Object.keys(scope_Events).forEach(function (bind) {\n            var tEvent = bind.split(\".\")[0];\n            var tNamespace = bind.substring(tEvent.length);\n            if ((!event || event === tEvent) && (!namespace || namespace === tNamespace)) {\n                // only delete protected internal event if intentional\n                if (!isInternalNamespace(tNamespace) || namespace === tNamespace) {\n                    delete scope_Events[bind];\n                }\n            }\n        });\n    }\n    // External event handling\n    function fireEvent(eventName, handleNumber, tap) {\n        Object.keys(scope_Events).forEach(function (targetEvent) {\n            var eventType = targetEvent.split(\".\")[0];\n            if (eventName === eventType) {\n                scope_Events[targetEvent].forEach(function (callback) {\n                    callback.call(\n                    // Use the slider public API as the scope ('this')\n                    scope_Self, \n                    // Return values as array, so arg_1[arg_2] is always valid.\n                    scope_Values.map(options.format.to), \n                    // Handle index, 0 or 1\n                    handleNumber, \n                    // Un-formatted slider values\n                    scope_Values.slice(), \n                    // Event is fired by tap, true or false\n                    tap || false, \n                    // Left offset of the handle, in relation to the slider\n                    scope_Locations.slice(), \n                    // add the slider public API to an accessible parameter when this is unavailable\n                    scope_Self);\n                });\n            }\n        });\n    }\n    // Split out the handle positioning logic so the Move event can use it, too\n    function checkHandlePosition(reference, handleNumber, to, lookBackward, lookForward, getValue, smoothSteps) {\n        var distance;\n        // For sliders with multiple handles, limit movement to the other handle.\n        // Apply the margin option by adding it to the handle positions.\n        if (scope_Handles.length > 1 && !options.events.unconstrained) {\n            if (lookBackward && handleNumber > 0) {\n                distance = scope_Spectrum.getAbsoluteDistance(reference[handleNumber - 1], options.margin, false);\n                to = Math.max(to, distance);\n            }\n            if (lookForward && handleNumber < scope_Handles.length - 1) {\n                distance = scope_Spectrum.getAbsoluteDistance(reference[handleNumber + 1], options.margin, true);\n                to = Math.min(to, distance);\n            }\n        }\n        // The limit option has the opposite effect, limiting handles to a\n        // maximum distance from another. Limit must be > 0, as otherwise\n        // handles would be unmovable.\n        if (scope_Handles.length > 1 && options.limit) {\n            if (lookBackward && handleNumber > 0) {\n                distance = scope_Spectrum.getAbsoluteDistance(reference[handleNumber - 1], options.limit, false);\n                to = Math.min(to, distance);\n            }\n            if (lookForward && handleNumber < scope_Handles.length - 1) {\n                distance = scope_Spectrum.getAbsoluteDistance(reference[handleNumber + 1], options.limit, true);\n                to = Math.max(to, distance);\n            }\n        }\n        // The padding option keeps the handles a certain distance from the\n        // edges of the slider. Padding must be > 0.\n        if (options.padding) {\n            if (handleNumber === 0) {\n                distance = scope_Spectrum.getAbsoluteDistance(0, options.padding[0], false);\n                to = Math.max(to, distance);\n            }\n            if (handleNumber === scope_Handles.length - 1) {\n                distance = scope_Spectrum.getAbsoluteDistance(100, options.padding[1], true);\n                to = Math.min(to, distance);\n            }\n        }\n        if (!smoothSteps) {\n            to = scope_Spectrum.getStep(to);\n        }\n        // Limit percentage to the 0 - 100 range\n        to = limit(to);\n        // Return false if handle can't move\n        if (to === reference[handleNumber] && !getValue) {\n            return false;\n        }\n        return to;\n    }\n    // Uses slider orientation to create CSS rules. a = base value;\n    function inRuleOrder(v, a) {\n        var o = options.ort;\n        return (o ? a : v) + \", \" + (o ? v : a);\n    }\n    // Moves handle(s) by a percentage\n    // (bool, % to move, [% where handle started, ...], [index in scope_Handles, ...])\n    function moveHandles(upward, proposal, locations, handleNumbers, connect) {\n        var proposals = locations.slice();\n        // Store first handle now, so we still have it in case handleNumbers is reversed\n        var firstHandle = handleNumbers[0];\n        var smoothSteps = options.events.smoothSteps;\n        var b = [!upward, upward];\n        var f = [upward, !upward];\n        // Copy handleNumbers so we don't change the dataset\n        handleNumbers = handleNumbers.slice();\n        // Check to see which handle is 'leading'.\n        // If that one can't move the second can't either.\n        if (upward) {\n            handleNumbers.reverse();\n        }\n        // Step 1: get the maximum percentage that any of the handles can move\n        if (handleNumbers.length > 1) {\n            handleNumbers.forEach(function (handleNumber, o) {\n                var to = checkHandlePosition(proposals, handleNumber, proposals[handleNumber] + proposal, b[o], f[o], false, smoothSteps);\n                // Stop if one of the handles can't move.\n                if (to === false) {\n                    proposal = 0;\n                }\n                else {\n                    proposal = to - proposals[handleNumber];\n                    proposals[handleNumber] = to;\n                }\n            });\n        }\n        // If using one handle, check backward AND forward\n        else {\n            b = f = [true];\n        }\n        var state = false;\n        // Step 2: Try to set the handles with the found percentage\n        handleNumbers.forEach(function (handleNumber, o) {\n            state =\n                setHandle(handleNumber, locations[handleNumber] + proposal, b[o], f[o], false, smoothSteps) || state;\n        });\n        // Step 3: If a handle moved, fire events\n        if (state) {\n            handleNumbers.forEach(function (handleNumber) {\n                fireEvent(\"update\", handleNumber);\n                fireEvent(\"slide\", handleNumber);\n            });\n            // If target is a connect, then fire drag event\n            if (connect != undefined) {\n                fireEvent(\"drag\", firstHandle);\n            }\n        }\n    }\n    // Takes a base value and an offset. This offset is used for the connect bar size.\n    // In the initial design for this feature, the origin element was 1% wide.\n    // Unfortunately, a rounding bug in Chrome makes it impossible to implement this feature\n    // in this manner: https://bugs.chromium.org/p/chromium/issues/detail?id=798223\n    function transformDirection(a, b) {\n        return options.dir ? 100 - a - b : a;\n    }\n    // Updates scope_Locations and scope_Values, updates visual state\n    function updateHandlePosition(handleNumber, to) {\n        // Update locations.\n        scope_Locations[handleNumber] = to;\n        // Convert the value to the slider stepping/range.\n        scope_Values[handleNumber] = scope_Spectrum.fromStepping(to);\n        var translation = transformDirection(to, 0) - scope_DirOffset;\n        var translateRule = \"translate(\" + inRuleOrder(translation + \"%\", \"0\") + \")\";\n        scope_Handles[handleNumber].style[options.transformRule] = translateRule;\n        // sanity check for at least 2 handles (e.g. during setup)\n        if (options.events.invertConnects && scope_Locations.length > 1) {\n            // check if handles passed each other, but don't match the ConnectsInverted state\n            var handlesAreInOrder = scope_Locations.every(function (position, index, locations) {\n                return index === 0 || position >= locations[index - 1];\n            });\n            if (scope_ConnectsInverted !== !handlesAreInOrder) {\n                // invert connects when handles pass each other\n                invertConnects();\n                // invertConnects already updates all connect elements\n                return;\n            }\n        }\n        updateConnect(handleNumber);\n        updateConnect(handleNumber + 1);\n        if (scope_ConnectsInverted) {\n            // When connects are inverted, we also have to update adjacent connects\n            updateConnect(handleNumber - 1);\n            updateConnect(handleNumber + 2);\n        }\n    }\n    // Handles before the slider middle are stacked later = higher,\n    // Handles after the middle later is lower\n    // [[7] [8] .......... | .......... [5] [4]\n    function setZindex() {\n        scope_HandleNumbers.forEach(function (handleNumber) {\n            var dir = scope_Locations[handleNumber] > 50 ? -1 : 1;\n            var zIndex = 3 + (scope_Handles.length + dir * handleNumber);\n            scope_Handles[handleNumber].style.zIndex = String(zIndex);\n        });\n    }\n    // Test suggested values and apply margin, step.\n    // if exactInput is true, don't run checkHandlePosition, then the handle can be placed in between steps (#436)\n    function setHandle(handleNumber, to, lookBackward, lookForward, exactInput, smoothSteps) {\n        if (!exactInput) {\n            to = checkHandlePosition(scope_Locations, handleNumber, to, lookBackward, lookForward, false, smoothSteps);\n        }\n        if (to === false) {\n            return false;\n        }\n        updateHandlePosition(handleNumber, to);\n        return true;\n    }\n    // Updates style attribute for connect nodes\n    function updateConnect(index) {\n        // Skip connects set to false\n        if (!scope_Connects[index]) {\n            return;\n        }\n        // Create a copy of locations, so we can sort them for the local scope logic\n        var locations = scope_Locations.slice();\n        if (scope_ConnectsInverted) {\n            locations.sort(function (a, b) {\n                return a - b;\n            });\n        }\n        var l = 0;\n        var h = 100;\n        if (index !== 0) {\n            l = locations[index - 1];\n        }\n        if (index !== scope_Connects.length - 1) {\n            h = locations[index];\n        }\n        // We use two rules:\n        // 'translate' to change the left/top offset;\n        // 'scale' to change the width of the element;\n        // As the element has a width of 100%, a translation of 100% is equal to 100% of the parent (.noUi-base)\n        var connectWidth = h - l;\n        var translateRule = \"translate(\" + inRuleOrder(transformDirection(l, connectWidth) + \"%\", \"0\") + \")\";\n        var scaleRule = \"scale(\" + inRuleOrder(connectWidth / 100, \"1\") + \")\";\n        scope_Connects[index].style[options.transformRule] =\n            translateRule + \" \" + scaleRule;\n    }\n    // Parses value passed to .set method. Returns current value if not parse-able.\n    function resolveToValue(to, handleNumber) {\n        // Setting with null indicates an 'ignore'.\n        // Inputting 'false' is invalid.\n        if (to === null || to === false || to === undefined) {\n            return scope_Locations[handleNumber];\n        }\n        // If a formatted number was passed, attempt to decode it.\n        if (typeof to === \"number\") {\n            to = String(to);\n        }\n        to = options.format.from(to);\n        if (to !== false) {\n            to = scope_Spectrum.toStepping(to);\n        }\n        // If parsing the number failed, use the current value.\n        if (to === false || isNaN(to)) {\n            return scope_Locations[handleNumber];\n        }\n        return to;\n    }\n    // Set the slider value.\n    function valueSet(input, fireSetEvent, exactInput) {\n        var values = asArray(input);\n        var isInit = scope_Locations[0] === undefined;\n        // Event fires by default\n        fireSetEvent = fireSetEvent === undefined ? true : fireSetEvent;\n        // Animation is optional.\n        // Make sure the initial values were set before using animated placement.\n        if (options.animate && !isInit) {\n            addClassFor(scope_Target, options.cssClasses.tap, options.animationDuration);\n        }\n        // First pass, without lookAhead but with lookBackward. Values are set from left to right.\n        scope_HandleNumbers.forEach(function (handleNumber) {\n            setHandle(handleNumber, resolveToValue(values[handleNumber], handleNumber), true, false, exactInput);\n        });\n        var i = scope_HandleNumbers.length === 1 ? 0 : 1;\n        // Spread handles evenly across the slider if the range has no size (min=max)\n        if (isInit && scope_Spectrum.hasNoSize()) {\n            exactInput = true;\n            scope_Locations[0] = 0;\n            if (scope_HandleNumbers.length > 1) {\n                var space_1 = 100 / (scope_HandleNumbers.length - 1);\n                scope_HandleNumbers.forEach(function (handleNumber) {\n                    scope_Locations[handleNumber] = handleNumber * space_1;\n                });\n            }\n        }\n        // Secondary passes. Now that all base values are set, apply constraints.\n        // Iterate all handles to ensure constraints are applied for the entire slider (Issue #1009)\n        for (; i < scope_HandleNumbers.length; ++i) {\n            scope_HandleNumbers.forEach(function (handleNumber) {\n                setHandle(handleNumber, scope_Locations[handleNumber], true, true, exactInput);\n            });\n        }\n        setZindex();\n        scope_HandleNumbers.forEach(function (handleNumber) {\n            fireEvent(\"update\", handleNumber);\n            // Fire the event only for handles that received a new value, as per #579\n            if (values[handleNumber] !== null && fireSetEvent) {\n                fireEvent(\"set\", handleNumber);\n            }\n        });\n    }\n    // Reset slider to initial values\n    function valueReset(fireSetEvent) {\n        valueSet(options.start, fireSetEvent);\n    }\n    // Set value for a single handle\n    function valueSetHandle(handleNumber, value, fireSetEvent, exactInput) {\n        // Ensure numeric input\n        handleNumber = Number(handleNumber);\n        if (!(handleNumber >= 0 && handleNumber < scope_HandleNumbers.length)) {\n            throw new Error(\"noUiSlider: invalid handle number, got: \" + handleNumber);\n        }\n        // Look both backward and forward, since we don't want this handle to \"push\" other handles (#960);\n        // The exactInput argument can be used to ignore slider stepping (#436)\n        setHandle(handleNumber, resolveToValue(value, handleNumber), true, true, exactInput);\n        fireEvent(\"update\", handleNumber);\n        if (fireSetEvent) {\n            fireEvent(\"set\", handleNumber);\n        }\n    }\n    // Get the slider value.\n    function valueGet(unencoded) {\n        if (unencoded === void 0) { unencoded = false; }\n        if (unencoded) {\n            // return a copy of the raw values\n            return scope_Values.length === 1 ? scope_Values[0] : scope_Values.slice(0);\n        }\n        var values = scope_Values.map(options.format.to);\n        // If only one handle is used, return a single value.\n        if (values.length === 1) {\n            return values[0];\n        }\n        return values;\n    }\n    // Removes classes from the root and empties it.\n    function destroy() {\n        // remove protected internal listeners\n        removeEvent(INTERNAL_EVENT_NS.aria);\n        removeEvent(INTERNAL_EVENT_NS.tooltips);\n        Object.keys(options.cssClasses).forEach(function (key) {\n            removeClass(scope_Target, options.cssClasses[key]);\n        });\n        while (scope_Target.firstChild) {\n            scope_Target.removeChild(scope_Target.firstChild);\n        }\n        delete scope_Target.noUiSlider;\n    }\n    function getNextStepsForHandle(handleNumber) {\n        var location = scope_Locations[handleNumber];\n        var nearbySteps = scope_Spectrum.getNearbySteps(location);\n        var value = scope_Values[handleNumber];\n        var increment = nearbySteps.thisStep.step;\n        var decrement = null;\n        // If snapped, directly use defined step value\n        if (options.snap) {\n            return [\n                value - nearbySteps.stepBefore.startValue || null,\n                nearbySteps.stepAfter.startValue - value || null,\n            ];\n        }\n        // If the next value in this step moves into the next step,\n        // the increment is the start of the next step - the current value\n        if (increment !== false) {\n            if (value + increment > nearbySteps.stepAfter.startValue) {\n                increment = nearbySteps.stepAfter.startValue - value;\n            }\n        }\n        // If the value is beyond the starting point\n        if (value > nearbySteps.thisStep.startValue) {\n            decrement = nearbySteps.thisStep.step;\n        }\n        else if (nearbySteps.stepBefore.step === false) {\n            decrement = false;\n        }\n        // If a handle is at the start of a step, it always steps back into the previous step first\n        else {\n            decrement = value - nearbySteps.stepBefore.highestStep;\n        }\n        // Now, if at the slider edges, there is no in/decrement\n        if (location === 100) {\n            increment = null;\n        }\n        else if (location === 0) {\n            decrement = null;\n        }\n        // As per #391, the comparison for the decrement step can have some rounding issues.\n        var stepDecimals = scope_Spectrum.countStepDecimals();\n        // Round per #391\n        if (increment !== null && increment !== false) {\n            increment = Number(increment.toFixed(stepDecimals));\n        }\n        if (decrement !== null && decrement !== false) {\n            decrement = Number(decrement.toFixed(stepDecimals));\n        }\n        return [decrement, increment];\n    }\n    // Get the current step size for the slider.\n    function getNextSteps() {\n        return scope_HandleNumbers.map(getNextStepsForHandle);\n    }\n    // Updatable: margin, limit, padding, step, range, animate, snap\n    function updateOptions(optionsToUpdate, fireSetEvent) {\n        // Spectrum is created using the range, snap, direction and step options.\n        // 'snap' and 'step' can be updated.\n        // If 'snap' and 'step' are not passed, they should remain unchanged.\n        var v = valueGet();\n        var updateAble = [\n            \"margin\",\n            \"limit\",\n            \"padding\",\n            \"range\",\n            \"animate\",\n            \"snap\",\n            \"step\",\n            \"format\",\n            \"pips\",\n            \"tooltips\",\n            \"connect\",\n        ];\n        // Only change options that we're actually passed to update.\n        updateAble.forEach(function (name) {\n            // Check for undefined. null removes the value.\n            if (optionsToUpdate[name] !== undefined) {\n                originalOptions[name] = optionsToUpdate[name];\n            }\n        });\n        var newOptions = testOptions(originalOptions);\n        // Load new options into the slider state\n        updateAble.forEach(function (name) {\n            if (optionsToUpdate[name] !== undefined) {\n                options[name] = newOptions[name];\n            }\n        });\n        scope_Spectrum = newOptions.spectrum;\n        // Limit, margin and padding depend on the spectrum but are stored outside of it. (#677)\n        options.margin = newOptions.margin;\n        options.limit = newOptions.limit;\n        options.padding = newOptions.padding;\n        // Update pips, removes existing.\n        if (options.pips) {\n            pips(options.pips);\n        }\n        else {\n            removePips();\n        }\n        // Update tooltips, removes existing.\n        if (options.tooltips) {\n            tooltips();\n        }\n        else {\n            removeTooltips();\n        }\n        // Invalidate the current positioning so valueSet forces an update.\n        scope_Locations = [];\n        valueSet(isSet(optionsToUpdate.start) ? optionsToUpdate.start : v, fireSetEvent);\n        // Update connects only if it was set\n        if (optionsToUpdate.connect) {\n            updateConnectOption();\n        }\n    }\n    function updateConnectOption() {\n        // IE supported way of removing children including event handlers\n        while (scope_ConnectBase.firstChild) {\n            scope_ConnectBase.removeChild(scope_ConnectBase.firstChild);\n        }\n        // Adding new connects according to the new connect options\n        for (var i = 0; i <= options.handles; i++) {\n            scope_Connects[i] = addConnect(scope_ConnectBase, options.connect[i]);\n            updateConnect(i);\n        }\n        // re-adding drag events for the new connect elements\n        // to ignore the other events we have to negate the 'if (!behaviour.fixed)' check\n        bindSliderEvents({ drag: options.events.drag, fixed: true });\n    }\n    // Invert options for connect handles\n    function invertConnects() {\n        scope_ConnectsInverted = !scope_ConnectsInverted;\n        testConnect(options, \n        // inverse the connect boolean array\n        options.connect.map(function (b) { return !b; }));\n        updateConnectOption();\n    }\n    // Initialization steps\n    function setupSlider() {\n        // Create the base element, initialize HTML and set classes.\n        // Add handles and connect elements.\n        scope_Base = addSlider(scope_Target);\n        addElements(options.connect, scope_Base);\n        // Attach user events.\n        bindSliderEvents(options.events);\n        // Use the public value method to set the start values.\n        valueSet(options.start);\n        if (options.pips) {\n            pips(options.pips);\n        }\n        if (options.tooltips) {\n            tooltips();\n        }\n        aria();\n    }\n    setupSlider();\n    var scope_Self = {\n        destroy: destroy,\n        steps: getNextSteps,\n        on: bindEvent,\n        off: removeEvent,\n        get: valueGet,\n        set: valueSet,\n        setHandle: valueSetHandle,\n        reset: valueReset,\n        disable: disable,\n        enable: enable,\n        // Exposed for unit testing, don't use this in your application.\n        __moveHandles: function (upward, proposal, handleNumbers) {\n            moveHandles(upward, proposal, scope_Locations, handleNumbers);\n        },\n        options: originalOptions,\n        updateOptions: updateOptions,\n        target: scope_Target,\n        removePips: removePips,\n        removeTooltips: removeTooltips,\n        getPositions: function () {\n            return scope_Locations.slice();\n        },\n        getTooltips: function () {\n            return scope_Tooltips;\n        },\n        getOrigins: function () {\n            return scope_Handles;\n        },\n        pips: pips, // Issue #594\n    };\n    return scope_Self;\n}\n// Run the standard initializer\nfunction initialize(target, originalOptions) {\n    if (!target || !target.nodeName) {\n        throw new Error(\"noUiSlider: create requires a single element, got: \" + target);\n    }\n    // Throw an error if the slider was already initialized.\n    if (target.noUiSlider) {\n        throw new Error(\"noUiSlider: Slider was already initialized.\");\n    }\n    // Test the options and create the slider environment;\n    var options = testOptions(originalOptions);\n    var api = scope(target, options, originalOptions);\n    target.noUiSlider = api;\n    return api;\n}\nexport { initialize as create };\nexport { cssClasses };\nexport default {\n    // Exposed for unit testing, don't use this in your application.\n    __spectrum: Spectrum,\n    // A reference to the default classes, allows global changes.\n    // Use the cssClasses option for changes to one slider.\n    cssClasses: cssClasses,\n    create: initialize,\n};\n","import { Helios, xnet, gexf, gml, BehaviorFilter} from \"../../src/helios.js\";\nimport { getGPUTier } from 'detect-gpu';\n\n// import {Helios,xnet} from \"https://cdn.skypack.dev/helios-web?min\";\nimport * as d3Chromatic from \"d3-scale-chromatic\"\n// import d3 min and d3 max\nimport { min as d3Min, max as d3Max } from \"d3-array\";\nimport { scaleLinear as d3ScaleLinear, scaleOrdinal as d3ScaleOrdinal, scaleSequential as d3ScaleSequential, scaleDiverging as d3ScaleDiverging } from \"d3-scale\"\nimport { select as d3Select, selectAll as d3SelectAll } from \"d3-selection\"\nimport {geoNaturalEarth1 as d3GeoNaturalEarth1, geoPath as d3GeoPath} from \"d3-geo\"\nimport { zoomIdentity as d3ZoomIdentity } from \"d3-zoom\";\nimport { rgb as d3rgb, hsl as d3hsl } from \"d3-color\"\nimport { default as extraColors } from \"./library/extraColors\"\nimport { default as autocomplete } from \"./library/auto-complete_cache-control.js\"\nimport { default as jsonQuery } from \"json-query\"\nimport { default as d3Legend } from \"./library/d3_legends.js\"\nimport { default as HeliosUI } from \"./library/HeliosUI.js\"\nimport { default as pako } from \"pako\"\nimport * as topojson from \"topojson-client\";\nimport * as noUiSlider from 'nouislider';\nimport 'nouislider/dist/nouislider.css';\nimport \"./css/customSliders.css\";\nimport {default as mapCountries10m} from './maps/countries-50m.json';\n\nlet allColors = {}\nObject.assign(allColors, d3Chromatic);\nObject.assign(allColors, extraColors);\n\n// console.log(allColors);\n//remove last color of category10\n// allColors[\"schemeCategory10\"].pop();\n\n//sort colors by name\nallColors = Object.keys(allColors).sort().reduce((r, k) => (r[k] = allColors[k], r), {});\n\n// allColors[\"interpolateRedBlackBlue\"] = d3ScaleLinear().domain([0,0.5,1.0]).range([\"red\",\"black\", \"blue\"])\nlet ignoredProperties = new Set([\"ID\", \"edges\", \"neighbors\"]);\n\nconst originalWidth = document.body.clientWidth;\nconst originalHeight = document.body.clientHeight;\n\n// console.log(`SVG Width: ${svgWidth}, SVG Height: ${svgHeight}`);\n// Set the projection to center of SVG\nconst globeProjection = d3GeoNaturalEarth1()\n\t// .scale((svgWidth / 1.3) / (2 * Math.PI)) // tweak scale to fit nicely\n\t// .translate([-svgWidth / 2, -svgHeight / 2]);\nconst path = d3GeoPath().projection(globeProjection);\nconst countries = topojson.feature(mapCountries10m, mapCountries10m.objects.countries).features;\n\nglobeProjection.fitSize([originalWidth, originalHeight], {\n\ttype: \"FeatureCollection\",\n\tfeatures: countries, // your topojson/geojson features array\n});\n\n\n\nfunction throttleLast(func, wait, scope) {\n\tlet timer = null;\n\treturn function () {\n\t\tif (timer) clearTimeout(timer);\n\t\tlet args = arguments;\n\t\ttimer = setTimeout(function () {\n\t\t\ttimer = null;\n\t\t\tfunc.apply(scope, args);\n\t\t}, wait);\n\t};\n};\n\n/*\n * Some auxiliary functions\n*/\nfunction sortByCount(anArray) {\n\tlet map = anArray.reduce((p, c) => {\n\t\tp.set(c, (p.get(c) || 0) + 1);\n\t\treturn p;\n\t}, new Map());\n\n\tlet newArray = Array.from(map.keys()).sort((a, b) => map.get(b) - map.get(a));\n\n\tif (newArray.includes(\"None\")) {\n\t\tnewArray = newArray.filter(d => d != \"None\")\n\t\tnewArray.push(\"None\")\n\t}\n\n\tif (newArray.includes(\"Other\")) {\n\t\tnewArray = newArray.filter(d => d != \"Other\")\n\t\tnewArray.push(\"Other\")\n\t}\n\treturn newArray;\n}\n\nfunction downloadText(filename, text) {\n\tvar element = document.createElement('a');\n\telement.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\n\telement.setAttribute('download', filename);\n\n\telement.style.display = 'none';\n\tdocument.body.appendChild(element);\n\n\telement.click();\n\n\tdocument.body.removeChild(element);\n}\n\nfunction wrapText() {\n\tlet width = 600;\n\tlet padding = 10\n\tlet self = d3Select(this),\n\t\ttextLength = self.node().getComputedTextLength(),\n\t\ttext = self.text();\n\twhile (textLength > (width - 2 * padding) && text.length > 0) {\n\t\ttext = text.slice(0, -1);\n\t\tself.text(text + '…');\n\t\ttextLength = self.node().getComputedTextLength();\n\t}\n}\n\n\n/*\n * Reading all parameters from the URL\n*/\n\nconst queryString = window.location.search;\nconst urlParams = new URLSearchParams(queryString);\n\nconst startSettings = {};\n\nstartSettings.networkName = \"institutions_ROBOTICS\"\nif (urlParams.has(\"network\")) {\n\tstartSettings.networkName = urlParams.get(\"network\");\n}\n\nstartSettings.use2D = true;\nif (urlParams.has(\"use2d\")) {\n\tstartSettings.use2D = true;\n}\n\nif (urlParams.has(\"2d\")) {\n\tstartSettings.use2D = true;\n}\n\nif (urlParams.has(\"format\")) {\n\tstartSettings.format = urlParams.get(\"format\");\n}\n\n\nstartSettings.searchEnabled = true;\nif (urlParams.has(\"nosearch\")) {\n\tstartSettings.searchEnabled = false;\n}\n\nstartSettings.legendsEnabled = true;\nif (urlParams.has(\"nolegends\")) {\n\tstartSettings.legendsEnabled = false;\n}\n\n\nstartSettings.hyperbolic = false;\nif (urlParams.has(\"hyperbolic\")) {\n\tstartSettings.hyperbolic = true;\n}\n\nstartSettings.shaded = false;\nif (urlParams.has(\"shaded\")) {\n\tstartSettings.shaded = true;\n}\n\nstartSettings.advancedEdges = false;\nif (urlParams.has(\"advanced\")) {\n\tstartSettings.advancedEdges = true;\n}\n\n\nstartSettings.definedSize = 0.20;\nif (urlParams.has(\"size\")) {\n\tstartSettings.definedSize = +urlParams.get(\"size\");\n}\n\n\nstartSettings.definedOpacity = 0.005;\nif (urlParams.has(\"opacity\")) {\n\tstartSettings.definedOpacity = +urlParams.get(\"opacity\");\n}\n\n\nstartSettings.edgeColorProperty = 0.005;\nif (urlParams.has(\"edgeColorProperty\")) {\n\tstartSettings.edgeColorProperty = +urlParams.get(\"edgeColorProperty\");\n}\n\nstartSettings.edgeWidthProperty = -1;\nif (urlParams.has(\"edgeWidthProperty\")) {\n\tstartSettings.edgeWidthProperty = +urlParams.get(\"edgeWidthProperty\");\n}\n\n\nstartSettings.edgeFilterProperty = -1;\nif (urlParams.has(\"edgeFilterProperty\")) {\n\tstartSettings.edgeFilterProperty = +urlParams.get(\"edgeFilterProperty\");\n}\n\nstartSettings.startZoomLevel = null;\nif (urlParams.has(\"zoom\")) {\n\tstartSettings.startZoomLevel = +urlParams.get(\"zoom\");\n}\n\nstartSettings.darkBackground = false;\nstartSettings.backgroundColor = [0.0, 0.0, 0.0, 0.0]\n\n// if (urlParams.has(\"dark\")) {\n// \tstartSettings.darkBackground = true;\n// \tstartSettings.backgroundColor = [0.0, 0.0, 0.0, 1.0]\n// }\n\nstartSettings.densityEnabled = false;\nif (urlParams.has(\"density\")) {\n\tstartSettings.densityEnabled = true;\n}\n\nstartSettings.densityScale = 0.1;\nif (urlParams.has(\"densityScale\")) {\n\tstartSettings.densityScale = +urlParams.get(\"densityScale\");\n}\n\nstartSettings.topographic = false;\nif (urlParams.has(\"topographic\")) {\n\tstartSettings.topographic = true;\n}\n\n\nstartSettings.additiveBlending = false;\nif (urlParams.has(\"additive\") && startSettings.darkBackground) {\n\tstartSettings.additiveBlending = true;\n}\n\nstartSettings.colorProperty = \"year\";\nif (urlParams.has(\"colorProperty\")) {\n\tstartSettings.colorProperty = urlParams.get(\"colorProperty\");\n}\n\nstartSettings.edgeColorProperty = \"year\";\nif (urlParams.has(\"edgeColorProperty\")) {\n\tstartSettings.edgeColorProperty = urlParams.get(\"edgeColorProperty\");\n}\n\n\nstartSettings.densityProperty = \"Uniform\";\nif (urlParams.has(\"densityProperty\")) {\n\tstartSettings.densityProperty = urlParams.get(\"densityProperty\");\n}\n\nstartSettings.vsDensityProperty = \"None\";\nif (urlParams.has(\"vsDensityProperty\")) {\n\tstartSettings.vsDensityProperty = urlParams.get(\"vsDensityProperty\");\n}\n\nstartSettings.shallNormalizeVsDensity = false;\nif (urlParams.has(\"shallNormalizeVsDensity\")) {\n\tstartSettings.vsDensityNormalize = urlParams.get(\"shallNormalizeVsDensity\");\n}\n\n\nlet visualizeNetwork = async (networkData, settings = startSettings) => {\n\t\n\t// apply projection to networkData.nodes[].Position\n\n\tconst nodes = Object.values(networkData.nodes);\n\tif (nodes.length > 0) {\n\t\t// networkData.nodes is a object with node IDs as keys\n\t\tconsole.log(nodes);\n\t\tconst scale = 1.0/originalHeight*1000*0.701;\n\t\tconst tx = originalWidth / 2;\n\t\tconst ty = -originalHeight / 2;\n\t\tnodes.forEach(node => {\n\t\t\tif (node.Position && node.Position.length === 2) {\n\t\t\t\tlet projected = globeProjection([node.Position[0], node.Position[1]]);\n\t\t\t\tnode.Position = [(projected[0]-tx)*scale, (-projected[1]-ty)*scale];\n\t\t\t} else if (node.Position && node.Position.length === 3) {\n\t\t\t\tlet projected = globeProjection([node.Position[1], node.Position[0]]);\n\t\t\t\tnode.Position = [(projected[0]-tx)*scale, -(projected[1]-ty)*scale, node.Position[2]];\n\t\t\t}\n\t\t});\n\t}\n\t/*\n\t * Defining default and initial parameters\n\t*/\n\n\t// Initial property used for coloring\n\tlet colorProperty = settings.colorProperty;\n\tlet edgeColorProperty = settings.edgeColorProperty;\n\tlet edgeDefaultColor = [0.2, 0.2, 0.2, 1.0];\n\tlet edgeDefaultSelectedColor = [0.95, 0.75, 0.1, 100000.0];\n\n\t// Default visual properties\n\tlet defaultNodeScale = 1.0;\n\tlet defaultNodeOpacity = 1.0;\n\tlet defaultOutlineColor = [0.25, 0.25, 0.25, 1.0];\n\t// if (settings.darkBackground) {\n\t// \tdefaultOutlineColor = [0.0, 0.0, 0.0, 1.0];\n\t// }\n\n\t\n\tlet defaultOutlineWidthFactor = 3.0;\n\n\tlet updateNodeSize = node => node._originalSize;\n\n\tlet nodesOnScreen = [];\n\tlet selectedOnScreen = new Map();\n\n\tlet categoriesOnScreen = [];\n\t\n\t// shaded mode does not require any outline\n\tif (settings.shaded) {\n\t\tdefaultOutlineWidthFactor = 0.0;\n\t}\n\n\t// Zoom level for the whole network\n\tlet defaultZoomLevel = 1.0;\n\tlet defaultZoomLevelBigNetworks = 0.35;\n\n\t// Zoom level for centered nodes\n\tlet minCenteredNodeZoomLevel = 4.0;\n\n\t// Default node size and Edge Ooacity\n\tlet currentGlobalNodeSizeScale = 1.0;\n\tlet currentGlobalEdgeOpacityScale = 1.0;\n\tlet currentBandwidth = 28.1;//35.0;\n\tlet currentDensityWeight = 398.1071705534973;//2000.0;\n\tlet chosenDensityProperty = settings.densityProperty;\n\tlet chosenVsDensityProperty = settings.vsDensityProperty;\n\tlet shallNormalizeVsDensity = settings.vsDensityNormalize;\n\tlet densityDiverging = true;\n\n\t// Scale and Opacity of Highlighted nodes\n\tlet highlightNodeScale = 1.5;\n\tlet highlightNodeOpacityScale = 1e10;// as opaque as possible\n\n\t// Scale and Opacity of selected nodes\n\tlet selectedNodeScale = 3.0;\n\tlet selectedNodeOpacityScale = 1e10; // as opaque as possible\n\tlet selectedOutlineColor = [0.9, 0.9, 0.0];\n\n\tlet selectedNeighborNodeSizeScale = 2.0;\n\tlet selectedNeighborNodeOpacityScale = 1.5;\n\n\n\t// Visual properties of non selected and non highlighted nodes\n\tlet nonSelectedNodeOpacityScale = 1.0;\n\tlet nonSelectedNodeSizeScale = 0.5;\n\tlet nonSelectedDarkerColorFactor = 1.5;\n\tlet nonSelectedBrighterColorFactor = 0.5;\n\n\t// Will make all colors darker or brither (depending on the background)\n\t// when highligthing nodes\n\t// can be super slow for large networks\n\tlet onHighlightChangeColorsEnabled = false;\n\t// when selecting nodes (double clicking)\n\tlet onSelectionChangeColorsEnabled = true;\n\n\n\t// Initializing other properties\n\tlet sequencialColormap = \"interpolateAmber\";\n\tlet densityColormap = \"interpolateOrRd\";\n\tif (settings.darkBackground) {\n\t\tdensityColormap = \"interpolateInferno\";\n\t}\n\tlet densityDivergingColormap = \"interpolatePrinsenvlag\";\n\tif (settings.darkBackground) {\n\t\tdensityDivergingColormap = \"interpolateRedshift\";\n\t}\n\tlet categoricalColormap = \"schemeCategory10\";\n\n\tlet edgeCategoricalColormap = \"schemeCategory10\";\n\tlet edgeSequencialColormap = \"interpolateAmber\";\n\n\tlet useCategoricalColormap = false;\n\tlet useEdgeCategoricalColormap = false;\n\n\n\n\n\n\tconst gpuTier = await getGPUTier();\n\tconsole.log(gpuTier);\n\tconst isHighSpeed = !gpuTier.isMobile && gpuTier.tier > 2;\n\n\n\tlet networkName = \"Network\";\n\tif (settings.networkName !== null) {\n\t\tnetworkName = settings.networkName;\n\t}\n\t// let networkData = xnet.convertXNET2JSON(xnetNetwork);\n\tlet nodeCount = Object.keys(networkData.nodes).length;\n\tlet bigNetwork = nodeCount > 100000;\n\n\n\t/*\n\t * Initializing Helios\n\t*/\n\tlet networkWeighted = false;\n\tif(networkData.edges.length>0){\n\t\tnetworkWeighted = \"weight\" in networkData.edges[0];\n\t}\n\tconsole.log(networkData.edges);\n\tlet helios = new Helios({\n\t\telementID: \"netviz\",\n\t\t// densityElementID: \"densityRegion\",\n\t\tdensity: settings.densityEnabled,\n\t\tdensityScale: settings.densityScale,\n\t\ttopographic: settings.topographic,\n\t\tnodes: networkData.nodes,\n\t\tedges: networkData.edges,\n\t\tuse2D: settings.use2D,\n\t\ttracking: true,\n\t\thyperbolic: settings.hyperbolic,\n\t\t// if network is weighted\n\t\tedgesWidthFromNodes: !networkWeighted,\n\t\tfastEdges: !settings.advancedEdges && bigNetwork,\n\t\tforceSupersample: isHighSpeed,\n\t\tautoStartLayout: false,\n\t\tbackgroundLayer: true,\n\t\twebGLOptions: {\n\t\t\talpha:true,\n\t\t\t// depth:true,\n\t\t\t// antialias:true,\n\t\t\tdesynchronized:true,\n\t\t\tpowerPreference:\"high-performance\",\n\t\t\tpremultipliedAlpha:false,\n\t\t}\n\t});\n\n\tlet ToBase64 = function (u8) {\n\t\treturn btoa(String.fromCharCode.apply(null, u8));\n\t}\n\n\tlet FromBase64 = function (str) {\n\t\treturn atob(str).split('').map(function (c) { return c.charCodeAt(0); });\n\t}\n\n\t// console.log(JSON.parse(pako.inflate(FromBase64(ToBase64(pako.deflate(JSON.stringify(helios)))), { to: 'string' })))\n\n\n\t// .edgesColorsFromNodes(false)\n\t// .edgeColor((edgeIndex,fromNode,toNode)=>{\n\t// \tif (edges[edgeIndex].weight>5000){\n\t// \t   return [1,0,0,1]; //red\n\t// \t}else{\n\t// \t   return [0,0,1,1]; //blue\n\t// \t}\n\t// }).update();\n\n\t// Calculating node degree so that \n\n\tfor (let [key, node] of Object.entries(helios.network.nodes)) {\n\t\tlet nodeDegree = node.edges.length;\n\t\t// check if nodes have property Size\n\t\tif (node.size) {\n\t\t\tnode._originalSize = node.size;\n\t\t} else {\n\t\t\tnode._originalSize = defaultNodeScale * (1.0 + Math.log10(nodeDegree + 1.0));\n\t\t}\n\t}\n\n\tlet updateNodeSelectionStyle = (node) => {\n\t\t// Hovering\n\t\tif ((typeof node._highlighted === 'undefined')) {\n\t\t\tnode._highlighted = false;\n\t\t}\n\t\tif ((typeof node._filtered === 'undefined')) {\n\t\t\tnode._filtered = false;\n\t\t}\n\t\t// After double click\n\t\tif ((typeof node._selected === 'undefined')) {\n\t\t\tnode._selected = false;\n\t\t}\n\t\t// After double click\n\t\tif ((typeof node._selectedNeighbor === 'undefined')) {\n\t\t\tnode._selectedNeighbor = false;\n\t\t}\n\n\t\tlet nodeSize = node._originalSize;\n\t\tlet nodeOutlineWidth = defaultOutlineWidthFactor;\n\t\tlet nodeOpacity = defaultNodeOpacity;\n\n\t\tif (node._selected) {\n\t\t\tnodeSize *= selectedNodeScale;\n\t\t\tnodeOpacity *= selectedNodeOpacityScale;\n\t\t\tnode.outlineColor = selectedOutlineColor;\n\t\t\tnodeOutlineWidth *= selectedNodeScale;\n\t\t\t// set edge color to black\n\n\t\t} else if (node._selectedNeighbor) {\n\t\t\tnodeSize *= selectedNeighborNodeSizeScale;\n\t\t\tnodeOpacity *= selectedNeighborNodeOpacityScale;\n\t\t\tnode.outlineColor = defaultOutlineColor;\n\t\t\tnodeOutlineWidth *= selectedNeighborNodeSizeScale;\n\t\t} else {\n\t\t\tnode.outlineColor = defaultOutlineColor;\n\t\t}\n\n\t\tif (node._highlighted) {\n\t\t\tnodeSize *= highlightNodeScale;\n\t\t\tnodeOpacity *= highlightNodeOpacityScale;\n\t\t\tnodeOutlineWidth *= highlightNodeScale;\n\t\t}\n\n\t\tif (node._filtered) {\n\t\t\tnodeSize *= 0.25;\n\t\t\tnodeOpacity *= 1.0;\n\t\t\tnodeOutlineWidth *= 0.0;\n\t\t}\n\n\n\t\tnode.size = nodeSize;\n\t\tnode.opacity = nodeOpacity;\n\t\tnode.outlineWidth = nodeOutlineWidth;\n\t};\n\n\tlet nodesHighlight = (nodes, shallHighlight, shallUpdate = true) => {\n\n\t\tnodes.forEach(node => {\n\t\t\tnode._highlighted = shallHighlight;\n\t\t\tupdateNodeSelectionStyle(node);\n\t\t});\n\t\t\n\n\t\tif (onHighlightChangeColorsEnabled) {\n\t\t\tif ((nodes?.length) && shallHighlight) {\n\t\t\t\tupdateNodeSelectionOrHighlightedColors(true);\n\t\t\t} else {\n\t\t\t\tupdateNodeSelectionOrHighlightedColors();\n\t\t\t}\n\t\t}\n\n\t\tif (shallUpdate) {\n\t\t\thelios.update();\n\t\t\thelios.render();\n\t\t}\n\t\tedgesHighlightUpdate();\n\t\tupdateHighlightedList();\n\t};\n\n\thelios.pickeableEdges([]);\n\n\tlet behaviorFilter = new BehaviorFilter(helios);\n\n\n\tlet edgesHighlightUpdate = ()=>{\n\t\t// let updatedEdgeIDs = new Set();\n\t\t// helios.network.indexedNodes.forEach(node => {\n\t\t// \tif(node._highlighted || node._selected){\n\t\t// \t\tnode.edges.forEach(edgeIndex => updatedEdgeIDs.add(edgeIndex));\n\t\t// \t}\n\t\t// });\n\t\thelios.edgeColor((edgeIndex, fromNode, toNode) => {\n\t\t\tif(fromNode._highlighted || fromNode._selected || toNode._highlighted || toNode._selected){\n\t\t\t\treturn edgeDefaultSelectedColor;\n\t\t\t}else{\n\t\t\t\treturn edgeDefaultColor;\n\t\t\t}\n\t\t});\n\t};\n\tlet nodesSelect = (nodes, shallSelect, shallUpdate = true) => {\n\t\tnodes.forEach(node => {\n\t\t\tnode._selected = shallSelect;\n\t\t\tnode._selectedNeighbor = shallSelect;\n\t\t\tnode.neighbors.forEach(neighNode => {\n\t\t\t\tneighNode._selectedNeighbor = shallSelect;\n\t\t\t\tupdateNodeSelectionStyle(neighNode);\n\t\t\t});\n\t\t\tupdateNodeSelectionStyle(node);\n\t\t});\n\t\t\n\t\t\n\n\t\tif ((nodes?.length) && shallSelect) {\n\t\t\tupdateNodeSelectionGlobalStyle(true);\n\t\t\tif (onSelectionChangeColorsEnabled) {\n\t\t\t\tupdateNodeSelectionOrHighlightedColors(true);\n\t\t\t}\n\t\t} else {\n\t\t\tupdateNodeSelectionGlobalStyle();\n\t\t\tif (onSelectionChangeColorsEnabled) {\n\t\t\t\tupdateNodeSelectionOrHighlightedColors();\n\t\t\t}\n\t\t}\n\t\tedgesHighlightUpdate();\n\t\tupdateHighlightedList();\n\t\tif (shallUpdate) {\n\t\t\thelios.update();\n\t\t\thelios.render();\n\t\t}\n\t};\n\n\tlet centerOnNodes = (nodes) => {\n\t\tif (!nodes || nodes.length > 0) {\n\t\t\tif (helios.zoomFactor() < minCenteredNodeZoomLevel) {\n\t\t\t\thelios.zoomFactor(minCenteredNodeZoomLevel, 500);\n\t\t\t}\n\t\t\t// resetting node selection\n\t\t\tnodesSelect(helios.centeredNodes(), false, false);\n\t\t\t// set selection\n\t\t\tnodesSelect(nodes, true, false);\n\t\t\thelios.centerOnNodes(nodes, 500);\n\t\t\tlet pickableSet = new Set();\n\t\t\tnodes.forEach(node => {\n\t\t\t\thelios.pickeableEdges(node.edges);\n\t\t\t});\n\t\t\thelios.update();\n\t\t\thelios.render();\n\n\t\t\tselectedOnScreen = new Map(nodes.map(node => [node.index, 1.0]));\n\t\t\t// get neighbors and add them to the selection\n\t\t\t\n\t\t\tlet neighbors2Weight = {};\n\t\t\t\n\t\t\tnodes.forEach(node => {\n\t\t\t\tnode.neighbors.forEach(neighNode => {\n\t\t\t\t\tselectedOnScreen.set(neighNode.index, 0.75);\n\t\t\t\t});\n\t\t\t});\n\n\n\t\t\tupdateLabelsInScreen();\n\t\t} else { // Reset\n\t\t\tnodesSelect(helios.centeredNodes(), false, false);\n\t\t\thelios.zoomFactor(defaultZoomLevel, 500);\n\t\t\thelios.centerOnNodes([], 500);\n\t\t\thelios.pickeableEdges([]);\n\t\t\thelios.update();\n\t\t\thelios.render();\n\t\t\tselectedOnScreen = new Map();\n\t\t\tupdateLabelsInScreen();\n\t\t}\n\t}\n\n\tlet getLabelStyleColorAndOutline = (color) => {\n\t\tlet colorRGB = d3rgb(color[0] * 255, color[1] * 255, color[2] * 255);\n\t\tlet colorHSL = d3hsl(colorRGB);\n\t\tlet outlineWidth;\n\t\tlet outlineColor;\n\t\tlet textColor;\n\n\t\tif (colorHSL.l > 0.33) {\n\t\t\ttextColor = colorRGB.formatRgb();\n\t\t\toutlineColor = \"rgba(5,5,5,1.0)\";\n\t\t\toutlineWidth = 1.15;\n\t\t} else {\n\t\t\ttextColor = colorRGB.formatRgb();\n\t\t\toutlineColor = \"rgba(250,250,250,1.0)\";\n\t\t\toutlineWidth = 1.15;\n\t\t}\n\t\treturn { fill: textColor, stroke: outlineColor, strokeWidth: outlineWidth };\n\t}\n\n\tlet stylizeLabel = (element, color) => {\n\t\tlet colorResult = getLabelStyleColorAndOutline(color);\n\t\tlet outlineColor = colorResult.stroke;\n\t\tlet outlineWidth = colorResult.strokeWidth;\n\t\telement.style.color = colorResult.fill;\n\t\telement.style[\"text-shadow\"] = `-${outlineWidth}px -${outlineWidth}px 1.0px ${outlineColor}, ${outlineWidth}px -${outlineWidth}px 1.0px ${outlineColor}, -${outlineWidth}px ${outlineWidth}px 1.0px ${outlineColor}, ${outlineWidth}px ${outlineWidth}px 1.0px ${outlineColor}`;\n\t}\n\n\tlet stylizeTooltip = (label, color, x, y, isnew) => {\n\t\tif (label) {\n\t\t\t// tooltipElement.style.left = x + \"px\";\n\t\t\t// tooltipElement.style.top = y + \"px\";\n\t\t\tif (typeof x !== 'undefined' && typeof y !== 'undefined') {\n\t\t\t\ttooltipElement.group.style.transform = `translate(${x+2}px, ${y-25}px)`;\n\t\t\t\t// tooltipElement.setAttribute('x', x);\n\t\t\t\t// tooltipElement.setAttribute('y', y);\n\t\t\t}\n\n\t\t\tif (isnew) {\n\t\t\t\t// tooltipElement.style.display = \"block\";\n\t\t\t\tlet styleData = getLabelStyleColorAndOutline(color);\n\t\t\t\t// tooltipElement.fillText.setAttribute(\"fill\", styleData.fill);\n\t\t\t\t// tooltipElement.outlineText.setAttribute(\"stroke\", styleData.stroke);\n\t\t\t\ttooltipElement.fillText.setAttribute(\"fill\", \"rgba(255,255,255,1.0)\");\n\t\t\t\ttooltipElement.outlineText.setAttribute(\"stroke\", \"rgba(5,5,5,1.0)\");\n\t\t\t\ttooltipElement.outlineText.setAttribute(\"stroke-width\", styleData.strokeWidth * 3.0);\n\t\t\t\ttooltipElement.group.setAttribute(\"visibility\", \"visible\");\n\t\t\t}\n\t\t\ttooltipElement.fillText.textContent = label;\n\t\t\ttooltipElement.outlineText.textContent = label;\n\t\t\t// set text of the SVG element\n\t\t\t// if label is too long, it will split it into multiple lines\n\t\t\tlet maxLabelLength = 30;\n\t\t\tlet labelLines = [];\n\t\t\tif (label.length > maxLabelLength) {\n\t\t\t\tlet words = label.split(\" \");\n\t\t\t\tlet line = \"\";\n\t\t\t\twords.forEach(word => {\n\t\t\t\t\tif (line.length + word.length > maxLabelLength) {\n\t\t\t\t\t\tlabelLines.push(line);\n\t\t\t\t\t\tline = \"\";\n\t\t\t\t\t}\n\t\t\t\t\tline += word + \" \";\n\t\t\t\t});\n\t\t\t\tlabelLines.push(line);\n\t\t\t} else {\n\t\t\t\tlabelLines.push(label);\n\t\t\t}\n\t\t\ttooltipElement.fillText.innerHTML = \"\";\n\t\t\ttooltipElement.outlineText.innerHTML = \"\";\n\n\t\t\tlabelLines.forEach(line => {\n\t\t\t\tlet textElement = document.createElementNS(\"http://www.w3.org/2000/svg\", \"tspan\");\n\t\t\t\ttextElement.textContent = line;\n\t\t\t\ttextElement.setAttribute(\"x\", 0);\n\t\t\t\ttextElement.setAttribute(\"dy\", \"1.2em\");\n\t\t\t\ttooltipElement.fillText.appendChild(textElement);\n\t\t\t\ttooltipElement.outlineText.appendChild(textElement.cloneNode(true));\n\t\t\t});\n\n\t\t} else {\n\t\t\ttooltipElement.group.setAttribute(\"visibility\", \"hidden\");\n\t\t}\n\t}\n\n\tlet showTooltipForNode = (node, x, y, isNew) => {\n\t\tif (node) {\n\t\t\tlet label = node.Label ?? node.Title ?? node.ID;\n\t\t\tstylizeTooltip(label, node.color, x, y, isNew);\n\t\t\t// nodesHighlight([node],true);\n\t\t} else {\n\t\t\tstylizeTooltip(null);\n\t\t}\n\t}\n\n\tlet showTooltipForEdge = (edge, x, y, isNew) => {\n\t\tif (edge) {\n\t\t\tlet fromLabel = edge.source.Label ?? edge.source.Title ?? edge.source.ID;\n\t\t\tlet toLabel = edge.target.Label ?? edge.target.Title ?? edge.target.ID;\n\t\t\tlet label = fromLabel + \" - \" + toLabel;\n\t\t\t// project nodes\n\t\t\tlet projectedNodes = helios.getProjectedPositions([edge.source, edge.target]);\n\t\t\t\t// if projectedNode[2] is negative, the node is behind the camera\n\t\t\t\t// if (projectedNode[2] < -1 && !helios._use2D) {\n\t\t\t\t// \treturn null;\n\t\t\t\t// }\n\t\t\t// console.log(projectedNodes);\n\t\t\tstylizeTooltip(label, edge.source.color, x, y, isNew);\n\t\t\t// nodesHighlight([edge.source,edge.target],true);\n\t\t} else {\n\t\t\tstylizeTooltip(null);\n\t\t}\n\t}\n\n\n\tlet updateNodeSelectionGlobalStyle = (hasSelection) => {\n\t\t// hasSelection not set \n\t\tif (typeof hasSelection === 'undefined') {\n\t\t\thasSelection = helios.network.indexedNodes.some(node => node._selected);\n\t\t}\n\t\tif (hasSelection) {\n\t\t\thelios.nodesGlobalOpacityScale(nonSelectedNodeOpacityScale);\n\t\t\thelios.nodesGlobalSizeScale(nonSelectedNodeSizeScale * currentGlobalNodeSizeScale);\n\t\t\t// helios.edgesGlobalWidthScale(nonSelectedNodeSizeScale * currentGlobalNodeSizeScale);\n\t\t\thelios.nodesGlobalOutlineWidthScale(nonSelectedNodeSizeScale * currentGlobalNodeSizeScale);\n\t\t\thelios.edgesGlobalOpacityScale(currentGlobalEdgeOpacityScale * nonSelectedNodeOpacityScale);\n\t\t} else {\n\t\t\thelios.nodesGlobalOpacityScale(defaultNodeOpacity);\n\t\t\thelios.nodesGlobalSizeScale(currentGlobalNodeSizeScale);\n\t\t\t// helios.edgesGlobalWidthScale(currentGlobalNodeSizeScale);\n\t\t\thelios.nodesGlobalOutlineWidthScale(currentGlobalNodeSizeScale);\n\t\t\thelios.edgesGlobalOpacityScale(currentGlobalEdgeOpacityScale);\n\t\t\t\n\t\t}\n\t}\n\n\tlet updateNodeSelectionOrHighlightedColors = (hasSelection) => {\n\t\t// hasSelection not set \n\t\tif (typeof hasSelection === 'undefined') {\n\t\t\thasSelection = helios.network.indexedNodes.some(node => node._selected || node._highlighted || node._selectedNeighbor);\n\t\t}\n\t\tif (hasSelection) {\n\t\t\thelios.nodeColor(node => {\n\t\t\t\t// console.log(\"\"+[color.r,color.g,color.b])\n\t\t\t\tif (node._selected || node._highlighted || node._selectedNeighbor) {\n\t\t\t\t\treturn node._originalColor;\n\t\t\t\t} else {\n\t\t\t\t\treturn settings.darkBackground ? node._darkerColor : node._brighterColor;\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\thelios.nodeColor(node => {\n\t\t\t\treturn node._originalColor;\n\t\t\t});\n\t\t}\n\t}\n\n\n\n\n\tlet logK = Math.log10(helios.network.indexedEdges.length / helios.network.indexedNodes.length);\n\tlet logN = Math.log10(helios.network.indexedNodes.length);\n\tlet logDensity = Math.log10(2.0 * helios.network.indexedEdges.length / helios.network.indexedNodes.length / (helios.network.indexedNodes.length - 1.0));\n\n\t// let estimatedZoom = Math.pow(10,1.3400+0.2144*logK+-0.3623*logN+0.0000*logDensity)\n\t// let estimatedOpacity = Math.pow(10,1.8854+-0.6344*logK+-0.4964*logN+0.0000*logDensity)\n\t// // estimatedSize = Math.pow(10,-0.4027+-0.0007*logK+0.0335*logN+0.0000*logDensity)\n\t// let logZoom =  Math.log10(estimatedZoom);\n\t// let estimatedSize = Math.pow(10,0.6432+0.1667*logK+-0.2493*logN+-0.7805*logZoom+0.0000*logDensity)\n\n\tlet estimatedZoom = Math.pow(10, 1.2601 + 0.2488 * logK + -0.3631 * logN + 0.0000 * logDensity)\n\tlet estimatedOpacity = Math.pow(10, 1.9968 + -0.6822 * logK + -0.4954 * logN + 0.0000 * logDensity)\n\n\t// Not using estimated zoom\n\tif (!bigNetwork) {\n\t\testimatedZoom = defaultZoomLevel;\n\t} else {\n\t\testimatedZoom = defaultZoomLevelBigNetworks;\n\t}\n\n\tlet logZoom = Math.log10(estimatedZoom);\n\t// let estimatedSize = Math.pow(10,-0.2833+-0.0520*logK+0.0347*logN+0.0000*logDensity)\n\n\tlet estimatedSize = Math.pow(10, 0.8744 + 0.1766 * logK + -0.2989 * logN + -0.9187 * logZoom + 0.0000 * logDensity) * 0.75;\n\n\t// estimatedZoom = Math.pow(10,1.2771+0.2415*logK+-0.3629*logN+0.0000*logDensity)\n\t// estimatedOpacity = Math.pow(10,1.8780+-0.6312*logK+-0.4965*logN+0.0000*logDensity)\n\t// estimatedSize = Math.pow(10,-0.3259+-0.0337*logK+0.0343*logN+0.0000*logDensity)\n\t// estimatedSize3 = Math.pow(10,0.7583+0.1713*logK+-0.2738*logN+-0.8489*logZoom+0.0000*logDensity)\n\n\tif (settings.definedSize) {\n\t\tcurrentGlobalNodeSizeScale = settings.definedSize;\n\t} else {\n\t\tcurrentGlobalNodeSizeScale = estimatedSize;\n\t}\n\n\thelios.network.indexedEdges.length\n\n\tif (settings.definedOpacity) {\n\t\tcurrentGlobalEdgeOpacityScale = settings.definedOpacity;\n\t} else {\n\t\tcurrentGlobalEdgeOpacityScale = estimatedOpacity;\n\t}\n\n\tdefaultZoomLevel = estimatedZoom;\n\n\thelios.onNodeHoverStart((node, event) => {\n\t\tshowTooltipForNode(node, event?.clientX, event?.clientY, true);\n\t\tnodesHighlight([node], true);\n\t\t// console.log(`Start: ${node.ID}`);\n\t});\n\n\thelios.onNodeHoverMove((node, event) => {\n\t\tshowTooltipForNode(node, event?.clientX, event?.clientY, false);\n\t});\n\n\thelios.onNodeHoverEnd((node, event) => {\n\t\tif (node) {\n\t\t\tnodesHighlight([node], false);\n\t\t}\n\t\tshowTooltipForNode(null);\n\t\t// console.log(`Hover ended: ${node.ID}`);\n\t});\n\n\thelios.onNodeClick((node, event) => {\n\t\tif (node) {\n\t\t\tconsole.log(`Clicked: ${node.Label??node.ID}`);\n\t\t} else {\n\t\t\tconsole.log(`Clicked on background`);\n\t\t}\n\t});\n\n\thelios.onNodeDoubleClick((node, event) => {\n\t\tif (node) {\n\t\t\tconsole.log(`Double Clicked: ${node.Label??node.ID}`);\n\t\t\tcenterOnNodes([node]);\n\n\t\t\t// Special function for dealing with MAG/Openalex Citation networks\n\t\t\tif (\"mag id\" in node) {\n\t\t\t\twindow.open(`https://explore.openalex.org/works/W${node[\"mag id\"]}`, \"helios_mag\");\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log(`Double clicked on background`);\n\t\t\tcenterOnNodes([]); //Reset centers\n\n\t\t}\n\t});\n\n\thelios.onEdgeHoverStart((edge, event) => {\n\t\tshowTooltipForEdge(edge, event?.clientX, event?.clientY, true);\n\t\tif (edge) {\n\t\t\t// Only the non selected endpoints are highlighted\n\t\t\tnodesHighlight([edge.source, edge.target].filter(node => !node._selected), true);\n\t\t}\n\t});\n\n\thelios.onEdgeHoverMove((edge, event) => {\n\t\tshowTooltipForEdge(edge, event?.clientX, event?.clientY, false);\n\t});\n\n\thelios.onEdgeHoverEnd((edge, event) => {\n\t\tif (edge) {\n\t\t\t// Only the non selected endpoints were highlighted\n\t\t\tnodesHighlight([edge.source, edge.target].filter(node => !node._selected), false);\n\t\t}\n\t\tshowTooltipForEdge(null);\n\t});\n\n\thelios.onEdgeClick((edge, event) => {\n\t\tconsole.log(\"Edge clicked\");\n\t\tconsole.log(edge);\n\t\tif (edge){\n\t\t\tconsole.log(`Clicked: ${edge.source.Label??edge.source.ID} - ${edge.target.Label??edge.source.ID}`);\n\t\t}\n\t});\n\n\thelios.backgroundColor(settings.backgroundColor) // set background color\n\t\t// .nodeColor(node=>{ // Example on how to define colors\n\t\t// \tlet color = d3rgb(colorScale(node.ID));\n\t\t// \t// console.log(\"\"+[color.r,color.g,color.b])\n\t\t// \treturn [color.r/255,color.g/255,color.b/255];\n\t\t// })\n\t\t// .nodeSize(node=>{ // Example on how to define size\n\t\t// \treturn Math.random()*5+1.0;\n\t\t// })\n\t\t.edgesGlobalOpacityScale(1.0) // set edges intensity);\n\t\t.nodeSize(updateNodeSize)\n\t\t.nodeOutlineWidth(defaultOutlineWidthFactor)\n\t\t.nodeOutlineColor([0.0, 0.0, 0.0, 1.0]) // set outline color\n\t\t.additiveBlending(settings.additiveBlending)\n\t\t.shadedNodes(settings.shaded)\n\t\t.semanticZoomExponent(0.65);\n\t\n\t// console.log(helios.nodeOutlineColor(0));\n\n\n\tlet buttonInformation = {\n\n\t\t\"Load\": {\n\t\t\tname: \"⬆︎\",\n\t\t\tmapColor: \"#B1C3B6\",\n\t\t\tcolor: \"#008758\",\n\t\t\ttooltipText: \"Load network\",\n\t\t\taction: (selection, d, event) => {\n\t\t\t\t// Open file upload dialog from scratch\n\t\t\t\tlet fileInput = document.createElement(\"input\");\n\t\t\t\t// Append fileInput to body (not visible) and then remove it\n\t\t\t\tfileInput.style.display = \"none\";\n\t\t\t\tdocument.body.appendChild(fileInput);\n\t\t\t\tfileInput.type = \"file\";\n\t\t\t\tfileInput.accept = \".gml,.xnet,.gexf,.json\";\n\t\t\t\tfileInput.onchange = event => {\n\t\t\t\t\tlet fileObject = event.target.files[0];\n\t\t\t\t\tconsole.log(\"Loading file\");\n\t\t\t\t\tloadNetworkFromUploadedFile(fileObject);\n\t\t\t\t\tdocument.body.removeChild(fileInput);\n\t\t\t\t}\n\t\t\t\tfileInput.click();\n\t\t\t\t\n\t\t\t},\n\t\t\textra: selection => {\n\n\t\t\t}\n\t\t},\n\t\t\"Save\": {\n\t\t\tname: \"⬇︎\",\n\t\t\tmapColor: \"#B1C3B6\",\n\t\t\tcolor: \"#A72850\",\n\t\t\ttooltipText: \"Download network\",\n\t\t\taction: (selection, d, event) => {\n\t\t\t\tif(event?.shiftKey){\n\t\t\t\t\tlet pos = helios.network.positions;\n\t\t\t\t\tlet postext = \"\" ;\n\t\t\t\t\tfor(let i=0;i<pos.length;i+=3){\n\t\t\t\t\t\tpostext+= `${pos[i]} ${pos[i+1]} ${pos[i+2]}\\n`;\n\t\t\t\t\t}\n\t\t\t\t\tdownloadText(networkName+\"_positions.txt\",postext);\n\t\t\t\t}else{\n\t\t\t\t\tlet gmlString = saveGML(helios.network);\n\t\t\t\t\tdownloadText(networkName + \"_helios.gml\", gmlString);\n\t\t\t\t}\n\t\t\t},\n\t\t\textra: selection => {\n\n\t\t\t}\n\t\t},\n\t\t\"Export\": {\n\t\t\tname: \"SVG\",\n\t\t\tmapColor: \"#B1C3B6\",\n\t\t\tcolor: \"#777722\",\n\t\t\ttooltipText: \"Export image\",\n\t\t\taction: (selection, d, event) => {\n\t\t\t\t// if shift is pressed save as png\n\t\t\t\tlet extension = \".svg\";\n\t\t\t\tif (event?.shiftKey) {\n\t\t\t\t\textension = \".png\";\n\t\t\t\t}\n\t\t\t\t// if option is pressed save with transparent background\n\t\t\t\tlet backgroundColor = settings.backgroundColor;\n\t\t\t\tif (event?.altKey) {\n\t\t\t\t\tbackgroundColor = [settings.backgroundColor[0], settings.backgroundColor[1], settings.backgroundColor[2], 0.0];\n\t\t\t\t}\n\t\t\t\tlet dpr = window.devicePixelRatio || 1;\n\t\t\t\thelios.exportFigure(networkName + extension, {\n\t\t\t\t\tscale: dpr*2.0,\n\t\t\t\t\t// width: 2048,\n\t\t\t\t\t// height: 2048,\n\t\t\t\t\tsupersampleFactor: 2.0,\n\t\t\t\t\tbackgroundColor: backgroundColor,\n\t\t\t\t});\n\t\t\t},\n\t\t\textra: selection => {\n\n\t\t\t}\n\t\t},\n\t\t\"Size\": {\n\t\t\tname: \"Size\",\n\t\t\tmapColor: \"#AFB9C9\",\n\t\t\tcolor: \"#1E6099\",\n\t\t\ttooltipText: \"Set node sizes\",\n\t\t\taction: null,\n\t\t\textra: selection => {\n\t\t\t\tselection.append(\"input\")\n\t\t\t\t\t.attr(\"type\", \"range\")\n\t\t\t\t\t.attr(\"min\", \"-1\")\n\t\t\t\t\t.attr(\"max\", \"1\")\n\t\t\t\t\t.attr(\"step\", \"0.1\")\n\t\t\t\t\t.attr(\"value\", \"\" + Math.log10(currentGlobalNodeSizeScale))\n\t\t\t\t\t.attr(\"id\", \"nodeSizeSlider\")\n\t\t\t\t\t.classed(\"slider\", true)\n\t\t\t\t\t.style(\"min-width\", \"30px\")\n\t\t\t\t\t.on(\"input\", (event, d) => {\n\t\t\t\t\t\tcurrentGlobalNodeSizeScale = Math.pow(10, parseFloat(d3Select(\"#nodeSizeSlider\").property(\"value\")));\n\t\t\t\t\t\t// helios.nodesGlobalSizeScale(currentGlobalNodeSizeScale);\n\t\t\t\t\t\t// helios.nodesGlobalOutlineWidthScale(currentGlobalNodeSizeScale);\n\t\t\t\t\t\tupdateNodeSelectionGlobalStyle();\n\t\t\t\t\t\t// helios.update();\n\t\t\t\t\t\thelios.render();\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\"Color\": {\n\t\t\tname: \"Color\",\n\t\t\tmapColor: \"#AFB9C9\",\n\t\t\tcolor: \"#1E6099\",\n\t\t\ttooltipText: \"Set color property and colormap\",\n\t\t\taction: null,\n\t\t\textra: selection => {\n\t\t\t\tselection.append(\"select\")\n\t\t\t\t\t.attr(\"id\", \"colorSelector\")\n\t\t\t\t\t.classed(\"selector\", true)\n\t\t\t\t\t.style(\"min-width\", \"30px\")\n\t\t\t\t\t.on(\"change\", (event, d) => {\n\t\t\t\t\t\tupdateColorSelection();\n\t\t\t\t\t})\n\t\t\t\t\t.selectAll(\"option\")\n\t\t\t\t\t.data(Object.entries(helios.network.indexedNodes[0]))\n\t\t\t\t\t.enter()\n\t\t\t\t\t.filter(d => !d[0].startsWith(\"_\"))\n\t\t\t\t\t.filter(d => !ignoredProperties.has(d[0]) && !d[0].startsWith(\"_\"))\n\t\t\t\t\t.append(\"option\")\n\t\t\t\t\t.attr(\"value\", d => d[0])\n\t\t\t\t\t.property(\"selected\", d => d[0] == colorProperty)\n\t\t\t\t\t.text(d => d[0]);\n\n\t\t\t\tselection.append(\"select\")\n\t\t\t\t\t.attr(\"id\", \"colormapSelector\")\n\t\t\t\t\t.classed(\"selector\", true)\n\t\t\t\t\t.style(\"min-width\", \"30px\");\n\t\t\t\t// .classed(\"slider\",true)\n\t\t\t\t// \n\t\t\t\t// .on(\"input\", (event,d)=>{\n\t\t\t\t// \thelios.edgesOpacity(Math.pow(10,parseFloat(d3Select(\"#edgeOpacitySlider\").property(\"value\"))));\n\t\t\t\t// \thelios.update();\n\t\t\t\t// \thelios.render();\n\t\t\t\t// \tevent.stopPropagation();\n\t\t\t\t// });\n\t\t\t}\n\t\t},\n\t\t\"Edges\": {\n\t\t\tname: \"Edges\",\n\t\t\tmapColor: \"#B1A58C\",\n\t\t\tcolor: \"#903C22\",\n\t\t\ttooltipText: \"Set edges opacity\",\n\t\t\taction: null,\n\t\t\textra: selection => {\n\t\t\t\tconsole.log(\"CALLED\");\n\t\t\t\tselection.append(\"input\")\n\t\t\t\t\t.attr(\"type\", \"range\")\n\t\t\t\t\t.attr(\"min\", \"0\")\n\t\t\t\t\t.attr(\"max\", \"1\")\n\t\t\t\t\t.attr(\"step\", (1 / 255) + \"\")\n\t\t\t\t\t.attr(\"value\", \"\" + (Math.round(255 * currentGlobalEdgeOpacityScale) / 255))\n\t\t\t\t\t.attr(\"id\", \"edgeOpacitySlider\")\n\t\t\t\t\t.classed(\"slider\", true)\n\t\t\t\t\t.style(\"min-width\", \"30px\")\n\t\t\t\t\t.on(\"input\", (event, d) => {\n\t\t\t\t\t\t// helios.edgesOpacity(Math.pow(10,parseFloat(d3Select(\"#edgeOpacitySlider\").property(\"value\"))));\n\t\t\t\t\t\tcurrentGlobalEdgeOpacityScale = parseFloat(d3Select(\"#edgeOpacitySlider\").property(\"value\"))\n\n\t\t\t\t\t\thelios.edgesGlobalOpacityScale(currentGlobalEdgeOpacityScale);\n\t\t\t\t\t\t// helios.update();\n\t\t\t\t\t\thelios.render();\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t// \"E Color\": {\n\t\t// \tname: \"E Color\",\n\t\t// \tmapColor: \"#B1A58C\",\n\t\t// \tcolor: \"#903C22\",\n\t\t// \ttooltipText: \"Set edge color property and colormap\",\n\t\t// \taction: null,\n\t\t// \textra: selection => {\n\t\t// \t\tselection.append(\"select\")\n\t\t// \t\t\t.attr(\"id\", \"edgeColorSelector\")\n\t\t// \t\t\t.classed(\"selector\", true)\n\t\t// \t\t\t.style(\"min-width\", \"40px\")\n\t\t// \t\t\t.on(\"change\", (event, d) => {\n\t\t// \t\t\t\t// updateColorSelection();\n\t\t// \t\t\t})\n\t\t// \t\t\t.selectAll(\"option\")\n\t\t// \t\t\t.data(Object.entries(helios.network.edgeAttributes))\n\t\t// \t\t\t.enter()\n\t\t// \t\t\t.filter(d => !d[0].startsWith(\"_\"))\n\t\t// \t\t\t.filter(d => !ignoredProperties.has(d[0]) && !d[0].startsWith(\"_\"))\n\t\t// \t\t\t.append(\"option\")\n\t\t// \t\t\t.attr(\"value\", d => d[0])\n\t\t// \t\t\t.property(\"selected\", d => d[0] == colorProperty)\n\t\t// \t\t\t.text(d => d[0]);\n\n\t\t// \t\tselection.append(\"select\")\n\t\t// \t\t\t.attr(\"id\", \"edgeColormapSelector\")\n\t\t// \t\t\t.classed(\"selector\", true)\n\t\t// \t\t\t.style(\"min-width\", \"30px\");\n\t\t// \t\t// .classed(\"slider\",true)\n\t\t// \t\t// \n\t\t// \t\t// .on(\"input\", (event,d)=>{\n\t\t// \t\t// \thelios.edgesOpacity(Math.pow(10,parseFloat(d3Select(\"#edgeOpacitySlider\").property(\"value\"))));\n\t\t// \t\t// \thelios.update();\n\t\t// \t\t// \thelios.render();\n\t\t// \t\t// \tevent.stopPropagation();\n\t\t// \t\t// });\n\t\t// \t}\n\t\t// },\n\t\t\"Filter\": {\n\t\t\tname: \"\",\n\t\t\tmapColor: \"#B1A58C\",\n\t\t\tcolor: \"rgba(0,0,0,0.0)\",\n\t\t\ttooltipText: \"\",\n\t\t\taction: null,\n\t\t\textra: selection => {\n\t\t\t\tselection\n\t\t\t\t\t.style(\"width\", \"100%\")\n\t\t\t\t\t.style(\"height\", \"100px\")\n\t\t\t\t\t.style(\"padding\", \"55px\");\n\t\t\t\tlet panelComponent = selection.append(\"div\")\n\t\t\t\t\t.attr(\"id\", \"yearSelector\")\n\t\t\t\t\t.classed(\"selectorContainer\", true)\n\t\t\t\t\t.style(\"width\", \"100%\")\n\t\t\t\t\n\t\t\t\t// get edge properties\n\t\t\t\tlet edgeProperties = helios.network.edgeAttributes[\"year\"].map(year => +year);\n\n\t\t\t\tlet minRangeYear = d3Min(edgeProperties);\n\t\t\t\tlet maxRangeYear = d3Max(edgeProperties);\n\n\t\t\t\tlet intFormater = { to: d => (\"\" + Math.round(d)) };\n\t\t\t\tlet timeSlider = noUiSlider.create(panelComponent.node(), {\n\t\t\t\t\tstart: [minRangeYear, maxRangeYear],\n\t\t\t\t\tstep: 1,\n\t\t\t\t\tbehaviour: \"tap-drag\",\n\t\t\t\t\ttooltips: [intFormater, intFormater],\n\t\t\t\t\tconnect: true,\n\t\t\t\t\trange: {\n\t\t\t\t\t\t'min': minRangeYear,\n\t\t\t\t\t\t'max': maxRangeYear\n\t\t\t\t\t},\n\t\t\t\t\tpips: {\n\t\t\t\t\t\tmode: 'steps',\n\t\t\t\t\t\tdensity: 2,\n\t\t\t\t\t\t// skip odd years\n\t\t\t\t\t\t// filter: (value, type) => {\n\t\t\t\t\t\t// \tif (type === 0) {\n\t\t\t\t\t\t// \t\treturn value % 2 === 0;\n\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t// \treturn true;\n\t\t\t\t\t\t// },\n\t\t\t\t\t\tformat: intFormater\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\ttimeSlider.on('update', async (values) => {\n\t\t\t\t\tlet minYear = parseInt(values[0]);\n\t\t\t\t\tlet maxYear = parseInt(values[1]);\n\t\t\t\t\t// filter out nodes \n\t\t\t\t\thelios.network.indexedNodes.forEach(node => {\n\t\t\t\t\t\tif (node.year) {\n\t\t\t\t\t\t\tnode._filtered = node.year < minYear || node.year > maxYear;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnode._filtered = true; // if no year property, filter out\n\t\t\t\t\t\t}\n\t\t\t\t\t\tupdateNodeSelectionStyle(node);\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\thelios.update();\n\t\t\t\t\thelios.render();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\"Density\": {\n\t\t\tname: \"Density\",\n\t\t\tmapColor: \"#A1A152\",\n\t\t\tcolor: \"#505005\",\n\t\t\ttooltipText: \"Set the density property\",\n\t\t\taction: null,\n\t\t\textra: selection => {\n\t\t\t\tselection.append(\"select\")\n\t\t\t\t\t.attr(\"id\", \"densitySelector\")\n\t\t\t\t\t.classed(\"selector\", true)\n\t\t\t\t\t.style(\"min-width\", \"30px\")\n\t\t\t\t\t.on(\"change\", (event, d) => {\n\t\t\t\t\t\t// updateColorSelection();\n\t\t\t\t\t\tupdateDensityAttributes();\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t})\n\t\t\t\t\t.selectAll(\"option\")\n\t\t\t\t\t.data(Object.entries(helios.network.indexedNodes[0]).concat([[\"Uniform\", 0], [\"Degree\", 0]]))\n\t\t\t\t\t.enter()\n\t\t\t\t\t.filter(d => !d[0].startsWith(\"_\"))\n\t\t\t\t\t.filter(d => !ignoredProperties.has(d[0]) && !d[0].startsWith(\"_\"))\n\t\t\t\t\t.filter(d => d[0] != \"index\")\n\t\t\t\t\t.filter(d => Number.isFinite(d[1]))\n\t\t\t\t\t.append(\"option\")\n\t\t\t\t\t.attr(\"value\", d => d[0])\n\t\t\t\t\t.property(\"selected\", d => d[0] == chosenDensityProperty)\n\t\t\t\t\t.text(d => d[0]);\n\t\t\t}\n\t\t},\n\t\t\"vs\": {\n\t\t\tname: \"vs\",\n\t\t\tmapColor: \"#A1A152\",\n\t\t\tcolor: \"#505005\",\n\t\t\ttooltipText: \"Set a second density property to compare with the first one.\",\n\t\t\taction: null,\n\t\t\textra: selection => {\n\t\t\t\tselection.append(\"select\")\n\t\t\t\t\t.attr(\"id\", \"vsDensitySelector\")\n\t\t\t\t\t.classed(\"selector\", true)\n\t\t\t\t\t.style(\"min-width\", \"30px\")\n\t\t\t\t\t.on(\"change\", (event, d) => {\n\t\t\t\t\t\t// updateColorSelection();\n\t\t\t\t\t\tupdateDensityAttributes();\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t})\n\t\t\t\t\t.selectAll(\"option\")\n\t\t\t\t\t.data(Object.entries(helios.network.indexedNodes[0]).concat([[\"Uniform\", 0], [\"Degree\", 0], [\"None\", 0]]))\n\t\t\t\t\t.enter()\n\t\t\t\t\t.filter(d => !d[0].startsWith(\"_\"))\n\t\t\t\t\t.filter(d => !ignoredProperties.has(d[0]) && !d[0].startsWith(\"_\"))\n\t\t\t\t\t.filter(d => d[0] != \"index\")\n\t\t\t\t\t.filter(d => Number.isFinite(d[1]))\n\t\t\t\t\t.append(\"option\")\n\t\t\t\t\t.attr(\"value\", d => d[0])\n\t\t\t\t\t.property(\"selected\", d => d[0] == chosenVsDensityProperty)\n\t\t\t\t\t.text(d => d[0]);\n\t\t\t}\n\t\t},\n\t\t\"Norm.\": {\n\t\t\tname: \"Norm.\",\n\t\t\tmapColor: \"#A1A152\",\n\t\t\tcolor: \"#505005\",\n\t\t\ttooltipText: \"Use the checkbox for independent normalization.\",\n\t\t\taction: null,\n\t\t\textra: selection => {\n\t\t\t\tselection.append(\"input\")\n\t\t\t\t\t.attr(\"type\", \"checkbox\")\n\t\t\t\t\t.attr(\"id\", \"vsNormCheckbox\")\n\t\t\t\t\t//set activate according to densityNormalizeV\n\t\t\t\t\t.property(\"checked\", shallNormalizeVsDensity)\n\t\t\t\t\t.on(\"change\", (event, d) => {\n\t\t\t\t\t\tshallNormalizeVsDensity = d3Select(\"#vsNormCheckbox\").property(\"checked\");\n\t\t\t\t\t\tupdateDensityAttributes();\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t}\n\t\t\t\t\t);\n\n\n\n\t\t\t}\n\t\t},\n\t\t\"Bandwidth\": {\n\t\t\tname: \"Bandwidth\",\n\t\t\tmapColor: \"#A1A152\",\n\t\t\tcolor: \"#505005\",\n\t\t\taction: null,\n\t\t\ttooltipText: \"Controls the bandwidth of the density map\",\n\t\t\textra: selection => {\n\t\t\t\tselection.append(\"input\")\n\t\t\t\t\t.attr(\"type\", \"range\")\n\t\t\t\t\t.attr(\"min\", \"-0.9\")\n\t\t\t\t\t.attr(\"max\", \"2.5\")\n\t\t\t\t\t.attr(\"step\", 0.05 + \"\")\n\t\t\t\t\t.attr(\"value\", \"\" + Math.log10(currentBandwidth))\n\t\t\t\t\t.attr(\"id\", \"densityBandwidthSlider\")\n\t\t\t\t\t.classed(\"slider\", true)\n\t\t\t\t\t.style(\"min-width\", \"60px\")\n\t\t\t\t\t.on(\"input\", (event, d) => {\n\t\t\t\t\t\t// helios.edgesOpacity(Math.pow(10,parseFloat(d3Select(\"#edgeOpacitySlider\").property(\"value\"))));\n\t\t\t\t\t\tcurrentBandwidth = Math.pow(10, parseFloat(d3Select(\"#densityBandwidthSlider\").property(\"value\")))\n\t\t\t\t\t\thelios.densityMap?.setBandwidth(currentBandwidth);\n\t\t\t\t\t\t// helios.update();\n\t\t\t\t\t\t// helios.redrawDensityMap();\n\t\t\t\t\t\thelios.redraw();\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t});\n\t\t\t\thelios.densityMap?.setBandwidth(currentBandwidth);\n\t\t\t}\n\t\t},\n\t\t\"Weight\": {\n\t\t\tname: \"Weight\",\n\t\t\tmapColor: \"#A1A152\",\n\t\t\tcolor: \"#505005\",\n\t\t\ttooltipText: \"Controls the intensity of the density map\",\n\t\t\taction: null,\n\t\t\textra: selection => {\n\t\t\t\tselection.append(\"input\")\n\t\t\t\t\t.attr(\"type\", \"range\")\n\t\t\t\t\t.attr(\"min\", \"0\")\n\t\t\t\t\t.attr(\"max\", \"10\")\n\t\t\t\t\t.attr(\"step\", 0.1 + \"\")\n\t\t\t\t\t.attr(\"value\", \"\" + Math.log10(currentDensityWeight))\n\t\t\t\t\t.attr(\"id\", \"densityWeightSlider\")\n\t\t\t\t\t.classed(\"slider\", true)\n\t\t\t\t\t.style(\"min-width\", \"60px\")\n\t\t\t\t\t.on(\"input\", (event, d) => {\n\t\t\t\t\t\t// helios.edgesOpacity(Math.pow(10,parseFloat(d3Select(\"#edgeOpacitySlider\").property(\"value\"))));\n\t\t\t\t\t\tcurrentDensityWeight = Math.pow(10, parseFloat(d3Select(\"#densityWeightSlider\").property(\"value\")))\n\t\t\t\t\t\thelios.densityMap?.setKernelWeightScale(currentDensityWeight);\n\t\t\t\t\t\t// helios.update();\n\t\t\t\t\t\t// helios.redrawDensityMap();\n\t\t\t\t\t\thelios.redraw();\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t});\n\t\t\t\thelios.densityMap?.setKernelWeightScale(currentDensityWeight);\n\t\t\t}\n\t\t},\n\t\t\"Map\": {\n\t\t\tname: \"Map\",\n\t\t\tmapColor: \"#A1A152\",\n\t\t\tcolor: \"#505005\",\n\t\t\taction: null,\n\t\t\ttooltipText: \"Colormap for the density map\",\n\t\t\textra: selection => {\n\t\t\t\tselection.append(\"select\")\n\t\t\t\t\t.attr(\"id\", \"densityColormapSelector\")\n\t\t\t\t\t.classed(\"selector\", true)\n\t\t\t\t\t.style(\"min-width\", \"30px\")\n\t\t\t\t\t.on(\"change\", (event, d) => {\n\t\t\t\t\t\tupdateDensityColors();\n\t\t\t\t\t});\n\t\t\t\tupdateDensityColorsList();\n\t\t\t}\n\t\t},\n\t}\n\n\n\t// this.buttonsPanelElement = document.createElement(\"div\");\n\t// this.buttonsPanelElement.classList.add(\"buttonsPanel\");\n\t// this.inputPanelElement = document.createElement(\"div\");\n\t// this.inputPanelElement.classList.add(\"inputPanel\");\n\t// this.sliderElement = document.createElement(\"div\");\n\t// this.sliderElement.classList.add(\"timeSlider\");\n\n\t// this.element.appendChild(this.buttonsPanelElement);\n\t// this.buttonsPanelElement.appendChild(this.inputPanelElement);\n\t// this.inputPanelElement.appendChild(this.sliderElement);\n\n\n\n\tlet backgroundLayer = d3Select(helios.backgroundLayer)\n\t// get body height and width\n\t// new g element \n\tconst groupMap = backgroundLayer.append(\"g\")\n\t\t.attr(\"id\", \"mapLayer\")\n\t\t// .attr(\"transform\", `translate(${-originalSVGWidth / 2},${-originalSVGHeight / 2})`)\n\t\t.attr(\"vector-effect\", \"non-scaling-stroke\");\n\n\t\n\tlet firstDraw = true;\n\thelios.onDraw(() => {\n\t\tif (firstDraw) {\n\n\t\t\tgroupMap.append(\"path\")\n\t\t\t.datum({ type: \"Sphere\" })\n\t\t\t.attr(\"d\", path)\n\t\t\t.attr(\"fill\", \"white\")\n\t\t\t.attr(\"stroke\", \"none\")\n\t\t\t.attr(\"stroke-width\", 0);\n\t\t\tgroupMap.selectAll(\"path.countries\")\n\t\t\t\t.data(countries)\n\t\t\t\t.enter().append(\"path\")\n\t\t\t\t.attr(\"class\", \"countries\")\n\t\t\t\t.attr(\"d\", path)\n\t\t\t\t.attr(\"fill\", \"#C1AFA8\")\n\t\t\t\t.attr(\"stroke-linejoin\", \"round\")\n\t\t\t\t.attr(\"stroke-linecap\", \"round\")\n\t\t\t\t.attr(\"vector-effect\", \"non-scaling-stroke\")\n\t\t\t\t.attr(\"stroke\", \"white\");\n\t\t\t\t\n\t\t\tfirstDraw = false;\n\t\t}\n\t\tlet cameraDisplacementFactor = helios.cameraDisplacementFactor();\n\t\tlet svgWidth = helios.backgroundLayer.clientWidth;\n\t\tlet svgHeight = helios.backgroundLayer.clientHeight;\n\t\tlet xoffset=helios._camera.translatePosition[0];\n\t\tlet yoffset=helios._camera.translatePosition[1];\n\t\tlet x = (helios._camera.panX+xoffset)/cameraDisplacementFactor+svgWidth / 2;\n\t\tlet y = -(helios._camera.panY+yoffset)/cameraDisplacementFactor+svgHeight / 2;\n\t\tlet zoomFactor = helios._camera.zoomFactor;\n\t\t// console.log(`x: ${x}, y: ${y}, zoomFactor: ${zoomFactor}`);\n\t\t// x += svgWidth / 2;\n\t\t// y -= svgHeight / 2;\n\t\t// console.log(`helios._camera.panX: ${helios._camera.panX}, helios._camera.panY: ${helios._camera.panY}, helios._camera.zoomFactor: ${helios._camera.zoomFactor}`);\n\t\t// console.log(`svgWidth: ${svgWidth}, svgHeight: ${svgHeight}`);\n\t\t// console.log(`helios.svgLayer.clientWidth: ${helios.svgLayer.clientWidth}, helios.svgLayer.clientHeight: ${helios.svgLayer.clientHeight}`);\n\t\tgroupMap\n\t\t\t.attr(\"transform\", `translate(${x},${y}) scale(${zoomFactor*svgHeight/originalHeight}) translate(${-originalWidth / 2},${-originalHeight / 2})`);\n\t});\n\n\n\t// let legendView = d3Select(helios.overlay).append(\"svg\")\n\t// \t.attr(\"id\", \"legendView\")\n\t// \t.style(\"position\", \"absolute\")\n\t// \t.style(\"left\", \"10px\")\n\t// \t.style(\"top\", \"10px\")\n\t// \t.style(\"pointer-events\", \"none\")\n\n\t// let densityLegendView = d3Select(helios.overlay).append(\"svg\")\n\t// \t.style(\"position\", \"absolute\")\n\t// \t.attr(\"id\", \"densityLegendView\")\n\t// \t.style(\"right\", \"10px\")\n\t// \t.style(\"bottom\", \"25px\")\n\t// \t.style(\"top\", \"auto\")\n\t// \t.style(\"left\", \"auto\")\n\t// \t.style(\"pointer-events\", \"none\")\n\n\t// now using this.svgLayer instead of overlay and svg creation\n\t// svgLayer is already an svg, need to use g instead\n\n\n\tlet tooltipElement = {\n\t\tgroup: helios.svgLayer.appendChild(document.createElementNS('http://www.w3.org/2000/svg', 'g')),\n\t\ttext: \"\"\n\t\t// .attr(\"id\", \"tooltips\")\n\t};\n\n\ttooltipElement.group.setAttribute(\"id\", \"tooltips\");\n\ttooltipElement.outlineText = tooltipElement.group.appendChild(document.createElementNS('http://www.w3.org/2000/svg', 'text'))\n\ttooltipElement.fillText = tooltipElement.group.appendChild(document.createElementNS('http://www.w3.org/2000/svg', 'text'))\n\n\t\n\tlet legendView = d3Select(helios.svgLayer).append(\"g\")\n\t\t.attr(\"transform\", \"translate(10,10)\")\n\t\t.attr(\"id\", \"legendView\");\n\n\tlet densityLegendView = d3Select(helios.svgLayer).append(\"g\")\n\t\t.attr(\"id\", \"densityLegendView\");\n\n\tlet updateDensityLegendsPosition = () => {\n\t\tdensityLegendView.attr(\"transform\", \"translate(\" + (helios.svgLayer.clientWidth - 170) + \" \" + (helios.svgLayer.clientHeight - 75) + \")\")\n\t}\n\n\t// Update densityLegendView position with observer when svgLayer is resized\n\tlet densityLegendViewObserver = new ResizeObserver(entries => {\n\t\tif(helios.isReady()){\n\t\t\tfor (let entry of entries) {\n\t\t\t\tupdateDensityLegendsPosition();\n\t\t\t}\n\t\t}\n\t});\n\n\tupdateDensityLegendsPosition();\n\tdensityLegendViewObserver.observe(helios.canvasElement);\n\thelios.onCleanup(() => {\n\t\tdensityLegendViewObserver.disconnect();\n\t})\n\t\n\tlet holdCategories = [];\n\tlet updateCategoryFilter = (categories) => {\n\t\tlet allNodes = helios.network.indexedNodes;\n\t\t// nodesFiltered(allNodes, true, false);\n\t\tif (categories?.length > 0) {\n\t\t\tlet setCategories = new Set(categories);\n\t\t\t// nodesFiltered(allNodes.filter(d => setCategories.has(d[colorProperty])), false, false);\n\t\t\tbehaviorFilter.setFilter(\"categoryFilter\", node => !setCategories.has(node[colorProperty]), categories);\n\t\t} else {\n\t\t\t// nodesFiltered(allNodes.filter(d => d[colorProperty]!=\"None\"), false, false);\n\t\t\tbehaviorFilter.setFilter(\"categoryFilter\", node => node[colorProperty] == \"None\", categories);\n\t\t}\n\t\tbehaviorFilter.applyFilters();\n\t\tlet updatedNodes = behaviorFilter.updatedNodes();\n\t\tupdatedNodes.forEach(node => {\n\t\t\tupdateNodeSelectionStyle(node);\n\t\t});\n\t\tupdateDensityAttributes(false);\n\t\thelios.update();\n\t\thelios.render();\n\t}\n\n\tlet updateLegendCategorical = (property2color) => {\n\t\tlegendView.selectAll(\"*\").remove();\n\t\tlet legendItems = legendView.selectAll(\".legend\").data(property2color.keys());\n\n\t\tlegendView\n\t\t\t.style(\"width\", 350 + 'px')\n\t\t\t.style(\"height\", (property2color.size + 1) * 20 + 'px');\n\n\t\tlet legendEnter = legendItems.enter().append(\"g\")\n\t\t\t.classed(\"legend\", true)\n\t\t\t.attr(\"transform\", (d, i) => (\"translate(0,\" + (i * 20) + \")\"));\n\n\t\tlegendEnter.append(\"rect\");\n\t\tlegendEnter.append(\"g\").append(\"text\");\n\t\tlegendItems = legendItems.merge(legendEnter)\n\n\t\tlegendItems.select(\"rect\")\n\t\t\t.attr(\"x\", 0)\n\t\t\t.attr(\"y\", 0)\n\t\t\t.attr(\"width\", 30)\n\t\t\t.attr(\"height\", 15)\n\t\t\t.attr(\"fill\", d => property2color.get(d))\n\t\t\t// Add event on hover to highlight the nodes with that propety value\n\t\t\t.on(\"mouseenter\", function (event, d) {\n\t\t\t\tif (holdCategories.length == 0) {\n\t\t\t\t\td3Select(this).attr(\"stroke\", \"#555555\");\n\t\t\t\t\td3Select(this).attr(\"stroke-width\", \"4px\");\n\t\t\t\t\tupdateCategoryFilter([d]);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.on(\"mouseleave\", function (event, d) {\n\t\t\t\tif (holdCategories.length == 0) {\n\t\t\t\t\td3Select(this).attr(\"stroke\", null);\n\t\t\t\t\td3Select(this).attr(\"stroke-width\", null);\n\t\t\t\t\tupdateCategoryFilter([]);\n\t\t\t\t}\n\t\t\t}).on(\"click\", function (event, d) {\n\t\t\t\t// if d not in holdCategories add it, otherwise remove it\n\t\t\t\tif (holdCategories.indexOf(d) == -1) {\n\t\t\t\t\tholdCategories.push(d);\n\t\t\t\t\td3Select(this).attr(\"stroke\", \"#555555\");\n\t\t\t\t\td3Select(this).attr(\"stroke-width\", \"4px\");\n\t\t\t\t\tupdateCategoryFilter(holdCategories);\n\t\t\t\t} else {\n\t\t\t\t\tholdCategories.splice(holdCategories.indexOf(d), 1);\n\t\t\t\t\td3Select(this).attr(\"stroke\", null);\n\t\t\t\t\td3Select(this).attr(\"stroke-width\", null);\n\t\t\t\t\tupdateCategoryFilter(holdCategories);\n\t\t\t\t}\n\t\t\t})\n\t\t\t// Force mouse events even if pointer-events is none\n\t\t\t.style(\"pointer-events\", \"all\");\n\n\n\t\tlegendItems.select(\"g\")\n\t\t\t.attr(\"transform\", (d) => (`translate(${35},${15 / 2})`))\n\t\t\t.select(\"text\")\n\t\t\t.style(\"font-size\", \"12px\")\n\t\t\t.append('tspan')\n\t\t\t.attr(\"dy\", \"0.33em\")\n\t\t\t.text(d => d)\n\t\t\t.attr(\"fill\", settings.darkBackground ? \"white\" : \"black\")\n\t\t\t.each(wrapText)\n\t}\n\n\tlet updateLegendSequencial = (scale, title) => {\n\t\tlegendView.selectAll(\"*\").remove();\n\t\tif (settings.legendsEnabled) {\n\t\t\td3Legend(scale, {\n\t\t\t\tsvg: legendView,\n\t\t\t\ttitle: title,\n\t\t\t\torientation: \"vertical\",\n\t\t\t\tthemeColors: [settings.darkBackground ? \"white\" : \"black\", settings.darkBackground ? \"black\" : \"white\"]\n\t\t\t});\n\t\t}\n\t}\n\n\tlet updateDensityDiverging = (useDiverging) => {\n\t\tif (useDiverging != densityDiverging) {\n\t\t\tdensityDiverging = useDiverging;\n\t\t\t//set densityColormapSelector to the right colormap\n\t\t\tlet newColormap = densityDiverging ? densityDivergingColormap : densityColormap;\n\t\t\td3Select(\"#densityColormapSelector\").property(\"value\", newColormap);\n\t\t\tupdateDensityColors();\n\t\t}\n\n\t}\n\n\tdensityDiverging = false;\n\tlet updateLegendDensity = () => {\n\t\tlet scheme = allColors[densityColormap];\n\t\tif (densityDiverging) {\n\t\t\tscheme = allColors[densityDivergingColormap];\n\t\t}\n\t\tlet densityColorScale = d3ScaleSequential(scheme).domain([0, 1])\n\n\t\tif (densityDiverging) {\n\t\t\tdensityColorScale = d3ScaleDiverging(scheme).domain([-1, 0, 1])\n\t\t}\n\t\tdensityLegendView.selectAll(\"*\").remove();\n\t\tlet densityLabelRanges = [\"-\", \"0\", \"+\"];\n\t\tlet title = chosenDensityProperty;\n\t\tif (chosenVsDensityProperty != \"None\") {\n\t\t\tdensityLabelRanges = [chosenDensityProperty, 0, chosenVsDensityProperty];\n\t\t\ttitle = \"\";\n\t\t}\n\t\tif (settings.legendsEnabled) {\n\t\t\td3Legend(densityColorScale, {\n\t\t\t\tsvg: densityLegendView,\n\t\t\t\ttitle: title,\n\t\t\t\ttitleAlignment: \"end\",\n\t\t\t\twidth: 150,\n\t\t\t\t// ticks:[0,1],\n\t\t\t\ttickValues: densityDiverging ? [-1, 0, 1] : [0, 1],\n\t\t\t\ttickFormat: densityDiverging ? d => densityLabelRanges[d + 1] : d => [\"0\", \"+\"][d],\n\t\t\t\tthemeColors: [settings.darkBackground ? \"white\" : \"black\", settings.darkBackground ? \"black\" : \"white\"]\n\t\t\t});\n\t\t}\n\t}\n\n\n\tfunction updateCategoricalColors() {\n\t\tlet propertyArray = [];\n\n\t\tconsole.log(helios.network.nodes);\n\t\tfor (let [key, node] of Object.entries(helios.network.nodes)) {\n\t\t\tpropertyArray.push(node[colorProperty]);\n\t\t}\n\t\tlet sortedItems = sortByCount(propertyArray);\n\t\t// console.log(sortedItems);\n\t\tlet scheme = allColors[categoricalColormap];\n\t\t// console.log(\"Scheme\",scheme);\n\t\tlet arraysCount = scheme.filter(Array.isArray).length;\n\n\t\tif (arraysCount > 0) {\n\t\t\tlet firstIndex = scheme.findIndex(d => (typeof d !== \"undefined\"));\n\t\t\tif (typeof scheme[sortedItems.length - 1] !== \"undefined\") {\n\t\t\t\tscheme = scheme[sortedItems.length];\n\t\t\t} else {\n\t\t\t\tif (sortedItems.length - 1 < firstIndex) {\n\t\t\t\t\tscheme = scheme[firstIndex];\n\t\t\t\t} else {\n\t\t\t\t\tscheme = scheme[scheme.length - 1];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// let maxColors = const [lastItem] = arr.slice(-1)\n\t\t// console.log(scheme)\n\t\tlet colorMap = d3ScaleOrdinal(scheme);\n\t\tlet property2color = new Map();\n\t\tlet categoricalMap = new Map();\n\t\tsortedItems.forEach((d, i) => {\n\t\t\tif (i < scheme.length) {\n\t\t\t\tproperty2color.set(d, colorMap(d));\n\t\t\t\tcategoricalMap.set(d, scheme[i]);\n\t\t\t} else {\n\t\t\t\tproperty2color.set(d, \"#bbbbbb\");;\n\t\t\t}\n\t\t});\n\t\tif (categoricalMap.size < sortedItems.length) {\n\t\t\tcategoricalMap.set(\"Other\", \"#bbbbbb\")\n\t\t}\n\t\tfor (let [key, node] of Object.entries(helios.network.nodes)) {\n\t\t\tlet color = d3rgb(property2color.get(node[colorProperty]));\n\t\t\tlet darkerColor = color.darker(nonSelectedDarkerColorFactor);\n\t\t\tlet brighterColor = color.brighter(nonSelectedBrighterColorFactor);\n\n\t\t\tnode._originalColor = [color.r / 255, color.g / 255, color.b / 255];\n\t\t\tnode._darkerColor = [darkerColor.r / 255, darkerColor.g / 255, darkerColor.b / 255];\n\t\t\tnode._brighterColor = [brighterColor.r / 255, brighterColor.g / 255, brighterColor.b / 255];\n\t\t}\n\t\tupdateNodeSelectionOrHighlightedColors();\n\t\thelios.update();\n\t\thelios.render();\n\t\tupdateLegendCategorical(categoricalMap)\n\t}\n\n\t\n\n\tfunction updateSequencialColors() {\n\t\t// updateLegendCategorical(new Map());\n\t\tlet propertyArray = [];\n\t\tlet maxValue = -Infinity;\n\t\tlet minValue = Infinity;\n\t\tfor (let [key, node] of Object.entries(helios.network.nodes)) {\n\t\t\tpropertyArray.push(node[colorProperty]);\n\t\t\tmaxValue = Math.max(maxValue, node[colorProperty]);\n\t\t\tminValue = Math.min(minValue, node[colorProperty]);\n\t\t}\n\t\tlet scheme = allColors[sequencialColormap];\n\t\tlet cScale = d3ScaleSequential(scheme)\n\t\t\t.domain([minValue, maxValue]);\n\n\t\tfor (let [key, node] of Object.entries(helios.network.nodes)) {\n\t\t\tlet color = d3rgb(cScale(node[colorProperty]));\n\t\t\tlet darkerColor = color.darker(nonSelectedDarkerColorFactor);\n\t\t\tlet brighterColor = color.brighter(nonSelectedBrighterColorFactor);\n\n\t\t\tnode._originalColor = [color.r / 255, color.g / 255, color.b / 255];\n\t\t\tnode._darkerColor = [darkerColor.r / 255, darkerColor.g / 255, darkerColor.b / 255];\n\t\t\tnode._brighterColor = [brighterColor.r / 255, brighterColor.g / 255, brighterColor.b / 255];\n\t\t}\n\n\t\tupdateLegendSequencial(cScale, colorProperty);\n\t\tupdateNodeSelectionOrHighlightedColors();\n\t\thelios.update();\n\t\thelios.render();\n\t}\n\n\t\n\n\n\tfunction updateSequencialEdgeColors() {\n\t\tif(edgeColorProperty == \"None\"){\n\t\t\tconsole.warn(\"No color property selected for edges, cannot update categorical edge colors.\");\n\t\t\thelios.edgesColorsFromNodes(true);\n\t\t\thelios.update();\n\t\t\thelios.render();\n\t\t\treturn;\n\t\t}\n\t\t// let propertyArray = helios.network.edgeAttributes[edgeColorProperty];\n\n\t\t// let maxValue = -Infinity;\n\t\t// let minValue = Infinity;\n\t\t// for (let propertyValue of propertyArray) {\n\t\t// \tif (!Number.isFinite(propertyValue)) {\n\t\t// \t\tcontinue; // skip non-finite values\n\t\t// \t}\n\t\t// \tmaxValue = Math.max(maxValue, propertyValue);\n\t\t// \tminValue = Math.min(minValue, propertyValue);\n\t\t// }\n\n\t\t// let scheme = allColors[edgeSequencialColormap];\n\t\t// let cScale = d3ScaleSequential(scheme)\n\t\t// \t.domain([minValue, maxValue]);\n\n\t\thelios.edgesColorsFromNodes(false);\n\t\thelios.edgeColor([edgeDefaultColor,edgeDefaultColor]);\n\t\t// helios.edgeColor((edgeIndex) => {\n\t\t// \tlet propertyValue = propertyArray[edgeIndex];\n\t\t// \tif (!Number.isFinite(propertyValue)) {\n\t\t// \t\treturn [0, 0, 0]; // return black for non-finite values\n\t\t// \t}\n\t\t// \tlet color = d3rgb(cScale(propertyValue));\n\t\t// \treturn [color.r / 255, color.g / 255, color.b / 255];\n\t\t// });\n\t\t\n\t\t// updateLegendSequencial(cScale, colorProperty);\n\t\t// updateNodeSelectionOrHighlightedColors();\n\t\t\n\t\thelios.update();\n\t\thelios.render();\n\t}\n\n\n\tfunction updateCategoricalEdgeColors() {\n\t\tif(edgeColorProperty == \"None\"){\n\t\t\tconsole.warn(\"No color property selected for edges, cannot update categorical edge colors.\");\n\t\t\thelios.edgesColorsFromNodes(true);\n\t\t\thelios.update();\n\t\t\thelios.render();\n\t\t\treturn;\n\t\t}\n\t\tlet propertyArray = helios.network.edgeAttributes[colorProperty];\n\n\t\tlet sortedItems = sortByCount(propertyArray);\n\t\t// console.log(sortedItems);\n\t\tlet scheme = allColors[categoricalColormap];\n\t\t// console.log(\"Scheme\",scheme);\n\t\tlet arraysCount = scheme.filter(Array.isArray).length;\n\n\t\tif (arraysCount > 0) {\n\t\t\tlet firstIndex = scheme.findIndex(d => (typeof d !== \"undefined\"));\n\t\t\tif (typeof scheme[sortedItems.length - 1] !== \"undefined\") {\n\t\t\t\tscheme = scheme[sortedItems.length];\n\t\t\t} else {\n\t\t\t\tif (sortedItems.length - 1 < firstIndex) {\n\t\t\t\t\tscheme = scheme[firstIndex];\n\t\t\t\t} else {\n\t\t\t\t\tscheme = scheme[scheme.length - 1];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// let maxColors = const [lastItem] = arr.slice(-1)\n\t\t// console.log(scheme)\n\t\tlet colorMap = d3ScaleOrdinal(scheme);\n\t\tlet property2color = new Map();\n\t\tlet categoricalMap = new Map();\n\t\tsortedItems.forEach((d, i) => {\n\t\t\tif (i < scheme.length) {\n\t\t\t\tproperty2color.set(d, colorMap(d));\n\t\t\t\tcategoricalMap.set(d, scheme[i]);\n\t\t\t} else {\n\t\t\t\tproperty2color.set(d, \"#bbbbbb\");;\n\t\t\t}\n\t\t});\n\t\tif (categoricalMap.size < sortedItems.length) {\n\t\t\tcategoricalMap.set(\"Other\", \"#bbbbbb\")\n\t\t}\n\t\t\n\t\t// for (let [key, node] of Object.entries(helios.network.nodes)) {\n\t\t// \tlet color = d3rgb(property2color.get(node[colorProperty]));\n\t\t// \tlet darkerColor = color.darker(nonSelectedDarkerColorFactor);\n\t\t// \tlet brighterColor = color.brighter(nonSelectedBrighterColorFactor);\n\n\t\t// \tnode._originalColor = [color.r / 255, color.g / 255, color.b / 255];\n\t\t// \tnode._darkerColor = [darkerColor.r / 255, darkerColor.g / 255, darkerColor.b / 255];\n\t\t// \tnode._brighterColor = [brighterColor.r / 255, brighterColor.g / 255, brighterColor.b / 255];\n\t\t// }\n\t\t// updateNodeSelectionOrHighlightedColors();\n\t\thelios.edgeColor( (edgeIndex) => {\n\t\t\tlet color = d3rgb(property2color.get(propertyArray[edgeIndex]));\n\t\t\treturn [color.r / 255, color.g / 255, color.b / 255];\n\t\t});\n\t\t\n\t\thelios.edgesColorsFromNodes(false);\n\t\thelios.update();\n\t\thelios.render();\n\t\t// updateLegendCategorical(categoricalMap)\n\t}\n\n\n\n\tfunction updateDensityColorsList() {\n\t\tlet colormapSelector = d3Select(\"#densityColormapSelector\")\n\t\t\t.classed(\"selector\", true)\n\t\t\t.style(\"min-width\", \"30px\")\n\t\t\t.on(\"change\", (event, d) => {\n\t\t\t\tupdateDensityColors();\n\t\t\t})\n\t\t\t.selectAll(\"option\")\n\t\t\t.data(Object.entries(allColors).filter(d => d[0].startsWith(\"interpolate\")))\n\t\t\t.join(\"option\")\n\t\t\t.attr(\"value\", d => d[0])\n\t\t\t.property(\"selected\", d => d[0] == (densityDiverging ? densityDivergingColormap : densityColormap))\n\t\t\t.text(d => d[0].replace(\"interpolate\", \"\").replace(\"scheme\", \"\"));\n\t}\n\n\tfunction updateDensityColors() {\n\t\tif (densityDiverging) {\n\t\t\tdensityDivergingColormap = d3Select(\"#densityColormapSelector\").property(\"value\");\n\t\t} else {\n\t\t\tdensityColormap = d3Select(\"#densityColormapSelector\").property(\"value\");\n\t\t}\n\t\tlet colormapName = densityDiverging ? densityDivergingColormap : densityColormap;\n\n\t\tconsole.log(colormapName)\n\t\tlet scheme = allColors[colormapName];\n\t\thelios.densityMap.setColormap(scheme);\n\n\t\tupdateLegendDensity();\n\t\thelios.render();\n\t}\n\n\tlet updateColormapSelection = () => {\n\t\tholdCategories = [];\n\t\tupdateCategoryFilter([]);\n\t\tif (useCategoricalColormap) {\n\t\t\tcategoricalColormap = d3Select(\"#colormapSelector\").property(\"value\");\n\t\t\tupdateCategoricalColors();\n\t\t} else {\n\t\t\tsequencialColormap = d3Select(\"#colormapSelector\").property(\"value\");\n\t\t\tupdateSequencialColors();\n\t\t}\n\t}\n\tlet updateEdgeColormapSelection = () => {\n\t\tif (useEdgeCategoricalColormap) {\n\t\t\t// categoricalColormap = d3Select(\"#edgeColormapSelector\").property(\"value\");\n\t\t\tupdateCategoricalEdgeColors();\n\t\t} else {\n\t\t\t// edgeSequencialColormap = d3Select(\"#edgeColormapSelector\").property(\"value\");\n\t\t\tupdateSequencialEdgeColors();\n\t\t}\n\t}\n\n\tlet updateColorSelection = () => {\n\t\tcolorProperty = d3Select(\"#colorSelector\").property(\"value\");\n\t\tlet categorical = false;\n\t\tfor (let [key, node] of Object.entries(helios.network.nodes)) {\n\t\t\tif (typeof node[colorProperty] !== 'number') {\n\t\t\t\tcategorical = true;\n\t\t\t\t// console.log(colorProperty,node);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tuseCategoricalColormap = categorical;\n\t\tconsole.log(categorical ? \"categorical\" : \"continuous\");\n\t\tlet colormapSelector = d3Select(\"#colormapSelector\")\n\t\t\t.classed(\"selector\", true)\n\t\t\t.style(\"min-width\", \"30px\")\n\t\t\t.on(\"change\", (event, d) => {\n\t\t\t\tupdateColormapSelection();\n\t\t\t})\n\t\t\t.selectAll(\"option\")\n\t\t\t.data(Object.entries(allColors).filter(d => d[0].startsWith(categorical ? \"scheme\" : \"interpolate\")))\n\t\t\t.join(\"option\")\n\t\t\t.attr(\"value\", d => d[0])\n\t\t\t.property(\"selected\", d => d[0] == (categorical ? categoricalColormap : sequencialColormap))\n\t\t\t.text(d => d[0].replace(\"interpolate\", \"\").replace(\"scheme\", \"\"));\n\t\tupdateColormapSelection();\n\t\tupdateEdgeColormapSelection();\n\t}\n\n\tfunction updateDensityAttributes(shallRedraw = true) {\n\t\tif (helios.densityMap) {\n\t\t\tlet maxValue = -Infinity;\n\t\t\tlet minValue = Infinity;\n\t\t\tchosenDensityProperty = d3Select(\"#densitySelector\").property(\"value\");\n\t\t\tchosenVsDensityProperty = d3Select(\"#vsDensitySelector\").property(\"value\");\n\n\t\t\tfor (let index = 0; index < helios.densityWeights.length; index++) {\n\t\t\t\thelios.densityWeights[index] = 0.0;\n\t\t\t}\n\n\t\t\tlet propertySignals = [];\n\n\t\t\tif (chosenVsDensityProperty == \"None\") {\n\t\t\t\tpropertySignals = [\n\t\t\t\t\t[chosenDensityProperty, 1]\n\t\t\t\t];\n\t\t\t} else {\n\t\t\t\tpropertySignals = [\n\t\t\t\t\t[chosenVsDensityProperty, 1],\n\t\t\t\t\t[chosenDensityProperty, -1]\n\t\t\t\t];\n\t\t\t}\n\t\t\tfor (let [property, signal] of propertySignals) {\n\t\t\t\tif (property == \"Uniform\") {\n\t\t\t\t\tfor (let index = 0; index < helios.densityWeights.length; index++) {\n\t\t\t\t\t\thelios.densityWeights[index] += signal;\n\t\t\t\t\t}\n\t\t\t\t} else if (property == \"Degree\") {\n\t\t\t\t\tfor (let [key, node] of Object.entries(helios.network.nodes)) {\n\t\t\t\t\t\tlet value = node[\"edges\"].length;\n\t\t\t\t\t\thelios.densityWeights[node.index] += signal * value;\n\t\t\t\t\t\t// maxValue = Math.max(maxValue, value);\n\t\t\t\t\t\t// minValue = Math.min(minValue, value);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (let [key, node] of Object.entries(helios.network.nodes)) {\n\t\t\t\t\t\tlet value = node[property];\n\t\t\t\t\t\thelios.densityWeights[node.index] += signal * value;\n\t\t\t\t\t\t// maxValue = Math.max(maxValue, value);\n\t\t\t\t\t\t// minValue = Math.min(minValue, value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// if all values in helios.densityWeights are positive\n\t\t\t// then we can use the density map as a filter\n\t\t\t// otherwise we can only use it as a color map\n\t\t\tlet totalWeight = 0;\n\t\t\tlet totalPositive = 0;\n\t\t\tlet totalNegative = 0;\n\t\t\tfor (let [key, node] of Object.entries(helios.network.nodes)) {\n\t\t\t\tlet value = node._filtered ? 0.0 : 1.0;\n\t\t\t\thelios.densityWeights[node.index] *= value;\n\t\t\t\tlet densityWeight = helios.densityWeights[node.index];\n\t\t\t\ttotalWeight += Math.abs(densityWeight);\n\t\t\t\tif (densityWeight < 0) {\n\t\t\t\t\ttotalNegative += densityWeight;\n\t\t\t\t} else {\n\t\t\t\t\ttotalPositive += densityWeight;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (totalWeight > 0 && totalNegative == 0) {\n\t\t\t\tfor (let [key, node] of Object.entries(helios.network.nodes)) {\n\t\t\t\t\thelios.densityWeights[node.index] /= totalWeight;\n\t\t\t\t}\n\t\t\t\thelios?.densityMap?.divergingColormap(false);\n\t\t\t\tupdateDensityDiverging(false);\n\t\t\t} else {\n\t\t\t\tlet totalPositiveMax = Math.max(Math.abs(totalNegative), Math.abs(totalPositive));\n\t\t\t\tlet totalNegativeMax = Math.max(Math.abs(totalNegative), Math.abs(totalPositive));\n\t\t\t\tif (shallNormalizeVsDensity) {\n\t\t\t\t\ttotalPositiveMax = Math.max(Math.abs(totalPositive));\n\t\t\t\t\ttotalNegativeMax = Math.max(Math.abs(totalNegative));\n\t\t\t\t}\n\t\t\t\tfor (let [key, node] of Object.entries(helios.network.nodes)) {\n\t\t\t\t\tlet densityWeight = helios.densityWeights[node.index];\n\t\t\t\t\tif (densityWeight < 0 && totalNegative < 0) {\n\t\t\t\t\t\thelios.densityWeights[node.index] = densityWeight / totalNegativeMax;\n\t\t\t\t\t} else if (densityWeight > 0 && totalPositive > 0) {\n\t\t\t\t\t\thelios.densityWeights[node.index] = densityWeight / totalPositiveMax;\n\t\t\t\t\t} else {\n\t\t\t\t\t\thelios.densityWeights[node.index] /= totalWeight;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\thelios?.densityMap?.divergingColormap(true);\n\t\t\t\tupdateDensityDiverging(true);\n\t\t\t}\n\n\t\t\tupdateLegendDensity();\n\t\t\thelios.updateDensityMap();\n\t\t\t// helios.redrawDensityMap();\n\t\t\tif (shallRedraw) {\n\t\t\t\thelios.redraw();\n\t\t\t}\n\t\t}\n\t}\n\n\n\t// let buttonOrder = [\"Load\",\"Save\",\"Export\", \"Size\", \"Color\"];\n\tlet buttonOrder = [\"Save\",\"Export\", \"Size\", \"Color\"];\n\tif (helios.network.indexedEdges.length > 0) {\n\t\tbuttonOrder.push(\"Edges\");\n\t\tbuttonOrder.push(\"Filter\");\n\t}\n\tif (settings.densityEnabled) {\n\t\t// Add these [\"Density\",\"Bandwidth\",\"Weight\",\"Map\"] to the buttonOrder\n\t\tbuttonOrder = buttonOrder.concat([\"Density\", \"vs\", \"Norm.\", \"Bandwidth\", \"Weight\", \"Map\"]);\n\t}\n\n\t// Clear the selection menu if needed\n\td3Select(helios.overlay).select(\"div.selectionMenu\").remove();\n\td3Select(helios.overlay).append(\"div\").classed(\"selectionMenu\",true)\n\t\t.selectAll(\"span.menuEntry\")\n\t\t// pointer events !important so that the mouseover event is not blocked\n\t\t.style(\"pointer-events\", \"none\")\n\t\t.data(buttonOrder)\n\t\t.enter()\n\t\t.append(\"span\")\n\t\t.classed(\"menuEntry\", true)\n\t\t.classed(\"tooltip\", d => buttonInformation[d].tooltipText)\n\t\t.style(\"--color\", d => buttonInformation[d].color)\n\t\t.text(d => buttonInformation[d].name)\n\t\t.each(function (d) {\n\t\t\td3Select(this).call(buttonInformation[d].extra);\n\t\t})\n\t\t.on('mouseover', function (d, i) {\n\t\t\tlet tooltipText = d3Select(this).select('.tooltiptext');\n\t\t\tlet rect = this.getBoundingClientRect();\n\t\n\t\t\ttooltipText.classed('tooltiptop', false);\n\t\t\ttooltipText.classed('tooltipbottom', false);\n\t\n\t\t\tif (rect.top < window.innerHeight / 2) {\n\t\t\t\ttooltipText.classed('tooltipbottom', true);\n\t\t\t} else {\n\t\t\t\ttooltipText.classed('tooltiptop', true);\n\t\t\t}\n\t\t\ttooltipText.classed('leftAlign', false);\n\t\t\ttooltipText.classed('rightAlign', false);\n\t\t\t// If in the first 60px set classed leftAlign\n\t\t\t// If in the last 60px set classed rightAlign\n\t\t\tlet averageXPosition = (rect.left+rect.right)/2;\n\t\t\tif (averageXPosition < 60) {\n\t\t\t\ttooltipText.classed('leftAlign', true);\n\t\t\t}\n\t\t\tif (averageXPosition > window.innerWidth-60) {\n\t\t\t\ttooltipText.classed('rightAlign', true);\n\t\t\t}\n\t\t});\n\n\td3Select(helios.overlay).select(\"div.selectionMenu\")\n\t\t.selectAll(\"span.menuEntry\")\n\t\t.filter(d => buttonInformation[d].action != null)\n\t\t.on(\"click\", (event, d) => {\n\t\t\tif (buttonInformation[d].action) {\n\t\t\t\tbuttonInformation[d].action(d3Select(this), d, event);\n\t\t\t}\n\t\t})\n\t\t.classed(\"hasAction\", true);\n\n\td3Select(helios.overlay).select(\"div.selectionMenu\")\n\t\t.selectAll(\"span.menuEntry\")\n\t\t.filter(d => buttonInformation[d].tooltipText)\n\t\t.append(\"span\")\n\t\t.classed(\"tooltiptext\", true)\n\t\t.classed(\"tooltiptop\", true)\n\t\t.text(d => buttonInformation[d].tooltipText);\n\n\td3Select(helios.overlay).select(\"div.selectionMenu\")\n\t\t.selectAll(\"span.menuEntry\")\n\n\n\t\n\t// create a div located at the bottom left of the overlay for showing a list of selected nodes\n\tlet highlightedList = d3Select(helios.overlay).append(\"div\")\n\t\t.attr(\"id\", \"highlightedList\")\n\t\t.style(\"position\", \"absolute\")\n\t\t.style(\"left\", \"10px\")\n\t\t.style(\"bottom\", \"100px\")\n\t\t.style(\"max-height\", \"200px\")\n\t\t.style(\"max-width\", \"300px\")\n\t\t// min width to 100px min height to 200px\n\t\t.style(\"min-width\", \"100px\")\n\t\t.style(\"min-height\", \"200px\")\n\t\t.style(\"pointer-events\", \"auto\")\n\t\t.style(\"overflow\", \"auto\")\n\t\t.style(\"background-color\", settings.darkBackground ? \"rgba(50,50,50,0.8)\" : \"rgba(255,255,255,0.8)\")\n\t\t.style(\"padding\", \"5px\")\n\t\t.style(\"border-radius\", \"5px\")\n\t\t.style(\"font-size\", \"12px\")\n\t\t.style(\"display\", \"none\")\n\t\t// shadow\n\t\t.style(\"box-shadow\", \"0px 0px 10px rgba(0,0,0,0.5)\");\n\n\tlet updateHighlightedList = () => {\n\t\tlet selectedNodes = helios.network.indexedNodes.filter(node => node._selected);\n\t\t// get list of neighbors of selected nodes\n\t\tlet highlightedNodes = [];\n\t\tlet connectionWeights = [];\n\t\tselectedNodes.forEach(node => {\n\t\t\tnode.edges.forEach(edgeIndex => {\n\t\t\t\tlet nodeFromIndex = helios.network.indexedEdges[edgeIndex*2];\n\t\t\t\tlet nodeToIndex = helios.network.indexedEdges[edgeIndex*2+1];\n\t\t\t\tlet connectionWeight = helios.network.edgeAttributes[\"weight_temp\"][edgeIndex] ? helios.network.edgeAttributes[\"weight_temp\"][edgeIndex] : 1.0;\n\t\t\t\tlet neighborNode = (nodeFromIndex === node.index) ? helios.network.indexedNodes[nodeToIndex] : helios.network.indexedNodes[nodeFromIndex];\n\t\t\t\tif (!neighborNode._selected) {\n\t\t\t\t\thighlightedNodes.push(neighborNode);\n\t\t\t\t\tconnectionWeights.push(connectionWeight);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\t\n\t\t// let highlightedNodes = helios.network.indexedNodes.filter(node => node._selectedNeighbor);\n\t\t// merge duplicates\n\t\tlet highlightedMap = new Map();\n\t\thighlightedNodes.forEach((node, i) => {\n\t\t\tif (highlightedMap.has(node.index)) {\n\t\t\t\thighlightedMap.get(node.index).weight += connectionWeights[i];\n\t\t\t}\n\t\t\telse {\n\t\t\t\thighlightedMap.set(node.index, {node: node, weight: connectionWeights[i]});\n\t\t\t}\n\t\t});\n\t\thighlightedNodes = Array.from(highlightedMap.values()).map(d => d.node);\n\t\tconnectionWeights = Array.from(highlightedMap.values()).map(d => d.weight);\n\t\t// sort highlighted nodes by total connection weight\n\t\tlet highlightedNodesWithWeights = highlightedNodes.map((node, i) => ({node: node, weight: connectionWeights[i]}));\n\t\thighlightedNodesWithWeights.sort((a, b) => b.weight - a.weight);\n\t\thighlightedNodes = highlightedNodesWithWeights.map(d => d.node);\n\n\t\tlet label2weight = new Map();\n\t\thighlightedNodesWithWeights.forEach(d => {\n\t\t\tlet label = d.node.Label ?? d.node.title ?? d.node.ID;\n\t\t\tlabel2weight.set(label, d.weight);\n\t\t});\n\n\t\tif (highlightedNodes.length == 0) {\n\t\t\thighlightedList.style(\"display\", \"none\");\n\t\t\treturn;\n\t\t} else {\n\t\t\thighlightedList.style(\"display\", \"block\");\n\t\t}\n\n\t\tconsole.log({highlightedNodes});\n\t\t// Update the highlighted list with the currently highlighted nodes\n\t\thighlightedList.selectAll(\".highlightedNode\")\n\t\t\t.data(highlightedNodes, node => node.index)\n\t\t\t.join(\n\t\t\t\tenter => {\n\t\t\t\t\tlet nodeGroup = enter.append(\"div\")\n\t\t\t\t\t\t.classed(\"highlightedNode\", true)\n\t\t\t\t\t\t.style(\"display\", \"flex\")\n\t\t\t\t\t\t.style(\"justify-content\", \"space-between\")\n\t\t\t\t\t\t.style(\"align-items\", \"center\")\n\t\t\t\t\t\t.style(\"padding\", \"2px 0\");\n\n\t\t\t\t\tnodeGroup.append(\"span\").classed(\"nodeLabel\", true);\n\t\t\t\t\tnodeGroup.append(\"span\").classed(\"nodeColorBox\", true)\n\t\t\t\t\t\t.style(\"width\", \"20px\")\n\t\t\t\t\t\t.style(\"height\", \"20px\")\n\t\t\t\t\t\t.style(\"border-radius\", \"50%\")\n\t\t\t\t\t\t.style(\"margin-left\", \"5px\");\n\n\t\t\t\t\treturn nodeGroup;\n\t\t\t\t},\n\t\t\t\tupdate => {\n\t\t\t\t\treturn update;\n\t\t\t\t},\n\t\t\t\texit => exit.remove(),\n\t\t\t)\n\t\t\t.each(function (node) {\n\t\t\t\tlet nodeGroup = d3Select(this);\n\t\t\t\tlet label = node.Label ?? node.title ?? node.ID;\n\t\t\t\t// add total weight to the label as label (count)\n\t\t\t\tlet totalWeight = label2weight.get(label) ?? 0;\n\t\t\t\tif (totalWeight > 0) {\n\t\t\t\t\tlabel += ` (${totalWeight.toFixed(2)})`;\n\t\t\t\t}\n\t\t\t\tnodeGroup.select(\".nodeLabel\").text(label);\n\t\t\t\tlet color = d3rgb(node.color);\n\t\t\t\tnodeGroup.select(\".nodeColorBox\")\n\t\t\t\t\t.style(\"background-color\", `rgb(${color.r}, ${color.g}, ${color.b})`);\n\t\t\t\t// click on the node div to center the view on the node\n\t\t\t\tnodeGroup.on(\"click\", () => {\n\t\t\t\t\tcenterOnNodes([node]);\n\t\t\t\t});\n\t\t\t\t// make mouse cursor a pointer when hovering over a node div\n\t\t\t\tnodeGroup.style(\"cursor\", \"pointer\");\n\t\t\t\t\n\t\t\t});\n\t};\n\n\n\tif (settings.startZoomLevel) {\n\t\tdefaultZoomLevel = settings.startZoomLevel;\n\t\thelios.zoomFactor(defaultZoomLevel);\n\t} else {\n\t\tif (bigNetwork) {\n\t\t\t//no animation\n\t\t\thelios.zoomFactor(defaultZoomLevel);\n\t\t\t// helios.zoomFactor(0.35);\n\t\t} else {\n\t\t\t//animating initial zoom in to the network\n\t\t\thelios.zoomFactor(0.05);\n\t\t\thelios.zoomFactor(defaultZoomLevel, 1000);\n\t\t}\n\t}\n\n\thelios.nodesGlobalSizeScale(currentGlobalNodeSizeScale);\n\t// helios.edgesGlobalWidthScale(currentGlobalNodeSizeScale);\n\thelios.nodesGlobalOutlineWidthScale(currentGlobalNodeSizeScale);\n\thelios.edgesGlobalOpacityScale(currentGlobalEdgeOpacityScale);\n\n\n\tif (settings.densityEnabled) {\n\t\thelios.densityMap.setColormap(allColors[densityDiverging ? densityDivergingColormap : densityColormap]);\n\n\t}\n\n\n\n\n\tlet minScreenProportion = 0.0005;\n\tlet visibleScreenProportion = 0.001;\n\tlet maxLabels = 100;\n\tlet screenLabelsSmoothness = 2.0;\n\n\n\tlet categoricalLabelsGroup = d3Select(helios.svgLayer).append(\"g\")\n\t\t.attr(\"id\", \"categoricalLabelsGroup\")\n\t\t.style(\"text-anchor\", \"middle\")\n\t\t// .style(\"dominant-baseline\", \"central\")\n\t\t.style(\"font-size\", 12 + \"px\")\n\t\t.attr(\"stroke-linejoin\", \"round\")\n\t\t.style(\"font-family\", \"HelveticaNeue,Roboto,Helvetica,Arial,sans-serif\")\n\t\t.attr(\"pointer-events\", \"none\");\n\n\tlet labelsGroup = d3Select(helios.svgLayer).append(\"g\")\n\t\t.attr(\"id\", \"labelsGroup\")\n\t\t.style(\"text-anchor\", \"middle\")\n\t\t// .style(\"dominant-baseline\", \"central\")\n\t\t.style(\"font-size\", 12 + \"px\")\n\t\t.attr(\"stroke-linejoin\", \"round\")\n\t\t.style(\"font-family\", \"HelveticaNeue,Roboto,Helvetica,Arial,sans-serif\")\n\t\t.attr(\"pointer-events\", \"none\");\n\n\n\n\tlet interpolateProportion = (proportion) => {\n\t\tlet a = (proportion - minScreenProportion) / (visibleScreenProportion - minScreenProportion);\n\t\treturn Math.max(0, Math.min(1, a));\n\t}\n\n\tlet updateLabelsInScreen = () => {\n\t\t// Create and update labels for nodes in screen\n\t\t// console.log({ nodesOnScreen, selectedOnScreen });\n\t\tlet selectedOnScreenArray = Array.from(selectedOnScreen).map(([nodeIndex, weight]) => [nodeIndex, weight]);\n\t\tlet allNodesOnScreen = nodesOnScreen.concat(selectedOnScreenArray);\n\t\tif(selectedOnScreenArray.length>0){\n\t\t\tallNodesOnScreen = selectedOnScreenArray;\n\t\t}\n\t\tlabelsGroup.selectAll(\".label\")\n\t\t\t.data(allNodesOnScreen, nodeIDsProportion => +nodeIDsProportion[0])\n\t\t\t.join(\n\t\t\t\tenter => {\n\t\t\t\t\tlet labelGroup = enter.append(\"g\")\n\t\t\t\t\t\t.classed(\"label\", true);\n\n\t\t\t\t\tlet nodeLabel = (nodeIDsProportion) => {\n\t\t\t\t\t\tlet node = helios.network.indexedNodes[+nodeIDsProportion[0]];\n\t\t\t\t\t\treturn node.Label ?? node.title ?? node.ID;\n\t\t\t\t\t}\n\n\t\t\t\t\tlabelGroup.append(\"text\").classed(\"labelOutline\", true).attr(\"dy\", \"0.25em\")\n\t\t\t\t\t\t.attr(\"stroke-linejoin\", \"round\").text(nodeLabel);\n\n\t\t\t\t\tlabelGroup.append(\"text\").classed(\"labelFill\", true).attr(\"dy\", \"0.25em\")\n\t\t\t\t\t\t.text(nodeLabel);\n\t\t\t\t\t\n\t\t\t\t\tlabelGroup.attr(\"transform\", nodeIDsProportion => {\n\t\t\t\t\t\tlet projectedNode = helios.getProjectedPositions([+nodeIDsProportion[0]]);\n\t\t\t\t\t\t// if projectedNode[2] is negative, the node is behind the camera\n\t\t\t\t\t\tif (projectedNode[2] < -1 && !helios._use2D) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet newScale = interpolateProportion(nodeIDsProportion[1]);\n\t\t\t\t\t\tif(selectedOnScreen.has(+nodeIDsProportion[0])){\n\t\t\t\t\t\t\tnewScale = selectedOnScreen.get(+nodeIDsProportion[0]);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn `translate(${projectedNode[0]} ${projectedNode[1]}) scale(${newScale},${newScale})`;\n\t\t\t\t\t\t// return `translate(${projectedNode[0]} ${projectedNode[1]}) `;\n\t\t\t\t\t});\n\t\t\t\t\treturn labelGroup;\n\t\t\t\t},\n\t\t\t\tupdate => {\n\t\t\t\t\treturn update;\n\t\t\t\t},\n\t\t\t\texit => exit.remove(),\n\t\t\t)\n\t\t\t.style(\"opacity\", nodeIDsProportion => {\n\t\t\t\treturn interpolateProportion(nodeIDsProportion[1]);\n\t\t\t})\n\t\t\t.each(function (nodeIDsProportion) {\n\t\t\t\tlet node = helios.network.indexedNodes[+nodeIDsProportion[0]];\n\t\t\t\t// stylizeLabel(this, node.color);\n\t\t\t\tlet labelSelect = d3Select(this);\n\t\t\t\tlet labelFillNode = labelSelect.select(\".labelFill\").node();\n\t\t\t\tlet labelOutlineNode = labelSelect.select(\".labelOutline\").node();\n\n\t\t\t\t// let outlineColor = \"rgba(5,5,5,1.0)\";\n\t\t\t\tlet styleData = getLabelStyleColorAndOutline(node.color);\n\t\t\t\tlabelFillNode.style.fill = styleData.fill;\n\t\t\t\tlabelOutlineNode.style.stroke = styleData.stroke;\n\t\t\t\tlabelFillNode.style.fill = \"rgba(255,255,255,1.0)\";\n\t\t\t\tlabelOutlineNode.style.stroke = \"rgba(5,5,5,1.0)\";\n\t\t\t\tlabelOutlineNode.style.strokeWidth = styleData.strokeWidth * 3.0;\n\t\t\t})//animate\n\t\t\t// .transition()\n\t\t\t// .duration(33)\n\t\t\t.attr(\"transform\", nodeIDsProportion => {\n\t\t\t\tlet projectedNode = helios.getProjectedPositions([+nodeIDsProportion[0]]);\n\t\t\t\t// if projectedNode[2] is negative, the node is behind the camera\n\t\t\t\tif (projectedNode[2] < -1 && !helios._use2D) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tlet newScale = interpolateProportion(nodeIDsProportion[1]);\n\t\t\t\t\n\t\t\t\tif(selectedOnScreen.has(+nodeIDsProportion[0])){\n\t\t\t\t\tnewScale = selectedOnScreen.get(+nodeIDsProportion[0]);\n\t\t\t\t}\n\t\t\t\treturn `translate(${projectedNode[0]} ${projectedNode[1]}) scale(${newScale},${newScale})`;\n\t\t\t});\n\t\t// find the element with highest proportion and bring it to front\n\t\t// Only bring to front if not already last child\n\t\tlet maxProportion = -1;\n\t\tlet maxElement = null;\n\t\tlabelsGroup.selectAll(\".label\").each(function (nodeIDsProportion) {\n\t\t\tif (nodeIDsProportion[1] > maxProportion) {\n\t\t\t\tmaxProportion = nodeIDsProportion[1];\n\t\t\t\tmaxElement = this;\n\t\t\t}\n\t\t});\n\t\t// Move the element with the highest proportion to the front (last child)\n\t\t// This ensures it is rendered above others in SVG stacking order\n\t\tif (maxElement && maxElement !== maxElement.parentNode.lastChild) {\n\t\t\tmaxElement.parentNode.appendChild(maxElement);\n\t\t}\n\t\t\n\t}\n\t// make it available to window\n\twindow.selectNodesOnScreen = filter=>{\n\t\tnodesOnScreen = helios.network.indexedNodes.filter(filter).map(node=>[\n\t\t\tnode.index,\n\t\t\t1.0]);\n\t\tupdateLabelsInScreen();\n\t}\n\n\twindow.trackLabels = (filter, options) => {\n\t\thelios.untrackAttribute(\"indexTracker\");\n\t\tnodesOnScreen = helios.network.indexedNodes.filter(filter).map(node=>[\n\t\t\tnode.index,\n\t\t\t1.0]);\n\t\tupdateLabelsInScreen();\n\t\thelios.scheduler.schedule({\n\t\t\tname: \"9.0.labelsUpdate\",\n\t\t\tcallback: (elapsedTime, task) => {\n\t\t\t\tupdateLabelsInScreen();\n\t\t\t},\n\t\t\tdelay: 0,\n\t\t\trepeatInterval: 20,\n\t\t\trepeat: true,\n\t\t\tsynchronized: true,\n\t\t\timmediateUpdates: false,\n\t\t\tredraw: false,\n\t\t\tupdateNodesGeometry: false,\n\t\t\tupdateEdgesGeometry: false,\n\t\t});\n\t}\n\n\n\n\tlet updateCategoricalGroups = () => {\n\t\t// Create and update labels for nodes in screen\n\t\tcategoricalLabelsGroup.selectAll(\".categoryLabel\")\n\t\t\t.data(categoriesOnScreen, nodeIDsProportion => +nodeIDsProportion[0])\n\t\t\t.join(\n\t\t\t\tenter => {\n\t\t\t\t\tlet labelGroup = enter.append(\"g\")\n\t\t\t\t\t\t.classed(\"categoryLabel\", true);\n\t\t\t\t\tlabelGroup.append(\"text\").classed(\"labelOutline\", true).attr(\"dy\", \"0.25em\");\n\t\t\t\t\tlabelGroup.append(\"text\").classed(\"labelFill\", true).attr(\"dy\", \"0.25em\");\n\t\t\t\t\treturn labelGroup;\n\t\t\t\t},\n\t\t\t\tupdate => {\n\t\t\t\t\t// stylizeLabel(update.node(),update);\n\t\t\t\t\treturn update;\n\t\t\t\t},\n\t\t\t\texit => exit.remove(),\n\t\t\t)\n\t\t\t// .style(\"opacity\", nodeIDsProportion => {\n\t\t\t// \treturn interpolateProportion(nodeIDsProportion[1]);\n\t\t\t// })\n\n\t\t\t.attr(\"transform\", nodeIDsProportion => {\n\t\t\t\tlet projectedNode = [nodeIDsProportion[2], nodeIDsProportion[3]]\n\t\t\t\t// if projectedNode[2] is negative, the node is behind the camera\n\t\t\t\tlet newScale = 1.0;//interpolateProportion(nodeIDsProportion[1]);\n\t\t\t\treturn `translate(${projectedNode[0]} ${projectedNode[1]}) scale(${newScale})`;\n\t\t\t})\n\t\t\t.each(function (nodeIDsProportion) {\n\t\t\t\tlet category = nodeIDsProportion[0];\n\t\t\t\t// stylizeLabel(this, node.color);\n\t\t\t\tlet labelSelect = d3Select(this);\n\n\t\t\t\tlet labelFillNode = labelSelect.select(\".labelFill\").node();\n\t\t\t\tlet labelOutlineNode = labelSelect.select(\".labelOutline\").node();\n\t\t\t\t// let styleData = getLabelStyleColorAndOutline(node.color);\n\n\t\t\t\tlabelFillNode.style.fill = \"black\";\n\t\t\t\tlabelOutlineNode.style.stroke = \"white\";\n\t\t\t\tlabelOutlineNode.style.strokeWidth = 3.0;\n\n\t\t\t\tlabelFillNode.textContent = category;\n\t\t\t\tlabelOutlineNode.textContent = category;\n\t\t\t});\n\n\t}\n\n\n\n\t// let heliosUI = new HeliosUI(helios,{\n\t// \tcollapsed:true,\n\t// });\n\n\t// window.heliosUI = heliosUI;\n\n\thelios.onReady(() => {\n\t\thelios.trackAttribute(\"indexTracker\", \"index\", {\n\t\t\tminProportion: minScreenProportion,\n\t\t\tsmoothness: screenLabelsSmoothness,\n\t\t\tmaxLabels: maxLabels,\n\t\t\tonTrack: (indices, tracker) => {\n\t\t\t\tnodesOnScreen = indices;\n\t\t\t\tupdateLabelsInScreen();\n\t\t\t}\n\t\t});\n\t\t\n\t\t// helios.trackAttribute(\"category\", \"cluster name\", {\n\t\t// \tmaxLabels: maxLabels,\n\t\t// \tcalculateCentroid:true,\n\t\t// \tminProportion: 0.10,\n\t\t// \tsmoothness: 0.01,\n\t\t// \tmaxLabels: 5,\n\t\t// \tonTrack: (categoriesData, tracker) => {\n\t\t// \t\t// tracker.\n\t\t// \t\tcategoriesOnScreen = categoriesData;\n\t\t// \t\t// console.log(categoriesData);\n\t\t// \t\tupdateCategoricalGroups();\n\t\t// \t}\n\t\t// });\n\n\t\t// helios.scheduler.schedule({\n\t\t// \tname: \"9.0.labelsUpdate\",\n\t\t// \tcallback: (elapsedTime, task) => {\n\n\t\t// \t\tnodesInScreen = helios.nodesInScreen(minScreenProportion, maxLabels, screenLabelsSmoothness);\n\t\t// \t\tupdateLabelsInScreen();\n\t\t// \t},\n\t\t// \tdelay: 0,\n\t\t// \trepeatInterval: 20,\n\t\t// \trepeat: true,\n\t\t// \tsynchronized: true,\n\t\t// \timmediateUpdates: false,\n\t\t// \tredraw: false,\n\t\t// \tupdateNodesGeometry: false,\n\t\t// \tupdateEdgesGeometry: false,\n\t\t// });\n\t\t// helios.onDraw(() => {\n\t\t// \tnodesInScreen = helios.nodesInScreen(minScreenProportion, maxLabels, screenLabelsSmoothness);\n\t\t// \tupdateLabelsInScreen()\n\t\t// });\n\n\t\td3Select(\"#loadingPanel\").style(\"display\", \"none\");\n\t\tif (settings.searchEnabled) {\n\t\t\td3Select(helios.overlay).select(\"div.filterPanel\").remove();\n\n\t\t\t//   <div id=\"filterPanel\" style=\"display:none\" class=\"tooltip\">\n\t\t\t//     <form autocomplete='off' action=''>\n\t\t\t// \t<input autocomplete='false' name='hidden' type='text' style='display:none;'>\n\t\t\t// \t<input class='searchSelector' placeholder='Search'>\n\t\t\t// \t<span class=\"tooltiptext tooltipbottom\">Search in labels</span>\n\t\t\t//   </form>\n\t\t\t// </div>\n\n\t\t\tlet searchPanelFormSelector = d3Select(helios.overlay).append(\"div\")\n\t\t\t.classed(\"filterPanel\",true)\n\t\t\t.classed(\"tooltip\",true)\n\t\t\t.append(\"form\")\n\t\t\t.attr(\"autocomplete\",\"off\")\n\t\t\t.attr(\"action\",\"\")\n\n\t\t\t\n\t\t\tsearchPanelFormSelector.append(\"input\")\n\t\t\t.attr(\"autocomplete\",\"false\")\n\t\t\t.attr(\"name\",\"hidden\")\n\t\t\t.attr(\"type\",\"text\")\n\t\t\t.style(\"display\",\"none\")\n\n\t\t\tsearchPanelFormSelector.append(\"input\")\n\t\t\t.classed(\"searchSelector\",true)\n\t\t\t.attr(\"placeholder\",\"Search\")\n\n\t\t\tsearchPanelFormSelector.append(\"span\")\n\t\t\t.classed(\"tooltiptext\",true)\n\t\t\t.classed(\"tooltipbottom\",true)\n\t\t\t.text(\"Search in labels\")\n\t\t}\n\n\t\tupdateDensityAttributes(false);\n\t\tupdateColorSelection();\n\t});\n\n\n\n\tlet updateFilteredNodes = throttleLast(() => {\n\t\tlet searchTerm = d3Select(helios.overlay).select(\"div.filterPanel\").select(\".searchSelector\").property(\"value\");\n\t\tlet allNodes = helios.network.indexedNodes;\n\t\t// console.log(\"searching for \" + searchTerm)\n\t\t// if query\n\t\tif (!searchTerm.startsWith(\"*\")) {\n\t\t\tif (searchTerm.length > 0) {\n\t\t\t\tsearchTerm = searchTerm.toLowerCase();\n\t\t\t\t// nodesFiltered(allNodes.filter(d => d.label.toLowerCase().includes(searchTerm)), false, false);\n\t\t\t\tbehaviorFilter.setFilter(\"searchFilter\", node => !node.Label.toLowerCase().includes(searchTerm));\n\t\t\t} else {\n\t\t\t\t// nodesFiltered(allNodes, false, false);\n\t\t\t\tbehaviorFilter.removeFilter(\"searchFilter\");\n\t\t\t}\n\t\t} else {\n\t\t\tlet query = \"node[*\" + searchTerm.substring(1) + \"]\";\n\t\t\tlet matched = jsonQuery(query, {\n\t\t\t\tdata: { node: allNodes },\n\t\t\t\tallowRegexp: true\n\t\t\t});\n\t\t\t// console.log(matched);\n\t\t\t// nodesFiltered(matched.value, false, false);\n\t\t\tlet matchedNodesSet = new Set(matched.value);\n\t\t\tbehaviorFilter.setFilter(\"searchFilter\", node => !matchedNodesSet.has(node));\n\t\t}\n\t\tbehaviorFilter.applyFilters();\n\t\tlet updatedNodes = behaviorFilter.updatedNodes();\n\t\tupdatedNodes.forEach(node => {\n\t\t\tupdateNodeSelectionStyle(node);\n\t\t});\n\t\tupdateDensityAttributes(false);\n\t\thelios.update();\n\t\thelios.render();\n\t}, 250);\n\n\td3Select(helios.overlay).select(\"div.filterPanel\").select(\".searchSelector\").on(\"input\", (event, d) => {\n\t\tupdateFilteredNodes()\n\t})\n\n\n\t// Temporarily for debugging\n\twindow.helios = helios;\n\treturn helios;\n}\n\n\n/*\n\t* Initializing the network\n*/\nlet currentHelios = null;\nlet networkName = startSettings.networkName;\n// If extension is provided for networkName, it is removed and format is inferred if not defined\nif (!startSettings.format) {\n\tif (networkName.endsWith(\".xnet\")) {\n\t\tstartSettings.format = \"xnet\";\n\t\tnetworkName = networkName.substring(0, networkName.length - 5);\n\t} else if (networkName.endsWith(\".gexf\")) {\n\t\tstartSettings.format = \"gexf\";\n\t\tnetworkName = networkName.substring(0, networkName.length - 5);\n\t} else if (networkName.endsWith(\".gml\")) {\n\t\tstartSettings.format = \"gml\";\n\t\tnetworkName = networkName.substring(0, networkName.length - 4);\n\t} else if (networkName.endsWith(\".json\")) {\n\t\tstartSettings.format = \"json\";\n\t\tnetworkName = networkName.substring(0, networkName.length - 5);\n\t} else {\n\t\tstartSettings.format = \"xnet\";\n\t}\n}\n\n// Loading the network\nlet networkData;\nif (startSettings.format === \"xnet\") {\n\tlet xnetData = await xnet.loadXNETFile(\"networks/\" + networkName + \".xnet\");\n\tnetworkData = xnet.convertXNET2JSON(xnetData);\n} else if (startSettings.format === \"gexf\") {\n\tlet gexfData = await gexf.loadGEXFFile(\"networks/\" + networkName + \".gexf\");\n\tnetworkData = gexf.convertGEXF2JSON(gexfData);\n} else if (startSettings.format === \"gml\") {\n\tlet gmlData = await gml.loadGMLFile(\"networks/\" + networkName + \".gml\");\n\t// console.log(gmlData);\n\t// console.error(\"GML not supported yet\");\n\tnetworkData = gmlData;\n} else if (startSettings.format === \"json\") {\n\tnetworkData = await fetch(\"networks/\" + networkName + \".json\").then(response => response.json());\n} else {\n\tconsole.error(\"Unknown network format: \" + startSettings.format);\n}\n\nasync function loadNetworkFromContents(fileContents,filenameWithoutExtension,fileExtension) {\n\tlet networkData;\n\tif (fileExtension === \"gml\") {\n\t\tnetworkData = gml.loadGML(fileContents);\n\t} else if (fileExtension === \"xnet\") {\n\t\tlet xnetData = xnet.loadXNET(fileContents);\n\t\tnetworkData = xnet.convertXNET2JSON(xnetData);\n\t} else if (fileExtension === \"gexf\") {\n\t\tlet gexfData = gexf.loadGEXF(fileContents);\n\t\tnetworkData = gexf.convertGEXF2JSON(gexfData);\n\t} else if (fileExtension === \"json\") {\n\t\tnetworkData = JSON.parse(fileContents);\n\t}\n\tstartSettings.networkName = filenameWithoutExtension;\n\tcurrentHelios = await visualizeNetwork(networkData, startSettings);\n\n}\n\nasync function loadNetworkFromUploadedFile(fileObject){\n\tlet fileName = fileObject.name;\n\tlet fileExtension = fileName.split(\".\").pop().toLowerCase();\n\tif (fileExtension === \"gml\" || fileExtension === \"xnet\" || fileExtension === \"gexf\" || fileExtension === \"json\") {\n\n\t\tlet filenameWithoutExtension = fileName.substring(0, fileName.length - fileExtension.length - 1);\n\t\t// load the file\n\t\td3Select(\"#loadingPanel\").style(\"display\", null);\n\t\tcurrentHelios?.cleanup()\n\t\tlet fileContents = await fileObject.text();\n\t\tloadNetworkFromContents(fileContents,filenameWithoutExtension,fileExtension).catch(error => {\n\t\t\tconsole.error(error);\n\t\t\talert(\"Error loading network: \" + error);\n\t\t\td3Select(\"#loadingPanel\").style(\"display\", \"none\");\n\n\t\t})\n\t} else {\n\t\t//  Alert the user that the file format is not supported\n\t\talert(\"File format not supported. Supported formats: gml, xnet, gexf, json\");\n\t\td3Select(\"#loadingPanel\").style(\"display\", \"none\");\n\t}\n}\n\n// make the DOM element ID:\"netviz\" respond to drag of files show panel centered with msg indicating that\n// the file can be dragged and dropped there and gml, xnet, gexf, json are supported\n// A msg is shown when dragging a file over the panel incading that the file can be dropped there\n// You need to create all the elements and add them to netviz, and remove then after dropping or canceling\n// the drag.\n\nlet netviz = document.getElementById(\"netviz\");\nnetviz.addEventListener(\"dragenter\", dragEnter, false);\nnetviz.addEventListener(\"dragleave\", dragLeave, false);\nnetviz.addEventListener(\"dragover\", dragOver, false);\nnetviz.addEventListener(\"drop\", drop, false);\n\nlet dropMessageElement = document.createElement(\"div\");\ndropMessageElement.classList.add(\"dragdropmessage\");\ndropMessageElement.innerHTML = \"<h1>Drop a network file here</h1><br/>Supported formats: gml, xnet, gexf, json\";\n\nfunction dragEnter(event) {\n\tnetviz.appendChild(dropMessageElement);\n\tconsole.log(\"Enter\");\n\tevent.stopPropagation();\n\tevent.preventDefault();\n}\n\nfunction dragLeave(event) {\n\t// remove message from netviz\n\tnetviz.removeChild(dropMessageElement);\n\tconsole.log(\"Leave\");\n\tevent.stopPropagation();\n\tevent.preventDefault();\n}\n\nfunction dragOver(event) {\n\tevent.stopPropagation();\n\tevent.preventDefault();\n}\n\n\nasync function drop(event) {\n\tevent.stopPropagation();\n\tevent.preventDefault();\n\tconsole.log(\"Drop\");\n\n\t// remove message from netviz\n\n\t// get the file\n\t\n\tlet fileObject = event.dataTransfer.files[0];\n\t\n\tloadNetworkFromUploadedFile(fileObject);\n\tnetviz.removeChild(dropMessageElement);\n}\n\nfunction saveGML(network){\n\tlet nodes = [];\n\tlet edges = [];\n\n\tlet nodeIndex = 0;\n\tfor (let node of network.indexedNodes){\n\t\t// filter any attribute starting with _ or named neighbors and edges\n\t\tlet nodeData = {};\n\t\tlet allPositions = helios.network.positions;\n\t\tfor (let [key,value] of Object.entries(node)){\n\t\t\tif (!key.startsWith(\"_\") && !ignoredProperties.has(key)){\n\t\t\t\tnodeData[key] = value;\n\t\t\t}\n\t\t\tlet posx = allPositions[nodeIndex*3];\n\t\t\tlet posy = allPositions[nodeIndex*3+1];\n\t\t\tlet posz = allPositions[nodeIndex*3+2];\n\t\t\tnodeData.posx = posx;\n\t\t\tnodeData.posy = posy;\n\t\t\tnodeData.posz = posz;\n\t\t}\n\n\t\tnodeData.id = nodeIndex;\n\t\tif(nodeData.label === undefined){\n\t\t\tnodeData.label = nodeIndex+\"\";\n\t\t}\n\t\tnodes.push(nodeData);\n\t\tnodeIndex+=1;\n\t}\n\t// get edges from helios.network.indexedEdges which is a Int32Array\n\t// of source,target,source,target,source,target, etc.\n\n\tfor (let i = 0; i < network.indexedEdges.length; i+=2){\n\t\tlet source = network.indexedEdges[i];\n\t\tlet target = network.indexedEdges[i+1];\n\t\tedges.push({source:source,target:target});\n\t}\n\n\tlet gmlData = gml.GMLStringify({nodes:nodes,edges:edges},{\n\t\tnodeAttributes: Object.keys(nodes[0]),\n\t});\n\n\treturn gmlData;\n\n\n}\n\ncurrentHelios = await visualizeNetwork(networkData, startSettings);\n\n\n\n\n"],"names":["linear","t","cubicInOut","xhtml","namespaces","namespace","name","prefix","i","creatorInherit","document","uri","creatorFixed","fullname","creator","none","selector","selection_select","select","groups","m","subgroups","j","group","n","subgroup","node","subnode","Selection","array","x","empty","selectorAll","arrayAll","selection_selectAll","parents","matcher","childMatcher","find","childFind","match","childFirst","selection_selectChild","filter","children","childrenFilter","selection_selectChildren","selection_filter","sparse","update","selection_enter","EnterNode","parent","datum","child","next","constant$2","bindIndex","enter","exit","data","groupLength","dataLength","bindKey","key","nodeByKeyValue","keyValues","keyValue","selection_data","value","bind","constant","arraylike","enterGroup","updateGroup","exitGroup","i0","i1","previous","selection_exit","selection_join","onenter","onupdate","onexit","selection_merge","context","selection","groups0","groups1","m0","m1","merges","group0","group1","merge","selection_order","selection_sort","compare","ascending","compareNode","a","b","sortgroups","sortgroup","selection_call","callback","selection_nodes","selection_node","selection_size","size","selection_empty","selection_each","attrRemove","attrRemoveNS","attrConstant","attrConstantNS","attrFunction","v","attrFunctionNS","selection_attr","defaultView","styleRemove","styleConstant","priority","styleFunction","selection_style","styleValue","propertyRemove","propertyConstant","propertyFunction","selection_property","classArray","string","classList","ClassList","classedAdd","names","list","classedRemove","classedTrue","classedFalse","classedFunction","selection_classed","textRemove","textConstant","textFunction","selection_text","htmlRemove","htmlConstant","htmlFunction","selection_html","raise","selection_raise","lower","selection_lower","selection_append","create","constantNull","selection_insert","before","remove","selection_remove","selection_cloneShallow","clone","selection_cloneDeep","selection_clone","deep","selection_datum","contextListener","listener","event","parseTypenames","typenames","onRemove","typename","on","o","onAdd","options","selection_on","dispatchEvent","type","params","window","dispatchConstant","dispatchFunction","selection_dispatch","selection_iterator","root","selection_selection","d3Select","create$5","sourceEvent","pointer","svg","point","rect","noop","dispatch","_","Dispatch","types","T","get","set","copy","that","args","c","nonpassivecapture","noevent$1","dragDisable","view","noevent","yesdrag","noclick","define$1","constructor","factory","prototype","extend","definition","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","define","color","channels","color_formatHex","color_formatHex8","color_formatHsl","color_formatRgb","hslConvert","format","l","rgbn","Rgb","rgba","hsla","r","g","rgbConvert","rgb","opacity","k","clampi","clampa","rgb_formatHex","rgb_formatHex8","rgb_formatRgb","hex","h","s","Hsl","min","max","hsl","m2","hsl2rgb","clamph","clampt","radians","degrees","A","B","C","D","E","ED","EB","BC_DA","cubehelixConvert","Cubehelix","bl","cubehelix","cosh","sinh","basis","t1","v0","v1","v2","v3","t2","t3","basis$1","values","constant$1","d","exponential","y","hue","gamma","nogamma","interpolateRgb","rgbGamma","start","end","colorRgb","rgbSpline","spline","colors","rgbBasis","numberArray","isNumberArray","genericArray","nb","na","date","interpolateNumber","object$1","reA","reB","zero","one","interpolateString","bi","am","bm","bs","q","number","interpolate$1","object","interpolateRound","identity","decompose","e","f","scaleX","scaleY","skewX","svgNode","parseCss","parseSvg","interpolateTransform","parse","pxComma","pxParen","degParen","pop","translate","xa","ya","xb","yb","rotate","scale","interpolateTransformCss","interpolateTransformSvg","epsilon2","tanh","interpolateZoom","zoomRho","rho","rho2","rho4","zoom","p0","p1","ux0","uy0","w0","ux1","uy1","w1","dx","dy","d2","S","d1","b0","b1","r0","r1","coshr0","u","_1","_2","_4","cubehelixGamma","colorCubehelix","cubehelixLong","piecewise","interpolate","I","quantize","interpolator","samples","frame","timeout","interval","pokeDelay","taskHead","taskTail","clockLast","clockNow","clockSkew","clock","setFrame","now","clearNow","Timer","timer","delay","time","sleep","timerFlush","wake","nap","poke","t0","elapsed","emptyOn","emptyTween","CREATED","SCHEDULED","STARTING","STARTED","RUNNING","ENDING","ENDED","schedule","id","index","timing","schedules","init","self","tween","stop","tick","interrupt","active","selection_interrupt","tweenRemove","tween0","tween1","tweenFunction","transition_tween","tweenValue","transition","value1","string00","string1","interpolate0","string0","string10","transition_attr","attrInterpolate","attrInterpolateNS","attrTweenNS","attrTween","transition_attrTween","delayFunction","delayConstant","transition_delay","durationFunction","durationConstant","transition_duration","easeConstant","transition_ease","easeVarying","transition_easeVarying","transition_filter","Transition","transition_merge","onFunction","on0","on1","sit","transition_on","removeFunction","transition_remove","transition_select","transition_selectAll","inherit","transition_selection","styleNull","style","styleMaybeRemove","listener0","transition_style","styleInterpolate","styleTween","transition_styleTween","transition_text","textInterpolate","textTween","transition_textTween","transition_transition","id0","id1","newId","transition_end","resolve","reject","cancel","selection_prototype","defaultTiming","easeCubicInOut","selection_transition","ZoomEvent","target","transform","Transform","location","nopropagation","defaultFilter","defaultExtent","defaultTransform","defaultWheelDelta","defaultTouchable","defaultConstrain","extent","translateExtent","dx0","dx1","dy0","dy1","d3Zoom","constrain","wheelDelta","touchable","scaleExtent","duration","listeners","touchstarting","touchfirst","touchending","touchDelay","wheelDelay","clickDistance2","tapDistance","wheeled","mousedowned","dblclicked","touchstarted","touchmoved","touchended","collection","gesture","p","k0","k1","centroid","w","clean","Gesture","wheelidled","currentTarget","mousemoved","mouseupped","x0","y0","dragEnable","touches","started","l0","l1","dp","dl","EPSILON","ARRAY_TYPE","out","glMatrix.ARRAY_TYPE","normalFromMat4","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","multiply","b2","b3","z","rad","axis","len","b12","b20","b21","b22","glMatrix.EPSILON","fromRotation","perspectiveNO","fovy","aspect","near","far","nf","perspective","orthoNO","left","right","bottom","top","lr","bt","ortho","vec","stride","offset","count","fn","arg","transformMat4","createWebGLContext","canvas","opt_attribs","ii","getShaderFromString","gl","str","shader","ShaderProgram","vertexShader","fragmentShader","uniforms","attributes","glContext","shaderProgram","attributeName","makePlane","ctx","generateNormal","generateTexCoord","geometryData","normalData","texCoordData","retval","degToRad","findIndex","nodes","delta","delta1","linearMixer","lowerNodeValue","upperNodeValue","frac","isNode","isNodeArray","colorCombination","X","Y","ensureMixer","mixer","createColorMap","noColorMap","createMapFromNodes","createMapFromArray","linearCombination","sortedNodes","scaledValue","coeff0","coeff1","arr","indexFloat","_value","linearScale","domain","range","d0","colors$2","Node$1","originalObject","ID","network","nodeProperty","newColor","nodeIndex","newOpacity","newSize","newWidth","newPosition","Network","edges","directed","weighted","nodeID","edgeIndex","edge","fromIndex","toIndex","edgeProperty","colorScale","colorMap","inferno","newNode","Node","fromNode","toNode","edgeWeights","edgeSizes","maxWeight","edgesLength","nodePositions","edgePositions","indexedEdges","edgeFromPositionIndex","edgeToPositionIndex","updateOpacity","edgeColors","nodeColors","edgeFromColorIndex","edgeToColorIndex","nodeSizes","visualAttribute","transformFunction","edgeAttributes","attributeValue","visualAttributeValue","HeliosScheduler","helios","FPS","throttle","maxQueueLength","repeat","maxRepeatCount","maxRepeatTime","repeatInterval","synchronized","immediateUpdates","updateNodesGeometry","updateEdgesGeometry","afterRedraw","redraw","replace","newTask","currentTimestamp","elapsedTime","newCurrentTimestamp","task","afterRedrawTasks","allTasksCurrentTimestamp","taskName","willExecute","needsRender","needsUpdateNodesGeometry","needsUpdateEdgesGeometry","updateTimeoutAfterRender","taskQueue","taskIndex","module","require","_dereq_","exports","Multimath","mm_unsharp_mask","mm_resize","MathLib","requested_features","__requested_features","features","cache","result","clampTo8","clampNegative","convolveHor","src","dest","srcW","srcH","destW","filters","filterPtr","filterShift","filterSize","srcPtr","srcY","destX","filterVal","srcOffset","destOffset","convolveVert","convolveHorWithPre","alpha","convolveVertWithPre","createFilters","_require","hasAlpha","width","height","ptr","resetAlpha","dst","destH","offsetX","offsetY","filtersX","filtersY","tmp","FILTER_INFO","FIXED_FRAC_BITS","toFixedPoint","num","srcSize","destSize","filterFunction","scaleInverted","scaleClamped","srcWindow","destPixel","srcPixel","srcFirst","srcLast","filterElementSize","floatFilter","fxpFilter","total","pxl","idx","floatVal","filterTotal","leftNotEmpty","rightNotEmpty","maxFilterElementSize","packedFilter","packedFilterPtr","slowCopy","xpi","asUint8Array","IS_LE","copyInt16asLE","target_offset","src_offset","src_size","tmp_offset","tmp_size","filtersX_offset","filtersY_offset","alloc_bytes","instance","mem","mem32","src32","dest32","glur_mono16","hsv_v16","img","amount","radius","threshold","vmul","diff","iTimes4","brightness","blured","amountFp","thresholdFp","pixels","img_bytes_cnt","hsv_bytes_cnt","blur_bytes_cnt","blur_line_byte_cnt","blur_coeffs_byte_cnt","img_offset","hsv_offset","blur_offset","blur_tmp_offset","blur_line_offset","blur_coeffs_offset","img32","GC_INTERVAL","Pool","idle","_this","resource","_this2","_this3","MIN_INNER_TILE_SIZE","fromWidth","fromHeight","toWidth","toHeight","srcTileSize","destTileBorder","minScale","stageCount","PIXEL_EPSILON","pixelFloor","nearest","pixelCeil","innerTileWidth","innerTileHeight","innerX","innerY","toTileWidth","toTileHeight","tiles","tile","objClass","obj","element","cname","concurrency","queue","roll","err","createCanvas","bitmap","status","workerPayload","code","ev","usable","image","mathLib","tileOpts","a0","a1","a2","a3","left_corner","right_corner","gaussCoef","sigma","g1","g2","convolveMono16","line","coeff","prev_src","curr_src","curr_out","prev_out","prev_prev_out","src_index","out_index","line_index","coeff_a0","coeff_a1","coeff_b1","coeff_b2","blurMono16","tmp_line","assign","base64decode","hasWebAssembly","DEFAULT_OPTIONS","MultiMath","opts","bytes","mem_size","memsize","env_extra","env_base","base","reminder","BASE64_MAP","input","bits","tailbits","wa","bin","getOwnPropertySymbols","hasOwnProperty","propIsEnumerable","toObject","val","shouldUseNative","test1","test2","order2","test3","letter","source","from","to","symbols","bundleFn","sources","stringify","wkey","cacheKeys","exp","wcache","skey","scache","workerSources","resolveSources","depPath","depKey","URL","blob","workerUrl","worker","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","minLen","_arrayLikeToArray","arr2","_i","_arr","_n","_d","_s","_e","webworkify","utils","createStages","createRegions","filter_info","singletones","NEED_SAFARI_FIX","DEFAULT_PICA_OPTS","tmpCanvas","DEFAULT_RESIZE_OPTS","CAN_NEW_IMAGE_DATA","CAN_CREATE_IMAGE_BITMAP","CAN_USE_CANVAS_GET_IMAGE_DATA","CAN_USE_OFFSCREEN_CANVAS","CAN_USE_CIB_REGION_FOR_IMAGE","workerFabric","url","Pica","limiter_key","wkr","wpool_key","initMath","mathlib","checkCibResize","checkOffscreenCanvas","checkCibRegion","transfer","stageEnv","extractTo","tmpCtx","toImageData","processTile","imageBitmap","regions","jobs","cleanup","stages","_this4","_stages$shift","_stages$shift2","isLastStage","res","_this5","toCtx","iData","_this6","DEST_TILE_BORDER","_this7","mimeType","quality","asString","asBuffer","createNanoEvents","callbacks","length","cb","TrackedSettings","initial","settingsDefinition","defaultSettings","setting","prop","oldValue","newValues","handler","workerFunction","moduleName","N","M","d3gravityForce","strength","softening","force","totalStrength","r2","distance","invDistMag","inputEdges","links","attributeNames","attribute","baseStrength","ratio","repulsiveExponent","attractiveExponent","attractiveStrength","repulsiveStrength","edgeFrom","edgeTo","edgeObject","avoidStrengthUpdate","settings","use2D","vertexIndex","link","weights","allowedEdgesIndices","msg","workerFunctionString","workerURL","SETTINGS_DEFINITION","d3ForceLayoutWorker","onUpdate","onStop","onStart","startMessage","forceRatio","exponent","enabled","forceNormalizationType","alphaValue","alphaDecayValue","alphaTargetValue","alphaMinValue","interactionAlphaValue","vertexHyperbolicShader","pickingShader","fastVertexShader","fastVertexHyperbolicShader","fastFragmentShader","LinkedList_1","_createClass","defineProperties","props","descriptor","Constructor","protoProps","staticProps","_classCallCheck","LinkedList","CircularLinkedList_1","_LinkedList2","require$$0","_possibleConstructorReturn","call","_inherits","subClass","superClass","CircularLinkedList","_LinkedList","nodeFromStart","nodeFromEnd","useNodes","linked","PRECISION_1","Matrix_1","_PRECISION","_Vector","require$$1","Matrix","elements","col","cols","matrix","nj","els","returnVector","sum","ni","rows","np","multiplier","tr","rank","divisor","inverse_elements","new_element","matrix_rows","theta","mod","Vector_1","_Matrix","Vector","vector","V","dot","mod1","mod2","angle","product","part","plane","R","P","Q","Plane_1","require$$2","_Line","require$$3","Plane","anchor","direction","O","solver","inverse","intersection","C1","C2","C3","A1","A2","A3","N1","N2","N3","newA","AN1","AN2","AN3","newN","v11","v12","v13","normal","v21","v22","v23","points","prevN","totalN","Line_1","_Plane","Line","PA1","PA2","PA3","modPA","cosTheta","sin2","dist","X1","X2","X3","Y1","Y2","Y3","PsubQ1","PsubQ2","PsubQ3","XdotQsubP","YdotPsubQ","XdotX","YdotY","XdotY","D1","D2","D3","E1","E2","E3","AD1","AD2","AD3","newD","LineSegment_1","LineSegment","segment","vect","startPoint","endPoint","LinkedListNode_1","LinkedListNode","Polygon_1","require$$4","require$$5","Polygon","vertex","triangles","firstVertex","trigs","area","prev","prevWasConvex","nextWasConvex","W","dt","loops","success","poly","convexNode","mainNode","trig","pointSet","newVertex","Vertex_1","_Vector2","Vertex","_ret","polygon","Utils","mht","makeLookAt","makeOrtho","makePerspective","makeFrustum","ex","ey","ez","cx","cy","cz","ux","uy","uz","eye","center","up","znear","zfar","tx","ty","tz","ymax","ymin","xmin","xmax","_CircularLinkedList","_LineSegment","_LinkedListNode","require$$6","_Polygon","require$$7","require$$8","_Vertex","require$$9","_Utils","require$$10","require$$11","specifier","category10","Accent","Dark2","observable10","Paired","Pastel1","Pastel2","Set1","Set2","Set3","Tableau10","ramp$1","scheme","interpolateRgbBasis","ramp","cividis","interpolateCubehelixLong","warm","cool","rainbow","ts","pi_1_3","pi_2_3","sinebow","turbo","viridis","magma","plasma","descending","bisector","compare1","compare2","lo","hi","mid","numbers","valueof","ascendingBisect","bisectRight","Adder","InternMap","entries","keyof","intern_get","intern_set","intern_delete","_intern","_key","compareDefined","ascendingDefined","e10","e5","e2","tickSpec","step","power","error","factor","i2","inc","ticks","reverse","tickIncrement","tickStep","quickselect","sd","newLeft","newRight","swap","quantile","value0","flatten","arrays","initRange","initInterpolator","implicit","ordinal","unknown","band","ordinalRange","bandwidth","round","paddingInner","paddingOuter","align","rescale","sequence","constants","unit","normalize","clamper","bimap","polymap","bisect","transformer","interpolateValue","untransform","clamp","output","continuous","formatDecimal","formatDecimalParts","coefficient","formatGroup","grouping","thousands","formatNumerals","numerals","re","formatSpecifier","FormatSpecifier","formatTrim","prefixExponent","formatPrefixAuto","formatRounded","formatTypes","identity$3","map","prefixes","formatLocale","locale","currencyPrefix","currencySuffix","decimal","percent","minus","nan","newFormat","fill","sign","symbol","comma","precision","trim","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","padding","formatPrefix","defaultLocale","precisionFixed","precisionPrefix","precisionRound","tickFormat","linearish","prestep","maxIter","x1","k10","sequential","x2","k21","diverging","textureFragmentShader","topographicFragmentShader","textureVertexShader","DensityGL","qualityScale","topographic","program","vertices","glUtils.makePlane","projectionMatrix","viewMatrix","ext","currentFBO","currentViewport","fboWidth","fboHeight","FloatingPointTextureExtensionSupported","FloatingPointTextureExtensionSupportedLinear","FBO","interpolateFunction","colorCount","colormapTexture","d3Chromatic.interpolateInferno","colormapValues","rgbColor","d3rgb","newData","newWeights","densityShaders.fragmentShader","densityShaders.vertexShader","frags","densityShaders.topographicFragmentShader","densityShaders.textureFragmentShader","verts","densityShaders.textureVertexShader","what","print","printNode","row","isTail","indent","isBalanced","lh","rh","loadRecursive","keys","middle","markBalance","sort","pivot","DEFAULT_COMPARE","rotateLeft","rightNode","rotateRight","leftNode","AVLTree","comparator","noDuplicates","cmp","successor","predecessor","current","done","low","high","returnValue","subtree","newRoot","pp","presort","SortedValueMap","isSafari","_throttle","shouldWait","Helios","elementID","density","densityScale","orthographic","hyperbolic","fastEdges","tracking","fieldOfView","forceSupersample","autoStartLayout","autoCleanup","backgroundLayer","webglOptions","behaviors","glm.mat4.create","glm.vec3.create","glm.mat4.identity","glUtils.createWebGLContext","entry","axes","rotationMatrix","glm.mat4.fromRotation","glm.mat4.multiply","angleSpeed","onlayoutUpdate","layoutElapsedTime","interpolatorTask","maxDisplacement","maxBoundaries","positionsLength","newPositions","previousPositions","minDisplacementRatio","displacement","onLayoutStop","onLayoutStart","maxDegree","degree","behaviorName","behaviorObj","pickID","eventType","pickObject","events","imageData","filename","supersampleFactor","pica","canvasFullSize","ctxFullSize","downloadLink","svgText","svgLayerContent","blobSVG","framebuffer","fbWidth","fbHeight","backgroundColor","shallCancel","glUtils.ShaderProgram","glUtils.getShaderFromString","edgesShaders.vertexHyperbolicShader","edgesShaders.vertexShader","edgesShaders.fragmentShader","edgesShaders.fastVertexHyperbolicShader","edgesShaders.fastVertexShader","edgesShaders.fastFragmentShader","edgesShaders.pickingShader","nodesShaders.vertexHyperbolicShader","nodesShaders.vertexShader","nodesShaders.fragmentShader","nodesShaders.fastFragmentShader","nodesShaders.pickingShader","level","internalFormat","border","attachmentPoint","positions","sizes","outlineWidths","outlineColors","indicesArray","newGeometry","uints_for_indices","edgeVertexTypeArray","edgeID","newHeight","aspectRatio","trackingWidth","trackingHeight","totalTrackingPixels","panelHeight","newRotationMatrix","displacementFactor","glm.mat4.rotate","glUtils.degToRad","zoomFactor","d3ZoomIdentity","d3Ease.easeLinear","semanticZoomExponent","dpr","newFrameworkWidth","newFrameworkHeight","immediate","destination","framebufferType","viewport","finalCameraDistance","orthoHeight","orthoWidth","glm.mat4.ortho","glm.mat4.perspective","glm.mat4.translate","adjustedScaleFactor","currentShaderProgram","normalMatrix","glm.mat3.create","glm.mat3.normalFromMat4","hasEdgeCallbacks","pos","lengthSize","ignoreInstantaneousUpdate","cameraInterpolatorTask","colorInput","allNodes","aColor","sizeInput","aSize","widthInput","aWidth","allEdges","sourceNode","targetNode","nodeIndices","projectedPositions","w2d","h2d","nodePosition","projectedPosition","glm.vec4.create","glm.vec4.transformMat4","perspectiveFactor","pixelX","pixelY","centroids","counts","nodeAttribute","xy","nodesOnScreen","avoidPixelBufferUpdate","attributeTrackers","totalPixels","XYPositions","trackedAttributeEntryKey","trackedAttributeEntry","pixelCounter","currentKeys","smoothness","minProportion","calculateCentroid","centroidPositions","maxLabels","newValue","centroidPosition","indexedNodes","attributeEntry","newCentroidPosition","trackedKeys","toRemove","trackerName","attributeTracker","IDProportion","proportion","trackerTaskName","tracker","onTrack","anOpacity","edgesColorsFromNodes","edgesWidthFromNodes","enableAdditiveBlending","enableShadedNodes","pickables","labelsMaxPixels","keepGLContext","numTextureUnits","textSplit2","text","textSplit3","readNumberIgnoringNone","propertyHeaderRegular","propertyFunctions","readXNETVerticesHeader","headerEntries","nodeCount","readXNETLabels","labels","currentLine","lineLength","label","readXNETEdgesHeader","headerEntry","readXNETEdges","weight","readXNETPropertyHeader","propertyType","propertyKey","propertyFormat","readXNETProperty","propertyHeader","properties","loadXNET","nodesCount","edgesHeader","edgesData","propertyData","loadXNETFile","networkFile","networkData","response","convertXNET2JSON","_helpers","xml","attributesTags","modelTags","nodeList","func","nodeMap","ns","tag","el","attr_value","Edge","Graph","xmlString","_xml","edgeType","_metaData","metas","_model","cls","attr","default_el","_data","model","node_or_edge","attvalues_els","ah","_nodes","_nodeViz","viz","color_el","pos_el","size_el","shape_el","_edges","default_type","_edgeViz","thick_el","nodeModel","edgeModel","graph","gexf","loadGEXF","loadGEXFFile","convertGEXF2JSON","newEdge","GMLParse","gml","json","parsed","all","isObject","forIn","matches","nodesDictionary","GMLStringify","indent1","indent2","getGraphAttributes","getNodeAttributes","getEdgeAttributes","lines","addAttribute","loadGML","loadGMLFile","BehaviorFilter","nodeState","clear","L","$","epsilon","pi","halfPi","quarterPi","tau","abs","atan","atan2","cos","sin","sqrt","acos","asin","streamGeometry","geometry","stream","streamGeometryType","streamObjectType","coordinates","streamLine","streamPolygon","geometries","closed","coordinate","geoStream","spherical","cartesian","lambda","phi","cosPhi","cartesianDot","cartesianCross","cartesianAddInPlace","cartesianScale","cartesianNormalizeInPlace","compose","rotationIdentity","rotateRadians","deltaLambda","deltaPhi","deltaGamma","rotationLambda","rotationPhiGamma","forwardRotationLambda","rotation","cosDeltaPhi","sinDeltaPhi","cosDeltaGamma","sinDeltaGamma","circleStream","cosRadius","sinRadius","circleRadius","clipBuffer","pointEqual","Intersection","other","clipRejoin","segments","compareIntersection","startInside","subject","clip","isSubject","longitude","polygonContains","sinPhi","winding","ring","point0","lambda0","phi0","sinPhi0","cosPhi0","lambda1","sinPhi1","cosPhi1","point1","phi1","absDelta","antimeridian","arc","phiArc","pointVisible","clipLine","sink","ringBuffer","ringSink","polygonStarted","lineStart","lineEnd","pointRing","ringStart","ringEnd","pointLine","ringSegments","validSegment","clipAntimeridian","clipAntimeridianLine","clipAntimeridianInterpolate","sign0","sign1","clipAntimeridianIntersect","sinLambda0Lambda1","clipCircle","cr","smallRadius","notHemisphere","visible","c0","v00","point2","intersect","two","pa","pb","n1","n2","n2n2","n1n2","determinant","c1","c2","n1xn2","uu","polar","meridian","q1","y1","ax","ay","bx","by","clipMax","clipMin","clipRectangle","corner","comparePoint","ca","activeStream","bufferStream","x__","y__","v__","x_","y_","v_","first","clipStream","polygonStart","polygonEnd","polygonInside","cleanInside","linePoint","identity$2","areaSum","areaRingSum","x00","y00","areaStream","areaRingStart","areaRingEnd","areaPointFirst","areaPoint","boundsStream","boundsPoint","bounds","X0","Y0","Z0","Z1","Z2","centroidStream","centroidPoint","centroidLineStart","centroidLineEnd","centroidRingStart","centroidRingEnd","centroidPointFirstLine","centroidPointLine","centroidPointFirstRing","centroidPointRing","PathContext","lengthSum","lengthRing","lengthStream","lengthPointFirst","lengthPoint","cacheDigits","cacheAppend","cacheRadius","cacheCircle","PathString","digits","append","appendRound","strings","d3GeoPath","projection","pointRadius","projectionStream","contextStream","path","pathArea","pathMeasure","pathBounds","pathCentroid","methods","TransformStream","fit","fitBounds","fitExtent","fitSize","fitWidth","fitHeight","maxDepth","cosMinDistance","resample","project","delta2","resampleNone","resampleLineTo","depth","phi2","lambda2","y2","dx2","dy2","dz","lambda00","c00","resampleStream","ringPoint","transformRadians","transformRotate","scaleTranslate","sx","sy","scaleTranslateRotate","cosAlpha","sinAlpha","ai","ci","fi","projectionMutator","projectAt","preclip","postclip","projectResample","projectTransform","projectRotateTransform","cacheStream","invert","reset","recenter","naturalEarth1Raw","phi4","d3GeoNaturalEarth1","identity$1","translateX","translateY","entering","orient","tickArguments","tickValues","tickSizeInner","tickSizeOuter","tickPadding","spacing","range0","range1","position","tickExit","tickEnter","axisRight","axisBottom","EOL","EOF","QUOTE","NEWLINE","RETURN","objectConverter","columns","customConverter","inferColumns","columnSet","column","pad","formatYear","year","formatDate","hours","minutes","seconds","milliseconds","dsvFormat","delimiter","reFormat","DELIMITER","convert","parseRows","eof","eol","token","preformatBody","formatValue","formatBody","formatRows","formatRow","schemeCategory18","schemeCells","schemeCellsNew","schemeRugzo4","newColors","processColors","colorsData","processedColors","newName","textData","d3.dsvFormat","d3.rgb","cmasherColorsJSONData","CETColorsData","reverseName","schemeOrangeGrayBlue3","autoComplete","hasClass","className","addEvent","removeEvent","live","elClass","found","item","search","term","elems","resize","scrTop","selTop","sel","over_sb","suggest","cached","state","State","handleQuery","firstNonNull","def","localName","parts","globalName","filterName","filterParts","references","ref","tokens","depthSplit_1","depthSplit","includeDelimiters","zones","open","close","query","shouldAssignParamIds","char","nextChar","bStart","bEnd","partOffset","mode","deepQuery","assignParamIds","push","handlers","buffer","trimmed","tokenizeSelect","tokenizeArgs","handleBuffer","argsQuery","handleSelectPart","selectQuery","multiple","booleanParts","getSelectPart","negate","reDef","isInnerQuery","innerQuery","paramToken","tokenize","tokenizedCache","jsonQueryModule","last","handleToken","parentObject","getLastParentObject","shouldOverride","isDeepAccessor","isDefined","helper","currentItem","Legend","title","titleAlignment","tickSize","orientation","marginTop","marginRight","marginBottom","marginLeft","themeColors","rampHorizontal","rampVertical","tickAdjustHorizontal","tickAdjustVertical","tickAdjust","d3.create","d3.quantize","d3.interpolate","d3.interpolateRound","d3.range","d3.quantile","d3.format","thresholds","thresholdFormat","d3.scaleLinear","d3.scaleBand","d3.axisBottom","d3.axisRight","isEmpty","isObject$1","isRecord","deepEqualsArray","deepMerge","isBinding","CREATE_MESSAGE_MAP","TpError","bundleId","config","_a","BindingTarget","valueObj","Emitter","eventName","opt_options","observers","observer","ComplexValue","initialValue","rawValue","constrainedValue","prevValue","PrimitiveValue","ReadonlyPrimitiveValue","createValue","constraint","equals","createReadonlyValue","ValueMap","valueMap","core","DefiniteRangeConstraint","RangeConstraint","StepConstraint","origin","NumberLiteralNode","BINARY_OPERATION_MAP","BinaryOperationNode","operator","op","UNARY_OPERATION_MAP","UnaryOperationNode","expr","combineReader","parsers","cursor","readWhitespace","readNonZeroDigit","ch","readDecimalDigits","readSignedInteger","ds","sds","readExponentPart","si","readDecimalIntegerLiteral","nzd","readDecimalLiteral1","dil","dds","readDecimalLiteral2","readDecimalLiteral3","readDecimalLiteral","parseBinaryDigits","readBinaryIntegerLiteral","bds","readOctalDigits","readOctalIntegerLiteral","ods","readHexDigits","readHexIntegerLiteral","hds","readNonDecimalIntegerLiteral","readNumericLiteral","parseLiteral","parseParenthesizedExpression","parseExpression","cl","parsePrimaryExpression","parseUnaryExpression","readBinaryOperator","ops","createBinaryOperationExpressionParser","exprParser","firstExpr","nextExpr","parseBinaryOperationExpression","parser","parseEcmaNumberExpression","parseNumber","numberFromUnknown","pv","createNumberFormatter","mapRange","start1","end1","start2","end2","getDecimalDigits","constrainRange","loopRange","getSuitableDecimalDigits","getSuitableKeyScale","getSuitablePointerScale","createStepConstraint","createRangeConstraint","createNumberTextPropsObject","_b","_c","createNumberTextInputParamsParser","createPointAxis","BladeApi","controller","disabled","hidden","TpEvent","TpChangeEvent","TpFoldEvent","expanded","TpTabSelectEvent","TpMouseEvent","nativeEvent","BindingApi","bh","parseObject","keyToParserMap","parseArray","parseItem","createMicroParserBuilder","optional","createMicroParserBuilders","itemParser","MicroParsers","parseRecord","importBladeState","superImport","exportBladeState","superExport","thisState","isValueBladeController","bc","isBindingValue","SVG_NS","forceReflow","disableTransitionTemporarily","supportsTouch","doc","getCanvasContext","canvasElement","win","ICON_ID_TO_INNER_HTML_MAP","createSvgIconElement","iconId","elem","insertElementAt","parentElement","removeElement","removeChildElements","removeChildNodes","findNextTarget","bindValue","applyValue","bindValueMap","PREFIX","ClassName","viewName","opt_elementName","opt_modifier","cn$r","createLabelNode","frag","lineNode","LabelView","labelElem","valueElem","LabelController","getAllBladePositions","cn$q","POS_TO_CLASS_NAME_MAP","BladeController","ButtonApi","applyClass","valueToClassName","bindValueToTextContent","cn$p","ButtonView","buttonElem","titleElem","ButtonController","ButtonBladeController","lc","Semver","prerelease","coreComps","VERSION$1","createPlugin","plugin","addButtonAsBlade","api","addFolderAsBlade","addTabAsBlade","isRefreshable","createBindingTarget","RackApi","pool","opt_params","opt_index","binding","ContainerBladeApi","ContainerBladeController","isContainerBladeController","NestedOrderedSet","extract","subList","findValueBladeController","bcs","findSubBladeControllerSet","Rack","finder","rack","emitter","visibleItems","firstVisibleItem","lastVisibleItem","ps","_ev","RackController","createBlade","Foldable","coreObj","exHeight","expandedClassName","onExpand","computeExpandedFolderHeight","folder","containerElement","applyHeight","foldable","bindFoldable","FolderApi","bladeContainerClassName","FolderView","indentElem","markElem","containerElem","FolderController","cn$o","valueToModifier","modifier","ViewProps","opt_initialValue","disposed","prevParent","cn$n","TabPageView","cn$m","TabItemView","selected","TabItemController","TabPageController","TabApi","pc","papi","TabPageApi","INDEX_NOT_SELECTED","Tab","firstSelIndex","cn$l","TabView","contentsElem","TabController","tab","ListInputBindingApi","CompositeConstraint","constraints","findConstraint","constraintClass","tmpResult","sc","ListConstraint","parseListOptions","normalizeListOptions","items","createListConstraint","cn$k","ListView","selectElem","optionElem","ListController","cn$j","PopupView","PopupController","cn$i","TextView","inputElem","formatter","TextController","parsedValue","boolToString","boolFromUnknown","BooleanFormatter","composeParsers","innerFormatter","formatPercentage","stringFromUnknown","formatString","connectValues","primary","secondary","forward","backward","changing","preventFeedback","getStepForKey","keyScale","getVerticalStepKeys","getHorizontalStepKeys","isVerticalArrowKey","isArrowKey","computeOffset$1","PointerHandler","touch","cn$h","NumberTextView","knobElem","guideElem","bodyElem","headElem","tooltipElem","aox","adx","NumberTextController","ph","cn$g","SliderView","trackElem","SliderController","cn$f","SliderTextView","sliderElem","textElem","SliderTextController","sliderProps","createSliderTextProps","CSS_VAR_MAP","getCssVar","createPointDimensionParser","parsePointDimensionParams","createDimensionConstraint","cs","rs","parsePickerLayout","writePrimitive","cn$e","CheckboxView","wrapperElem","CheckboxController","createConstraint$6","_args","cn$d","ColorView","swatchElem","pickerElem","rgbToHslInt","rp","gp","bp","cmax","cmin","hslToRgbInt","hp","sp","lp","rgbToHsvInt","hsvToRgbInt","vp","hslToHsvInt","hsvToHslInt","removeAlphaComponent","comps","appendAlphaComponent","MODE_CONVERTER_MAP","getColorMaxComponents","loopHueRange","constrainColorComponents","components","ms","convertColorType","fms","tms","convertColor","intComps","IntColor","opt_mode","rgbComps","cn$c","ColorPickerView","hsvElem","svElem","hElem","rgbElem","aElem","apElem","atElem","parseColorType","parseColorInputParams","getKeyScaleForColor","forAlpha","extractColorType","FloatColor","TYPE_TO_CONSTRUCTOR_MAP","createColor","isFloatColor","isIntColor","convertFloatToInt","cf","convertIntToFloat","mapColorType","equalsStringColorFormat","f1","f2","parseCssNumberOrPercentage","ANGLE_TO_DEG_MAP","parseCssNumberOrAngle","parseFunctionalRgbColorComponents","parseFunctionalRgbColor","parseFunctionalRgbaColorComponents","parseFunctionalRgbaColor","parseFunctionalHslColorComponents","parseFunctionalHslColor","parseHslaColorComponents","parseFunctionalHslaColor","parseHexRgbColorComponents","mRgb","mRrggbb","parseHexRgbColor","parseHexRgbaColorComponents","parseHexRgbaColor","parseObjectRgbColorComponents","createObjectRgbColorParser","parseObjectRgbaColorComponents","createObjectRgbaColorParser","PARSER_AND_RESULT","detectStringColor","detection","detectStringColorFormat","createColorStringParser","readIntColorString","zerofill","comp","colorToHexRgbString","hexes","colorToHexRgbaString","rgbaComps","colorToFunctionalRgbString","colorToFunctionalRgbaString","aFormatter","rgbFormatter","colorToFunctionalHslString","formatters","colorToFunctionalHslaString","colorToObjectRgbString","cc","createObjectRgbColorFormatter","colorToObjectRgbaString","createObjectRgbaColorFormatter","FORMAT_AND_STRINGIFIERS","findColorStringifier","fas","cn$b","APaletteView","barElem","colorElem","markerElem","previewElem","leftColor","rightColor","gradientComps","APaletteController","cn$a","createModeSelectElement","optElem","ColorTextsView","modeElem","modeMarkerElem","inputsElem","inputViews","compElem","createFormatter$2","createConstraint$5","createComponentController","createComponentControllers","pickedMode","createHexController","isColorMode","ColorTextsController","cn$9","HPaletteView","HPaletteController","cn$8","CANVAS_RESOL","SvPaletteView","canvasElem","hsvComps","imgData","iy","ix","SvPaletteController","saturation","dv","ColorPickerController","cn$7","ColorSwatchView","ColorSwatchController","ColorController","pickerC","nextTarget","colorToRgbNumber","colorToRgbaNumber","numberToRgbColor","numberToRgbaColor","colorFromRgbNumber","colorFromRgbaNumber","isRgbColorComponent","isRgbColorObject","isRgbaColorObject","isColorObject","equalsColor","comps1","comps2","createColorComponentsFromRgbObject","createColorStringWriter","createColorNumberWriter","supportsAlpha","colorToNumber","writeRgbaColorObject","writeRgbColorObject","createColorObjectWriter","inValue","shouldSupportAlpha$1","inputParams","createFormatter$1","isForColor","colorFromObject","shouldSupportAlpha","createColorObjectBindingReader","createColorObjectFormatter","stringifier","writer","PointNdConstraint","cn$6","PointNdTextView","axisElem","createAxisController","PointNdTextController","ac","SliderInputBindingApi","createConstraint$4","rc","textPropsObj","drc","Point2d","Point2dAssembly","cn$5","Point2dView","cn$4","Point2dPickerView","padElem","svgElem","xAxisElem","yAxisElem","lineElem","px","py","ipy","computeOffset","keyScales","invertsY","Point2dPickerController","Point2dController","padC","point2dFromUnknown","writePoint2d","createConstraint$3","getSuitableMaxDimensionValue","getSuitableMax","xr","yr","shouldInvertY","yParams","dParams","Point3d","Point3dAssembly","point3dFromUnknown","writePoint3d","createConstraint$2","Point4d","Point4dAssembly","point4dFromUnknown","writePoint4d","createConstraint$1","createConstraint","Constants","cn$3","MultiLogView","textareaElem","shouldScroll","MultiLogController","cn$2","SingleLogView","lastValue","SingleLogController","GraphLogMonitorBindingApi","cn$1","GraphLogView","maxIndex","GraphLogController","createFormatter","createTextMonitor","createGraphMonitor","shouldShowGraph","allColors","d3Chromatic","extraColors","zero$1","buf","MIN_MATCH$1","MAX_MATCH$1","LENGTH_CODES$1","LITERALS$1","L_CODES$1","D_CODES$1","DIST_CODE_LEN","static_ltree","static_dtree","_dist_code","_length_code","base_length","base_dist","_utf8len","transform$1","kx","ky","feature","topology","bbox","transformPoint","arcs","PipsMode","PipsType","isValidFormatter","isValidPartialFormatter","isSet","preventDefault","unique","closest","docElem","pageOffset","getPageOffset","isNumeric","addClassFor","addClass","removeClass","limit","asArray","countDecimals","numStr","pieces","supportPageOffset","isCSS1Compat","getActions","getSupportsPassive","supportsPassive","getSupportsTouchActionNone","subRangeRatio","fromPercentage","startRange","toPercentage","isPercentage","getJ","toStepping","xVal","xPct","va","vb","fromStepping","getStep","xSteps","snap","Spectrum","singleStep","ordered","distances","xPct_index","start_factor","rest_factor","rest_rel_distance","range_pct","rel_range_distance","abs_distance_counter","range_counter","isDown","stepDecimals","percentage","totalSteps","highestStep","defaultFormatter","cssClasses","INTERNAL_EVENT_NS","testStep","testKeyboardPageMultiplier","testKeyboardMultiplier","testKeyboardDefaultStep","testRange","testStart","testSnap","testAnimate","testAnimationDuration","testConnect","connect","testOrientation","testMargin","testLimit","testPadding","totalPadding","firstValue","testDirection","testBehaviour","tap","drag","fixed","hover","unconstrained","invertConnects","dragAll","smoothSteps","testTooltips","testHandleAttributes","testAriaFormat","testFormat","testKeyboardSupport","testDocumentElement","testCssPrefix","testCssClasses","testOptions","tests","defaults","msPrefix","noPrefix","styles","scope","originalOptions","actions","supportsTouchActionNone","scope_Target","scope_Base","scope_ConnectBase","scope_Handles","scope_Connects","scope_Pips","scope_Tooltips","scope_Spectrum","scope_Values","scope_Locations","scope_HandleNumbers","scope_ActiveHandlesCount","scope_Events","scope_ConnectsInverted","scope_Document","scope_DocumentElement","scope_Body","scope_DirOffset","addNodeTo","addTarget","div","addOrigin","handleNumber","handle","eventKeydown","attributes_1","addConnect","add","addElements","connectOptions","addSlider","textDirection","addTooltip","isSliderDisabled","isHandleDisabled","handleOrigin","disable","enable","removeTooltips","tooltip","tooltips","bindEvent","unencoded","formattedValue","aria","checkHandlePosition","getGroup","pips","spread","mapToRange","stepped","generateSpread","safeIncrement","increment","indexes","firstInRange","lastInRange","ignoreFirst","ignoreLast","prevPct","newPct","pctDifference","pctPos","steps","realSteps","stepSize","isSteps","addMarking","filterFunc","valueSizeClasses","markerSizeClasses","valueOrientationClasses","markerOrientationClasses","getClasses","orientationClasses","sizeClasses","addSpread","removePips","baseSize","alt","attachEvent","method","fixEvent","eventTarget","mouse","isTouchOnTarget","checkTouch","targetTouches","targetTouch","calcPointToPercentage","calcPoint","proposal","getClosestHandle","clickedPosition","smallestDifference","handlePosition","differenceWithThisHandle","clickAtEdge","isCloser","isCloserAfter","documentLeave","eventEnd","eventMove","movement","moveHandles","setZindex","setHandle","fireEvent","eventStart","moveEvent","endEvent","outEvent","eventTap","eventHover","targetEvent","scope_Self","horizontalKeys","verticalKeys","largeStepKeys","edgeKeys","isLargeDown","isLargeUp","isUp","isMin","isMax","getNextStepsForHandle","bindSliderEvents","behaviour","handleBefore","handleAfter","eventHolders","handlesToDrag","handleNumbersToDrag","eventHolder","namespacedEvent","isInternalNamespace","tEvent","tNamespace","reference","lookBackward","lookForward","getValue","inRuleOrder","upward","locations","handleNumbers","proposals","firstHandle","transformDirection","updateHandlePosition","translation","translateRule","handlesAreInOrder","updateConnect","dir","zIndex","exactInput","connectWidth","scaleRule","resolveToValue","valueSet","fireSetEvent","isInit","space_1","valueReset","valueSetHandle","valueGet","destroy","nearbySteps","decrement","getNextSteps","updateOptions","optionsToUpdate","updateAble","newOptions","updateConnectOption","setupSlider","initialize","ignoredProperties","originalWidth","originalHeight","globeProjection","countries","topojson.feature","mapCountries10m","throttleLast","wait","sortByCount","anArray","newArray","downloadText","wrapText","textLength","queryString","urlParams","startSettings","visualizeNetwork","projected","colorProperty","edgeColorProperty","edgeDefaultColor","edgeDefaultSelectedColor","defaultNodeScale","defaultNodeOpacity","defaultOutlineColor","defaultOutlineWidthFactor","updateNodeSize","selectedOnScreen","defaultZoomLevel","defaultZoomLevelBigNetworks","minCenteredNodeZoomLevel","currentGlobalNodeSizeScale","currentGlobalEdgeOpacityScale","currentBandwidth","currentDensityWeight","chosenDensityProperty","chosenVsDensityProperty","shallNormalizeVsDensity","densityDiverging","highlightNodeScale","highlightNodeOpacityScale","selectedNodeScale","selectedNodeOpacityScale","selectedOutlineColor","selectedNeighborNodeSizeScale","selectedNeighborNodeOpacityScale","nonSelectedNodeOpacityScale","nonSelectedNodeSizeScale","nonSelectedDarkerColorFactor","nonSelectedBrighterColorFactor","sequencialColormap","densityColormap","densityDivergingColormap","categoricalColormap","useCategoricalColormap","gpuTier","getGPUTier","isHighSpeed","networkName","bigNetwork","networkWeighted","nodeDegree","updateNodeSelectionStyle","nodeSize","nodeOutlineWidth","nodeOpacity","nodesHighlight","shallHighlight","shallUpdate","edgesHighlightUpdate","updateHighlightedList","behaviorFilter","nodesSelect","shallSelect","neighNode","updateNodeSelectionGlobalStyle","updateNodeSelectionOrHighlightedColors","centerOnNodes","updateLabelsInScreen","getLabelStyleColorAndOutline","colorRGB","colorHSL","d3hsl","outlineWidth","outlineColor","textColor","stylizeTooltip","isnew","tooltipElement","styleData","maxLabelLength","labelLines","words","word","textElement","showTooltipForNode","isNew","showTooltipForEdge","fromLabel","toLabel","hasSelection","logK","logN","logDensity","estimatedZoom","estimatedOpacity","logZoom","estimatedSize","buttonInformation","fileInput","fileObject","loadNetworkFromUploadedFile","postext","gmlString","saveGML","extension","updateColorSelection","panelComponent","edgeProperties","minRangeYear","d3Min","maxRangeYear","d3Max","intFormater","noUiSlider.create","minYear","maxYear","updateDensityAttributes","updateDensityColors","updateDensityColorsList","groupMap","firstDraw","cameraDisplacementFactor","svgWidth","svgHeight","xoffset","yoffset","legendView","densityLegendView","updateDensityLegendsPosition","densityLegendViewObserver","holdCategories","updateCategoryFilter","categories","setCategories","updateLegendCategorical","property2color","legendItems","legendEnter","updateLegendSequencial","d3Legend","updateDensityDiverging","useDiverging","newColormap","updateLegendDensity","densityColorScale","d3ScaleSequential","d3ScaleDiverging","densityLabelRanges","updateCategoricalColors","propertyArray","sortedItems","firstIndex","d3ScaleOrdinal","categoricalMap","darkerColor","brighterColor","updateSequencialColors","maxValue","minValue","cScale","updateSequencialEdgeColors","colormapName","updateColormapSelection","updateEdgeColormapSelection","categorical","shallRedraw","propertySignals","property","signal","totalWeight","totalPositive","totalNegative","densityWeight","totalPositiveMax","totalNegativeMax","buttonOrder","tooltipText","averageXPosition","this","highlightedList","selectedNodes","highlightedNodes","connectionWeights","nodeFromIndex","nodeToIndex","connectionWeight","neighborNode","highlightedMap","highlightedNodesWithWeights","label2weight","nodeGroup","minScreenProportion","visibleScreenProportion","screenLabelsSmoothness","labelsGroup","interpolateProportion","selectedOnScreenArray","allNodesOnScreen","nodeIDsProportion","labelGroup","nodeLabel","projectedNode","newScale","labelSelect","labelFillNode","labelOutlineNode","maxProportion","maxElement","indices","searchPanelFormSelector","updateFilteredNodes","searchTerm","matched","jsonQuery","matchedNodesSet","currentHelios","xnetData","xnet.loadXNETFile","xnet.convertXNET2JSON","gexfData","gexf.loadGEXFFile","gexf.convertGEXF2JSON","gml.loadGMLFile","loadNetworkFromContents","fileContents","filenameWithoutExtension","fileExtension","gml.loadGML","xnet.loadXNET","gexf.loadGEXF","fileName","netviz","dragEnter","dragLeave","dragOver","drop","dropMessageElement","nodeData","allPositions","posx","posy","posz","gml.GMLStringify"],"mappings":"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QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,OAAS,QAAU,OAAQ,EAC5B,CAAC,QAAU,OAAS,OAAQ,EAC5B,CAAC,QAAU,OAAS,OAAQ,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,OAAS,QAAU,OAAQ,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,MAAO,EAC5B,CAAC,OAAS,QAAU,OAAQ,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,OAAS,QAAU,OAAQ,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,OAAS,QAAU,OAAQ,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,OAAS,QAAU,OAAQ,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,MAAQ,QAAU,OAAQ,EAC3B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,OAAS,OAAQ,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,OAAS,QAAU,OAAQ,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,MAAO,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,MAAO,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,MAAO,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,OAAS,OAAQ,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,OAAS,OAAQ,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,MAAO,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,OAAS,MAAO,EAC3B,CAAC,OAAS,QAAU,OAAQ,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,MAAO,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,OAAS,QAAU,OAAQ,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,MAAO,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,OAAS,OAAQ,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,OAAS,QAAU,OAAQ,EAC5B,CAAC,QAAU,OAAS,OAAQ,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,OAAS,MAAO,EAC3B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,MAAO,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,MAAO,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,OAAS,OAAQ,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,OAAS,OAAQ,EAC5B,CAAC,QAAU,OAAS,OAAQ,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,OAAS,MAAO,EAC3B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,MAAO,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,OAAS,OAAQ,EAC5B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OAAQ,EAC7B,CAAC,QAAU,QAAU,OA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AAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAkHvBof,GAAiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAsGjCnf,GAAyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;A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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,117,118,121,122,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,228,229,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,271,272,273,274,276,278,279,280,281,282,283]}